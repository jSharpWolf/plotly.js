!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=t()}}(function(){var t={exports:{}};!function(){var e={version:"3.5.17"},r=[].slice,n=function(t){return r.call(t)},a=this.document;function i(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(a)try{n(a.documentElement.childNodes)[0].nodeType}catch(t){n=function(t){for(var e=t.length,r=new Array(e);e--;)r[e]=t[e];return r}}if(Date.now||(Date.now=function(){return+new Date}),a)try{a.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var l=this.Element.prototype,s=l.setAttribute,u=l.setAttributeNS,c=this.CSSStyleDeclaration.prototype,f=c.setProperty;l.setAttribute=function(t,e){s.call(this,t,e+"")},l.setAttributeNS=function(t,e,r){u.call(this,t,e,r+"")},c.setProperty=function(t,e,r){f.call(this,t,e+"",r)}}function h(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function d(t){return null===t?NaN:+t}function p(t){return!isNaN(t)}function g(t){return{left:function(e,r,n,a){for(arguments.length<3&&(n=0),arguments.length<4&&(a=e.length);n<a;){var i=n+a>>>1;t(e[i],r)<0?n=i+1:a=i}return n},right:function(e,r,n,a){for(arguments.length<3&&(n=0),arguments.length<4&&(a=e.length);n<a;){var i=n+a>>>1;t(e[i],r)>0?a=i:n=i+1}return n}}}e.ascending=h,e.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},e.min=function(t,e){var r,n,a=-1,i=t.length;if(1===arguments.length){for(;++a<i;)if(null!=(n=t[a])&&n>=n){r=n;break}for(;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else{for(;++a<i;)if(null!=(n=e.call(t,t[a],a))&&n>=n){r=n;break}for(;++a<i;)null!=(n=e.call(t,t[a],a))&&r>n&&(r=n)}return r},e.max=function(t,e){var r,n,a=-1,i=t.length;if(1===arguments.length){for(;++a<i;)if(null!=(n=t[a])&&n>=n){r=n;break}for(;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else{for(;++a<i;)if(null!=(n=e.call(t,t[a],a))&&n>=n){r=n;break}for(;++a<i;)null!=(n=e.call(t,t[a],a))&&n>r&&(r=n)}return r},e.extent=function(t,e){var r,n,a,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(n=t[i])&&n>=n){r=a=n;break}for(;++i<o;)null!=(n=t[i])&&(r>n&&(r=n),a<n&&(a=n))}else{for(;++i<o;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=a=n;break}for(;++i<o;)null!=(n=e.call(t,t[i],i))&&(r>n&&(r=n),a<n&&(a=n))}return[r,a]},e.sum=function(t,e){var r,n=0,a=t.length,i=-1;if(1===arguments.length)for(;++i<a;)p(r=+t[i])&&(n+=r);else for(;++i<a;)p(r=+e.call(t,t[i],i))&&(n+=r);return n},e.mean=function(t,e){var r,n=0,a=t.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)p(r=d(t[i]))?n+=r:--o;else for(;++i<a;)p(r=d(e.call(t,t[i],i)))?n+=r:--o;if(o)return n/o},e.quantile=function(t,e){var r=(t.length-1)*e+1,n=Math.floor(r),a=+t[n-1],i=r-n;return i?a+i*(t[n]-a):a},e.median=function(t,r){var n,a=[],i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)p(n=d(t[o]))&&a.push(n);else for(;++o<i;)p(n=d(r.call(t,t[o],o)))&&a.push(n);if(a.length)return e.quantile(a.sort(h),.5)},e.variance=function(t,e){var r,n,a=t.length,i=0,o=0,l=-1,s=0;if(1===arguments.length)for(;++l<a;)p(r=d(t[l]))&&(o+=(n=r-i)*(r-(i+=n/++s)));else for(;++l<a;)p(r=d(e.call(t,t[l],l)))&&(o+=(n=r-i)*(r-(i+=n/++s)));if(s>1)return o/(s-1)},e.deviation=function(){var t=e.variance.apply(this,arguments);return t?Math.sqrt(t):t};var v=g(h);function m(t){return t.length}e.bisectLeft=v.left,e.bisect=e.bisectRight=v.right,e.bisector=function(t){return g(1===t.length?function(e,r){return h(t(e),r)}:t)},e.shuffle=function(t,e,r){(i=arguments.length)<3&&(r=t.length,i<2&&(e=0));for(var n,a,i=r-e;i;)a=Math.random()*i--|0,n=t[i+e],t[i+e]=t[a+e],t[a+e]=n;return t},e.permute=function(t,e){for(var r=e.length,n=new Array(r);r--;)n[r]=t[e[r]];return n},e.pairs=function(t){for(var e=0,r=t.length-1,n=t[0],a=new Array(r<0?0:r);e<r;)a[e]=[n,n=t[++e]];return a},e.transpose=function(t){if(!(i=t.length))return[];for(var r=-1,n=e.min(t,m),a=new Array(n);++r<n;)for(var i,o=-1,l=a[r]=new Array(i);++o<i;)l[o]=t[o][r];return a},e.zip=function(){return e.transpose(arguments)},e.keys=function(t){var e=[];for(var r in t)e.push(r);return e},e.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},e.entries=function(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e},e.merge=function(t){for(var e,r,n,a=t.length,i=-1,o=0;++i<a;)o+=t[i].length;for(r=new Array(o);--a>=0;)for(e=(n=t[a]).length;--e>=0;)r[--o]=n[e];return r};var y=Math.abs;function x(t,e){for(var r in e)Object.defineProperty(t.prototype,r,{value:e[r],enumerable:!1})}function b(){this._=Object.create(null)}e.range=function(t,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=t,t=0)),(e-t)/r==1/0)throw new Error("infinite range");var n,a=[],i=function(t){var e=1;for(;t*e%1;)e*=10;return e}(y(r)),o=-1;if(t*=i,e*=i,(r*=i)<0)for(;(n=t+r*++o)>e;)a.push(n/i);else for(;(n=t+r*++o)<e;)a.push(n/i);return a},e.map=function(t,e){var r=new b;if(t instanceof b)t.forEach(function(t,e){r.set(t,e)});else if(Array.isArray(t)){var n,a=-1,i=t.length;if(1===arguments.length)for(;++a<i;)r.set(a,t[a]);else for(;++a<i;)r.set(e.call(t,n=t[a],a),n)}else for(var o in t)r.set(o,t[o]);return r};var _="__proto__",w="\0";function A(t){return(t+="")===_||t[0]===w?w+t:t}function M(t){return(t+="")[0]===w?t.slice(1):t}function T(t){return A(t)in this._}function k(t){return(t=A(t))in this._&&delete this._[t]}function E(){var t=[];for(var e in this._)t.push(M(e));return t}function C(){var t=0;for(var e in this._)++t;return t}function S(){for(var t in this._)return!1;return!0}function L(){this._=Object.create(null)}function O(t){return t}function R(t,e,r){return function(){var n=r.apply(e,arguments);return n===e?t:n}}function D(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var r=0,n=I.length;r<n;++r){var a=I[r]+e;if(a in t)return a}}x(b,{has:T,get:function(t){return this._[A(t)]},set:function(t,e){return this._[A(t)]=e},remove:k,keys:E,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:M(e),value:this._[e]});return t},size:C,empty:S,forEach:function(t){for(var e in this._)t.call(this,M(e),this._[e])}}),e.nest=function(){var t,r,n={},a=[],i=[];function o(e,i,l){if(l>=a.length)return r?r.call(n,i):t?i.sort(t):i;for(var s,u,c,f,h=-1,d=i.length,p=a[l++],g=new b;++h<d;)(f=g.get(s=p(u=i[h])))?f.push(u):g.set(s,[u]);return e?(u=e(),c=function(t,r){u.set(t,o(e,r,l))}):(u={},c=function(t,r){u[t]=o(e,r,l)}),g.forEach(c),u}return n.map=function(t,e){return o(e,t,0)},n.entries=function(t){return function t(e,r){if(r>=a.length)return e;var n=[],o=i[r++];return e.forEach(function(e,a){n.push({key:e,values:t(a,r)})}),o?n.sort(function(t,e){return o(t.key,e.key)}):n}(o(e.map,t,0),0)},n.key=function(t){return a.push(t),n},n.sortKeys=function(t){return i[a.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return r=t,n},n},e.set=function(t){var e=new L;if(t)for(var r=0,n=t.length;r<n;++r)e.add(t[r]);return e},x(L,{has:T,add:function(t){return this._[A(t+="")]=!0,t},remove:k,values:E,size:C,empty:S,forEach:function(t){for(var e in this._)t.call(this,M(e))}}),e.behavior={},e.rebind=function(t,e){for(var r,n=1,a=arguments.length;++n<a;)t[r=arguments[n]]=R(t,e,e[r]);return t};var I=["webkit","ms","moz","Moz","o","O"];function P(){}function F(){}function z(t){var e=[],r=new b;function n(){for(var r,n=e,a=-1,i=n.length;++a<i;)(r=n[a].on)&&r.apply(this,arguments);return t}return n.on=function(n,a){var i,o=r.get(n);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(n)),a&&e.push(r.set(n,{on:a})),t)},n}function N(){e.event.preventDefault()}function B(){for(var t,r=e.event;t=r.sourceEvent;)r=t;return r}function j(t){for(var r=new F,n=0,a=arguments.length;++n<a;)r[arguments[n]]=z(r);return r.of=function(n,a){return function(i){try{var o=i.sourceEvent=e.event;i.target=t,e.event=i,r[i.type].apply(n,a)}finally{e.event=o}}},r}e.dispatch=function(){for(var t=new F,e=-1,r=arguments.length;++e<r;)t[arguments[e]]=z(t);return t},F.prototype.on=function(t,e){var r=t.indexOf("."),n="";if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},e.event=null,e.requote=function(t){return t.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,V={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)t[r]=e[r]};function H(t){return V(t,W),t}var q=function(t,e){return e.querySelector(t)},G=function(t,e){return e.querySelectorAll(t)},X=function(t,e){var r=t.matches||t[D(t,"matchesSelector")];return(X=function(t,e){return r.call(t,e)})(t,e)};"function"==typeof Sizzle&&(q=function(t,e){return Sizzle(t,e)[0]||null},G=Sizzle,X=Sizzle.matchesSelector),e.selection=function(){return e.select(a.documentElement)};var W=e.selection.prototype=[];function Y(t){return"function"==typeof t?t:function(){return q(t,this)}}function Z(t){return"function"==typeof t?t:function(){return G(t,this)}}W.select=function(t){var e,r,n,a,i=[];t=Y(t);for(var o=-1,l=this.length;++o<l;){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=-1,u=n.length;++s<u;)(a=n[s])?(e.push(r=t.call(a,a.__data__,s,o)),r&&"__data__"in a&&(r.__data__=a.__data__)):e.push(null)}return H(i)},W.selectAll=function(t){var e,r,a=[];t=Z(t);for(var i=-1,o=this.length;++i<o;)for(var l=this[i],s=-1,u=l.length;++s<u;)(r=l[s])&&(a.push(e=n(t.call(r,r.__data__,s,i))),e.parentNode=r);return H(a)};var J="http://www.w3.org/1999/xhtml",Q={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $(t,r){return t=e.ns.qualify(t),null==r?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof r?t.local?function(){var e=r.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}:function(){var e=r.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}:t.local?function(){this.setAttributeNS(t.space,t.local,r)}:function(){this.setAttribute(t,r)}}function K(t){return t.trim().replace(/\s+/g," ")}function tt(t){return new RegExp("(?:^|\\s+)"+e.requote(t)+"(?:\\s+|$)","g")}function et(t){return(t+"").trim().split(/^|\s+/)}function rt(t,e){var r=(t=et(t).map(nt)).length;return"function"==typeof e?function(){for(var n=-1,a=e.apply(this,arguments);++n<r;)t[n](this,a)}:function(){for(var n=-1;++n<r;)t[n](this,e)}}function nt(t){var e=tt(t);return function(r,n){if(a=r.classList)return n?a.add(t):a.remove(t);var a=r.getAttribute("class")||"";n?(e.lastIndex=0,e.test(a)||r.setAttribute("class",K(a+" "+t))):r.setAttribute("class",K(a.replace(e," ")))}}function at(t,e,r){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,r)}:function(){this.style.setProperty(t,e,r)}}function it(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}:function(){this[t]=e}}function ot(t){return"function"==typeof t?t:(t=e.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,r=this.namespaceURI;return r===J&&e.documentElement.namespaceURI===J?e.createElement(t):e.createElementNS(r,t)}}function lt(){var t=this.parentNode;t&&t.removeChild(this)}function st(t){return{__data__:t}}function ut(t){return function(){return X(this,t)}}function ct(t,e){for(var r=0,n=t.length;r<n;r++)for(var a,i=t[r],o=0,l=i.length;o<l;o++)(a=i[o])&&e(a,o,r);return t}function ft(t){return V(t,ht),t}e.ns={prefix:Q,qualify:function(t){var e=t.indexOf(":"),r=t;return e>=0&&"xmlns"!==(r=t.slice(0,e))&&(t=t.slice(e+1)),Q.hasOwnProperty(r)?{space:Q[r],local:t}:t}},W.attr=function(t,r){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=e.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(r in t)this.each($(r,t[r]));return this}return this.each($(t,r))},W.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var r=this.node(),n=(t=et(t)).length,a=-1;if(e=r.classList){for(;++a<n;)if(!e.contains(t[a]))return!1}else for(e=r.getAttribute("class");++a<n;)if(!tt(t[a]).test(e))return!1;return!0}for(e in t)this.each(rt(e,t[e]));return this}return this.each(rt(t,e))},W.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=""),t)this.each(at(r,t[r],e));return this}if(n<2){var a=this.node();return o(a).getComputedStyle(a,null).getPropertyValue(t)}r=""}return this.each(at(t,e,r))},W.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(it(e,t[e]));return this}return this.each(it(t,e))},W.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},W.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},W.append=function(t){return t=ot(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},W.insert=function(t,e){return t=ot(t),e=Y(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},W.remove=function(){return this.each(lt)},W.data=function(t,e){var r,n,a=-1,i=this.length;if(!arguments.length){for(t=new Array(i=(r=this[0]).length);++a<i;)(n=r[a])&&(t[a]=n.__data__);return t}function o(t,r){var n,a,i,o=t.length,c=r.length,f=Math.min(o,c),h=new Array(c),d=new Array(c),p=new Array(o);if(e){var g,v=new b,m=new Array(o);for(n=-1;++n<o;)(a=t[n])&&(v.has(g=e.call(a,a.__data__,n))?p[n]=a:v.set(g,a),m[n]=g);for(n=-1;++n<c;)(a=v.get(g=e.call(r,i=r[n],n)))?!0!==a&&(h[n]=a,a.__data__=i):d[n]=st(i),v.set(g,!0);for(n=-1;++n<o;)n in m&&!0!==v.get(m[n])&&(p[n]=t[n])}else{for(n=-1;++n<f;)a=t[n],i=r[n],a?(a.__data__=i,h[n]=a):d[n]=st(i);for(;n<c;++n)d[n]=st(r[n]);for(;n<o;++n)p[n]=t[n]}d.update=h,d.parentNode=h.parentNode=p.parentNode=t.parentNode,l.push(d),s.push(h),u.push(p)}var l=ft([]),s=H([]),u=H([]);if("function"==typeof t)for(;++a<i;)o(r=this[a],t.call(r,r.parentNode.__data__,a));else for(;++a<i;)o(r=this[a],t);return s.enter=function(){return l},s.exit=function(){return u},s},W.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},W.filter=function(t){var e,r,n,a=[];"function"!=typeof t&&(t=ut(t));for(var i=0,o=this.length;i<o;i++){a.push(e=[]),e.parentNode=(r=this[i]).parentNode;for(var l=0,s=r.length;l<s;l++)(n=r[l])&&t.call(n,n.__data__,l,i)&&e.push(n)}return H(a)},W.order=function(){for(var t=-1,e=this.length;++t<e;)for(var r,n=this[t],a=n.length-1,i=n[a];--a>=0;)(r=n[a])&&(i&&i!==r.nextSibling&&i.parentNode.insertBefore(r,i),i=r);return this},W.sort=function(t){t=function(t){arguments.length||(t=h);return function(e,r){return e&&r?t(e.__data__,r.__data__):!e-!r}}.apply(this,arguments);for(var e=-1,r=this.length;++e<r;)this[e].sort(t);return this.order()},W.each=function(t){return ct(this,function(e,r,n){t.call(e,e.__data__,r,n)})},W.call=function(t){var e=n(arguments);return t.apply(e[0]=this,e),this},W.empty=function(){return!this.node()},W.node=function(){for(var t=0,e=this.length;t<e;t++)for(var r=this[t],n=0,a=r.length;n<a;n++){var i=r[n];if(i)return i}return null},W.size=function(){var t=0;return ct(this,function(){++t}),t};var ht=[];function dt(t,r,a){var i="__on"+t,o=t.indexOf("."),l=gt;o>0&&(t=t.slice(0,o));var s=pt.get(t);function u(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}return s&&(t=s,l=vt),o?r?function(){var e=l(r,n(arguments));u.call(this),this.addEventListener(t,this[i]=e,e.$=a),e._=r}:u:r?P:function(){var r,n=new RegExp("^__on([^.]+)"+e.requote(t)+"$");for(var a in this)if(r=a.match(n)){var i=this[a];this.removeEventListener(r[1],i,i.$),delete this[a]}}}e.selection.enter=ft,e.selection.enter.prototype=ht,ht.append=W.append,ht.empty=W.empty,ht.node=W.node,ht.call=W.call,ht.size=W.size,ht.select=function(t){for(var e,r,n,a,i,o=[],l=-1,s=this.length;++l<s;){n=(a=this[l]).update,o.push(e=[]),e.parentNode=a.parentNode;for(var u=-1,c=a.length;++u<c;)(i=a[u])?(e.push(n[u]=r=t.call(a.parentNode,i.__data__,u,l)),r.__data__=i.__data__):e.push(null)}return H(o)},ht.insert=function(t,e){var r,n,a;return arguments.length<2&&(r=this,e=function(t,e,i){var o,l=r[i].update,s=l.length;for(i!=a&&(a=i,n=0),e>=n&&(n=e+1);!(o=l[n])&&++n<s;);return o}),W.insert.call(this,t,e)},e.select=function(t){var e;return"string"==typeof t?(e=[q(t,a)]).parentNode=a.documentElement:(e=[t]).parentNode=i(t),H([e])},e.selectAll=function(t){var e;return"string"==typeof t?(e=n(G(t,a))).parentNode=a.documentElement:(e=n(t)).parentNode=null,H([e])},W.on=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=!1),t)this.each(dt(r,t[r],e));return this}if(n<2)return(n=this.node()["__on"+t])&&n._;r=!1}return this.each(dt(t,e,r))};var pt=e.map({mouseenter:"mouseover",mouseleave:"mouseout"});function gt(t,r){return function(n){var a=e.event;e.event=n,r[0]=this.__data__;try{t.apply(this,r)}finally{e.event=a}}}function vt(t,e){var r=gt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||r.call(this,t)}}a&&pt.forEach(function(t){"on"+t in a&&pt.remove(t)});var mt,yt=0;function xt(t){var r=".dragsuppress-"+ ++yt,n="click"+r,a=e.select(o(t)).on("touchmove"+r,N).on("dragstart"+r,N).on("selectstart"+r,N);if(null==mt&&(mt=!("onselectstart"in t)&&D(t.style,"userSelect")),mt){var l=i(t).style,s=l[mt];l[mt]="none"}return function(t){if(a.on(r,null),mt&&(l[mt]=s),t){var e=function(){a.on(n,null)};a.on(n,function(){N(),e()},!0),setTimeout(e,0)}}}e.mouse=function(t){return _t(t,B())};var bt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function _t(t,r){r.changedTouches&&(r=r.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var a=n.createSVGPoint();if(bt<0){var i=o(t);if(i.scrollX||i.scrollY){var l=(n=e.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();bt=!(l.f||l.e),n.remove()}}return bt?(a.x=r.pageX,a.y=r.pageY):(a.x=r.clientX,a.y=r.clientY),[(a=a.matrixTransform(t.getScreenCTM().inverse())).x,a.y]}var s=t.getBoundingClientRect();return[r.clientX-s.left-t.clientLeft,r.clientY-s.top-t.clientTop]}function wt(){return e.event.changedTouches[0].identifier}e.touch=function(t,e,r){if(arguments.length<3&&(r=e,e=B().changedTouches),e)for(var n,a=0,i=e.length;a<i;++a)if((n=e[a]).identifier===r)return _t(t,n)},e.behavior.drag=function(){var t=j(i,"drag","dragstart","dragend"),r=null,n=l(P,e.mouse,o,"mousemove","mouseup"),a=l(wt,e.touch,O,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",a)}function l(n,a,i,o,l){return function(){var s,u=e.event.target.correspondingElement||e.event.target,c=this.parentNode,f=t.of(this,arguments),h=0,d=n(),p=".drag"+(null==d?"":"-"+d),g=e.select(i(u)).on(o+p,function(){var t,e,r=a(c,d);if(!r)return;t=r[0]-m[0],e=r[1]-m[1],h|=t|e,m=r,f({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:t,dy:e})}).on(l+p,function(){if(!a(c,d))return;g.on(o+p,null).on(l+p,null),v(h),f({type:"dragend"})}),v=xt(u),m=a(c,d);s=r?[(s=r.apply(this,arguments)).x-m[0],s.y-m[1]]:[0,0],f({type:"dragstart"})}}return i.origin=function(t){return arguments.length?(r=t,i):r},e.rebind(i,t,"on")},e.touches=function(t,e){return arguments.length<2&&(e=B().touches),e?n(e).map(function(e){var r=_t(t,e);return r.identifier=e.identifier,r}):[]};var At=1e-6,Mt=At*At,Tt=Math.PI,kt=2*Tt,Et=kt-At,Ct=Tt/2,St=Tt/180,Lt=180/Tt;function Ot(t){return t>0?1:t<0?-1:0}function Rt(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(e[1]-t[1])*(r[0]-t[0])}function Dt(t){return t>1?0:t<-1?Tt:Math.acos(t)}function It(t){return t>1?Ct:t<-1?-Ct:Math.asin(t)}function Pt(t){return((t=Math.exp(t))+1/t)/2}function Ft(t){return(t=Math.sin(t/2))*t}var zt=Math.SQRT2;e.interpolateZoom=function(t,e){var r,n,a=t[0],i=t[1],o=t[2],l=e[0],s=e[1],u=e[2],c=l-a,f=s-i,h=c*c+f*f;if(h<Mt)n=Math.log(u/o)/zt,r=function(t){return[a+t*c,i+t*f,o*Math.exp(zt*t*n)]};else{var d=Math.sqrt(h),p=(u*u-o*o+4*h)/(2*o*2*d),g=(u*u-o*o-4*h)/(2*u*2*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);n=(m-v)/zt,r=function(t){var e,r=t*n,l=Pt(v),s=o/(2*d)*(l*(e=zt*r+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[a+s*c,i+s*f,o*l/Pt(zt*r+v)]}}return r.duration=1e3*n,r},e.behavior.zoom=function(){var t,r,n,i,l,s,u,c,f,h={x:0,y:0,k:1},d=[960,500],p=jt,g=250,v=0,m="mousedown.zoom",y="mousemove.zoom",x="mouseup.zoom",b="touchstart.zoom",_=j(w,"zoomstart","zoom","zoomend");function w(t){t.on(m,O).on(Bt+".zoom",D).on("dblclick.zoom",I).on(b,R)}function A(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function M(t){h.k=Math.max(p[0],Math.min(p[1],t))}function T(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function k(t,n,a,i){t.__chart__={x:h.x,y:h.y,k:h.k},M(Math.pow(2,i)),T(r=n,a),t=e.select(t),g>0&&(t=t.transition().duration(g)),t.call(w.event)}function E(){u&&u.domain(s.range().map(function(t){return(t-h.x)/h.k}).map(s.invert)),f&&f.domain(c.range().map(function(t){return(t-h.y)/h.k}).map(c.invert))}function C(t){v++||t({type:"zoomstart"})}function S(t){E(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function L(t){--v||(t({type:"zoomend"}),r=null)}function O(){var t=this,r=_.of(t,arguments),n=0,a=e.select(o(t)).on(y,function(){n=1,T(e.mouse(t),i),S(r)}).on(x,function(){a.on(y,null).on(x,null),l(n),L(r)}),i=A(e.mouse(t)),l=xt(t);ll.call(t),C(r)}function R(){var t,r=this,n=_.of(r,arguments),a={},i=0,o=".zoom-"+e.event.changedTouches[0].identifier,s="touchmove"+o,u="touchend"+o,c=[],f=e.select(r),d=xt(r);function p(){var n=e.touches(r);return t=h.k,n.forEach(function(t){t.identifier in a&&(a[t.identifier]=A(t))}),n}function g(){var t=e.event.target;e.select(t).on(s,v).on(u,y),c.push(t);for(var n=e.event.changedTouches,o=0,f=n.length;o<f;++o)a[n[o].identifier]=null;var d=p(),g=Date.now();if(1===d.length){if(g-l<500){var m=d[0];k(r,m,a[m.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),N()}l=g}else if(d.length>1){m=d[0];var x=d[1],b=m[0]-x[0],_=m[1]-x[1];i=b*b+_*_}}function v(){var o,s,u,c,f=e.touches(r);ll.call(r);for(var h=0,d=f.length;h<d;++h,c=null)if(u=f[h],c=a[u.identifier]){if(s)break;o=u,s=c}if(c){var p=(p=u[0]-o[0])*p+(p=u[1]-o[1])*p,g=i&&Math.sqrt(p/i);o=[(o[0]+u[0])/2,(o[1]+u[1])/2],s=[(s[0]+c[0])/2,(s[1]+c[1])/2],M(g*t)}l=null,T(o,s),S(n)}function y(){if(e.event.touches.length){for(var t=e.event.changedTouches,r=0,i=t.length;r<i;++r)delete a[t[r].identifier];for(var l in a)return void p()}e.selectAll(c).on(o,null),f.on(m,O).on(b,R),d(),L(n)}g(),C(n),f.on(m,null).on(b,g)}function D(){var a=_.of(this,arguments);i?clearTimeout(i):(ll.call(this),t=A(r=n||e.mouse(this)),C(a)),i=setTimeout(function(){i=null,L(a)},50),N(),M(Math.pow(2,.002*Nt())*h.k),T(r,t),S(a)}function I(){var t=e.mouse(this),r=Math.log(h.k)/Math.LN2;k(this,t,A(t),e.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}return Bt||(Bt="onwheel"in a?(Nt=function(){return-e.event.deltaY*(e.event.deltaMode?120:1)},"wheel"):"onmousewheel"in a?(Nt=function(){return e.event.wheelDelta},"mousewheel"):(Nt=function(){return-e.event.detail},"MozMousePixelScroll")),w.event=function(t){t.each(function(){var t=_.of(this,arguments),n=h;cl?e.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},C(t)}).tween("zoom:zoom",function(){var a=d[0],i=d[1],o=r?r[0]:a/2,l=r?r[1]:i/2,s=e.interpolateZoom([(o-h.x)/h.k,(l-h.y)/h.k,a/h.k],[(o-n.x)/n.k,(l-n.y)/n.k,a/n.k]);return function(e){var r=s(e),n=a/r[2];this.__chart__=h={x:o-r[0]*n,y:l-r[1]*n,k:n},S(t)}}).each("interrupt.zoom",function(){L(t)}).each("end.zoom",function(){L(t)}):(this.__chart__=h,C(t),S(t),L(t))})},w.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},E(),w):[h.x,h.y]},w.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},M(+t),E(),w):h.k},w.scaleExtent=function(t){return arguments.length?(p=null==t?jt:[+t[0],+t[1]],w):p},w.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],w):n},w.size=function(t){return arguments.length?(d=t&&[+t[0],+t[1]],w):d},w.duration=function(t){return arguments.length?(g=+t,w):g},w.x=function(t){return arguments.length?(u=t,s=t.copy(),h={x:0,y:0,k:1},w):u},w.y=function(t){return arguments.length?(f=t,c=t.copy(),h={x:0,y:0,k:1},w):f},e.rebind(w,_,"on")};var Nt,Bt,jt=[0,1/0];function Ut(){}function Vt(t,e,r){return this instanceof Vt?(this.h=+t,this.s=+e,void(this.l=+r)):arguments.length<2?t instanceof Vt?new Vt(t.h,t.s,t.l):ce(""+t,fe,Vt):new Vt(t,e,r)}e.color=Ut,Ut.prototype.toString=function(){return this.rgb()+""},e.hsl=Vt;var Ht=Vt.prototype=new Ut;function qt(t,e,r){var n,a;function i(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?n+(a-n)*t/60:t<180?a:t<240?n+(a-n)*(240-t)/60:n}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=2*(r=r<0?0:r>1?1:r)-(a=r<=.5?r*(1+e):r+e-r*e),new ie(i(t+120),i(t),i(t-120))}function Gt(t,r,n){return this instanceof Gt?(this.h=+t,this.c=+r,void(this.l=+n)):arguments.length<2?t instanceof Gt?new Gt(t.h,t.c,t.l):ee(t instanceof Yt?t.l:(t=he((t=e.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Gt(t,r,n)}Ht.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Vt(this.h,this.s,this.l/t)},Ht.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Vt(this.h,this.s,t*this.l)},Ht.rgb=function(){return qt(this.h,this.s,this.l)},e.hcl=Gt;var Xt=Gt.prototype=new Ut;function Wt(t,e,r){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Yt(r,Math.cos(t*=St)*e,Math.sin(t)*e)}function Yt(t,e,r){return this instanceof Yt?(this.l=+t,this.a=+e,void(this.b=+r)):arguments.length<2?t instanceof Yt?new Yt(t.l,t.a,t.b):t instanceof Gt?Wt(t.h,t.c,t.l):he((t=ie(t)).r,t.g,t.b):new Yt(t,e,r)}Xt.brighter=function(t){return new Gt(this.h,this.c,Math.min(100,this.l+Zt*(arguments.length?t:1)))},Xt.darker=function(t){return new Gt(this.h,this.c,Math.max(0,this.l-Zt*(arguments.length?t:1)))},Xt.rgb=function(){return Wt(this.h,this.c,this.l).rgb()},e.lab=Yt;var Zt=18,Jt=.95047,Qt=1,$t=1.08883,Kt=Yt.prototype=new Ut;function te(t,e,r){var n=(t+16)/116,a=n+e/500,i=n-r/200;return new ie(ae(3.2404542*(a=re(a)*Jt)-1.5371385*(n=re(n)*Qt)-.4985314*(i=re(i)*$t)),ae(-.969266*a+1.8760108*n+.041556*i),ae(.0556434*a-.2040259*n+1.0572252*i))}function ee(t,e,r){return t>0?new Gt(Math.atan2(r,e)*Lt,Math.sqrt(e*e+r*r),t):new Gt(NaN,NaN,t)}function re(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ne(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ae(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ie(t,e,r){return this instanceof ie?(this.r=~~t,this.g=~~e,void(this.b=~~r)):arguments.length<2?t instanceof ie?new ie(t.r,t.g,t.b):ce(""+t,ie,qt):new ie(t,e,r)}function oe(t){return new ie(t>>16,t>>8&255,255&t)}function le(t){return oe(t)+""}Kt.brighter=function(t){return new Yt(Math.min(100,this.l+Zt*(arguments.length?t:1)),this.a,this.b)},Kt.darker=function(t){return new Yt(Math.max(0,this.l-Zt*(arguments.length?t:1)),this.a,this.b)},Kt.rgb=function(){return te(this.l,this.a,this.b)},e.rgb=ie;var se=ie.prototype=new Ut;function ue(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ce(t,e,r){var n,a,i,o=0,l=0,s=0;if(n=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(a=n[2].split(","),n[1]){case"hsl":return r(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return e(pe(a[0]),pe(a[1]),pe(a[2]))}return(i=ge.get(t))?e(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&i)>>4,o|=o>>4,l=240&i,l|=l>>4,s=15&i,s|=s<<4):7===t.length&&(o=(16711680&i)>>16,l=(65280&i)>>8,s=255&i)),e(o,l,s))}function fe(t,e,r){var n,a,i=Math.min(t/=255,e/=255,r/=255),o=Math.max(t,e,r),l=o-i,s=(o+i)/2;return l?(a=s<.5?l/(o+i):l/(2-o-i),n=t==o?(e-r)/l+(e<r?6:0):e==o?(r-t)/l+2:(t-e)/l+4,n*=60):(n=NaN,a=s>0&&s<1?0:n),new Vt(n,a,s)}function he(t,e,r){var n=ne((.4124564*(t=de(t))+.3575761*(e=de(e))+.1804375*(r=de(r)))/Jt),a=ne((.2126729*t+.7151522*e+.072175*r)/Qt);return Yt(116*a-16,500*(n-a),200*(a-ne((.0193339*t+.119192*e+.9503041*r)/$t)))}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pe(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}se.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,r=this.g,n=this.b,a=30;return e||r||n?(e&&e<a&&(e=a),r&&r<a&&(r=a),n&&n<a&&(n=a),new ie(Math.min(255,e/t),Math.min(255,r/t),Math.min(255,n/t))):new ie(a,a,a)},se.darker=function(t){return new ie((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},se.hsl=function(){return fe(this.r,this.g,this.b)},se.toString=function(){return"#"+ue(this.r)+ue(this.g)+ue(this.b)};var ge=e.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ve(t){return"function"==typeof t?t:function(){return t}}function me(t){return function(e,r,n){return 2===arguments.length&&"function"==typeof r&&(n=r,r=null),ye(e,r,t,n)}}function ye(t,r,a,i){var o={},l=e.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,c=null;function f(){var t,e=u.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||e>=200&&e<300||304===e){try{t=a.call(o,u)}catch(t){return void l.error.call(o,t)}l.load.call(o,t)}else l.error.call(o,u)}return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=f:u.onreadystatechange=function(){u.readyState>3&&f()},u.onprogress=function(t){var r=e.event;e.event=t;try{l.progress.call(o,u)}finally{e.event=r}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(r=null==t?null:t+"",o):r},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return a=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(n(arguments)))}}),o.send=function(e,n,a){if(2===arguments.length&&"function"==typeof n&&(a=n,n=null),u.open(e,t,!0),null==r||"accept"in s||(s.accept=r+",*/*"),u.setRequestHeader)for(var i in s)u.setRequestHeader(i,s[i]);return null!=r&&u.overrideMimeType&&u.overrideMimeType(r),null!=c&&(u.responseType=c),null!=a&&o.on("error",a).on("load",function(t){a(null,t)}),l.beforesend.call(o,u),u.send(null==n?null:n),o},o.abort=function(){return u.abort(),o},e.rebind(o,l,"on"),null==i?o:o.get(function(t){return 1===t.length?function(e,r){t(null==e?r:null)}:t}(i))}ge.forEach(function(t,e){ge.set(t,oe(e))}),e.functor=ve,e.xhr=me(O),e.dsv=function(t,e){var r=new RegExp('["'+t+"\n]"),n=t.charCodeAt(0);function a(t,r,n){arguments.length<3&&(n=r,r=null);var a=ye(t,e,null==r?i:o(r),n);return a.row=function(t){return arguments.length?a.response(null==(r=t)?i:o(t)):r},a}function i(t){return a.parse(t.responseText)}function o(t){return function(e){return a.parse(e.responseText,t)}}function l(e){return e.map(s).join(t)}function s(t){return r.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return a.parse=function(t,e){var r;return a.parseRows(t,function(t,n){if(r)return r(t,n-1);var a=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,r){return e(a(t),r)}:a})},a.parseRows=function(t,e){var r,a,i={},o={},l=[],s=t.length,u=0,c=0;function f(){if(u>=s)return o;if(a)return a=!1,i;var e=u;if(34===t.charCodeAt(e)){for(var r=e;r++<s;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return u=r+2,13===(l=t.charCodeAt(r+1))?(a=!0,10===t.charCodeAt(r+2)&&++u):10===l&&(a=!0),t.slice(e+1,r).replace(/""/g,'"')}for(;u<s;){var l,c=1;if(10===(l=t.charCodeAt(u++)))a=!0;else if(13===l)a=!0,10===t.charCodeAt(u)&&(++u,++c);else if(l!==n)continue;return t.slice(e,u-c)}return t.slice(e)}for(;(r=f())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=f();e&&null==(h=e(h,c++))||l.push(h)}return l},a.format=function(e){if(Array.isArray(e[0]))return a.formatRows(e);var r=new L,n=[];return e.forEach(function(t){for(var e in t)r.has(e)||n.push(r.add(e))}),[n.map(s).join(t)].concat(e.map(function(e){return n.map(function(t){return s(e[t])}).join(t)})).join("\n")},a.formatRows=function(t){return t.map(l).join("\n")},a},e.csv=e.dsv(",","text/csv"),e.tsv=e.dsv("\t","text/tab-separated-values");var xe,be,_e,we,Ae=this[D(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Me(t,e,r){var n=arguments.length;n<2&&(e=0),n<3&&(r=Date.now());var a={c:t,t:r+e,n:null};return be?be.n=a:xe=a,be=a,_e||(we=clearTimeout(we),_e=1,Ae(Te)),a}function Te(){var t=ke(),e=Ee()-t;e>24?(isFinite(e)&&(clearTimeout(we),we=setTimeout(Te,e)),_e=0):(_e=1,Ae(Te))}function ke(){for(var t=Date.now(),e=xe;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ee(){for(var t,e=xe,r=1/0;e;)e.c?(e.t<r&&(r=e.t),e=(t=e).n):e=t?t.n=e.n:xe=e.n;return be=t,r}function Ce(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}e.timer=function(){Me.apply(this,arguments)},e.timer.flush=function(){ke(),Ee()},e.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Se=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var r=Math.pow(10,3*y(8-e));return{scale:e>8?function(t){return t/r}:function(t){return t*r},symbol:t}});e.formatPrefix=function(t,r){var n=0;return(t=+t)&&(t<0&&(t*=-1),r&&(t=e.round(t,Ce(t,r))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Se[8+n/3]};var Le=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Oe=e.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,r){return(t=e.round(t,Ce(t,r))).toFixed(Math.max(0,Math.min(20,Ce(t*(1+1e-15),r))))}});function Re(t){return t+""}var De=e.time={},Ie=Date;function Pe(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Pe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Fe.setUTCDate.apply(this._,arguments)},setDay:function(){Fe.setUTCDay.apply(this._,arguments)},setFullYear:function(){Fe.setUTCFullYear.apply(this._,arguments)},setHours:function(){Fe.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Fe.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Fe.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Fe.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Fe.setUTCSeconds.apply(this._,arguments)},setTime:function(){Fe.setTime.apply(this._,arguments)}};var Fe=Date.prototype;function ze(t,e,r){function n(e){var r=t(e),n=i(r,1);return e-r<n-e?r:n}function a(r){return e(r=t(new Ie(r-1)),1),r}function i(t,r){return e(t=new Ie(+t),r),t}function o(t,n,i){var o=a(t),l=[];if(i>1)for(;o<n;)r(o)%i||l.push(new Date(+o)),e(o,1);else for(;o<n;)l.push(new Date(+o)),e(o,1);return l}t.floor=t,t.round=n,t.ceil=a,t.offset=i,t.range=o;var l=t.utc=Ne(t);return l.floor=l,l.round=Ne(n),l.ceil=Ne(a),l.offset=Ne(i),l.range=function(t,e,r){try{Ie=Pe;var n=new Pe;return n._=t,o(n,e,r)}finally{Ie=Date}},t}function Ne(t){return function(e,r){try{Ie=Pe;var n=new Pe;return n._=e,t(n,r)._}finally{Ie=Date}}}De.year=ze(function(t){return(t=De.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),De.years=De.year.range,De.years.utc=De.year.utc.range,De.day=ze(function(t){var e=new Ie(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),De.days=De.day.range,De.days.utc=De.day.utc.range,De.dayOfYear=function(t){var e=De.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var r=De[t]=ze(function(t){return(t=De.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var r=De.year(t).getDay();return Math.floor((De.dayOfYear(t)+(r+e)%7)/7)-(r!==e)});De[t+"s"]=r.range,De[t+"s"].utc=r.utc.range,De[t+"OfYear"]=function(t){var r=De.year(t).getDay();return Math.floor((De.dayOfYear(t)+(r+e)%7)/7)}}),De.week=De.sunday,De.weeks=De.sunday.range,De.weeks.utc=De.sunday.utc.range,De.weekOfYear=De.sundayOfYear;var Be={"-":"",_:" ",0:"0"},je=/^\s*\d+/,Ue=/^%/;function Ve(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function He(t){return new RegExp("^(?:"+t.map(e.requote).join("|")+")","i")}function qe(t){for(var e=new b,r=-1,n=t.length;++r<n;)e.set(t[r].toLowerCase(),r);return e}function Ge(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Xe(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r));return n?(t.U=+n[0],r+n[0].length):-1}function We(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r));return n?(t.W=+n[0],r+n[0].length):-1}function Ye(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Ze(t,e,r){je.lastIndex=0;var n,a=je.exec(e.slice(r,r+2));return a?(t.y=(n=+a[0])+(n>68?1900:2e3),r+a[0].length):-1}function Je(t,e,r){return/^[+-]\d{4}$/.test(e=e.slice(r,r+5))?(t.Z=-e,r+5):-1}function Qe(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function $e(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Ke(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+3));return n?(t.j=+n[0],r+n[0].length):-1}function tr(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function er(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function rr(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function nr(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function ar(t){var e=t.getTimezoneOffset(),r=e>0?"-":"+",n=y(e)/60|0,a=y(e)%60;return r+Ve(n,"0",2)+Ve(a,"0",2)}function ir(t,e,r){Ue.lastIndex=0;var n=Ue.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function or(t){for(var e=t.length,r=-1;++r<e;)t[r][0]=this(t[r][0]);return function(e){for(var r=0,n=t[r];!n[1](e);)n=t[++r];return n[0](e)}}e.locale=function(t){return{numberFormat:function(t){var r=t.decimal,n=t.thousands,a=t.grouping,i=t.currency,o=a&&n?function(t,e){for(var r=t.length,i=[],o=0,l=a[0],s=0;r>0&&l>0&&(s+l+1>e&&(l=Math.max(1,e-s)),i.push(t.substring(r-=l,r+l)),!((s+=l+1)>e));)l=a[o=(o+1)%a.length];return i.reverse().join(n)}:O;return function(t){var n=Le.exec(t),a=n[1]||" ",l=n[2]||">",s=n[3]||"-",u=n[4]||"",c=n[5],f=+n[6],h=n[7],d=n[8],p=n[9],g=1,v="",m="",y=!1,x=!0;switch(d&&(d=+d.substring(1)),(c||"0"===a&&"="===l)&&(c=a="0",l="="),p){case"n":h=!0,p="g";break;case"%":g=100,m="%",p="f";break;case"p":g=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(v="0"+p.toLowerCase());case"c":x=!1;case"d":y=!0,d=0;break;case"s":g=-1,p="r"}"$"===u&&(v=i[0],m=i[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):"e"!=p&&"f"!=p||(d=Math.max(0,Math.min(20,d)))),p=Oe.get(p)||Re;var b=c&&h;return function(t){var n=m;if(y&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===s?"":s;if(g<0){var u=e.formatPrefix(t,d);t=u.scale(t),n=u.symbol+m}else t*=g;var _,w,A=(t=p(t,d)).lastIndexOf(".");if(A<0){var M=x?t.lastIndexOf("e"):-1;M<0?(_=t,w=""):(_=t.substring(0,M),w=t.substring(M))}else _=t.substring(0,A),w=r+t.substring(A+1);!c&&h&&(_=o(_,1/0));var T=v.length+_.length+w.length+(b?0:i.length),k=T<f?new Array(T=f-T+1).join(a):"";return b&&(_=o(k+_,k.length?f-w.length:1/0)),i+=v,t=_+w,("<"===l?i+t+k:">"===l?k+i+t:"^"===l?k.substring(0,T>>=1)+i+t+k.substring(T):i+(b?t:k+t))+n}}}(t),timeFormat:function(t){var r=t.dateTime,n=t.date,a=t.time,i=t.periods,o=t.days,l=t.shortDays,s=t.months,u=t.shortMonths;function c(t){var e=t.length;function r(r){for(var n,a,i,o=[],l=-1,s=0;++l<e;)37===t.charCodeAt(l)&&(o.push(t.slice(s,l)),null!=(a=Be[n=t.charAt(++l)])&&(n=t.charAt(++l)),(i=_[n])&&(n=i(r,null==a?"e"===n?" ":"0":a)),o.push(n),s=l+1);return o.push(t.slice(s,l)),o.join("")}return r.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(r,t,e,0)!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var n=null!=r.Z&&Ie!==Pe,a=new(n?Pe:Ie);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),n?a._:a},r.toString=function(){return t},r}function f(t,e,r,n){for(var a,i,o,l=0,s=e.length,u=r.length;l<s;){if(n>=u)return-1;if(37===(a=e.charCodeAt(l++))){if(o=e.charAt(l++),!(i=w[o in Be?e.charAt(l++):o])||(n=i(t,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}c.utc=function(t){var e=c(t);function r(t){try{var r=new(Ie=Pe);return r._=t,e(r)}finally{Ie=Date}}return r.parse=function(t){try{Ie=Pe;var r=e.parse(t);return r&&r._}finally{Ie=Date}},r.toString=e.toString,r},c.multi=c.utc.multi=or;var h=e.map(),d=He(o),p=qe(o),g=He(l),v=qe(l),m=He(s),y=qe(s),x=He(u),b=qe(u);i.forEach(function(t,e){h.set(t.toLowerCase(),e)});var _={a:function(t){return l[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:c(r),d:function(t,e){return Ve(t.getDate(),e,2)},e:function(t,e){return Ve(t.getDate(),e,2)},H:function(t,e){return Ve(t.getHours(),e,2)},I:function(t,e){return Ve(t.getHours()%12||12,e,2)},j:function(t,e){return Ve(1+De.dayOfYear(t),e,3)},L:function(t,e){return Ve(t.getMilliseconds(),e,3)},m:function(t,e){return Ve(t.getMonth()+1,e,2)},M:function(t,e){return Ve(t.getMinutes(),e,2)},p:function(t){return i[+(t.getHours()>=12)]},S:function(t,e){return Ve(t.getSeconds(),e,2)},U:function(t,e){return Ve(De.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ve(De.mondayOfYear(t),e,2)},x:c(n),X:c(a),y:function(t,e){return Ve(t.getFullYear()%100,e,2)},Y:function(t,e){return Ve(t.getFullYear()%1e4,e,4)},Z:ar,"%":function(){return"%"}},w={a:function(t,e,r){g.lastIndex=0;var n=g.exec(e.slice(r));return n?(t.w=v.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(t,e,r){d.lastIndex=0;var n=d.exec(e.slice(r));return n?(t.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(t,e,r){x.lastIndex=0;var n=x.exec(e.slice(r));return n?(t.m=b.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(t,e,r){m.lastIndex=0;var n=m.exec(e.slice(r));return n?(t.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(t,e,r){return f(t,_.c.toString(),e,r)},d:$e,e:$e,H:tr,I:tr,j:Ke,L:nr,m:Qe,M:er,p:function(t,e,r){var n=h.get(e.slice(r,r+=2).toLowerCase());return null==n?-1:(t.p=n,r)},S:rr,U:Xe,w:Ge,W:We,x:function(t,e,r){return f(t,_.x.toString(),e,r)},X:function(t,e,r){return f(t,_.X.toString(),e,r)},y:Ze,Y:Ye,Z:Je,"%":ir};return c}(t)}};var lr=e.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sr(){}e.format=lr.numberFormat,e.geo={},sr.prototype={s:0,t:0,add:function(t){cr(t,this.t,ur),cr(ur.s,this.s,this),this.s?this.t+=ur.t:this.s=ur.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ur=new sr;function cr(t,e,r){var n=r.s=t+e,a=n-t,i=n-a;r.t=t-i+(e-a)}function fr(t,e){t&&dr.hasOwnProperty(t.type)&&dr[t.type](t,e)}e.geo.stream=function(t,e){t&&hr.hasOwnProperty(t.type)?hr[t.type](t,e):fr(t,e)};var hr={Feature:function(t,e){fr(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,a=r.length;++n<a;)fr(r[n].geometry,e)}},dr={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,a=r.length;++n<a;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){pr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,a=r.length;++n<a;)pr(r[n],e,0)},Polygon:function(t,e){gr(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,a=r.length;++n<a;)gr(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,a=r.length;++n<a;)fr(r[n],e)}};function pr(t,e,r){var n,a=-1,i=t.length-r;for(e.lineStart();++a<i;)n=t[a],e.point(n[0],n[1],n[2]);e.lineEnd()}function gr(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)pr(t[r],e,1);e.polygonEnd()}e.geo.area=function(t){return vr=0,e.geo.stream(t,Sr),vr};var vr,mr,yr,xr,br,_r,wr,Ar,Mr,Tr,kr,Er,Cr=new sr,Sr={sphere:function(){vr+=4*Tt},point:P,lineStart:P,lineEnd:P,polygonStart:function(){Cr.reset(),Sr.lineStart=Lr},polygonEnd:function(){var t=2*Cr;vr+=t<0?4*Tt+t:t,Sr.lineStart=Sr.lineEnd=Sr.point=P}};function Lr(){var t,e,r,n,a;function i(t,e){e=e*St/2+Tt/4;var i=(t*=St)-r,o=i>=0?1:-1,l=o*i,s=Math.cos(e),u=Math.sin(e),c=a*u,f=n*s+c*Math.cos(l),h=c*o*Math.sin(l);Cr.add(Math.atan2(h,f)),r=t,n=s,a=u}Sr.point=function(o,l){Sr.point=i,r=(t=o)*St,n=Math.cos(l=(e=l)*St/2+Tt/4),a=Math.sin(l)},Sr.lineEnd=function(){i(t,e)}}function Or(t){var e=t[0],r=t[1],n=Math.cos(r);return[n*Math.cos(e),n*Math.sin(e),Math.sin(r)]}function Rr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Dr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ir(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Pr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Fr(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zr(t){return[Math.atan2(t[1],t[0]),It(t[2])]}function Nr(t,e){return y(t[0]-e[0])<At&&y(t[1]-e[1])<At}e.geo.bounds=function(){var t,r,n,a,i,o,l,s,u,c,f,h={point:d,lineStart:g,lineEnd:v,polygonStart:function(){h.point=m,h.lineStart=x,h.lineEnd=b,u=0,Sr.polygonStart()},polygonEnd:function(){Sr.polygonEnd(),h.point=d,h.lineStart=g,h.lineEnd=v,Cr<0?(t=-(n=180),r=-(a=90)):u>At?a=90:u<-At&&(r=-90),f[0]=t,f[1]=n}};function d(e,i){c.push(f=[t=e,n=e]),i<r&&(r=i),i>a&&(a=i)}function p(e,o){var l=Or([e*St,o*St]);if(s){var u=Dr(s,l),c=Dr([u[1],-u[0],0],u);Fr(c),c=zr(c);var f=e-i,h=f>0?1:-1,p=c[0]*Lt*h,g=y(f)>180;if(g^(h*i<p&&p<h*e))(v=c[1]*Lt)>a&&(a=v);else if(g^(h*i<(p=(p+360)%360-180)&&p<h*e)){var v;(v=-c[1]*Lt)<r&&(r=v)}else o<r&&(r=o),o>a&&(a=o);g?e<i?_(t,e)>_(t,n)&&(n=e):_(e,n)>_(t,n)&&(t=e):n>=t?(e<t&&(t=e),e>n&&(n=e)):e>i?_(t,e)>_(t,n)&&(n=e):_(e,n)>_(t,n)&&(t=e)}else d(e,o);s=l,i=e}function g(){h.point=p}function v(){f[0]=t,f[1]=n,h.point=d,s=null}function m(t,e){if(s){var r=t-i;u+=y(r)>180?r+(r>0?360:-360):r}else o=t,l=e;Sr.point(t,e),p(t,e)}function x(){Sr.lineStart()}function b(){m(o,l),Sr.lineEnd(),y(u)>At&&(t=-(n=180)),f[0]=t,f[1]=n,s=null}function _(t,e){return(e-=t)<0?e+360:e}function w(t,e){return t[0]-e[0]}function A(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(i){if(a=n=-(t=r=1/0),c=[],e.geo.stream(i,h),u=c.length){c.sort(w);for(var o=1,l=[g=c[0]];o<u;++o)A((d=c[o])[0],g)||A(d[1],g)?(_(g[0],d[1])>_(g[0],g[1])&&(g[1]=d[1]),_(d[0],g[1])>_(g[0],g[1])&&(g[0]=d[0])):l.push(g=d);for(var s,u,d,p=-1/0,g=(o=0,l[u=l.length-1]);o<=u;g=d,++o)d=l[o],(s=_(g[1],d[0]))>p&&(p=s,t=d[0],n=g[1])}return c=f=null,t===1/0||r===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,r],[n,a]]}}(),e.geo.centroid=function(t){mr=yr=xr=br=_r=wr=Ar=Mr=Tr=kr=Er=0,e.geo.stream(t,Br);var r=Tr,n=kr,a=Er,i=r*r+n*n+a*a;return i<Mt&&(r=wr,n=Ar,a=Mr,yr<At&&(r=xr,n=br,a=_r),(i=r*r+n*n+a*a)<Mt)?[NaN,NaN]:[Math.atan2(n,r)*Lt,It(a/Math.sqrt(i))*Lt]};var Br={sphere:P,point:jr,lineStart:Vr,lineEnd:Hr,polygonStart:function(){Br.lineStart=qr},polygonEnd:function(){Br.lineStart=Vr}};function jr(t,e){t*=St;var r=Math.cos(e*=St);Ur(r*Math.cos(t),r*Math.sin(t),Math.sin(e))}function Ur(t,e,r){xr+=(t-xr)/++mr,br+=(e-br)/mr,_r+=(r-_r)/mr}function Vr(){var t,e,r;function n(n,a){n*=St;var i=Math.cos(a*=St),o=i*Math.cos(n),l=i*Math.sin(n),s=Math.sin(a),u=Math.atan2(Math.sqrt((u=e*s-r*l)*u+(u=r*o-t*s)*u+(u=t*l-e*o)*u),t*o+e*l+r*s);yr+=u,wr+=u*(t+(t=o)),Ar+=u*(e+(e=l)),Mr+=u*(r+(r=s)),Ur(t,e,r)}Br.point=function(a,i){a*=St;var o=Math.cos(i*=St);t=o*Math.cos(a),e=o*Math.sin(a),r=Math.sin(i),Br.point=n,Ur(t,e,r)}}function Hr(){Br.point=jr}function qr(){var t,e,r,n,a;function i(t,e){t*=St;var i=Math.cos(e*=St),o=i*Math.cos(t),l=i*Math.sin(t),s=Math.sin(e),u=n*s-a*l,c=a*o-r*s,f=r*l-n*o,h=Math.sqrt(u*u+c*c+f*f),d=r*o+n*l+a*s,p=h&&-Dt(d)/h,g=Math.atan2(h,d);Tr+=p*u,kr+=p*c,Er+=p*f,yr+=g,wr+=g*(r+(r=o)),Ar+=g*(n+(n=l)),Mr+=g*(a+(a=s)),Ur(r,n,a)}Br.point=function(o,l){t=o,e=l,Br.point=i,o*=St;var s=Math.cos(l*=St);r=s*Math.cos(o),n=s*Math.sin(o),a=Math.sin(l),Ur(r,n,a)},Br.lineEnd=function(){i(t,e),Br.lineEnd=Hr,Br.point=jr}}function Gr(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])}),r}function Xr(){return!0}function Wr(t,e,r,n,a){var i=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r=t[0],n=t[e];if(Nr(r,n)){a.lineStart();for(var l=0;l<e;++l)a.point((r=t[l])[0],r[1]);a.lineEnd()}else{var s=new Zr(r,t,null,!0),u=new Zr(r,null,s,!1);s.o=u,i.push(s),o.push(u),u=new Zr(n,null,s=new Zr(n,t,null,!1),!0),s.o=u,i.push(s),o.push(u)}}}),o.sort(e),Yr(i),Yr(o),i.length){for(var l=0,s=r,u=o.length;l<u;++l)o[l].e=s=!s;for(var c,f,h=i[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,a.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(l=0,u=c.length;l<u;++l)a.point((f=c[l])[0],f[1]);else n(d.x,d.n.x,1,a);d=d.n}else{if(p)for(l=(c=d.p.z).length-1;l>=0;--l)a.point((f=c[l])[0],f[1]);else n(d.x,d.p.x,-1,a);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);a.lineEnd()}}}function Yr(t){if(e=t.length){for(var e,r,n=0,a=t[0];++n<e;)a.n=r=t[n],r.p=a,a=r;a.n=r=t[0],r.p=a}}function Zr(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Jr(t,r,n,a){return function(i,o){var l,s=r(o),u=i.invert(a[0],a[1]),c={point:f,lineStart:d,lineEnd:p,polygonStart:function(){c.point=b,c.lineStart=_,c.lineEnd=w,l=[],g=[]},polygonEnd:function(){c.point=f,c.lineStart=d,c.lineEnd=p,l=e.merge(l);var t=function(t,e){var r=t[0],n=t[1],a=[Math.sin(r),-Math.cos(r),0],i=0,o=0;Cr.reset();for(var l=0,s=e.length;l<s;++l){var u=e[l],c=u.length;if(c)for(var f=u[0],h=f[0],d=f[1]/2+Tt/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===c&&(v=0);var m=(t=u[v])[0],y=t[1]/2+Tt/4,x=Math.sin(y),b=Math.cos(y),_=m-h,w=_>=0?1:-1,A=w*_,M=A>Tt,T=p*x;if(Cr.add(Math.atan2(T*w*Math.sin(A),g*b+T*Math.cos(A))),i+=M?_+w*kt:_,M^h>=r^m>=r){var k=Dr(Or(f),Or(t));Fr(k);var E=Dr(a,k);Fr(E);var C=(M^_>=0?-1:1)*It(E[2]);(n>C||n===C&&(k[0]||k[1]))&&(o+=M^_>=0?1:-1)}if(!v++)break;h=m,p=x,g=b,f=t}}return(i<-At||i<At&&Cr<-At)^1&o}(u,g);l.length?(x||(o.polygonStart(),x=!0),Wr(l,Kr,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),l=g=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function f(e,r){var n=i(e,r);t(e=n[0],r=n[1])&&o.point(e,r)}function h(t,e){var r=i(t,e);s.point(r[0],r[1])}function d(){c.point=h,s.lineStart()}function p(){c.point=f,s.lineEnd()}var g,v,m=$r(),y=r(m),x=!1;function b(t,e){v.push([t,e]);var r=i(t,e);y.point(r[0],r[1])}function _(){y.lineStart(),v=[]}function w(){b(v[0][0],v[0][1]),y.lineEnd();var t,e=y.clean(),r=m.buffer(),n=r.length;if(v.pop(),g.push(v),v=null,n)if(1&e){var a,i=-1;if((n=(t=r[0]).length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++i<n;)o.point((a=t[i])[0],a[1]);o.lineEnd()}}else n>1&&2&e&&r.push(r.pop().concat(r.shift())),l.push(r.filter(Qr))}return c}}function Qr(t){return t.length>1}function $r(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,r){t.push([e,r])},lineEnd:P,buffer:function(){var r=e;return e=[],t=null,r},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Kr(t,e){return((t=t.x)[0]<0?t[1]-Ct-At:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-At:Ct-e[1])}var tn=Jr(Xr,function(t){var e,r=NaN,n=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,o){var l=i>0?Tt:-Tt,s=y(i-r);y(s-Tt)<At?(t.point(r,n=(n+o)/2>0?Ct:-Ct),t.point(a,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(i,n),e=0):a!==l&&s>=Tt&&(y(r-a)<At&&(r-=a*At),y(i-l)<At&&(i-=l*At),n=function(t,e,r,n){var a,i,o=Math.sin(t-r);return y(o)>At?Math.atan((Math.sin(e)*(i=Math.cos(n))*Math.sin(r)-Math.sin(n)*(a=Math.cos(e))*Math.sin(t))/(a*i*o)):(e+n)/2}(r,n,i,o),t.point(a,n),t.lineEnd(),t.lineStart(),t.point(l,n),e=0),t.point(r=i,n=o),a=l},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}},function(t,e,r,n){var a;if(null==t)a=r*Ct,n.point(-Tt,a),n.point(0,a),n.point(Tt,a),n.point(Tt,0),n.point(Tt,-a),n.point(0,-a),n.point(-Tt,-a),n.point(-Tt,0),n.point(-Tt,a);else if(y(t[0]-e[0])>At){var i=t[0]<e[0]?Tt:-Tt;a=r*i/2,n.point(-i,a),n.point(0,a),n.point(i,a)}else n.point(e[0],e[1])},[-Tt,-Tt/2]);function en(t,e,r,n){return function(a){var i,o=a.a,l=a.b,s=o.x,u=o.y,c=0,f=1,h=l.x-s,d=l.y-u;if(i=t-s,h||!(i>0)){if(i/=h,h<0){if(i<c)return;i<f&&(f=i)}else if(h>0){if(i>f)return;i>c&&(c=i)}if(i=r-s,h||!(i<0)){if(i/=h,h<0){if(i>f)return;i>c&&(c=i)}else if(h>0){if(i<c)return;i<f&&(f=i)}if(i=e-u,d||!(i>0)){if(i/=d,d<0){if(i<c)return;i<f&&(f=i)}else if(d>0){if(i>f)return;i>c&&(c=i)}if(i=n-u,d||!(i<0)){if(i/=d,d<0){if(i>f)return;i>c&&(c=i)}else if(d>0){if(i<c)return;i<f&&(f=i)}return c>0&&(a.a={x:s+c*h,y:u+c*d}),f<1&&(a.b={x:s+f*h,y:u+f*d}),a}}}}}}var rn=1e9;function nn(t,r,n,a){return function(s){var u,c,f,h,d,p,g,v,m,y,x,b=s,_=$r(),w=en(t,r,n,a),A={point:k,lineStart:function(){A.point=E,c&&c.push(f=[]);y=!0,m=!1,g=v=NaN},lineEnd:function(){u&&(E(h,d),p&&m&&_.rejoin(),u.push(_.buffer()));A.point=k,m&&s.lineEnd()},polygonStart:function(){s=_,u=[],c=[],x=!0},polygonEnd:function(){s=b,u=e.merge(u);var r=function(t){for(var e=0,r=c.length,n=t[1],a=0;a<r;++a)for(var i,o=1,l=c[a],s=l.length,u=l[0];o<s;++o)i=l[o],u[1]<=n?i[1]>n&&Rt(u,i,t)>0&&++e:i[1]<=n&&Rt(u,i,t)<0&&--e,u=i;return 0!==e}([t,a]),n=x&&r,i=u.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),M(null,null,1,s),s.lineEnd()),i&&Wr(u,o,r,M,s),s.polygonEnd()),u=c=f=null}};function M(e,o,s,u){var c=0,f=0;if(null==e||(c=i(e,s))!==(f=i(o,s))||l(e,o)<0^s>0)do{u.point(0===c||3===c?t:n,c>1?a:r)}while((c=(c+s+4)%4)!==f);else u.point(o[0],o[1])}function T(e,i){return t<=e&&e<=n&&r<=i&&i<=a}function k(t,e){T(t,e)&&s.point(t,e)}function E(t,e){var r=T(t=Math.max(-rn,Math.min(rn,t)),e=Math.max(-rn,Math.min(rn,e)));if(c&&f.push([t,e]),y)h=t,d=e,p=r,y=!1,r&&(s.lineStart(),s.point(t,e));else if(r&&m)s.point(t,e);else{var n={a:{x:g,y:v},b:{x:t,y:e}};w(n)?(m||(s.lineStart(),s.point(n.a.x,n.a.y)),s.point(n.b.x,n.b.y),r||s.lineEnd(),x=!1):r&&(s.lineStart(),s.point(t,e),x=!1)}g=t,v=e,m=r}return A};function i(e,a){return y(e[0]-t)<At?a>0?0:3:y(e[0]-n)<At?a>0?2:1:y(e[1]-r)<At?a>0?1:0:a>0?3:2}function o(t,e){return l(t.x,e.x)}function l(t,e){var r=i(t,1),n=i(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}}function an(t){var e=0,r=Tt/3,n=En(t),a=n(e,r);return a.parallels=function(t){return arguments.length?n(e=t[0]*Tt/180,r=t[1]*Tt/180):[e/Tt*180,r/Tt*180]},a}function on(t,e){var r=Math.sin(t),n=(r+Math.sin(e))/2,a=1+r*(2*n-r),i=Math.sqrt(a)/n;function o(t,e){var r=Math.sqrt(a-2*n*Math.sin(e))/n;return[r*Math.sin(t*=n),i-r*Math.cos(t)]}return o.invert=function(t,e){var r=i-e;return[Math.atan2(t,r)/n,It((a-(t*t+r*r)*n*n)/(2*n))]},o}e.geo.clipExtent=function(){var t,e,r,n,a,i,o={stream:function(t){return a&&(a.valid=!1),(a=i(t)).valid=!0,a},extent:function(l){return arguments.length?(i=nn(t=+l[0][0],e=+l[0][1],r=+l[1][0],n=+l[1][1]),a&&(a.valid=!1,a=null),o):[[t,e],[r,n]]}};return o.extent([[0,0],[960,500]])},(e.geo.conicEqualArea=function(){return an(on)}).raw=on,e.geo.albers=function(){return e.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},e.geo.albersUsa=function(){var t,r,n,a,i=e.geo.albers(),o=e.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=e.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(e,r){t=[e,r]}};function u(e){var i=e[0],o=e[1];return t=null,r(i,o),t||(n(i,o),t)||a(i,o),t}return u.invert=function(t){var e=i.scale(),r=i.translate(),n=(t[0]-r[0])/e,a=(t[1]-r[1])/e;return(a>=.12&&a<.234&&n>=-.425&&n<-.214?o:a>=.166&&a<.234&&n>=-.214&&n<-.115?l:i).invert(t)},u.stream=function(t){var e=i.stream(t),r=o.stream(t),n=l.stream(t);return{point:function(t,a){e.point(t,a),r.point(t,a),n.point(t,a)},sphere:function(){e.sphere(),r.sphere(),n.sphere()},lineStart:function(){e.lineStart(),r.lineStart(),n.lineStart()},lineEnd:function(){e.lineEnd(),r.lineEnd(),n.lineEnd()},polygonStart:function(){e.polygonStart(),r.polygonStart(),n.polygonStart()},polygonEnd:function(){e.polygonEnd(),r.polygonEnd(),n.polygonEnd()}}},u.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),l.precision(t),u):i.precision()},u.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),l.scale(t),u.translate(i.translate())):i.scale()},u.translate=function(t){if(!arguments.length)return i.translate();var e=i.scale(),c=+t[0],f=+t[1];return r=i.translate(t).clipExtent([[c-.455*e,f-.238*e],[c+.455*e,f+.238*e]]).stream(s).point,n=o.translate([c-.307*e,f+.201*e]).clipExtent([[c-.425*e+At,f+.12*e+At],[c-.214*e-At,f+.234*e-At]]).stream(s).point,a=l.translate([c-.205*e,f+.212*e]).clipExtent([[c-.214*e+At,f+.166*e+At],[c-.115*e-At,f+.234*e-At]]).stream(s).point,u},u.scale(1070)};var ln,sn,un,cn,fn,hn,dn={point:P,lineStart:P,lineEnd:P,polygonStart:function(){sn=0,dn.lineStart=pn},polygonEnd:function(){dn.lineStart=dn.lineEnd=dn.point=P,ln+=y(sn/2)}};function pn(){var t,e,r,n;function a(t,e){sn+=n*t-r*e,r=t,n=e}dn.point=function(i,o){dn.point=a,t=r=i,e=n=o},dn.lineEnd=function(){a(t,e)}}var gn={point:function(t,e){t<un&&(un=t);t>fn&&(fn=t);e<cn&&(cn=e);e>hn&&(hn=e)},lineStart:P,lineEnd:P,polygonStart:P,polygonEnd:P};function vn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var mn,yn={point:xn,lineStart:bn,lineEnd:_n,polygonStart:function(){yn.lineStart=wn},polygonEnd:function(){yn.point=xn,yn.lineStart=bn,yn.lineEnd=_n}};function xn(t,e){xr+=t,br+=e,++_r}function bn(){var t,e;function r(r,n){var a=r-t,i=n-e,o=Math.sqrt(a*a+i*i);wr+=o*(t+r)/2,Ar+=o*(e+n)/2,Mr+=o,xn(t=r,e=n)}yn.point=function(n,a){yn.point=r,xn(t=n,e=a)}}function _n(){yn.point=xn}function wn(){var t,e,r,n;function a(t,e){var a=t-r,i=e-n,o=Math.sqrt(a*a+i*i);wr+=o*(r+t)/2,Ar+=o*(n+e)/2,Mr+=o,Tr+=(o=n*t-r*e)*(r+t),kr+=o*(n+e),Er+=3*o,xn(r=t,n=e)}yn.point=function(i,o){yn.point=a,xn(t=r=i,e=n=o)},yn.lineEnd=function(){a(t,e)}}function An(t){var e=.5,r=Math.cos(30*St),n=16;function a(e){return(n?function(e){var r,a,o,l,s,u,c,f,h,d,p,g,v={point:m,lineStart:y,lineEnd:b,polygonStart:function(){e.polygonStart(),v.lineStart=_},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function m(r,n){r=t(r,n),e.point(r[0],r[1])}function y(){f=NaN,v.point=x,e.lineStart()}function x(r,a){var o=Or([r,a]),l=t(r,a);i(f,h,c,d,p,g,f=l[0],h=l[1],c=r,d=o[0],p=o[1],g=o[2],n,e),e.point(f,h)}function b(){v.point=m,e.lineEnd()}function _(){y(),v.point=w,v.lineEnd=A}function w(t,e){x(r=t,e),a=f,o=h,l=d,s=p,u=g,v.point=x}function A(){i(f,h,c,d,p,g,a,o,r,l,s,u,n,e),v.lineEnd=b,b()}return v}:function(e){return Tn(e,function(r,n){r=t(r,n),e.point(r[0],r[1])})})(e)}function i(n,a,o,l,s,u,c,f,h,d,p,g,v,m){var x=c-n,b=f-a,_=x*x+b*b;if(_>4*e&&v--){var w=l+d,A=s+p,M=u+g,T=Math.sqrt(w*w+A*A+M*M),k=Math.asin(M/=T),E=y(y(M)-1)<At||y(o-h)<At?(o+h)/2:Math.atan2(A,w),C=t(E,k),S=C[0],L=C[1],O=S-n,R=L-a,D=b*O-x*R;(D*D/_>e||y((x*O+b*R)/_-.5)>.3||l*d+s*p+u*g<r)&&(i(n,a,o,l,s,u,S,L,E,w/=T,A/=T,M,v,m),m.point(S,L),i(S,L,E,w,A,M,c,f,h,d,p,g,v,m))}}return a.precision=function(t){return arguments.length?(n=(e=t*t)>0&&16,a):Math.sqrt(e)},a}function Mn(t){this.stream=t}function Tn(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function kn(t){return En(function(){return t})()}function En(t){var r,n,a,i,o,l,s=An(function(t,e){return[(t=r(t,e))[0]*u+i,o-t[1]*u]}),u=150,c=480,f=250,h=0,d=0,p=0,g=0,v=0,m=tn,x=O,b=null,_=null;function w(t){return[(t=a(t[0]*St,t[1]*St))[0]*u+i,o-t[1]*u]}function A(t){return(t=a.invert((t[0]-i)/u,(o-t[1])/u))&&[t[0]*Lt,t[1]*Lt]}function M(){a=Gr(n=On(p,g,v),r);var t=r(h,d);return i=c-t[0]*u,o=f+t[1]*u,T()}function T(){return l&&(l.valid=!1,l=null),w}return w.stream=function(t){return l&&(l.valid=!1),(l=Cn(m(n,s(x(t))))).valid=!0,l},w.clipAngle=function(t){return arguments.length?(m=null==t?(b=t,tn):function(t){var e=Math.cos(t),r=e>0,n=y(e)>At;return Jr(a,function(t){var e,l,s,u,c;return{lineStart:function(){u=s=!1,c=1},point:function(f,h){var d,p=[f,h],g=a(f,h),v=r?g?0:o(f,h):g?o(f+(f<0?Tt:-Tt),h):0;if(!e&&(u=s=g)&&t.lineStart(),g!==s&&(d=i(e,p),(Nr(e,d)||Nr(p,d))&&(p[0]+=At,p[1]+=At,g=a(p[0],p[1]))),g!==s)c=0,g?(t.lineStart(),d=i(p,e),t.point(d[0],d[1])):(d=i(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(n&&e&&r^g){var m;v&l||!(m=i(p,e,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&Nr(e,p)||t.point(p[0],p[1]),e=p,s=g,l=v},lineEnd:function(){s&&t.lineEnd(),e=null},clean:function(){return c|(u&&s)<<1}}},Pn(t,6*St),r?[0,-t]:[-Tt,t-Tt]);function a(t,r){return Math.cos(t)*Math.cos(r)>e}function i(t,r,n){var a=[1,0,0],i=Dr(Or(t),Or(r)),o=Rr(i,i),l=i[0],s=o-l*l;if(!s)return!n&&t;var u=e*o/s,c=-e*l/s,f=Dr(a,i),h=Pr(a,u);Ir(h,Pr(i,c));var d=f,p=Rr(h,d),g=Rr(d,d),v=p*p-g*(Rr(h,h)-1);if(!(v<0)){var m=Math.sqrt(v),x=Pr(d,(-p-m)/g);if(Ir(x,h),x=zr(x),!n)return x;var b,_=t[0],w=r[0],A=t[1],M=r[1];w<_&&(b=_,_=w,w=b);var T=w-_,k=y(T-Tt)<At;if(!k&&M<A&&(b=A,A=M,M=b),k||T<At?k?A+M>0^x[1]<(y(x[0]-_)<At?A:M):A<=x[1]&&x[1]<=M:T>Tt^(_<=x[0]&&x[0]<=w)){var E=Pr(d,(-p+m)/g);return Ir(E,h),[x,zr(E)]}}}function o(e,n){var a=r?t:Tt-t,i=0;return e<-a?i|=1:e>a&&(i|=2),n<-a?i|=4:n>a&&(i|=8),i}}((b=+t)*St),T()):b},w.clipExtent=function(t){return arguments.length?(_=t,x=t?nn(t[0][0],t[0][1],t[1][0],t[1][1]):O,T()):_},w.scale=function(t){return arguments.length?(u=+t,M()):u},w.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],M()):[c,f]},w.center=function(t){return arguments.length?(h=t[0]%360*St,d=t[1]%360*St,M()):[h*Lt,d*Lt]},w.rotate=function(t){return arguments.length?(p=t[0]%360*St,g=t[1]%360*St,v=t.length>2?t[2]%360*St:0,M()):[p*Lt,g*Lt,v*Lt]},e.rebind(w,s,"precision"),function(){return r=t.apply(this,arguments),w.invert=r.invert&&A,M()}}function Cn(t){return Tn(t,function(e,r){t.point(e*St,r*St)})}function Sn(t,e){return[t,e]}function Ln(t,e){return[t>Tt?t-kt:t<-Tt?t+kt:t,e]}function On(t,e,r){return t?e||r?Gr(Dn(t),In(e,r)):Dn(t):e||r?In(e,r):Ln}function Rn(t){return function(e,r){return[(e+=t)>Tt?e-kt:e<-Tt?e+kt:e,r]}}function Dn(t){var e=Rn(t);return e.invert=Rn(-t),e}function In(t,e){var r=Math.cos(t),n=Math.sin(t),a=Math.cos(e),i=Math.sin(e);function o(t,e){var o=Math.cos(e),l=Math.cos(t)*o,s=Math.sin(t)*o,u=Math.sin(e),c=u*r+l*n;return[Math.atan2(s*a-c*i,l*r-u*n),It(c*a+s*i)]}return o.invert=function(t,e){var o=Math.cos(e),l=Math.cos(t)*o,s=Math.sin(t)*o,u=Math.sin(e),c=u*a-s*i;return[Math.atan2(s*a+u*i,l*r+c*n),It(c*r-l*n)]},o}function Pn(t,e){var r=Math.cos(t),n=Math.sin(t);return function(a,i,o,l){var s=o*e;null!=a?(a=Fn(r,a),i=Fn(r,i),(o>0?a<i:a>i)&&(a+=o*kt)):(a=t+o*kt,i=t-.5*s);for(var u,c=a;o>0?c>i:c<i;c-=s)l.point((u=zr([r,-n*Math.cos(c),-n*Math.sin(c)]))[0],u[1])}}function Fn(t,e){var r=Or(e);r[0]-=t,Fr(r);var n=Dt(-r[1]);return((-r[2]<0?-n:n)+2*Math.PI-At)%(2*Math.PI)}function zn(t,r,n){var a=e.range(t,r-At,n).concat(r);return function(t){return a.map(function(e){return[t,e]})}}function Nn(t,r,n){var a=e.range(t,r-At,n).concat(r);return function(t){return a.map(function(e){return[e,t]})}}function Bn(t){return t.source}function jn(t){return t.target}e.geo.path=function(){var t,r,n,a,i,o=4.5;function l(t){return t&&("function"==typeof o&&a.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=n(a)),e.geo.stream(t,i)),a.result()}function s(){return i=null,l}return l.area=function(t){return ln=0,e.geo.stream(t,n(dn)),ln},l.centroid=function(t){return xr=br=_r=wr=Ar=Mr=Tr=kr=Er=0,e.geo.stream(t,n(yn)),Er?[Tr/Er,kr/Er]:Mr?[wr/Mr,Ar/Mr]:_r?[xr/_r,br/_r]:[NaN,NaN]},l.bounds=function(t){return fn=hn=-(un=cn=1/0),e.geo.stream(t,n(gn)),[[un,cn],[fn,hn]]},l.projection=function(e){return arguments.length?(n=(t=e)?e.stream||(r=e,a=An(function(t,e){return r([t*Lt,e*Lt])}),function(t){return Cn(a(t))}):O,s()):t;var r,a},l.context=function(t){return arguments.length?(a=null==(r=t)?new function(){var t=vn(4.5),e=[],r={point:n,lineStart:function(){r.point=a},lineEnd:o,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.lineEnd=o,r.point=n},pointRadius:function(e){return t=vn(e),r},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function n(r,n){e.push("M",r,",",n,t)}function a(t,n){e.push("M",t,",",n),r.point=i}function i(t,r){e.push("L",t,",",r)}function o(){r.point=n}function l(){e.push("Z")}return r}:new function(t){var e=4.5,r={point:n,lineStart:function(){r.point=a},lineEnd:o,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.lineEnd=o,r.point=n},pointRadius:function(t){return e=t,r},result:P};function n(r,n){t.moveTo(r+e,n),t.arc(r,n,e,0,kt)}function a(e,n){t.moveTo(e,n),r.point=i}function i(e,r){t.lineTo(e,r)}function o(){r.point=n}function l(){t.closePath()}return r}(t),"function"!=typeof o&&a.pointRadius(o),s()):r},l.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(a.pointRadius(+t),+t),l):o},l.projection(e.geo.albersUsa()).context(null)},e.geo.transform=function(t){return{stream:function(e){var r=new Mn(e);for(var n in t)r[n]=t[n];return r}}},Mn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},e.geo.projection=kn,e.geo.projectionMutator=En,(e.geo.equirectangular=function(){return kn(Sn)}).raw=Sn.invert=Sn,e.geo.rotation=function(t){function e(e){return(e=t(e[0]*St,e[1]*St))[0]*=Lt,e[1]*=Lt,e}return t=On(t[0]%360*St,t[1]*St,t.length>2?t[2]*St:0),e.invert=function(e){return(e=t.invert(e[0]*St,e[1]*St))[0]*=Lt,e[1]*=Lt,e},e},Ln.invert=Sn,e.geo.circle=function(){var t,e,r=[0,0],n=6;function a(){var t="function"==typeof r?r.apply(this,arguments):r,n=On(-t[0]*St,-t[1]*St,0).invert,a=[];return e(null,null,1,{point:function(t,e){a.push(t=n(t,e)),t[0]*=Lt,t[1]*=Lt}}),{type:"Polygon",coordinates:[a]}}return a.origin=function(t){return arguments.length?(r=t,a):r},a.angle=function(r){return arguments.length?(e=Pn((t=+r)*St,n*St),a):t},a.precision=function(r){return arguments.length?(e=Pn(t*St,(n=+r)*St),a):n},a.angle(90)},e.geo.distance=function(t,e){var r,n=(e[0]-t[0])*St,a=t[1]*St,i=e[1]*St,o=Math.sin(n),l=Math.cos(n),s=Math.sin(a),u=Math.cos(a),c=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((r=f*o)*r+(r=u*c-s*f*l)*r),s*c+u*f*l)},e.geo.graticule=function(){var t,r,n,a,i,o,l,s,u,c,f,h,d=10,p=d,g=90,v=360,m=2.5;function x(){return{type:"MultiLineString",coordinates:b()}}function b(){return e.range(Math.ceil(a/g)*g,n,g).map(f).concat(e.range(Math.ceil(s/v)*v,l,v).map(h)).concat(e.range(Math.ceil(r/d)*d,t,d).filter(function(t){return y(t%g)>At}).map(u)).concat(e.range(Math.ceil(o/p)*p,i,p).filter(function(t){return y(t%v)>At}).map(c))}return x.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},x.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(h(l).slice(1),f(n).reverse().slice(1),h(s).reverse().slice(1))]}},x.extent=function(t){return arguments.length?x.majorExtent(t).minorExtent(t):x.minorExtent()},x.majorExtent=function(t){return arguments.length?(a=+t[0][0],n=+t[1][0],s=+t[0][1],l=+t[1][1],a>n&&(t=a,a=n,n=t),s>l&&(t=s,s=l,l=t),x.precision(m)):[[a,s],[n,l]]},x.minorExtent=function(e){return arguments.length?(r=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],r>t&&(e=r,r=t,t=e),o>i&&(e=o,o=i,i=e),x.precision(m)):[[r,o],[t,i]]},x.step=function(t){return arguments.length?x.majorStep(t).minorStep(t):x.minorStep()},x.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],x):[g,v]},x.minorStep=function(t){return arguments.length?(d=+t[0],p=+t[1],x):[d,p]},x.precision=function(e){return arguments.length?(m=+e,u=zn(o,i,90),c=Nn(r,t,m),f=zn(s,l,90),h=Nn(a,n,m),x):m},x.majorExtent([[-180,-90+At],[180,90-At]]).minorExtent([[-180,-80-At],[180,80+At]])},e.geo.greatArc=function(){var t,r,n=Bn,a=jn;function i(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),r||a.apply(this,arguments)]}}return i.distance=function(){return e.geo.distance(t||n.apply(this,arguments),r||a.apply(this,arguments))},i.source=function(e){return arguments.length?(n=e,t="function"==typeof e?null:e,i):n},i.target=function(t){return arguments.length?(a=t,r="function"==typeof t?null:t,i):a},i.precision=function(){return arguments.length?i:0},i},e.geo.interpolate=function(t,e){return r=t[0]*St,n=t[1]*St,a=e[0]*St,i=e[1]*St,o=Math.cos(n),l=Math.sin(n),s=Math.cos(i),u=Math.sin(i),c=o*Math.cos(r),f=o*Math.sin(r),h=s*Math.cos(a),d=s*Math.sin(a),p=2*Math.asin(Math.sqrt(Ft(i-n)+o*s*Ft(a-r))),g=1/Math.sin(p),(v=p?function(t){var e=Math.sin(t*=p)*g,r=Math.sin(p-t)*g,n=r*c+e*h,a=r*f+e*d,i=r*l+e*u;return[Math.atan2(a,n)*Lt,Math.atan2(i,Math.sqrt(n*n+a*a))*Lt]}:function(){return[r*Lt,n*Lt]}).distance=p,v;var r,n,a,i,o,l,s,u,c,f,h,d,p,g,v},e.geo.length=function(t){return mn=0,e.geo.stream(t,Un),mn};var Un={sphere:P,point:P,lineStart:function(){var t,e,r;function n(n,a){var i=Math.sin(a*=St),o=Math.cos(a),l=y((n*=St)-t),s=Math.cos(l);mn+=Math.atan2(Math.sqrt((l=o*Math.sin(l))*l+(l=r*i-e*o*s)*l),e*i+r*o*s),t=n,e=i,r=o}Un.point=function(a,i){t=a*St,e=Math.sin(i*=St),r=Math.cos(i),Un.point=n},Un.lineEnd=function(){Un.point=Un.lineEnd=P}},lineEnd:P,polygonStart:P,polygonEnd:P};function Vn(t,e){function r(e,r){var n=Math.cos(e),a=Math.cos(r),i=t(n*a);return[i*a*Math.sin(e),i*Math.sin(r)]}return r.invert=function(t,r){var n=Math.sqrt(t*t+r*r),a=e(n),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(t*i,n*o),Math.asin(n&&r*i/n)]},r}var Hn=Vn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(e.geo.azimuthalEqualArea=function(){return kn(Hn)}).raw=Hn;var qn=Vn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},O);function Gn(t,e){var r=Math.cos(t),n=function(t){return Math.tan(Tt/4+t/2)},a=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(n(e)/n(t)),i=r*Math.pow(n(t),a)/a;if(!a)return Yn;function o(t,e){i>0?e<-Ct+At&&(e=-Ct+At):e>Ct-At&&(e=Ct-At);var r=i/Math.pow(n(e),a);return[r*Math.sin(a*t),i-r*Math.cos(a*t)]}return o.invert=function(t,e){var r=i-e,n=Ot(a)*Math.sqrt(t*t+r*r);return[Math.atan2(t,r)/a,2*Math.atan(Math.pow(i/n,1/a))-Ct]},o}function Xn(t,e){var r=Math.cos(t),n=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),a=r/n+t;if(y(n)<At)return Sn;function i(t,e){var r=a-e;return[r*Math.sin(n*t),a-r*Math.cos(n*t)]}return i.invert=function(t,e){var r=a-e;return[Math.atan2(t,r)/n,a-Ot(n)*Math.sqrt(t*t+r*r)]},i}(e.geo.azimuthalEquidistant=function(){return kn(qn)}).raw=qn,(e.geo.conicConformal=function(){return an(Gn)}).raw=Gn,(e.geo.conicEquidistant=function(){return an(Xn)}).raw=Xn;var Wn=Vn(function(t){return 1/t},Math.atan);function Yn(t,e){return[t,Math.log(Math.tan(Tt/4+e/2))]}function Zn(t){var e,r=kn(t),n=r.scale,a=r.translate,i=r.clipExtent;return r.scale=function(){var t=n.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.translate=function(){var t=a.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.clipExtent=function(t){var o=i.apply(r,arguments);if(o===r){if(e=null==t){var l=Tt*n(),s=a();i([[s[0]-l,s[1]-l],[s[0]+l,s[1]+l]])}}else e&&(o=null);return o},r.clipExtent(null)}(e.geo.gnomonic=function(){return kn(Wn)}).raw=Wn,Yn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ct]},(e.geo.mercator=function(){return Zn(Yn)}).raw=Yn;var Jn=Vn(function(){return 1},Math.asin);(e.geo.orthographic=function(){return kn(Jn)}).raw=Jn;var Qn=Vn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function $n(t,e){return[Math.log(Math.tan(Tt/4+e/2)),-t]}function Kn(t){return t[0]}function ta(t){return t[1]}function ea(t){for(var e=t.length,r=[0,1],n=2,a=2;a<e;a++){for(;n>1&&Rt(t[r[n-2]],t[r[n-1]],t[a])<=0;)--n;r[n++]=a}return r.slice(0,n)}function ra(t,e){return t[0]-e[0]||t[1]-e[1]}(e.geo.stereographic=function(){return kn(Qn)}).raw=Qn,$n.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ct]},(e.geo.transverseMercator=function(){var t=Zn($n),e=t.center,r=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?r([t[0],t[1],t.length>2?t[2]+90:90]):[(t=r())[0],t[1],t[2]-90]},r([0,0,90])}).raw=$n,e.geom={},e.geom.hull=function(t){var e=Kn,r=ta;if(arguments.length)return n(t);function n(t){if(t.length<3)return[];var n,a=ve(e),i=ve(r),o=t.length,l=[],s=[];for(n=0;n<o;n++)l.push([+a.call(this,t[n],n),+i.call(this,t[n],n),n]);for(l.sort(ra),n=0;n<o;n++)s.push([l[n][0],-l[n][1]]);var u=ea(l),c=ea(s),f=c[0]===u[0],h=c[c.length-1]===u[u.length-1],d=[];for(n=u.length-1;n>=0;--n)d.push(t[l[u[n]][2]]);for(n=+f;n<c.length-h;++n)d.push(t[l[c[n]][2]]);return d}return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n},e.geom.polygon=function(t){return V(t,na),t};var na=e.geom.polygon.prototype=[];function aa(t,e,r){return(r[0]-e[0])*(t[1]-e[1])<(r[1]-e[1])*(t[0]-e[0])}function ia(t,e,r,n){var a=t[0],i=r[0],o=e[0]-a,l=n[0]-i,s=t[1],u=r[1],c=e[1]-s,f=n[1]-u,h=(l*(s-u)-f*(a-i))/(f*o-l*c);return[a+h*o,s+h*c]}function oa(t){var e=t[0],r=t[t.length-1];return!(e[0]-r[0]||e[1]-r[1])}na.area=function(){for(var t,e=-1,r=this.length,n=this[r-1],a=0;++e<r;)t=n,n=this[e],a+=t[1]*n[0]-t[0]*n[1];return.5*a},na.centroid=function(t){var e,r,n=-1,a=this.length,i=0,o=0,l=this[a-1];for(arguments.length||(t=-1/(6*this.area()));++n<a;)e=l,l=this[n],r=e[0]*l[1]-l[0]*e[1],i+=(e[0]+l[0])*r,o+=(e[1]+l[1])*r;return[i*t,o*t]},na.clip=function(t){for(var e,r,n,a,i,o,l=oa(t),s=-1,u=this.length-oa(this),c=this[u-1];++s<u;){for(e=t.slice(),t.length=0,a=this[s],i=e[(n=e.length-l)-1],r=-1;++r<n;)aa(o=e[r],c,a)?(aa(i,c,a)||t.push(ia(i,o,c,a)),t.push(o)):aa(i,c,a)&&t.push(ia(i,o,c,a)),i=o;l&&t.push(t[0]),c=a}return t};var la,sa,ua,ca,fa,ha=[],da=[];function pa(t){var e=ha.pop()||new function(){La(this),this.edge=this.site=this.circle=null};return e.site=t,e}function ga(t){Aa(t),ua.remove(t),ha.push(t),La(t)}function va(t){var e=t.circle,r=e.x,n=e.cy,a={x:r,y:n},i=t.P,o=t.N,l=[t];ga(t);for(var s=i;s.circle&&y(r-s.circle.x)<At&&y(n-s.circle.cy)<At;)i=s.P,l.unshift(s),ga(s),s=i;l.unshift(s),Aa(s);for(var u=o;u.circle&&y(r-u.circle.x)<At&&y(n-u.circle.cy)<At;)o=u.N,l.push(u),ga(u),u=o;l.push(u),Aa(u);var c,f=l.length;for(c=1;c<f;++c)u=l[c],s=l[c-1],Ea(u.edge,s.site,u.site,a);s=l[0],(u=l[f-1]).edge=ka(s.site,u.site,null,a),wa(s),wa(u)}function ma(t){for(var e,r,n,a,i=t.x,o=t.y,l=ua._;l;)if((n=ya(l,o)-i)>At)l=l.L;else{if(!((a=i-xa(l,o))>At)){n>-At?(e=l.P,r=l):a>-At?(e=l,r=l.N):e=r=l;break}if(!l.R){e=l;break}l=l.R}var s=pa(t);if(ua.insert(e,s),e||r){if(e===r)return Aa(e),r=pa(e.site),ua.insert(s,r),s.edge=r.edge=ka(e.site,s.site),wa(e),void wa(r);if(r){Aa(e),Aa(r);var u=e.site,c=u.x,f=u.y,h=t.x-c,d=t.y-f,p=r.site,g=p.x-c,v=p.y-f,m=2*(h*v-d*g),y=h*h+d*d,x=g*g+v*v,b={x:(v*y-d*x)/m+c,y:(h*x-g*y)/m+f};Ea(r.edge,u,p,b),s.edge=ka(u,t,null,b),r.edge=ka(t,p,null,b),wa(e),wa(r)}else s.edge=ka(e.site,s.site)}}function ya(t,e){var r=t.site,n=r.x,a=r.y,i=a-e;if(!i)return n;var o=t.P;if(!o)return-1/0;var l=(r=o.site).x,s=r.y,u=s-e;if(!u)return l;var c=l-n,f=1/i-1/u,h=c/u;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*u)-s+u/2+a-i/2)))/f+n:(n+l)/2}function xa(t,e){var r=t.N;if(r)return ya(r,e);var n=t.site;return n.y===e?n.x:1/0}function ba(t){this.site=t,this.edges=[]}function _a(t,e){return e.angle-t.angle}function wa(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,a=t.site,i=r.site;if(n!==i){var o=a.x,l=a.y,s=n.x-o,u=n.y-l,c=i.x-o,f=2*(s*(v=i.y-l)-u*c);if(!(f>=-Mt)){var h=s*s+u*u,d=c*c+v*v,p=(v*h-u*d)/f,g=(s*d-c*h)/f,v=g+l,m=da.pop()||new function(){La(this),this.x=this.y=this.arc=this.site=this.cy=null};m.arc=t,m.site=a,m.x=p+o,m.y=v+Math.sqrt(p*p+g*g),m.cy=v,t.circle=m;for(var y=null,x=fa._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}fa.insert(y,m),y||(ca=m)}}}}function Aa(t){var e=t.circle;e&&(e.P||(ca=e.N),fa.remove(e),da.push(e),La(e),t.circle=null)}function Ma(t,e){var r=t.b;if(r)return!0;var n,a,i=t.a,o=e[0][0],l=e[1][0],s=e[0][1],u=e[1][1],c=t.l,f=t.r,h=c.x,d=c.y,p=f.x,g=f.y,v=(h+p)/2,m=(d+g)/2;if(g===d){if(v<o||v>=l)return;if(h>p){if(i){if(i.y>=u)return}else i={x:v,y:s};r={x:v,y:u}}else{if(i){if(i.y<s)return}else i={x:v,y:u};r={x:v,y:s}}}else if(a=m-(n=(h-p)/(g-d))*v,n<-1||n>1)if(h>p){if(i){if(i.y>=u)return}else i={x:(s-a)/n,y:s};r={x:(u-a)/n,y:u}}else{if(i){if(i.y<s)return}else i={x:(u-a)/n,y:u};r={x:(s-a)/n,y:s}}else if(d<g){if(i){if(i.x>=l)return}else i={x:o,y:n*o+a};r={x:l,y:n*l+a}}else{if(i){if(i.x<o)return}else i={x:l,y:n*l+a};r={x:o,y:n*o+a}}return t.a=i,t.b=r,!0}function Ta(t,e){this.l=t,this.r=e,this.a=this.b=null}function ka(t,e,r,n){var a=new Ta(t,e);return la.push(a),r&&Ea(a,t,e,r),n&&Ea(a,e,t,n),sa[t.i].edges.push(new Ca(a,t,e)),sa[e.i].edges.push(new Ca(a,e,t)),a}function Ea(t,e,r,n){t.a||t.b?t.l===r?t.b=n:t.a=n:(t.a=n,t.l=e,t.r=r)}function Ca(t,e,r){var n=t.a,a=t.b;this.edge=t,this.site=e,this.angle=r?Math.atan2(r.y-e.y,r.x-e.x):t.l===e?Math.atan2(a.x-n.x,n.y-a.y):Math.atan2(n.x-a.x,a.y-n.y)}function Sa(){this._=null}function La(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Oa(t,e){var r=e,n=e.R,a=r.U;a?a.L===r?a.L=n:a.R=n:t._=n,n.U=a,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function Ra(t,e){var r=e,n=e.L,a=r.U;a?a.L===r?a.L=n:a.R=n:t._=n,n.U=a,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function Da(t){for(;t.L;)t=t.L;return t}function Ia(t,e){var r,n,a,i=t.sort(Pa).pop();for(la=[],sa=new Array(t.length),ua=new Sa,fa=new Sa;;)if(a=ca,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===r&&i.y===n||(sa[i.i]=new ba(i),ma(i),r=i.x,n=i.y),i=t.pop();else{if(!a)break;va(a.arc)}e&&(function(t){for(var e,r=la,n=en(t[0][0],t[0][1],t[1][0],t[1][1]),a=r.length;a--;)(!Ma(e=r[a],t)||!n(e)||y(e.a.x-e.b.x)<At&&y(e.a.y-e.b.y)<At)&&(e.a=e.b=null,r.splice(a,1))}(e),function(t){for(var e,r,n,a,i,o,l,s,u,c,f=t[0][0],h=t[1][0],d=t[0][1],p=t[1][1],g=sa,v=g.length;v--;)if((i=g[v])&&i.prepare())for(s=(l=i.edges).length,o=0;o<s;)n=(c=l[o].end()).x,a=c.y,e=(u=l[++o%s].start()).x,r=u.y,(y(n-e)>At||y(a-r)>At)&&(l.splice(o,0,new Ca((m=i.site,x=c,b=y(n-f)<At&&p-a>At?{x:f,y:y(e-f)<At?r:p}:y(a-p)<At&&h-n>At?{x:y(r-p)<At?e:h,y:p}:y(n-h)<At&&a-d>At?{x:h,y:y(e-h)<At?r:d}:y(a-d)<At&&n-f>At?{x:y(r-d)<At?e:f,y:d}:null,_=void 0,_=new Ta(m,null),_.a=x,_.b=b,la.push(_),_),i.site,null)),++s);var m,x,b,_}(e));var o={cells:sa,edges:la};return ua=fa=la=sa=null,o}function Pa(t,e){return e.y-t.y||e.x-t.x}ba.prototype.prepare=function(){for(var t,e=this.edges,r=e.length;r--;)(t=e[r].edge).b&&t.a||e.splice(r,1);return e.sort(_a),e.length},Ca.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Sa.prototype={insert:function(t,e){var r,n,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=Da(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(a=n.R)&&a.C?(r.C=a.C=!1,n.C=!0,t=n):(t===r.R&&(Oa(this,r),r=(t=r).U),r.C=!1,n.C=!0,Ra(this,n)):(a=n.L)&&a.C?(r.C=a.C=!1,n.C=!0,t=n):(t===r.L&&(Ra(this,r),r=(t=r).U),r.C=!1,n.C=!0,Oa(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,a=t.U,i=t.L,o=t.R;if(r=i?o?Da(o):i:o,a?a.L===t?a.L=r:a.R=r:this._=r,i&&o?(n=r.C,r.C=t.C,r.L=i,i.U=r,r!==o?(a=r.U,r.U=t.U,t=r.R,a.L=t,r.R=o,o.U=r):(r.U=a,a=r,t=r.R)):(n=t.C,t=r),t&&(t.U=a),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===a.L){if((e=a.R).C&&(e.C=!1,a.C=!0,Oa(this,a),e=a.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ra(this,e),e=a.R),e.C=a.C,a.C=e.R.C=!1,Oa(this,a),t=this._;break}}else if((e=a.L).C&&(e.C=!1,a.C=!0,Ra(this,a),e=a.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Oa(this,e),e=a.L),e.C=a.C,a.C=e.L.C=!1,Ra(this,a),t=this._;break}e.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}},e.geom.voronoi=function(t){var e=Kn,r=ta,n=e,a=r,i=Fa;if(t)return o(t);function o(t){var e=new Array(t.length),r=i[0][0],n=i[0][1],a=i[1][0],o=i[1][1];return Ia(l(t),i).cells.forEach(function(i,l){var s=i.edges,u=i.site;(e[l]=s.length?s.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=r&&u.x<=a&&u.y>=n&&u.y<=o?[[r,o],[a,o],[a,n],[r,n]]:[]).point=t[l]}),e}function l(t){return t.map(function(t,e){return{x:Math.round(n(t,e)/At)*At,y:Math.round(a(t,e)/At)*At,i:e}})}return o.links=function(t){return Ia(l(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},o.triangles=function(t){var e=[];return Ia(l(t)).cells.forEach(function(r,n){for(var a,i,o,l,s=r.site,u=r.edges.sort(_a),c=-1,f=u.length,h=u[f-1].edge,d=h.l===s?h.r:h.l;++c<f;)h,a=d,d=(h=u[c].edge).l===s?h.r:h.l,n<a.i&&n<d.i&&(o=a,l=d,((i=s).x-l.x)*(o.y-i.y)-(i.x-o.x)*(l.y-i.y)<0)&&e.push([t[n],t[a.i],t[d.i]])}),e},o.x=function(t){return arguments.length?(n=ve(e=t),o):e},o.y=function(t){return arguments.length?(a=ve(r=t),o):r},o.clipExtent=function(t){return arguments.length?(i=null==t?Fa:t,o):i===Fa?null:i},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):i===Fa?null:i&&i[1]},o};var Fa=[[-1e6,-1e6],[1e6,1e6]];function za(t){return t.x}function Na(t){return t.y}function Ba(t,r){t=e.rgb(t),r=e.rgb(r);var n=t.r,a=t.g,i=t.b,o=r.r-n,l=r.g-a,s=r.b-i;return function(t){return"#"+ue(Math.round(n+o*t))+ue(Math.round(a+l*t))+ue(Math.round(i+s*t))}}function ja(t,e){var r,n={},a={};for(r in t)r in e?n[r]=Ga(t[r],e[r]):a[r]=t[r];for(r in e)r in t||(a[r]=e[r]);return function(t){for(r in n)a[r]=n[r](t);return a}}function Ua(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Va(t,e){var r,n,a,i=Ha.lastIndex=qa.lastIndex=0,o=-1,l=[],s=[];for(t+="",e+="";(r=Ha.exec(t))&&(n=qa.exec(e));)(a=n.index)>i&&(a=e.slice(i,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(n=n[0])?l[o]?l[o]+=n:l[++o]=n:(l[++o]=null,s.push({i:o,x:Ua(r,n)})),i=qa.lastIndex;return i<e.length&&(a=e.slice(i),l[o]?l[o]+=a:l[++o]=a),l.length<2?s[0]?(e=s[0].x,function(t){return e(t)+""}):function(){return e}:(e=s.length,function(t){for(var r,n=0;n<e;++n)l[(r=s[n]).i]=r.x(t);return l.join("")})}e.geom.delaunay=function(t){return e.geom.voronoi().triangles(t)},e.geom.quadtree=function(t,e,r,n,a){var i,o=Kn,l=ta;if(i=arguments.length)return o=za,l=Na,3===i&&(a=r,n=e,r=e=0),s(t);function s(t){var s,u,c,f,h,d,p,g,v,m=ve(o),x=ve(l);if(null!=e)d=e,p=r,g=n,v=a;else if(g=v=-(d=p=1/0),u=[],c=[],h=t.length,i)for(f=0;f<h;++f)(s=t[f]).x<d&&(d=s.x),s.y<p&&(p=s.y),s.x>g&&(g=s.x),s.y>v&&(v=s.y),u.push(s.x),c.push(s.y);else for(f=0;f<h;++f){var b=+m(s=t[f],f),_=+x(s,f);b<d&&(d=b),_<p&&(p=_),b>g&&(g=b),_>v&&(v=_),u.push(b),c.push(_)}var w=g-d,A=v-p;function M(t,e,r,n,a,i,o,l){if(!isNaN(r)&&!isNaN(n))if(t.leaf){var s=t.x,u=t.y;if(null!=s)if(y(s-r)+y(u-n)<.01)T(t,e,r,n,a,i,o,l);else{var c=t.point;t.x=t.y=t.point=null,T(t,c,s,u,a,i,o,l),T(t,e,r,n,a,i,o,l)}else t.x=r,t.y=n,t.point=e}else T(t,e,r,n,a,i,o,l)}function T(t,e,r,n,a,i,o,l){var s=.5*(a+o),u=.5*(i+l),c=r>=s,f=n>=u,h=f<<1|c;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){M(k,t,+m(t,++f),+x(t,f),d,p,g,v)}}),c?a=s:o=s,f?i=u:l=u,M(t,e,r,n,a,i,o,l)}w>A?v=p+w:g=d+A;var k={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){M(k,t,+m(t,++f),+x(t,f),d,p,g,v)}};if(k.visit=function(t){!function t(e,r,n,a,i,o){if(!e(r,n,a,i,o)){var l=.5*(n+i),s=.5*(a+o),u=r.nodes;u[0]&&t(e,u[0],n,a,l,s),u[1]&&t(e,u[1],l,a,i,s),u[2]&&t(e,u[2],n,s,l,o),u[3]&&t(e,u[3],l,s,i,o)}}(t,k,d,p,g,v)},k.find=function(t){return function(t,e,r,n,a,i,o){var l,s=1/0;return function t(u,c,f,h,d){if(!(c>i||f>o||h<n||d<a)){if(p=u.point){var p,g=e-u.x,v=r-u.y,m=g*g+v*v;if(m<s){var y=Math.sqrt(s=m);n=e-y,a=r-y,i=e+y,o=r+y,l=p}}for(var x=u.nodes,b=.5*(c+h),_=.5*(f+d),w=(r>=_)<<1|e>=b,A=w+4;w<A;++w)if(u=x[3&w])switch(3&w){case 0:t(u,c,f,b,_);break;case 1:t(u,b,f,h,_);break;case 2:t(u,c,_,b,d);break;case 3:t(u,b,_,h,d)}}}(t,n,a,i,o),l}(k,t[0],t[1],d,p,g,v)},f=-1,null==e){for(;++f<h;)M(k,t[f],u[f],c[f],d,p,g,v);--f}else t.forEach(k.add);return u=c=t=s=null,k}return s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(l=t,s):l},s.extent=function(t){return arguments.length?(null==t?e=r=n=a=null:(e=+t[0][0],r=+t[0][1],n=+t[1][0],a=+t[1][1]),s):null==e?null:[[e,r],[n,a]]},s.size=function(t){return arguments.length?(null==t?e=r=n=a=null:(e=r=0,n=+t[0],a=+t[1]),s):null==e?null:[n-e,a-r]},s},e.interpolateRgb=Ba,e.interpolateObject=ja,e.interpolateNumber=Ua,e.interpolateString=Va;var Ha=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qa=new RegExp(Ha.source,"g");function Ga(t,r){for(var n,a=e.interpolators.length;--a>=0&&!(n=e.interpolators[a](t,r)););return n}function Xa(t,e){var r,n=[],a=[],i=t.length,o=e.length,l=Math.min(t.length,e.length);for(r=0;r<l;++r)n.push(Ga(t[r],e[r]));for(;r<i;++r)a[r]=t[r];for(;r<o;++r)a[r]=e[r];return function(t){for(r=0;r<l;++r)a[r]=n[r](t);return a}}e.interpolate=Ga,e.interpolators=[function(t,e){var r=typeof e;return("string"===r?ge.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Ba:Va:e instanceof Ut?Ba:Array.isArray(e)?Xa:"object"===r&&isNaN(e)?ja:Ua)(t,e)}],e.interpolateArray=Xa;var Wa=function(){return O},Ya=e.map({linear:Wa,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return $a},cubic:function(){return Ka},sin:function(){return ei},exp:function(){return ri},circle:function(){return ni},elastic:function(t,e){var r;arguments.length<2&&(e=.45);arguments.length?r=e/kt*Math.asin(1/t):(t=1,r=e/4);return function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-r)*kt/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ai}}),Za=e.map({in:O,out:Ja,"in-out":Qa,"out-in":function(t){return Qa(Ja(t))}});function Ja(t){return function(e){return 1-t(1-e)}}function Qa(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function $a(t){return t*t}function Ka(t){return t*t*t}function ti(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function ei(t){return 1-Math.cos(t*Ct)}function ri(t){return Math.pow(2,10*(t-1))}function ni(t){return 1-Math.sqrt(1-t*t)}function ai(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function ii(t,e){return e-=t,function(r){return Math.round(t+e*r)}}function oi(t){var e,r,n,a=[t.a,t.b],i=[t.c,t.d],o=si(a),l=li(a,i),s=si(((e=i)[0]+=(n=-l)*(r=a)[0],e[1]+=n*r[1],e))||0;a[0]*i[1]<i[0]*a[1]&&(a[0]*=-1,a[1]*=-1,o*=-1,l*=-1),this.rotate=(o?Math.atan2(a[1],a[0]):Math.atan2(-i[0],i[1]))*Lt,this.translate=[t.e,t.f],this.scale=[o,s],this.skew=s?Math.atan2(l,s)*Lt:0}function li(t,e){return t[0]*e[0]+t[1]*e[1]}function si(t){var e=Math.sqrt(li(t,t));return e&&(t[0]/=e,t[1]/=e),e}e.ease=function(t){var e,n=t.indexOf("-"),a=n>=0?t.slice(0,n):t,i=n>=0?t.slice(n+1):"in";return a=Ya.get(a)||Wa,i=Za.get(i)||O,e=i(a.apply(null,r.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},e.interpolateHcl=function(t,r){t=e.hcl(t),r=e.hcl(r);var n=t.h,a=t.c,i=t.l,o=r.h-n,l=r.c-a,s=r.l-i;isNaN(l)&&(l=0,a=isNaN(a)?r.c:a);isNaN(o)?(o=0,n=isNaN(n)?r.h:n):o>180?o-=360:o<-180&&(o+=360);return function(t){return Wt(n+o*t,a+l*t,i+s*t)+""}},e.interpolateHsl=function(t,r){t=e.hsl(t),r=e.hsl(r);var n=t.h,a=t.s,i=t.l,o=r.h-n,l=r.s-a,s=r.l-i;isNaN(l)&&(l=0,a=isNaN(a)?r.s:a);isNaN(o)?(o=0,n=isNaN(n)?r.h:n):o>180?o-=360:o<-180&&(o+=360);return function(t){return qt(n+o*t,a+l*t,i+s*t)+""}},e.interpolateLab=function(t,r){t=e.lab(t),r=e.lab(r);var n=t.l,a=t.a,i=t.b,o=r.l-n,l=r.a-a,s=r.b-i;return function(t){return te(n+o*t,a+l*t,i+s*t)+""}},e.interpolateRound=ii,e.transform=function(t){var r=a.createElementNS(e.ns.prefix.svg,"g");return(e.transform=function(t){if(null!=t){r.setAttribute("transform",t);var e=r.transform.baseVal.consolidate()}return new oi(e?e.matrix:ui)})(t)},oi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ui={a:1,b:0,c:0,d:1,e:0,f:0};function ci(t){return t.length?t.pop()+",":""}function fi(t,r){var n=[],a=[];return t=e.transform(t),r=e.transform(r),function(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var a=r.push("translate(",null,",",null,")");n.push({i:a-4,x:Ua(t[0],e[0])},{i:a-2,x:Ua(t[1],e[1])})}else(e[0]||e[1])&&r.push("translate("+e+")")}(t.translate,r.translate,n,a),function(t,e,r,n){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),n.push({i:r.push(ci(r)+"rotate(",null,")")-2,x:Ua(t,e)})):e&&r.push(ci(r)+"rotate("+e+")")}(t.rotate,r.rotate,n,a),function(t,e,r,n){t!==e?n.push({i:r.push(ci(r)+"skewX(",null,")")-2,x:Ua(t,e)}):e&&r.push(ci(r)+"skewX("+e+")")}(t.skew,r.skew,n,a),function(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var a=r.push(ci(r)+"scale(",null,",",null,")");n.push({i:a-4,x:Ua(t[0],e[0])},{i:a-2,x:Ua(t[1],e[1])})}else 1===e[0]&&1===e[1]||r.push(ci(r)+"scale("+e+")")}(t.scale,r.scale,n,a),t=r=null,function(t){for(var e,r=-1,i=a.length;++r<i;)n[(e=a[r]).i]=e.x(t);return n.join("")}}function hi(t,e){return e=(e-=t=+t)||1/e,function(r){return(r-t)/e}}function di(t,e){return e=(e-=t=+t)||1/e,function(r){return Math.max(0,Math.min(1,(r-t)/e))}}function pi(t){for(var e=t.source,r=t.target,n=function(t,e){if(t===e)return t;var r=gi(t),n=gi(e),a=r.pop(),i=n.pop(),o=null;for(;a===i;)o=a,a=r.pop(),i=n.pop();return o}(e,r),a=[e];e!==n;)e=e.parent,a.push(e);for(var i=a.length;r!==n;)a.splice(i,0,r),r=r.parent;return a}function gi(t){for(var e=[],r=t.parent;null!=r;)e.push(t),t=r,r=r.parent;return e.push(t),e}function vi(t){t.fixed|=2}function mi(t){t.fixed&=-7}function yi(t){t.fixed|=4,t.px=t.x,t.py=t.y}function xi(t){t.fixed&=-5}e.interpolateTransform=fi,e.layout={},e.layout.bundle=function(){return function(t){for(var e=[],r=-1,n=t.length;++r<n;)e.push(pi(t[r]));return e}},e.layout.chord=function(){var t,r,n,a,i,o,l,s={},u=0;function c(){var s,c,h,d,p,g={},v=[],m=e.range(a),y=[];for(t=[],r=[],s=0,d=-1;++d<a;){for(c=0,p=-1;++p<a;)c+=n[d][p];v.push(c),y.push(e.range(a)),s+=c}for(i&&m.sort(function(t,e){return i(v[t],v[e])}),o&&y.forEach(function(t,e){t.sort(function(t,r){return o(n[e][t],n[e][r])})}),s=(kt-u*a)/s,c=0,d=-1;++d<a;){for(h=c,p=-1;++p<a;){var x=m[d],b=y[x][p],_=n[x][b],w=c,A=c+=_*s;g[x+"-"+b]={index:x,subindex:b,startAngle:w,endAngle:A,value:_}}r[x]={index:x,startAngle:h,endAngle:c,value:v[x]},c+=u}for(d=-1;++d<a;)for(p=d-1;++p<a;){var M=g[d+"-"+p],T=g[p+"-"+d];(M.value||T.value)&&t.push(M.value<T.value?{source:T,target:M}:{source:M,target:T})}l&&f()}function f(){t.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return s.matrix=function(e){return arguments.length?(a=(n=e)&&n.length,t=r=null,s):n},s.padding=function(e){return arguments.length?(u=e,t=r=null,s):u},s.sortGroups=function(e){return arguments.length?(i=e,t=r=null,s):i},s.sortSubgroups=function(e){return arguments.length?(o=e,t=null,s):o},s.sortChords=function(e){return arguments.length?(l=e,t&&f(),s):l},s.chords=function(){return t||c(),t},s.groups=function(){return r||c(),r},s},e.layout.force=function(){var t,r,n,a,i,o,l={},s=e.dispatch("start","tick","end"),u=[1,1],c=.9,f=bi,h=_i,d=-30,p=wi,g=.1,v=.64,m=[],y=[];function x(t){return function(e,r,n,a){if(e.point!==t){var i=e.cx-t.x,o=e.cy-t.y,l=a-r,s=i*i+o*o;if(l*l/v<s){if(s<p){var u=e.charge/s;t.px-=i*u,t.py-=o*u}return!0}if(e.point&&s&&s<p){u=e.pointCharge/s;t.px-=i*u,t.py-=o*u}}return!e.charge}}function b(t){t.px=e.event.x,t.py=e.event.y,l.resume()}return l.tick=function(){if((n*=.99)<.005)return t=null,s.end({type:"end",alpha:n=0}),!0;var r,l,f,h,p,v,b,_,w,A=m.length,M=y.length;for(l=0;l<M;++l)h=(f=y[l]).source,(v=(_=(p=f.target).x-h.x)*_+(w=p.y-h.y)*w)&&(_*=v=n*i[l]*((v=Math.sqrt(v))-a[l])/v,w*=v,p.x-=_*(b=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=w*b,h.x+=_*(b=1-b),h.y+=w*b);if((b=n*g)&&(_=u[0]/2,w=u[1]/2,l=-1,b))for(;++l<A;)(f=m[l]).x+=(_-f.x)*b,f.y+=(w-f.y)*b;if(d)for(!function t(e,r,n){var a=0,i=0;e.charge=0;if(!e.leaf)for(var o,l=e.nodes,s=l.length,u=-1;++u<s;)null!=(o=l[u])&&(t(o,r,n),e.charge+=o.charge,a+=o.charge*o.cx,i+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=r*n[e.point.index];e.charge+=e.pointCharge=c,a+=c*e.point.x,i+=c*e.point.y}e.cx=a/e.charge;e.cy=i/e.charge}(r=e.geom.quadtree(m),n,o),l=-1;++l<A;)(f=m[l]).fixed||r.visit(x(f));for(l=-1;++l<A;)(f=m[l]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);s.tick({type:"tick",alpha:n})},l.nodes=function(t){return arguments.length?(m=t,l):m},l.links=function(t){return arguments.length?(y=t,l):y},l.size=function(t){return arguments.length?(u=t,l):u},l.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,l):f},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.friction=function(t){return arguments.length?(c=+t,l):c},l.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.chargeDistance=function(t){return arguments.length?(p=t*t,l):Math.sqrt(p)},l.gravity=function(t){return arguments.length?(g=+t,l):g},l.theta=function(t){return arguments.length?(v=t*t,l):Math.sqrt(v)},l.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,s.end({type:"end",alpha:n=0})):e>0&&(s.start({type:"start",alpha:n=e}),t=Me(l.tick)),l):n},l.start=function(){var t,e,r,n=m.length,s=y.length,c=u[0],p=u[1];for(t=0;t<n;++t)(r=m[t]).index=t,r.weight=0;for(t=0;t<s;++t)"number"==typeof(r=y[t]).source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<n;++t)r=m[t],isNaN(r.x)&&(r.x=g("x",c)),isNaN(r.y)&&(r.y=g("y",p)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof f)for(t=0;t<s;++t)a[t]=+f.call(this,y[t],t);else for(t=0;t<s;++t)a[t]=f;if(i=[],"function"==typeof h)for(t=0;t<s;++t)i[t]=+h.call(this,y[t],t);else for(t=0;t<s;++t)i[t]=h;if(o=[],"function"==typeof d)for(t=0;t<n;++t)o[t]=+d.call(this,m[t],t);else for(t=0;t<n;++t)o[t]=d;function g(r,a){if(!e){for(e=new Array(n),u=0;u<n;++u)e[u]=[];for(u=0;u<s;++u){var i=y[u];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var o,l=e[t],u=-1,c=l.length;++u<c;)if(!isNaN(o=l[u][r]))return o;return Math.random()*a}return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(r||(r=e.behavior.drag().origin(O).on("dragstart.force",vi).on("drag.force",b).on("dragend.force",mi)),!arguments.length)return r;this.on("mouseover.force",yi).on("mouseout.force",xi).call(r)},e.rebind(l,s,"on")};var bi=20,_i=1,wi=1/0;function Ai(t,r){return e.rebind(t,r,"sort","children","value"),t.nodes=t,t.links=Si,t}function Mi(t,e){for(var r=[t];null!=(t=r.pop());)if(e(t),(a=t.children)&&(n=a.length))for(var n,a;--n>=0;)r.push(a[n])}function Ti(t,e){for(var r=[t],n=[];null!=(t=r.pop());)if(n.push(t),(i=t.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)r.push(i[o]);for(;null!=(t=n.pop());)e(t)}function ki(t){return t.children}function Ei(t){return t.value}function Ci(t,e){return e.value-t.value}function Si(t){return e.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}e.layout.hierarchy=function(){var t=Ci,e=ki,r=Ei;function n(a){var i,o=[a],l=[];for(a.depth=0;null!=(i=o.pop());)if(l.push(i),(u=e.call(n,i,i.depth))&&(s=u.length)){for(var s,u,c;--s>=0;)o.push(c=u[s]),c.parent=i,c.depth=i.depth+1;r&&(i.value=0),i.children=u}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return Ti(a,function(e){var n,a;t&&(n=e.children)&&n.sort(t),r&&(a=e.parent)&&(a.value+=e.value)}),l}return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Mi(t,function(t){t.children&&(t.value=0)}),Ti(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},e.layout.partition=function(){var t=e.layout.hierarchy(),r=[1,1];function n(e,n){var a=t.call(this,e,n);return function t(e,r,n,a){var i=e.children;if(e.x=r,e.y=e.depth*a,e.dx=n,e.dy=a,i&&(o=i.length)){var o,l,s,u=-1;for(n=e.value?n/e.value:0;++u<o;)t(l=i[u],r,s=l.value*n,a),r+=s}}(a[0],0,r[0],r[1]/function t(e){var r=e.children,n=0;if(r&&(a=r.length))for(var a,i=-1;++i<a;)n=Math.max(n,t(r[i]));return 1+n}(a[0])),a}return n.size=function(t){return arguments.length?(r=t,n):r},Ai(n,t)},e.layout.pie=function(){var t=Number,r=Li,n=0,a=kt,i=0;function o(l){var s,u=l.length,c=l.map(function(e,r){return+t.call(o,e,r)}),f=+("function"==typeof n?n.apply(this,arguments):n),h=("function"==typeof a?a.apply(this,arguments):a)-f,d=Math.min(Math.abs(h)/u,+("function"==typeof i?i.apply(this,arguments):i)),p=d*(h<0?-1:1),g=e.sum(c),v=g?(h-u*p)/g:0,m=e.range(u),y=[];return null!=r&&m.sort(r===Li?function(t,e){return c[e]-c[t]}:function(t,e){return r(l[t],l[e])}),m.forEach(function(t){y[t]={data:l[t],value:s=c[t],startAngle:f,endAngle:f+=s*v+p,padAngle:d}}),y}return o.value=function(e){return arguments.length?(t=e,o):t},o.sort=function(t){return arguments.length?(r=t,o):r},o.startAngle=function(t){return arguments.length?(n=t,o):n},o.endAngle=function(t){return arguments.length?(a=t,o):a},o.padAngle=function(t){return arguments.length?(i=t,o):i},o};var Li={};function Oi(t){return t.x}function Ri(t){return t.y}function Di(t,e,r){t.y0=e,t.y=r}e.layout.stack=function(){var t=O,r=Fi,n=zi,a=Di,i=Oi,o=Ri;function l(s,u){if(!(d=s.length))return s;var c=s.map(function(e,r){return t.call(l,e,r)}),f=c.map(function(t){return t.map(function(t,e){return[i.call(l,t,e),o.call(l,t,e)]})}),h=r.call(l,f,u);c=e.permute(c,h),f=e.permute(f,h);var d,p,g,v,m=n.call(l,f,u),y=c[0].length;for(g=0;g<y;++g)for(a.call(l,c[0][g],v=m[g],f[0][g][1]),p=1;p<d;++p)a.call(l,c[p][g],v+=f[p-1][g][1],f[p][g][1]);return s}return l.values=function(e){return arguments.length?(t=e,l):t},l.order=function(t){return arguments.length?(r="function"==typeof t?t:Ii.get(t)||Fi,l):r},l.offset=function(t){return arguments.length?(n="function"==typeof t?t:Pi.get(t)||zi,l):n},l.x=function(t){return arguments.length?(i=t,l):i},l.y=function(t){return arguments.length?(o=t,l):o},l.out=function(t){return arguments.length?(a=t,l):a},l};var Ii=e.map({"inside-out":function(t){var r,n,a=t.length,i=t.map(Ni),o=t.map(Bi),l=e.range(a).sort(function(t,e){return i[t]-i[e]}),s=0,u=0,c=[],f=[];for(r=0;r<a;++r)n=l[r],s<u?(s+=o[n],c.push(n)):(u+=o[n],f.push(n));return f.reverse().concat(c)},reverse:function(t){return e.range(t.length).reverse()},default:Fi}),Pi=e.map({silhouette:function(t){var e,r,n,a=t.length,i=t[0].length,o=[],l=0,s=[];for(r=0;r<i;++r){for(e=0,n=0;e<a;e++)n+=t[e][r][1];n>l&&(l=n),o.push(n)}for(r=0;r<i;++r)s[r]=(l-o[r])/2;return s},wiggle:function(t){var e,r,n,a,i,o,l,s,u,c=t.length,f=t[0],h=f.length,d=[];for(d[0]=s=u=0,r=1;r<h;++r){for(e=0,a=0;e<c;++e)a+=t[e][r][1];for(e=0,i=0,l=f[r][0]-f[r-1][0];e<c;++e){for(n=0,o=(t[e][r][1]-t[e][r-1][1])/(2*l);n<e;++n)o+=(t[n][r][1]-t[n][r-1][1])/l;i+=o*t[e][r][1]}d[r]=s-=a?i/a*l:0,s<u&&(u=s)}for(r=0;r<h;++r)d[r]-=u;return d},expand:function(t){var e,r,n,a=t.length,i=t[0].length,o=1/a,l=[];for(r=0;r<i;++r){for(e=0,n=0;e<a;e++)n+=t[e][r][1];if(n)for(e=0;e<a;e++)t[e][r][1]/=n;else for(e=0;e<a;e++)t[e][r][1]=o}for(r=0;r<i;++r)l[r]=0;return l},zero:zi});function Fi(t){return e.range(t.length)}function zi(t){for(var e=-1,r=t[0].length,n=[];++e<r;)n[e]=0;return n}function Ni(t){for(var e,r=1,n=0,a=t[0][1],i=t.length;r<i;++r)(e=t[r][1])>a&&(n=r,a=e);return n}function Bi(t){return t.reduce(ji,0)}function ji(t,e){return t+e[1]}function Ui(t,e){return Vi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Vi(t,e){for(var r=-1,n=+t[0],a=(t[1]-n)/e,i=[];++r<=e;)i[r]=a*r+n;return i}function Hi(t){return[e.min(t),e.max(t)]}function qi(t,e){return t.value-e.value}function Gi(t,e){var r=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=r,r._pack_prev=e}function Xi(t,e){t._pack_next=e,e._pack_prev=t}function Wi(t,e){var r=e.x-t.x,n=e.y-t.y,a=t.r+e.r;return.999*a*a>r*r+n*n}function Yi(t){if((e=t.children)&&(s=e.length)){var e,r,n,a,i,o,l,s,u=1/0,c=-1/0,f=1/0,h=-1/0;if(e.forEach(Zi),(r=e[0]).x=-r.r,r.y=0,x(r),s>1&&((n=e[1]).x=n.r,n.y=0,x(n),s>2))for(Qi(r,n,a=e[2]),x(a),Gi(r,a),r._pack_prev=a,Gi(a,n),n=r._pack_next,i=3;i<s;i++){Qi(r,n,a=e[i]);var d=0,p=1,g=1;for(o=n._pack_next;o!==n;o=o._pack_next,p++)if(Wi(o,a)){d=1;break}if(1==d)for(l=r._pack_prev;l!==o._pack_prev&&!Wi(l,a);l=l._pack_prev,g++);d?(p<g||p==g&&n.r<r.r?Xi(r,n=o):Xi(r=l,n),i--):(Gi(r,a),n=a,x(a))}var v=(u+c)/2,m=(f+h)/2,y=0;for(i=0;i<s;i++)(a=e[i]).x-=v,a.y-=m,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=y,e.forEach(Ji)}function x(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),h=Math.max(t.y+t.r,h)}}function Zi(t){t._pack_next=t._pack_prev=t}function Ji(t){delete t._pack_next,delete t._pack_prev}function Qi(t,e,r){var n=t.r+r.r,a=e.x-t.x,i=e.y-t.y;if(n&&(a||i)){var o=e.r+r.r,l=a*a+i*i,s=.5+((n*=n)-(o*=o))/(2*l),u=Math.sqrt(Math.max(0,2*o*(n+l)-(n-=l)*n-o*o))/(2*l);r.x=t.x+s*a+u*i,r.y=t.y+s*i-u*a}else r.x=t.x+n,r.y=t.y}function $i(t,e){return t.parent==e.parent?1:2}function Ki(t){var e=t.children;return e.length?e[0]:t.t}function to(t){var e,r=t.children;return(e=r.length)?r[e-1]:t.t}function eo(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function ro(t,e,r){return t.a.parent===e.parent?t.a:r}function no(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ao(t,e){var r=t.x+e[3],n=t.y+e[0],a=t.dx-e[1]-e[3],i=t.dy-e[0]-e[2];return a<0&&(r+=a/2,a=0),i<0&&(n+=i/2,i=0),{x:r,y:n,dx:a,dy:i}}function io(t){var e=t[0],r=t[t.length-1];return e<r?[e,r]:[r,e]}function oo(t){return t.rangeExtent?t.rangeExtent():io(t.range())}function lo(t,e,r,n){var a=r(t[0],t[1]),i=n(e[0],e[1]);return function(t){return i(a(t))}}function so(t,e){var r,n=0,a=t.length-1,i=t[n],o=t[a];return o<i&&(r=n,n=a,a=r,r=i,i=o,o=r),t[n]=e.floor(i),t[a]=e.ceil(o),t}function uo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:co}e.layout.histogram=function(){var t=!0,r=Number,n=Hi,a=Ui;function i(i,o){for(var l,s,u=[],c=i.map(r,this),f=n.call(this,c,o),h=a.call(this,f,c,o),d=(o=-1,c.length),p=h.length-1,g=t?1:1/d;++o<p;)(l=u[o]=[]).dx=h[o+1]-(l.x=h[o]),l.y=0;if(p>0)for(o=-1;++o<d;)(s=c[o])>=f[0]&&s<=f[1]&&((l=u[e.bisect(h,s,1,p)-1]).y+=g,l.push(i[o]));return u}return i.value=function(t){return arguments.length?(r=t,i):r},i.range=function(t){return arguments.length?(n=ve(t),i):n},i.bins=function(t){return arguments.length?(a="number"==typeof t?function(e){return Vi(e,t)}:ve(t),i):a},i.frequency=function(e){return arguments.length?(t=!!e,i):t},i},e.layout.pack=function(){var t,r=e.layout.hierarchy().sort(qi),n=0,a=[1,1];function i(e,i){var o=r.call(this,e,i),l=o[0],s=a[0],u=a[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(l.x=l.y=0,Ti(l,function(t){t.r=+c(t.value)}),Ti(l,Yi),n){var f=n*(t?1:Math.max(2*l.r/s,2*l.r/u))/2;Ti(l,function(t){t.r+=f}),Ti(l,Yi),Ti(l,function(t){t.r-=f})}return function t(e,r,n,a){var i=e.children;e.x=r+=a*e.x;e.y=n+=a*e.y;e.r*=a;if(i)for(var o=-1,l=i.length;++o<l;)t(i[o],r,n,a)}(l,s/2,u/2,t?1:1/Math.max(2*l.r/s,2*l.r/u)),o}return i.size=function(t){return arguments.length?(a=t,i):a},i.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,i):t},i.padding=function(t){return arguments.length?(n=+t,i):n},Ai(i,r)},e.layout.tree=function(){var t=e.layout.hierarchy().sort(null).value(null),r=$i,n=[1,1],a=null;function i(e,i){var u=t.call(this,e,i),c=u[0],f=function(t){var e,r={A:null,children:[t]},n=[r];for(;null!=(e=n.pop());)for(var a,i=e.children,o=0,l=i.length;o<l;++o)n.push((i[o]=a={_:i[o],parent:e,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return r.children[0]}(c);if(Ti(f,o),f.parent.m=-f.z,Mi(f,l),a)Mi(c,s);else{var h=c,d=c,p=c;Mi(c,function(t){t.x<h.x&&(h=t),t.x>d.x&&(d=t),t.depth>p.depth&&(p=t)});var g=r(h,d)/2-h.x,v=n[0]/(d.x+r(d,h)/2+g),m=n[1]/(p.depth||1);Mi(c,function(t){t.x=(t.x+g)*v,t.y=t.depth*m})}return u}function o(t){var e=t.children,n=t.parent.children,a=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,r=0,n=0,a=t.children,i=a.length;for(;--i>=0;)(e=a[i]).z+=r,e.m+=r,r+=e.s+(n+=e.c)}(t);var i=(e[0].z+e[e.length-1].z)/2;a?(t.z=a.z+r(t._,a._),t.m=t.z-i):t.z=i}else a&&(t.z=a.z+r(t._,a._));t.parent.A=function(t,e,n){if(e){for(var a,i=t,o=t,l=e,s=i.parent.children[0],u=i.m,c=o.m,f=l.m,h=s.m;l=to(l),i=Ki(i),l&&i;)s=Ki(s),(o=to(o)).a=t,(a=l.z+f-i.z-u+r(l._,i._))>0&&(eo(ro(l,t,n),t,a),u+=a,c+=a),f+=l.m,u+=i.m,h+=s.m,c+=o.m;l&&!to(o)&&(o.t=l,o.m+=f-c),i&&!Ki(s)&&(s.t=i,s.m+=u-h,n=t)}return n}(t,a,t.parent.A||n[0])}function l(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=n[0],t.y=t.depth*n[1]}return i.separation=function(t){return arguments.length?(r=t,i):r},i.size=function(t){return arguments.length?(a=null==(n=t)?s:null,i):a?null:n},i.nodeSize=function(t){return arguments.length?(a=null==(n=t)?null:s,i):a?n:null},Ai(i,t)},e.layout.cluster=function(){var t=e.layout.hierarchy().sort(null).value(null),r=$i,n=[1,1],a=!1;function i(i,o){var l,s=t.call(this,i,o),u=s[0],c=0;Ti(u,function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(n),t.y=function(t){return 1+e.max(t,function(t){return t.y})}(n)):(t.x=l?c+=r(t,l):0,t.y=0,l=t)});var f=function t(e){var r=e.children;return r&&r.length?t(r[0]):e}(u),h=function t(e){var r,n=e.children;return n&&(r=n.length)?t(n[r-1]):e}(u),d=f.x-r(f,h)/2,p=h.x+r(h,f)/2;return Ti(u,a?function(t){t.x=(t.x-u.x)*n[0],t.y=(u.y-t.y)*n[1]}:function(t){t.x=(t.x-d)/(p-d)*n[0],t.y=(1-(u.y?t.y/u.y:1))*n[1]}),s}return i.separation=function(t){return arguments.length?(r=t,i):r},i.size=function(t){return arguments.length?(a=null==(n=t),i):a?null:n},i.nodeSize=function(t){return arguments.length?(a=null!=(n=t),i):a?n:null},Ai(i,t)},e.layout.treemap=function(){var t,r=e.layout.hierarchy(),n=Math.round,a=[1,1],i=null,o=no,l=!1,s="squarify",u=.5*(1+Math.sqrt(5));function c(t,e){for(var r,n,a=-1,i=t.length;++a<i;)n=(r=t[a]).value*(e<0?0:e),r.area=isNaN(n)||n<=0?0:n}function f(t){var e=t.children;if(e&&e.length){var r,n,a,i=o(t),l=[],u=e.slice(),h=1/0,g="slice"===s?i.dx:"dice"===s?i.dy:"slice-dice"===s?1&t.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(c(u,i.dx*i.dy/t.value),l.area=0;(a=u.length)>0;)l.push(r=u[a-1]),l.area+=r.area,"squarify"!==s||(n=d(l,g))<=h?(u.pop(),h=n):(l.area-=l.pop().area,p(l,g,i,!1),g=Math.min(i.dx,i.dy),l.length=l.area=0,h=1/0);l.length&&(p(l,g,i,!0),l.length=l.area=0),e.forEach(f)}}function h(t){var e=t.children;if(e&&e.length){var r,n=o(t),a=e.slice(),i=[];for(c(a,n.dx*n.dy/t.value),i.area=0;r=a.pop();)i.push(r),i.area+=r.area,null!=r.z&&(p(i,r.z?n.dx:n.dy,n,!a.length),i.length=i.area=0);e.forEach(h)}}function d(t,e){for(var r,n=t.area,a=0,i=1/0,o=-1,l=t.length;++o<l;)(r=t[o].area)&&(r<i&&(i=r),r>a&&(a=r));return e*=e,(n*=n)?Math.max(e*a*u/n,n/(e*i*u)):1/0}function p(t,e,r,a){var i,o=-1,l=t.length,s=r.x,u=r.y,c=e?n(t.area/e):0;if(e==r.dx){for((a||c>r.dy)&&(c=r.dy);++o<l;)(i=t[o]).x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(r.x+r.dx-s,c?n(i.area/c):0);i.z=!0,i.dx+=r.x+r.dx-s,r.y+=c,r.dy-=c}else{for((a||c>r.dx)&&(c=r.dx);++o<l;)(i=t[o]).x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(r.y+r.dy-u,c?n(i.area/c):0);i.z=!1,i.dy+=r.y+r.dy-u,r.x+=c,r.dx-=c}}function g(e){var n=t||r(e),i=n[0];return i.x=i.y=0,i.value?(i.dx=a[0],i.dy=a[1]):i.dx=i.dy=0,t&&r.revalue(i),c([i],i.dx*i.dy/i.value),(t?h:f)(i),l&&(t=n),n}return g.size=function(t){return arguments.length?(a=t,g):a},g.padding=function(t){if(!arguments.length)return i;function e(e){return ao(e,t)}var r;return o=null==(i=t)?no:"function"==(r=typeof t)?function(e){var r=t.call(g,e,e.depth);return null==r?no(e):ao(e,"number"==typeof r?[r,r,r,r]:r)}:"number"===r?(t=[t,t,t,t],e):e,g},g.round=function(t){return arguments.length?(n=t?Math.round:Number,g):n!=Number},g.sticky=function(e){return arguments.length?(l=e,t=null,g):l},g.ratio=function(t){return arguments.length?(u=t,g):u},g.mode=function(t){return arguments.length?(s=t+"",g):s},Ai(g,r)},e.random={normal:function(t,e){var r=arguments.length;return r<2&&(e=1),r<1&&(t=0),function(){var r,n,a;do{a=(r=2*Math.random()-1)*r+(n=2*Math.random()-1)*n}while(!a||a>1);return t+e*r*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var t=e.random.normal.apply(e,arguments);return function(){return Math.exp(t())}},bates:function(t){var r=e.random.irwinHall(t);return function(){return r()/t}},irwinHall:function(t){return function(){for(var e=0,r=0;r<t;r++)e+=Math.random();return e}}},e.scale={};var co={floor:O,ceil:O};function fo(t,r,n,a){var i=[],o=[],l=0,s=Math.min(t.length,r.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++l<=s;)i.push(n(t[l-1],t[l])),o.push(a(r[l-1],r[l]));return function(r){var n=e.bisect(t,r,1,s)-1;return o[n](i[n](r))}}function ho(t,r){return e.rebind(t,r,"range","rangeRound","interpolate","clamp")}function po(t,e){return so(t,uo(go(t,e)[2])),so(t,uo(go(t,e)[2])),t}function go(t,e){null==e&&(e=10);var r=io(t),n=r[1]-r[0],a=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),i=e/n*a;return i<=.15?a*=10:i<=.35?a*=5:i<=.75&&(a*=2),r[0]=Math.ceil(r[0]/a)*a,r[1]=Math.floor(r[1]/a)*a+.5*a,r[2]=a,r}function vo(t,r){return e.range.apply(e,go(t,r))}function mo(t,r,n){var a=go(t,r);if(n){var i=Le.exec(n);if(i.shift(),"s"===i[8]){var o=e.formatPrefix(Math.max(y(a[0]),y(a[1])));return i[7]||(i[7]="."+xo(o.scale(a[2]))),i[8]="f",n=e.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+function(t,e){var r=xo(e[2]);return t in yo?Math.abs(r-xo(Math.max(y(e[0]),y(e[1]))))+ +("e"!==t):r-2*("%"===t)}(i[8],a)),n=i.join("")}else n=",."+xo(a[2])+"f";return e.format(n)}e.scale.linear=function(){return function t(e,r,n,a){var i,o;function l(){var t=Math.min(e.length,r.length)>2?fo:lo,l=a?di:hi;return i=t(e,r,l,n),o=t(r,e,l,Ga),s}function s(t){return i(t)}s.invert=function(t){return o(t)};s.domain=function(t){return arguments.length?(e=t.map(Number),l()):e};s.range=function(t){return arguments.length?(r=t,l()):r};s.rangeRound=function(t){return s.range(t).interpolate(ii)};s.clamp=function(t){return arguments.length?(a=t,l()):a};s.interpolate=function(t){return arguments.length?(n=t,l()):n};s.ticks=function(t){return vo(e,t)};s.tickFormat=function(t,r){return mo(e,t,r)};s.nice=function(t){return po(e,t),l()};s.copy=function(){return t(e,r,n,a)};return l()}([0,1],[0,1],Ga,!1)};var yo={s:1,g:1,p:1,r:1,e:1};function xo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}e.scale.log=function(){return function t(r,n,a,i){function o(t){return(a?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function l(t){return a?Math.pow(n,t):-Math.pow(n,-t)}function s(t){return r(o(t))}s.invert=function(t){return l(r.invert(t))};s.domain=function(t){return arguments.length?(a=t[0]>=0,r.domain((i=t.map(Number)).map(o)),s):i};s.base=function(t){return arguments.length?(n=+t,r.domain(i.map(o)),s):n};s.nice=function(){var t=so(i.map(o),a?Math:_o);return r.domain(t),i=t.map(l),s};s.ticks=function(){var t=io(i),e=[],r=t[0],s=t[1],u=Math.floor(o(r)),c=Math.ceil(o(s)),f=n%1?2:n;if(isFinite(c-u)){if(a){for(;u<c;u++)for(var h=1;h<f;h++)e.push(l(u)*h);e.push(l(u))}else for(e.push(l(u));u++<c;)for(var h=f-1;h>0;h--)e.push(l(u)*h);for(u=0;e[u]<r;u++);for(c=e.length;e[c-1]>s;c--);e=e.slice(u,c)}return e};s.tickFormat=function(t,r){if(!arguments.length)return bo;arguments.length<2?r=bo:"function"!=typeof r&&(r=e.format(r));var a=Math.max(1,n*t/s.ticks().length);return function(t){var e=t/l(Math.round(o(t)));return e*n<n-.5&&(e*=n),e<=a?r(t):""}};s.copy=function(){return t(r.copy(),n,a,i)};return ho(s,r)}(e.scale.linear().domain([0,1]),10,!0,[1,10])};var bo=e.format(".0e"),_o={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function wo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}e.scale.pow=function(){return function t(e,r,n){var a=wo(r),i=wo(1/r);function o(t){return e(a(t))}o.invert=function(t){return i(e.invert(t))};o.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(a)),o):n};o.ticks=function(t){return vo(n,t)};o.tickFormat=function(t,e){return mo(n,t,e)};o.nice=function(t){return o.domain(po(n,t))};o.exponent=function(t){return arguments.length?(a=wo(r=t),i=wo(1/r),e.domain(n.map(a)),o):r};o.copy=function(){return t(e.copy(),r,n)};return ho(o,e)}(e.scale.linear(),1,[0,1])},e.scale.sqrt=function(){return e.scale.pow().exponent(.5)},e.scale.ordinal=function(){return function t(r,n){var a,i,o;function l(t){return i[((a.get(t)||("range"===n.t?a.set(t,r.push(t)):NaN))-1)%i.length]}function s(t,n){return e.range(r.length).map(function(e){return t+n*e})}l.domain=function(t){if(!arguments.length)return r;r=[],a=new b;for(var e,i=-1,o=t.length;++i<o;)a.has(e=t[i])||a.set(e,r.push(e));return l[n.t].apply(l,n.a)};l.range=function(t){return arguments.length?(i=t,o=0,n={t:"range",a:arguments},l):i};l.rangePoints=function(t,e){arguments.length<2&&(e=0);var a=t[0],u=t[1],c=r.length<2?(a=(a+u)/2,0):(u-a)/(r.length-1+e);return i=s(a+c*e/2,c),o=0,n={t:"rangePoints",a:arguments},l};l.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var a=t[0],u=t[1],c=r.length<2?(a=u=Math.round((a+u)/2),0):(u-a)/(r.length-1+e)|0;return i=s(a+Math.round(c*e/2+(u-a-(r.length-1+e)*c)/2),c),o=0,n={t:"rangeRoundPoints",a:arguments},l};l.rangeBands=function(t,e,a){arguments.length<2&&(e=0),arguments.length<3&&(a=e);var u=t[1]<t[0],c=t[u-0],f=t[1-u],h=(f-c)/(r.length-e+2*a);return i=s(c+h*a,h),u&&i.reverse(),o=h*(1-e),n={t:"rangeBands",a:arguments},l};l.rangeRoundBands=function(t,e,a){arguments.length<2&&(e=0),arguments.length<3&&(a=e);var u=t[1]<t[0],c=t[u-0],f=t[1-u],h=Math.floor((f-c)/(r.length-e+2*a));return i=s(c+Math.round((f-c-(r.length-e)*h)/2),h),u&&i.reverse(),o=Math.round(h*(1-e)),n={t:"rangeRoundBands",a:arguments},l};l.rangeBand=function(){return o};l.rangeExtent=function(){return io(n.a[0])};l.copy=function(){return t(r,n)};return l.domain(r)}([],{t:"range",a:[[]]})},e.scale.category10=function(){return e.scale.ordinal().range(Ao)},e.scale.category20=function(){return e.scale.ordinal().range(Mo)},e.scale.category20b=function(){return e.scale.ordinal().range(To)},e.scale.category20c=function(){return e.scale.ordinal().range(ko)};var Ao=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(le),Mo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(le),To=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(le),ko=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(le);function Eo(){return 0}e.scale.quantile=function(){return function t(r,n){var a;function i(){var t=0,i=n.length;for(a=[];++t<i;)a[t-1]=e.quantile(r,t/i);return o}function o(t){if(!isNaN(t=+t))return n[e.bisect(a,t)]}o.domain=function(t){return arguments.length?(r=t.map(d).filter(p).sort(h),i()):r};o.range=function(t){return arguments.length?(n=t,i()):n};o.quantiles=function(){return a};o.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]};o.copy=function(){return t(r,n)};return i()}([],[])},e.scale.quantize=function(){return function t(e,r,n){var a,i;function o(t){return n[Math.max(0,Math.min(i,Math.floor(a*(t-e))))]}function l(){return a=n.length/(r-e),i=n.length-1,o}o.domain=function(t){return arguments.length?(e=+t[0],r=+t[t.length-1],l()):[e,r]};o.range=function(t){return arguments.length?(n=t,l()):n};o.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/a+e,t+1/a]};o.copy=function(){return t(e,r,n)};return l()}(0,1,[0,1])},e.scale.threshold=function(){return function t(r,n){function a(t){if(t<=t)return n[e.bisect(r,t)]}a.domain=function(t){return arguments.length?(r=t,a):r};a.range=function(t){return arguments.length?(n=t,a):n};a.invertExtent=function(t){return t=n.indexOf(t),[r[t-1],r[t]]};a.copy=function(){return t(r,n)};return a}([.5],[0,1])},e.scale.identity=function(){return function t(e){function r(t){return+t}r.invert=r;r.domain=r.range=function(t){return arguments.length?(e=t.map(r),r):e};r.ticks=function(t){return vo(e,t)};r.tickFormat=function(t,r){return mo(e,t,r)};r.copy=function(){return t(e)};return r}([0,1])},e.svg={},e.svg.arc=function(){var t=So,e=Lo,r=Eo,n=Co,a=Oo,i=Ro,o=Do;function l(){var l=Math.max(0,+t.apply(this,arguments)),u=Math.max(0,+e.apply(this,arguments)),c=a.apply(this,arguments)-Ct,f=i.apply(this,arguments)-Ct,h=Math.abs(f-c),d=c>f?0:1;if(u<l&&(p=u,u=l,l=p),h>=Et)return s(u,d)+(l?s(l,1-d):"")+"Z";var p,g,v,m,y,x,b,_,w,A,M,T,k=0,E=0,C=[];if((m=(+o.apply(this,arguments)||0)/2)&&(v=n===Co?Math.sqrt(l*l+u*u):+n.apply(this,arguments),d||(E*=-1),u&&(E=It(v/u*Math.sin(m))),l&&(k=It(v/l*Math.sin(m)))),u){y=u*Math.cos(c+E),x=u*Math.sin(c+E),b=u*Math.cos(f-E),_=u*Math.sin(f-E);var S=Math.abs(f-c-2*E)<=Tt?0:1;if(E&&Io(y,x,b,_)===d^S){var L=(c+f)/2;y=u*Math.cos(L),x=u*Math.sin(L),b=_=null}}else y=x=0;if(l){w=l*Math.cos(f-k),A=l*Math.sin(f-k),M=l*Math.cos(c+k),T=l*Math.sin(c+k);var O=Math.abs(c-f+2*k)<=Tt?0:1;if(k&&Io(w,A,M,T)===1-d^O){var R=(c+f)/2;w=l*Math.cos(R),A=l*Math.sin(R),M=T=null}}else w=A=0;if(h>At&&(p=Math.min(Math.abs(u-l)/2,+r.apply(this,arguments)))>.001){g=l<u^d?0:1;var D=p,I=p;if(h<Tt){var P=null==M?[w,A]:null==b?[y,x]:ia([y,x],[M,T],[b,_],[w,A]),F=y-P[0],z=x-P[1],N=b-P[0],B=_-P[1],j=1/Math.sin(Math.acos((F*N+z*B)/(Math.sqrt(F*F+z*z)*Math.sqrt(N*N+B*B)))/2),U=Math.sqrt(P[0]*P[0]+P[1]*P[1]);I=Math.min(p,(l-U)/(j-1)),D=Math.min(p,(u-U)/(j+1))}if(null!=b){var V=Po(null==M?[w,A]:[M,T],[y,x],u,D,d),H=Po([b,_],[w,A],u,D,d);p===D?C.push("M",V[0],"A",D,",",D," 0 0,",g," ",V[1],"A",u,",",u," 0 ",1-d^Io(V[1][0],V[1][1],H[1][0],H[1][1]),",",d," ",H[1],"A",D,",",D," 0 0,",g," ",H[0]):C.push("M",V[0],"A",D,",",D," 0 1,",g," ",H[0])}else C.push("M",y,",",x);if(null!=M){var q=Po([y,x],[M,T],l,-I,d),G=Po([w,A],null==b?[y,x]:[b,_],l,-I,d);p===I?C.push("L",G[0],"A",I,",",I," 0 0,",g," ",G[1],"A",l,",",l," 0 ",d^Io(G[1][0],G[1][1],q[1][0],q[1][1]),",",1-d," ",q[1],"A",I,",",I," 0 0,",g," ",q[0]):C.push("L",G[0],"A",I,",",I," 0 0,",g," ",q[0])}else C.push("L",w,",",A)}else C.push("M",y,",",x),null!=b&&C.push("A",u,",",u," 0 ",S,",",d," ",b,",",_),C.push("L",w,",",A),null!=M&&C.push("A",l,",",l," 0 ",O,",",1-d," ",M,",",T);return C.push("Z"),C.join("")}function s(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return l.innerRadius=function(e){return arguments.length?(t=ve(e),l):t},l.outerRadius=function(t){return arguments.length?(e=ve(t),l):e},l.cornerRadius=function(t){return arguments.length?(r=ve(t),l):r},l.padRadius=function(t){return arguments.length?(n=t==Co?Co:ve(t),l):n},l.startAngle=function(t){return arguments.length?(a=ve(t),l):a},l.endAngle=function(t){return arguments.length?(i=ve(t),l):i},l.padAngle=function(t){return arguments.length?(o=ve(t),l):o},l.centroid=function(){var r=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-Ct;return[Math.cos(n)*r,Math.sin(n)*r]},l};var Co="auto";function So(t){return t.innerRadius}function Lo(t){return t.outerRadius}function Oo(t){return t.startAngle}function Ro(t){return t.endAngle}function Do(t){return t&&t.padAngle}function Io(t,e,r,n){return(t-r)*e-(e-n)*t>0?0:1}function Po(t,e,r,n,a){var i=t[0]-e[0],o=t[1]-e[1],l=(a?n:-n)/Math.sqrt(i*i+o*o),s=l*o,u=-l*i,c=t[0]+s,f=t[1]+u,h=e[0]+s,d=e[1]+u,p=(c+h)/2,g=(f+d)/2,v=h-c,m=d-f,y=v*v+m*m,x=r-n,b=c*d-h*f,_=(m<0?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),w=(b*m-v*_)/y,A=(-b*v-m*_)/y,M=(b*m+v*_)/y,T=(-b*v+m*_)/y,k=w-p,E=A-g,C=M-p,S=T-g;return k*k+E*E>C*C+S*S&&(w=M,A=T),[[w-s,A-u],[w*r/x,A*r/x]]}function Fo(t){var e=Kn,r=ta,n=Xr,a=No,i=a.key,o=.7;function l(i){var l,s=[],u=[],c=-1,f=i.length,h=ve(e),d=ve(r);function p(){s.push("M",a(t(u),o))}for(;++c<f;)n.call(this,l=i[c],c)?u.push([+h.call(this,l,c),+d.call(this,l,c)]):u.length&&(p(),u=[]);return u.length&&p(),s.length?s.join(""):null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(t){return arguments.length?(r=t,l):r},l.defined=function(t){return arguments.length?(n=t,l):n},l.interpolate=function(t){return arguments.length?(i="function"==typeof t?a=t:(a=zo.get(t)||No).key,l):i},l.tension=function(t){return arguments.length?(o=t,l):o},l}e.svg.line=function(){return Fo(O)};var zo=e.map({linear:No,"linear-closed":Bo,step:function(t){var e=0,r=t.length,n=t[0],a=[n[0],",",n[1]];for(;++e<r;)a.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);r>1&&a.push("H",n[0]);return a.join("")},"step-before":jo,"step-after":Uo,basis:qo,"basis-open":function(t){if(t.length<4)return No(t);var e,r=[],n=-1,a=t.length,i=[0],o=[0];for(;++n<3;)e=t[n],i.push(e[0]),o.push(e[1]);r.push(Go(Yo,i)+","+Go(Yo,o)),--n;for(;++n<a;)e=t[n],i.shift(),i.push(e[0]),o.shift(),o.push(e[1]),Zo(r,i,o);return r.join("")},"basis-closed":function(t){var e,r,n=-1,a=t.length,i=a+4,o=[],l=[];for(;++n<4;)r=t[n%a],o.push(r[0]),l.push(r[1]);e=[Go(Yo,o),",",Go(Yo,l)],--n;for(;++n<i;)r=t[n%a],o.shift(),o.push(r[0]),l.shift(),l.push(r[1]),Zo(e,o,l);return e.join("")},bundle:function(t,e){var r=t.length-1;if(r)for(var n,a,i=t[0][0],o=t[0][1],l=t[r][0]-i,s=t[r][1]-o,u=-1;++u<=r;)n=t[u],a=u/r,n[0]=e*n[0]+(1-e)*(i+a*l),n[1]=e*n[1]+(1-e)*(o+a*s);return qo(t)},cardinal:function(t,e){return t.length<3?No(t):t[0]+Vo(t,Ho(t,e))},"cardinal-open":function(t,e){return t.length<4?No(t):t[1]+Vo(t.slice(1,-1),Ho(t,e))},"cardinal-closed":function(t,e){return t.length<3?Bo(t):t[0]+Vo((t.push(t[0]),t),Ho([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?No(t):t[0]+Vo(t,function(t){var e,r,n,a,i=[],o=function(t){var e=0,r=t.length-1,n=[],a=t[0],i=t[1],o=n[0]=Jo(a,i);for(;++e<r;)n[e]=(o+(o=Jo(a=i,i=t[e+1])))/2;return n[e]=o,n}(t),l=-1,s=t.length-1;for(;++l<s;)e=Jo(t[l],t[l+1]),y(e)<At?o[l]=o[l+1]=0:(r=o[l]/e,n=o[l+1]/e,(a=r*r+n*n)>9&&(a=3*e/Math.sqrt(a),o[l]=a*r,o[l+1]=a*n));l=-1;for(;++l<=s;)a=(t[Math.min(s,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+o[l]*o[l])),i.push([a||0,o[l]*a||0]);return i}(t))}});function No(t){return t.length>1?t.join("L"):t+"Z"}function Bo(t){return t.join("L")+"Z"}function jo(t){for(var e=0,r=t.length,n=t[0],a=[n[0],",",n[1]];++e<r;)a.push("V",(n=t[e])[1],"H",n[0]);return a.join("")}function Uo(t){for(var e=0,r=t.length,n=t[0],a=[n[0],",",n[1]];++e<r;)a.push("H",(n=t[e])[0],"V",n[1]);return a.join("")}function Vo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return No(t);var r=t.length!=e.length,n="",a=t[0],i=t[1],o=e[0],l=o,s=1;if(r&&(n+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=t[1],s=2),e.length>1){l=e[1],i=t[s],s++,n+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1];for(var u=2;u<e.length;u++,s++)i=t[s],l=e[u],n+="S"+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1]}if(r){var c=t[s];n+="Q"+(i[0]+2*l[0]/3)+","+(i[1]+2*l[1]/3)+","+c[0]+","+c[1]}return n}function Ho(t,e){for(var r,n=[],a=(1-e)/2,i=t[0],o=t[1],l=1,s=t.length;++l<s;)r=i,i=o,o=t[l],n.push([a*(o[0]-r[0]),a*(o[1]-r[1])]);return n}function qo(t){if(t.length<3)return No(t);var e=1,r=t.length,n=t[0],a=n[0],i=n[1],o=[a,a,a,(n=t[1])[0]],l=[i,i,i,n[1]],s=[a,",",i,"L",Go(Yo,o),",",Go(Yo,l)];for(t.push(t[r-1]);++e<=r;)n=t[e],o.shift(),o.push(n[0]),l.shift(),l.push(n[1]),Zo(s,o,l);return t.pop(),s.push("L",n),s.join("")}function Go(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}zo.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Xo=[0,2/3,1/3,0],Wo=[0,1/3,2/3,0],Yo=[0,1/6,2/3,1/6];function Zo(t,e,r){t.push("C",Go(Xo,e),",",Go(Xo,r),",",Go(Wo,e),",",Go(Wo,r),",",Go(Yo,e),",",Go(Yo,r))}function Jo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Qo(t){for(var e,r,n,a=-1,i=t.length;++a<i;)r=(e=t[a])[0],n=e[1]-Ct,e[0]=r*Math.cos(n),e[1]=r*Math.sin(n);return t}function $o(t){var e=Kn,r=Kn,n=0,a=ta,i=Xr,o=No,l=o.key,s=o,u="L",c=.7;function f(l){var f,h,d,p=[],g=[],v=[],m=-1,y=l.length,x=ve(e),b=ve(n),_=e===r?function(){return h}:ve(r),w=n===a?function(){return d}:ve(a);function A(){p.push("M",o(t(v),c),u,s(t(g.reverse()),c),"Z")}for(;++m<y;)i.call(this,f=l[m],m)?(g.push([h=+x.call(this,f,m),d=+b.call(this,f,m)]),v.push([+_.call(this,f,m),+w.call(this,f,m)])):g.length&&(A(),g=[],v=[]);return g.length&&A(),p.length?p.join(""):null}return f.x=function(t){return arguments.length?(e=r=t,f):r},f.x0=function(t){return arguments.length?(e=t,f):e},f.x1=function(t){return arguments.length?(r=t,f):r},f.y=function(t){return arguments.length?(n=a=t,f):a},f.y0=function(t){return arguments.length?(n=t,f):n},f.y1=function(t){return arguments.length?(a=t,f):a},f.defined=function(t){return arguments.length?(i=t,f):i},f.interpolate=function(t){return arguments.length?(l="function"==typeof t?o=t:(o=zo.get(t)||No).key,s=o.reverse||o,u=o.closed?"M":"L",f):l},f.tension=function(t){return arguments.length?(c=t,f):c},f}function Ko(t){return t.radius}function tl(t){return[t.x,t.y]}function el(){return 64}function rl(){return"circle"}function nl(t){var e=Math.sqrt(t/Tt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}e.svg.line.radial=function(){var t=Fo(Qo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},jo.reverse=Uo,Uo.reverse=jo,e.svg.area=function(){return $o(O)},e.svg.area.radial=function(){var t=$o(Qo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},e.svg.chord=function(){var t=Bn,e=jn,r=Ko,n=Oo,a=Ro;function i(r,n){var a,i,u=o(this,t,r,n),c=o(this,e,r,n);return"M"+u.p0+l(u.r,u.p1,u.a1-u.a0)+(i=c,(a=u).a0==i.a0&&a.a1==i.a1?s(u.r,u.p1,u.r,u.p0):s(u.r,u.p1,c.r,c.p0)+l(c.r,c.p1,c.a1-c.a0)+s(c.r,c.p1,u.r,u.p0))+"Z"}function o(t,e,i,o){var l=e.call(t,i,o),s=r.call(t,l,o),u=n.call(t,l,o)-Ct,c=a.call(t,l,o)-Ct;return{r:s,a0:u,a1:c,p0:[s*Math.cos(u),s*Math.sin(u)],p1:[s*Math.cos(c),s*Math.sin(c)]}}function l(t,e,r){return"A"+t+","+t+" 0 "+ +(r>Tt)+",1 "+e}function s(t,e,r,n){return"Q 0,0 "+n}return i.radius=function(t){return arguments.length?(r=ve(t),i):r},i.source=function(e){return arguments.length?(t=ve(e),i):t},i.target=function(t){return arguments.length?(e=ve(t),i):e},i.startAngle=function(t){return arguments.length?(n=ve(t),i):n},i.endAngle=function(t){return arguments.length?(a=ve(t),i):a},i},e.svg.diagonal=function(){var t=Bn,e=jn,r=tl;function n(n,a){var i=t.call(this,n,a),o=e.call(this,n,a),l=(i.y+o.y)/2,s=[i,{x:i.x,y:l},{x:o.x,y:l},o];return"M"+(s=s.map(r))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}return n.source=function(e){return arguments.length?(t=ve(e),n):t},n.target=function(t){return arguments.length?(e=ve(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},e.svg.diagonal.radial=function(){var t=e.svg.diagonal(),r=tl,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),r=e[0],n=e[1]-Ct;return[r*Math.cos(n),r*Math.sin(n)]}}(r=t)):r},t},e.svg.symbol=function(){var t=rl,e=el;function r(r,n){return(al.get(t.call(this,r,n))||nl)(e.call(this,r,n))}return r.type=function(e){return arguments.length?(t=ve(e),r):t},r.size=function(t){return arguments.length?(e=ve(t),r):e},r};var al=e.map({circle:nl,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ol)),r=e*ol;return"M0,"+-e+"L"+r+",0 0,"+e+" "+-r+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/il),r=e*il/2;return"M0,"+r+"L"+e+","+-r+" "+-e+","+-r+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/il),r=e*il/2;return"M0,"+-r+"L"+e+","+r+" "+-e+","+r+"Z"}});e.svg.symbolTypes=al.keys();var il=Math.sqrt(3),ol=Math.tan(30*St);W.transition=function(t){for(var e,r,n=cl||++dl,a=vl(t),i=[],o=fl||{time:Date.now(),ease:ti,delay:0,duration:250},l=-1,s=this.length;++l<s;){i.push(e=[]);for(var u=this[l],c=-1,f=u.length;++c<f;)(r=u[c])&&ml(r,c,a,n,o),e.push(r)}return ul(i,a,n)},W.interrupt=function(t){return this.each(null==t?ll:sl(vl(t)))};var ll=sl(vl());function sl(t){return function(){var e,r,n;(e=this[t])&&(n=e[r=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[r]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function ul(t,e,r){return V(t,hl),t.namespace=e,t.id=r,t}var cl,fl,hl=[],dl=0;function pl(t,e,r,n){var a=t.id,i=t.namespace;return ct(t,"function"==typeof r?function(t,o,l){t[i][a].tween.set(e,n(r.call(t,t.__data__,o,l)))}:(r=n(r),function(t){t[i][a].tween.set(e,r)}))}function gl(t){return null==t&&(t=""),function(){this.textContent=t}}function vl(t){return null==t?"__transition__":"__transition_"+t+"__"}function ml(t,e,r,n,a){var i,o,l,s,u,c=t[r]||(t[r]={active:0,count:0}),f=c[n];function h(r){var a=c.active,h=c[a];for(var p in h&&(h.timer.c=null,h.timer.t=NaN,--c.count,delete c[a],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),c)if(+p<n){var g=c[p];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[p]}o.c=d,Me(function(){return o.c&&d(r||1)&&(o.c=null,o.t=NaN),1},0,i),c.active=n,f.event&&f.event.start.call(t,t.__data__,e),u=[],f.tween.forEach(function(r,n){(n=n.call(t,t.__data__,e))&&u.push(n)}),s=f.ease,l=f.duration}function d(a){for(var i=a/l,o=s(i),h=u.length;h>0;)u[--h].call(t,o);if(i>=1)return f.event&&f.event.end.call(t,t.__data__,e),--c.count?delete c[n]:delete t[r],1}f||(i=a.time,o=Me(function(t){var e=f.delay;if(o.t=e+i,e<=t)return h(t-e);o.c=h},0,i),f=c[n]={tween:new b,time:i,timer:o,delay:a.delay,duration:a.duration,ease:a.ease,index:e},a=null,++c.count)}hl.call=W.call,hl.empty=W.empty,hl.node=W.node,hl.size=W.size,e.transition=function(t,r){return t&&t.transition?cl?t.transition(r):t:e.selection().transition(t)},e.transition.prototype=hl,hl.select=function(t){var e,r,n,a=this.id,i=this.namespace,o=[];t=Y(t);for(var l=-1,s=this.length;++l<s;){o.push(e=[]);for(var u=this[l],c=-1,f=u.length;++c<f;)(n=u[c])&&(r=t.call(n,n.__data__,c,l))?("__data__"in n&&(r.__data__=n.__data__),ml(r,c,i,a,n[i][a]),e.push(r)):e.push(null)}return ul(o,i,a)},hl.selectAll=function(t){var e,r,n,a,i,o=this.id,l=this.namespace,s=[];t=Z(t);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],h=-1,d=f.length;++h<d;)if(n=f[h]){i=n[l][o],r=t.call(n,n.__data__,h,u),s.push(e=[]);for(var p=-1,g=r.length;++p<g;)(a=r[p])&&ml(a,p,l,o,i),e.push(a)}return ul(s,l,o)},hl.filter=function(t){var e,r,n=[];"function"!=typeof t&&(t=ut(t));for(var a=0,i=this.length;a<i;a++){n.push(e=[]);for(var o,l=0,s=(o=this[a]).length;l<s;l++)(r=o[l])&&t.call(r,r.__data__,l,a)&&e.push(r)}return ul(n,this.namespace,this.id)},hl.tween=function(t,e){var r=this.id,n=this.namespace;return arguments.length<2?this.node()[n][r].tween.get(t):ct(this,null==e?function(e){e[n][r].tween.remove(t)}:function(a){a[n][r].tween.set(t,e)})},hl.attr=function(t,r){if(arguments.length<2){for(r in t)this.attr(r,t[r]);return this}var n="transform"==t?fi:Ga,a=e.ns.qualify(t);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}return pl(this,"attr."+t,r,a.local?function(t){return null==t?o:(t+="",function(){var e,r=this.getAttributeNS(a.space,a.local);return r!==t&&(e=n(r,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}:function(t){return null==t?i:(t+="",function(){var e,r=this.getAttribute(a);return r!==t&&(e=n(r,t),function(t){this.setAttribute(a,e(t))})})})},hl.attrTween=function(t,r){var n=e.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,e){var a=r.call(this,t,e,this.getAttributeNS(n.space,n.local));return a&&function(t){this.setAttributeNS(n.space,n.local,a(t))}}:function(t,e){var a=r.call(this,t,e,this.getAttribute(n));return a&&function(t){this.setAttribute(n,a(t))}})},hl.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=""),t)this.style(r,t[r],e);return this}r=""}function a(){this.style.removeProperty(t)}return pl(this,"style."+t,e,function(e){return null==e?a:(e+="",function(){var n,a=o(this).getComputedStyle(this,null).getPropertyValue(t);return a!==e&&(n=Ga(a,e),function(e){this.style.setProperty(t,n(e),r)})})})},hl.styleTween=function(t,e,r){return arguments.length<3&&(r=""),this.tween("style."+t,function(n,a){var i=e.call(this,n,a,o(this).getComputedStyle(this,null).getPropertyValue(t));return i&&function(e){this.style.setProperty(t,i(e),r)}})},hl.text=function(t){return pl(this,"text",t,gl)},hl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},hl.ease=function(t){var r=this.id,n=this.namespace;return arguments.length<1?this.node()[n][r].ease:("function"!=typeof t&&(t=e.ease.apply(e,arguments)),ct(this,function(e){e[n][r].ease=t}))},hl.delay=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].delay:ct(this,"function"==typeof t?function(n,a,i){n[r][e].delay=+t.call(n,n.__data__,a,i)}:(t=+t,function(n){n[r][e].delay=t}))},hl.duration=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].duration:ct(this,"function"==typeof t?function(n,a,i){n[r][e].duration=Math.max(1,t.call(n,n.__data__,a,i))}:(t=Math.max(1,t),function(n){n[r][e].duration=t}))},hl.each=function(t,r){var n=this.id,a=this.namespace;if(arguments.length<2){var i=fl,o=cl;try{cl=n,ct(this,function(e,r,i){fl=e[a][n],t.call(e,e.__data__,r,i)})}finally{fl=i,cl=o}}else ct(this,function(i){var o=i[a][n];(o.event||(o.event=e.dispatch("start","end","interrupt"))).on(t,r)});return this},hl.transition=function(){for(var t,e,r,n=this.id,a=++dl,i=this.namespace,o=[],l=0,s=this.length;l<s;l++){o.push(t=[]);for(var u,c=0,f=(u=this[l]).length;c<f;c++)(e=u[c])&&ml(e,c,i,a,{time:(r=e[i][n]).time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration}),t.push(e)}return ul(o,i,a)},e.svg.axis=function(){var t,r=e.scale.linear(),a=yl,i=6,o=6,l=3,s=[10],u=null;function c(n){n.each(function(){var n,c=e.select(this),f=this.__chart__||r,h=this.__chart__=r.copy(),d=null==u?h.ticks?h.ticks.apply(h,s):h.domain():u,p=null==t?h.tickFormat?h.tickFormat.apply(h,s):O:t,g=c.selectAll(".tick").data(d,h),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",At),m=e.transition(g.exit()).style("opacity",At).remove(),y=e.transition(g.order()).style("opacity",1),x=Math.max(i,0)+l,b=oo(h),_=c.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),e.transition(_));v.append("line"),v.append("text");var A,M,T,k,E=v.select("line"),C=y.select("line"),S=g.select("text").text(p),L=v.select("text"),R=y.select("text"),D="top"===a||"left"===a?-1:1;if("bottom"===a||"top"===a?(n=bl,A="x",T="y",M="x2",k="y2",S.attr("dy",D<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+b[0]+","+D*o+"V0H"+b[1]+"V"+D*o)):(n=_l,A="y",T="x",M="y2",k="x2",S.attr("dy",".32em").style("text-anchor",D<0?"end":"start"),w.attr("d","M"+D*o+","+b[0]+"H0V"+b[1]+"H"+D*o)),E.attr(k,D*i),L.attr(T,D*x),C.attr(M,0).attr(k,D*i),R.attr(A,0).attr(T,D*x),h.rangeBand){var I=h,P=I.rangeBand()/2;f=h=function(t){return I(t)+P}}else f.rangeBand?f=h:m.call(n,h,f);v.call(n,f,h),y.call(n,h,h)})}return c.scale=function(t){return arguments.length?(r=t,c):r},c.orient=function(t){return arguments.length?(a=t in xl?t+"":yl,c):a},c.ticks=function(){return arguments.length?(s=n(arguments),c):s},c.tickValues=function(t){return arguments.length?(u=t,c):u},c.tickFormat=function(e){return arguments.length?(t=e,c):t},c.tickSize=function(t){var e=arguments.length;return e?(i=+t,o=+arguments[e-1],c):i},c.innerTickSize=function(t){return arguments.length?(i=+t,c):i},c.outerTickSize=function(t){return arguments.length?(o=+t,c):o},c.tickPadding=function(t){return arguments.length?(l=+t,c):l},c.tickSubdivide=function(){return arguments.length&&c},c};var yl="bottom",xl={top:1,right:1,bottom:1,left:1};function bl(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate("+(isFinite(n)?n:r(t))+",0)"})}function _l(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:r(t))+")"})}e.svg.brush=function(){var t,r,n=j(h,"brushstart","brush","brushend"),a=null,i=null,l=[0,0],s=[0,0],u=!0,c=!0,f=Al[0];function h(t){t.each(function(){var t=e.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),r=t.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(f,O);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return wl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var o,l=e.transition(t),s=e.transition(r);a&&(o=oo(a),s.attr("x",o[0]).attr("width",o[1]-o[0]),p(l)),i&&(o=oo(i),s.attr("y",o[0]).attr("height",o[1]-o[0]),g(l)),d(l)})}function d(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+l[+/e$/.test(t)]+","+s[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",l[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function g(t){t.select(".extent").attr("y",s[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function v(){var f,v,m=this,y=e.select(e.event.target),x=n.of(m,arguments),b=e.select(m),_=y.datum(),w=!/^(n|s)$/.test(_)&&a,A=!/^(e|w)$/.test(_)&&i,M=y.classed("extent"),T=xt(m),k=e.mouse(m),E=e.select(o(m)).on("keydown.brush",function(){32==e.event.keyCode&&(M||(f=null,k[0]-=l[1],k[1]-=s[1],M=2),N())}).on("keyup.brush",function(){32==e.event.keyCode&&2==M&&(k[0]+=l[1],k[1]+=s[1],M=0,N())});if(e.event.changedTouches?E.on("touchmove.brush",L).on("touchend.brush",R):E.on("mousemove.brush",L).on("mouseup.brush",R),b.interrupt().selectAll("*").interrupt(),M)k[0]=l[0]-k[0],k[1]=s[0]-k[1];else if(_){var C=+/w$/.test(_),S=+/^n/.test(_);v=[l[1-C]-k[0],s[1-S]-k[1]],k[0]=l[C],k[1]=s[S]}else e.event.altKey&&(f=k.slice());function L(){var t=e.mouse(m),r=!1;v&&(t[0]+=v[0],t[1]+=v[1]),M||(e.event.altKey?(f||(f=[(l[0]+l[1])/2,(s[0]+s[1])/2]),k[0]=l[+(t[0]<f[0])],k[1]=s[+(t[1]<f[1])]):f=null),w&&O(t,a,0)&&(p(b),r=!0),A&&O(t,i,1)&&(g(b),r=!0),r&&(d(b),x({type:"brush",mode:M?"move":"resize"}))}function O(e,n,a){var i,o,h=oo(n),d=h[0],p=h[1],g=k[a],v=a?s:l,m=v[1]-v[0];if(M&&(d-=g,p-=m+g),i=(a?c:u)?Math.max(d,Math.min(p,e[a])):e[a],M?o=(i+=g)+m:(f&&(g=Math.max(d,Math.min(p,2*f[a]-i))),g<i?(o=i,i=g):o=g),v[0]!=i||v[1]!=o)return a?r=null:t=null,v[0]=i,v[1]=o,!0}function R(){L(),b.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),e.select("body").style("cursor",null),E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),x({type:"brushend"})}b.style("pointer-events","none").selectAll(".resize").style("display",null),e.select("body").style("cursor",y.style("cursor")),x({type:"brushstart"}),L()}return h.event=function(a){a.each(function(){var a=n.of(this,arguments),i={x:l,y:s,i:t,j:r},o=this.__chart__||i;this.__chart__=i,cl?e.select(this).transition().each("start.brush",function(){t=o.i,r=o.j,l=o.x,s=o.y,a({type:"brushstart"})}).tween("brush:brush",function(){var e=Xa(l,i.x),n=Xa(s,i.y);return t=r=null,function(t){l=i.x=e(t),s=i.y=n(t),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=i.i,r=i.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},h.x=function(t){return arguments.length?(f=Al[!(a=t)<<1|!i],h):a},h.y=function(t){return arguments.length?(f=Al[!a<<1|!(i=t)],h):i},h.clamp=function(t){return arguments.length?(a&&i?(u=!!t[0],c=!!t[1]):a?u=!!t:i&&(c=!!t),h):a&&i?[u,c]:a?u:i?c:null},h.extent=function(e){var n,o,u,c,f;return arguments.length?(a&&(n=e[0],o=e[1],i&&(n=n[0],o=o[0]),t=[n,o],a.invert&&(n=a(n),o=a(o)),o<n&&(f=n,n=o,o=f),n==l[0]&&o==l[1]||(l=[n,o])),i&&(u=e[0],c=e[1],a&&(u=u[1],c=c[1]),r=[u,c],i.invert&&(u=i(u),c=i(c)),c<u&&(f=u,u=c,c=f),u==s[0]&&c==s[1]||(s=[u,c])),h):(a&&(t?(n=t[0],o=t[1]):(n=l[0],o=l[1],a.invert&&(n=a.invert(n),o=a.invert(o)),o<n&&(f=n,n=o,o=f))),i&&(r?(u=r[0],c=r[1]):(u=s[0],c=s[1],i.invert&&(u=i.invert(u),c=i.invert(c)),c<u&&(f=u,u=c,c=f))),a&&i?[[n,u],[o,c]]:a?[n,o]:i&&[u,c])},h.clear=function(){return h.empty()||(l=[0,0],s=[0,0],t=r=null),h},h.empty=function(){return!!a&&l[0]==l[1]||!!i&&s[0]==s[1]},e.rebind(h,n,"on")};var wl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Al=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ml=De.format=lr.timeFormat,Tl=Ml.utc,kl=Tl("%Y-%m-%dT%H:%M:%S.%LZ");function El(t){return t.toISOString()}function Cl(t,r,n){function a(e){return t(e)}function i(t,n){var a=(t[1]-t[0])/n,i=e.bisect(Ll,a);return i==Ll.length?[r.year,go(t.map(function(t){return t/31536e6}),n)[2]]:i?r[a/Ll[i-1]<Ll[i]/a?i-1:i]:[Dl,go(t,n)[2]]}return a.invert=function(e){return Sl(t.invert(e))},a.domain=function(e){return arguments.length?(t.domain(e),a):t.domain().map(Sl)},a.nice=function(t,e){var r=a.domain(),n=io(r),o=null==t?i(n,10):"number"==typeof t&&i(n,t);function l(r){return!isNaN(r)&&!t.range(r,Sl(+r+1),e).length}return o&&(t=o[0],e=o[1]),a.domain(so(r,e>1?{floor:function(e){for(;l(e=t.floor(e));)e=Sl(e-1);return e},ceil:function(e){for(;l(e=t.ceil(e));)e=Sl(+e+1);return e}}:t))},a.ticks=function(t,e){var r=io(a.domain()),n=null==t?i(r,10):"number"==typeof t?i(r,t):!t.range&&[{range:t},e];return n&&(t=n[0],e=n[1]),t.range(r[0],Sl(+r[1]+1),e<1?1:e)},a.tickFormat=function(){return n},a.copy=function(){return Cl(t.copy(),r,n)},ho(a,t)}function Sl(t){return new Date(t)}Ml.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?El:kl,El.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},El.toString=kl.toString,De.second=ze(function(t){return new Ie(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),De.seconds=De.second.range,De.seconds.utc=De.second.utc.range,De.minute=ze(function(t){return new Ie(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),De.minutes=De.minute.range,De.minutes.utc=De.minute.utc.range,De.hour=ze(function(t){var e=t.getTimezoneOffset()/60;return new Ie(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),De.hours=De.hour.range,De.hours.utc=De.hour.utc.range,De.month=ze(function(t){return(t=De.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),De.months=De.month.range,De.months.utc=De.month.utc.range;var Ll=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ol=[[De.second,1],[De.second,5],[De.second,15],[De.second,30],[De.minute,1],[De.minute,5],[De.minute,15],[De.minute,30],[De.hour,1],[De.hour,3],[De.hour,6],[De.hour,12],[De.day,1],[De.day,2],[De.week,1],[De.month,1],[De.month,3],[De.year,1]],Rl=Ml.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Xr]]),Dl={range:function(t,r,n){return e.range(Math.ceil(t/n)*n,+r,n).map(Sl)},floor:O,ceil:O};Ol.year=De.year,De.scale=function(){return Cl(e.scale.linear(),Ol,Rl)};var Il=Ol.map(function(t){return[t[0].utc,t[1]]}),Pl=Tl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Xr]]);function Fl(t){return JSON.parse(t.responseText)}function zl(t){var e=a.createRange();return e.selectNode(a.body),e.createContextualFragment(t.responseText)}Il.year=De.year.utc,De.scale.utc=function(){return Cl(e.scale.linear(),Il,Pl)},e.text=me(function(t){return t.responseText}),e.json=function(t,e){return ye(t,"application/json",Fl,e)},e.html=function(t,e){return ye(t,"text/html",zl,e)},e.xml=me(function(t){return t.responseXML}),t.exports?t.exports=e:this.d3=e}(),t=t.exports;var e=function(t){var e=typeof t;if("string"===e){var r=t;if(0===(t=+t)&&function(t){for(var e,r=t.length,n=0;n<r;n++)if(((e=t.charCodeAt(n))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}(r))return!1}else if("number"!==e)return!1;return t-t<1},r={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"\u2212"},n={},a=Math.PI;n.deg2rad=function(t){return t/180*a},n.rad2deg=function(t){return t/a*180},n.wrap360=function(t){var e=t%360;return e<0?e+360:e},n.wrap180=function(t){return Math.abs(t)>180&&(t-=360*Math.round(t/360)),t};var i=r.BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,l={exports:{}};!function(t){var e=/^\s+/,r=/\s+$/,n=0,a=t.round,i=t.min,o=t.max,s=t.random;function u(l,s){if(l=l||"",s=s||{},l instanceof u)return l;if(!(this instanceof u))return new u(l,s);var c=function(n){var a={r:0,g:0,b:0},l=1,s=null,u=null,c=null,f=!1,h=!1;"string"==typeof n&&(n=function(t){t=t.replace(e,"").replace(r,"").toLowerCase();var n,a=!1;if(E[t])t=E[t],a=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(n=j.rgb.exec(t))return{r:n[1],g:n[2],b:n[3]};if(n=j.rgba.exec(t))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=j.hsl.exec(t))return{h:n[1],s:n[2],l:n[3]};if(n=j.hsla.exec(t))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=j.hsv.exec(t))return{h:n[1],s:n[2],v:n[3]};if(n=j.hsva.exec(t))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=j.hex8.exec(t))return{r:R(n[1]),g:R(n[2]),b:R(n[3]),a:F(n[4]),format:a?"name":"hex8"};if(n=j.hex6.exec(t))return{r:R(n[1]),g:R(n[2]),b:R(n[3]),format:a?"name":"hex"};if(n=j.hex4.exec(t))return{r:R(n[1]+""+n[1]),g:R(n[2]+""+n[2]),b:R(n[3]+""+n[3]),a:F(n[4]+""+n[4]),format:a?"name":"hex8"};if(n=j.hex3.exec(t))return{r:R(n[1]+""+n[1]),g:R(n[2]+""+n[2]),b:R(n[3]+""+n[3]),format:a?"name":"hex"};return!1}(n));"object"==typeof n&&(U(n.r)&&U(n.g)&&U(n.b)?(d=n.r,p=n.g,g=n.b,a={r:255*L(d,255),g:255*L(p,255),b:255*L(g,255)},f=!0,h="%"===String(n.r).substr(-1)?"prgb":"rgb"):U(n.h)&&U(n.s)&&U(n.v)?(s=I(n.s),u=I(n.v),a=function(e,r,n){e=6*L(e,360),r=L(r,100),n=L(n,100);var a=t.floor(e),i=e-a,o=n*(1-r),l=n*(1-i*r),s=n*(1-(1-i)*r),u=a%6;return{r:255*[n,l,o,o,s,n][u],g:255*[s,n,n,l,o,o][u],b:255*[o,o,s,n,n,l][u]}}(n.h,s,u),f=!0,h="hsv"):U(n.h)&&U(n.s)&&U(n.l)&&(s=I(n.s),c=I(n.l),a=function(t,e,r){var n,a,i;function o(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=L(t,360),e=L(e,100),r=L(r,100),0===e)n=a=i=r;else{var l=r<.5?r*(1+e):r+e-r*e,s=2*r-l;n=o(s,l,t+1/3),a=o(s,l,t),i=o(s,l,t-1/3)}return{r:255*n,g:255*a,b:255*i}}(n.h,s,c),f=!0,h="hsl"),n.hasOwnProperty("a")&&(l=n.a));var d,p,g;return l=S(l),{ok:f,format:n.format||h,r:i(255,o(a.r,0)),g:i(255,o(a.g,0)),b:i(255,o(a.b,0)),a:l}}(l);this._originalInput=l,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=a(100*this._a)/100,this._format=s.format||c.format,this._gradientType=s.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=c.ok,this._tc_id=n++}function c(t,e,r){t=L(t,255),e=L(e,255),r=L(r,255);var n,a,l=o(t,e,r),s=i(t,e,r),u=(l+s)/2;if(l==s)n=a=0;else{var c=l-s;switch(a=u>.5?c/(2-l-s):c/(l+s),l){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return{h:n,s:a,l:u}}function f(t,e,r){t=L(t,255),e=L(e,255),r=L(r,255);var n,a,l=o(t,e,r),s=i(t,e,r),u=l,c=l-s;if(a=0===l?0:c/l,l==s)n=0;else{switch(l){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return{h:n,s:a,v:u}}function h(t,e,r,n){var i=[D(a(t).toString(16)),D(a(e).toString(16)),D(a(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(t,e,r,n){return[D(P(n)),D(a(t).toString(16)),D(a(e).toString(16)),D(a(r).toString(16))].join("")}function p(t,e){e=0===e?0:e||10;var r=u(t).toHsl();return r.s-=e/100,r.s=O(r.s),u(r)}function g(t,e){e=0===e?0:e||10;var r=u(t).toHsl();return r.s+=e/100,r.s=O(r.s),u(r)}function v(t){return u(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var r=u(t).toHsl();return r.l+=e/100,r.l=O(r.l),u(r)}function y(t,e){e=0===e?0:e||10;var r=u(t).toRgb();return r.r=o(0,i(255,r.r-a(-e/100*255))),r.g=o(0,i(255,r.g-a(-e/100*255))),r.b=o(0,i(255,r.b-a(-e/100*255))),u(r)}function x(t,e){e=0===e?0:e||10;var r=u(t).toHsl();return r.l-=e/100,r.l=O(r.l),u(r)}function b(t,e){var r=u(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,u(r)}function _(t){var e=u(t).toHsl();return e.h=(e.h+180)%360,u(e)}function w(t){var e=u(t).toHsl(),r=e.h;return[u(t),u({h:(r+120)%360,s:e.s,l:e.l}),u({h:(r+240)%360,s:e.s,l:e.l})]}function A(t){var e=u(t).toHsl(),r=e.h;return[u(t),u({h:(r+90)%360,s:e.s,l:e.l}),u({h:(r+180)%360,s:e.s,l:e.l}),u({h:(r+270)%360,s:e.s,l:e.l})]}function M(t){var e=u(t).toHsl(),r=e.h;return[u(t),u({h:(r+72)%360,s:e.s,l:e.l}),u({h:(r+216)%360,s:e.s,l:e.l})]}function T(t,e,r){e=e||6,r=r||30;var n=u(t).toHsl(),a=360/r,i=[u(t)];for(n.h=(n.h-(a*e>>1)+720)%360;--e;)n.h=(n.h+a)%360,i.push(u(n));return i}function k(t,e){e=e||6;for(var r=u(t).toHsv(),n=r.h,a=r.s,i=r.v,o=[],l=1/e;e--;)o.push(u({h:n,s:a,v:i})),i=(i+l)%1;return o}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,r,n,a=this.toRgb();return e=a.r/255,r=a.g/255,n=a.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=S(t),this._roundA=a(100*this._a)/100,this},toHsv:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=f(this._r,this._g,this._b),e=a(360*t.h),r=a(100*t.s),n=a(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=c(this._r,this._g,this._b),e=a(360*t.h),r=a(100*t.s),n=a(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,i){var o=[D(a(t).toString(16)),D(a(e).toString(16)),D(a(r).toString(16)),D(P(n))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*L(this._r,255))+"%",g:a(100*L(this._g,255))+"%",b:a(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*L(this._r,255))+"%, "+a(100*L(this._g,255))+"%, "+a(100*L(this._b,255))+"%)":"rgba("+a(100*L(this._r,255))+"%, "+a(100*L(this._g,255))+"%, "+a(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(C[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var a=u(t);r="#"+d(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return u(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}},u.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:I(t[n]));t=r}return u(t,e)},u.equals=function(t,e){return!(!t||!e)&&u(t).toRgbString()==u(e).toRgbString()},u.random=function(){return u.fromRatio({r:s(),g:s(),b:s()})},u.mix=function(t,e,r){r=0===r?0:r||50;var n=u(t).toRgb(),a=u(e).toRgb(),i=r/100;return u({r:(a.r-n.r)*i+n.r,g:(a.g-n.g)*i+n.g,b:(a.b-n.b)*i+n.b,a:(a.a-n.a)*i+n.a})},u.readability=function(e,r){var n=u(e),a=u(r);return(t.max(n.getLuminance(),a.getLuminance())+.05)/(t.min(n.getLuminance(),a.getLuminance())+.05)},u.isReadable=function(t,e,r){var n,a,i=u.readability(t,e);switch(a=!1,(n=function(t){var e,r;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==r&&"large"!==r&&(r="small");return{level:e,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7}return a},u.mostReadable=function(t,e,r){var n,a,i,o,l=null,s=0;a=(r=r||{}).includeFallbackColors,i=r.level,o=r.size;for(var c=0;c<e.length;c++)(n=u.readability(t,e[c]))>s&&(s=n,l=u(e[c]));return u.isReadable(t,l,{level:i,size:o})||!a?l:(r.includeFallbackColors=!1,u.mostReadable(t,["#fff","#000"],r))};var E=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=u.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(E);function S(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function L(e,r){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(e)&&(e="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(e);return e=i(r,o(0,parseFloat(e))),n&&(e=parseInt(e*r,10)/100),t.abs(e-r)<1e-6?1:e%r/parseFloat(r)}function O(t){return i(1,o(0,t))}function R(t){return parseInt(t,16)}function D(t){return 1==t.length?"0"+t:""+t}function I(t){return t<=1&&(t=100*t+"%"),t}function P(e){return t.round(255*parseFloat(e)).toString(16)}function F(t){return R(t)/255}var z,N,B,j=(N="[\\s|\\(]+("+(z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",B="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+N),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+N),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+N),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function U(t){return!!j.CSS_UNIT.exec(t)}l.exports?l.exports=u:window.tinycolor=u}(Math),l=l.exports;var s={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},u=s.RdBu,c=function(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var r=0;r<t.length;r++){var n=t[r];if(2!==n.length||+n[0]<e||!l(n[1]).isValid())return!1;e=+n[0]}return!0},f=function(t,e){if(e||(e=u),!t)return e;function r(){try{t=s[t]||JSON.parse(t)}catch(r){t=e}}return"string"==typeof t&&(r(),"string"==typeof t&&r()),c(t)?t:e},h={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2},d={},p="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},g="undefined"==typeof DataView?function(){}:DataView;d.isTypedArray=function(t){return p.isView(t)&&!(t instanceof g)},d.isArrayOrTypedArray=function(t){return Array.isArray(t)||d.isTypedArray(t)};var v=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t)===Object.prototype},m={},y=Array.isArray;function x(t,e,r,n){var a,i,o,l,s,u,c=t[0],f=t.length;if(2===f&&y(c)&&y(t[1])&&0===c.length){if(function(t,e){var r,n;for(r=0;r<t.length;r++){if(null!==(n=t[r])&&"object"==typeof n)return!1;void 0!==n&&(e[r]=n)}return!0}(t[1],c))return c;c.splice(0,c.length)}for(var h=1;h<f;h++)for(i in a=t[h])o=c[i],l=a[i],n&&y(l)?c[i]=l:e&&l&&(v(l)||(s=y(l)))?(s?(s=!1,u=o&&y(o)?o:[]):u=o&&v(o)?o:{},c[i]=x([u,l],e,r,n)):(void 0!==l||r)&&(c[i]=l);return c}m.extendFlat=function(){return x(arguments,!1,!1,!1)},m.extendDeep=function(){return x(arguments,!0,!1,!1)},m.extendDeepAll=function(){return x(arguments,!0,!0,!1)},m.extendDeepNoArrays=function(){return x(arguments,!0,!1,!0)};var b={staticPlot:!1,editable:!1,edits:{annotationPosition:!1,annotationTail:!1,annotationText:!1,axisTitleText:!1,colorbarPosition:!1,colorbarTitleText:!1,legendPosition:!1,legendText:!1,shapePosition:!1,titleText:!1},autosizable:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!0,doubleClick:"reset+autosize",showTips:!0,showAxisDragHandles:!0,showAxisRangeEntryBoxes:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}},_={},w=_={};function A(t,e){if(t.apply)t.apply(t,e);else for(var r=0;r<e.length;r++)t(e[r])}w.log=function(){if(b.logging>1){for(var t=["LOG:"],e=0;e<arguments.length;e++)t.push(arguments[e]);A(console.trace||console.log,t)}},w.warn=function(){if(b.logging>0){for(var t=["WARN:"],e=0;e<arguments.length;e++)t.push(arguments[e]);A(console.trace||console.log,t)}},w.error=function(){if(b.logging>0){for(var t=["ERROR:"],e=0;e<arguments.length;e++)t.push(arguments[e]);A(console.error,t)}};var M=function(){},T=function(t,e){if(e instanceof RegExp){var r,n=e.toString();for(r=0;r<t.length;r++)if(t[r]instanceof RegExp&&t[r].toString()===n)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t},k=function(t){var e=t.editType,r=t.colorEditType;void 0===r&&(r=e);var n={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:r},editType:e};return t.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0),n},E={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,editType:"none"},font:k({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}},C={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",dflt:"",editType:"calc"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:E.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"}},S={defaults:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],defaultLine:"#444",lightLine:"#eee",background:"#fff",borderLine:"#BEC8D9",lightFraction:1e3/11},L=k({editType:"calc"});L.family.dflt='"Open Sans", verdana, arial, sans-serif',L.size.dflt=12,L.color.dflt=S.defaultLine;var O={font:L,title:{valType:"string",editType:"layoutstyle"},titlefont:k({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:S.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:S.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:S.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"}},R={},D=m.extendFlat,I=m.extendDeepAll;function P(t){var e=t.name,r=t.categories,n=t.meta;if(R.modules[e])_.log("Type "+e+" already registered");else{R.subplotsRegistry[t.basePlotModule.name]||function(t){var e=t.name;if(R.subplotsRegistry[e])return void _.log("Plot type "+e+" already registered.");for(var r in B(t),R.subplotsRegistry[e]=t,R.componentsRegistry)V(r,t.name)}(t.basePlotModule);for(var a={},i=0;i<r.length;i++)a[r[i]]=!0,R.allCategories[r[i]]=!0;for(var o in R.modules[e]={_module:t,categories:a},n&&Object.keys(n).length&&(R.modules[e].meta=n),R.allTypes.push(e),R.componentsRegistry)j(o,e);t.layoutAttributes&&D(R.traceLayoutAttributes,t.layoutAttributes)}}function F(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");var e=t.name;for(var r in R.componentsRegistry[e]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&T(R.layoutArrayContainers,e),B(t)),R.modules)j(e,r);for(var n in R.subplotsRegistry)V(e,n);for(var a in R.transformsRegistry)U(e,a);t.schema&&t.schema.layout&&I(O,t.schema.layout)}function z(t){if("string"!=typeof t.name)throw new Error("Transform module *name* must be a string.");var e="Transform module "+t.name,r="function"==typeof t.transform,n="function"==typeof t.calcTransform;if(!r&&!n)throw new Error(e+" is missing a *transform* or *calcTransform* method.");for(var a in r&&n&&_.log([e+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),v(t.attributes)||_.log(e+" registered without an *attributes* object."),"function"!=typeof t.supplyDefaults&&_.log(e+" registered without a *supplyDefaults* method."),R.transformsRegistry[t.name]=t,R.componentsRegistry)U(a,t.name)}function N(t){var e=t.name,r=e.split("-")[0],n=t.dictionary,a=t.format,i=n&&Object.keys(n).length,o=a&&Object.keys(a).length,l=R.localeRegistry,s=l[e];if(s||(l[e]=s={}),r!==e){var u=l[r];u||(l[r]=u={}),i&&u.dictionary===s.dictionary&&(u.dictionary=n),o&&u.format===s.format&&(u.format=a)}i&&(s.dictionary=n),o&&(s.format=a)}function B(t){if(t.layoutAttributes){var e=t.layoutAttributes._arrayAttrRegexps;if(e)for(var r=0;r<e.length;r++)T(R.layoutArrayRegexes,e[r])}}function j(t,e){var r=R.componentsRegistry[t].schema;if(r&&r.traces){var n=r.traces[e];n&&I(R.modules[e]._module.attributes,n)}}function U(t,e){var r=R.componentsRegistry[t].schema;if(r&&r.transforms){var n=r.transforms[e];n&&I(R.transformsRegistry[e].attributes,n)}}function V(t,e){var r=R.componentsRegistry[t].schema;if(r&&r.subplots){var n=R.subplotsRegistry[e],a=n.layoutAttributes,i="subplot"===n.attr?n.name:n.attr;Array.isArray(i)&&(i=i[0]);var o=r.subplots[i];a&&o&&I(a,o)}}function H(t){return"object"==typeof t&&(t=t.type),t}R.modules={},R.allCategories={},R.allTypes=[],R.subplotsRegistry={},R.transformsRegistry={},R.componentsRegistry={},R.layoutArrayContainers=[],R.layoutArrayRegexes=[],R.traceLayoutAttributes={},R.localeRegistry={},R.apiMethodRegistry={},R.register=function(t){if(!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];if(!r)throw new Error("Invalid module was attempted to be registered!");switch(r.moduleType){case"trace":P(r);break;case"transform":z(r);break;case"component":F(r);break;case"locale":N(r);break;case"apiMethod":var n=r.name;R.apiMethodRegistry[n]=r.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},R.getModule=function(t){var e=R.modules[H(t)];return!!e&&e._module},R.traceIs=function(t,e){if("various"===(t=H(t)))return!1;var r=R.modules[t];return r||(t&&"area"!==t&&_.log("Unrecognized trace type "+t+"."),r=R.modules[C.type.dflt]),!!r.categories[e]},R.getTransformIndices=function(t,e){for(var r=[],n=t.transforms||[],a=0;a<n.length;a++)n[a].type===e&&r.push(a);return r},R.hasTransform=function(t,e){for(var r=t.transforms||[],n=0;n<r.length;n++)if(r[n].type===e)return!0;return!1},R.getComponentMethod=function(t,e){var r=R.componentsRegistry[t];return r&&r[e]||M},R.call=function(){var t=arguments[0],e=[].slice.call(arguments,1);return R.apiMethodRegistry[t].apply(null,e)};var q=function(t){for(var e,r,n=R.layoutArrayContainers,a=R.layoutArrayRegexes,i=t.split("[")[0],o=0;o<a.length;o++)if((r=t.match(a[o]))&&0===r.index){e=r[0];break}if(e||(e=n[n.indexOf(i)]),!e)return!1;var l=t.substr(e.length);return l?!!(r=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(r[1]),property:r[3]||""}:{array:e,index:"",property:""}},G=d.isArrayOrTypedArray,X=function(t,r){if(e(r))r=String(r);else if("string"!=typeof r||"[-1]"===r.substr(r.length-4))throw"bad property string";for(var n,a,i,o=0,l=r.split(".");o<l.length;){if(n=String(l[o]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])l[o]=n[1];else{if(0!==o)throw"bad property string";l.splice(0,1)}for(a=n[2].substr(1,n[2].length-2).split("]["),i=0;i<a.length;i++)o++,l.splice(o,0,Number(a[i]))}o++}return"object"!=typeof t?function(t,e,r){return{set:function(){throw"bad container"},get:function(){},astr:e,parts:r,obj:t}}(t,r,l):{set:J(t,l,r),get:function t(e,r){return function(){var n,a,i,o,l,s=e;for(o=0;o<r.length-1;o++){if(-1===(n=r[o])){for(a=!0,i=[],l=0;l<s.length;l++)i[l]=t(s[l],r.slice(o+1))(),i[l]!==i[0]&&(a=!1);return a?i[0]:i}if("number"==typeof n&&!G(s))return;if("object"!=typeof(s=s[n])||null===s)return}if("object"==typeof s&&null!==s&&null!==(i=s[r[o]]))return i}}(t,l),astr:r,parts:l,obj:t}};var W=/(^|\.)((domain|range)(\.[xy])?|args|parallels)$/,Y=/(^|\.)args\[/;function Z(t,e){if(void 0!==(r=t)&&null!==r&&("object"!=typeof r||(G(r)?r.length:Object.keys(r).length))||v(t)&&"]"===e.charAt(e.length-1)||e.match(Y)&&void 0!==t)return!1;var r;if(!G(t))return!0;if(e.match(W))return!0;var n=q(e);return n&&""===n.index}function J(t,e,r){return function(n){var a,i,o=t,l="",s=[[t,l]],u=Z(n,r);for(i=0;i<e.length-1;i++){if("number"==typeof(a=e[i])&&!G(o))throw"array index but container is not an array";if(-1===a){if(u=!K(o,e.slice(i+1),n,r))break;return}if(!tt(o,a,e[i+1],u))break;if("object"!=typeof(o=o[a])||null===o)throw"container is not an object";l=Q(l,a),s.push([o,l])}u?(i===e.length-1&&delete o[e[i]],function(t){var e,r,n,a,i,o;for(e=t.length-1;e>=0;e--){if(n=t[e][0],a=t[e][1],o=!1,G(n))for(r=n.length-1;r>=0;r--)Z(n[r],Q(a,r))?o?n[r]=void 0:n.pop():o=!0;else if("object"==typeof n&&null!==n)for(i=Object.keys(n),o=!1,r=i.length-1;r>=0;r--)Z(n[i[r]],Q(a,i[r]))?delete n[i[r]]:o=!0;if(o)return}}(s)):o[e[i]]=n}}function Q(t,r){var n=r;return e(r)?n="["+r+"]":t&&(n="."+r),t+n}function K(t,e,r,n){var a,i=G(r),o=!0,l=r,s=n.replace("-1",0),u=!i&&Z(r,s),c=e[0];for(a=0;a<t.length;a++)s=n.replace("-1",a),i&&(u=Z(l=r[a%r.length],s)),u&&(o=!1),tt(t,a,c,u)&&J(t[a],e,n.replace("-1",a))(l);return o}function tt(t,e,r,n){if(void 0===t[e]){if(n)return!1;t[e]="number"==typeof r?[]:{}}return!0}var et={counter:function(t,e,r){var n=(e||"")+(r?"":"$");return"xy"===t?new RegExp("^x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp("^"+t+"([2-9]|[1-9][0-9]+)?"+n)}},rt={},nt=(Object.keys(s),et.counter),at=h.DESELECTDIM,it=n.wrap180,ot=d.isArrayOrTypedArray;rt.valObjectMeta={data_array:{coerceFunction:function(t,e,r){ot(t)?e.set(t):void 0!==r&&e.set(r)}},enumerated:{coerceFunction:function(t,e,r,n){n.coerceNumber&&(t=+t),-1===n.values.indexOf(t)?e.set(r):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var r=e.values,n=0;n<r.length;n++){var a=String(r[n]);if("/"===a.charAt(0)&&"/"===a.charAt(a.length-1)){if(new RegExp(a.substr(1,a.length-2)).test(t))return!0}else if(t===r[n])return!0}return!1}},boolean:{coerceFunction:function(t,e,r){!0===t||!1===t?e.set(t):e.set(r)}},number:{coerceFunction:function(t,r,n,a){!e(t)||void 0!==a.min&&t<a.min||void 0!==a.max&&t>a.max?r.set(n):r.set(+t)}},integer:{coerceFunction:function(t,r,n,a){t%1||!e(t)||void 0!==a.min&&t<a.min||void 0!==a.max&&t>a.max?r.set(n):r.set(+t)}},string:{coerceFunction:function(t,e,r,n){if("string"!=typeof t){var a="number"==typeof t;!0!==n.strict&&a?e.set(String(t)):e.set(r)}else n.noBlank&&!t?e.set(r):e.set(t)}},color:{coerceFunction:function(t,e,r){l(t).isValid()?e.set(t):e.set(r)}},colorlist:{coerceFunction:function(t,e,r){Array.isArray(t)&&t.length&&t.every(function(t){return l(t).isValid()})?e.set(t):e.set(r)}},colorscale:{coerceFunction:function(t,e,r){e.set(f(t,r))}},angle:{coerceFunction:function(t,r,n){"auto"===t?r.set("auto"):e(t)?r.set(it(+t)):r.set(n)}},subplotid:{coerceFunction:function(t,e,r){"string"==typeof t&&nt(r).test(t)?e.set(t):e.set(r)},validateFunction:function(t,e){var r=e.dflt;return t===r||"string"==typeof t&&!!nt(r).test(t)}},flaglist:{coerceFunction:function(t,e,r,n){if("string"==typeof t)if(-1===(n.extras||[]).indexOf(t)){for(var a=t.split("+"),i=0;i<a.length;){var o=a[i];-1===n.flags.indexOf(o)||a.indexOf(o)<i?a.splice(i,1):i++}a.length?e.set(a.join("+")):e.set(r)}else e.set(t);else e.set(r)}},any:{coerceFunction:function(t,e,r){void 0===t?e.set(r):e.set(t)}},info_array:{coerceFunction:function(t,e,r,n){function a(t,e,r){var n,a={set:function(t){n=t}};return void 0===r&&(r=e.dflt),rt.valObjectMeta[e.valType].coerceFunction(t,a,r,e),n}var i=2===n.dimensions;if(Array.isArray(t)){var o,l,s,u,c=n.items,f=[],h=Array.isArray(c),d=h?c.length:t.length;if(r=Array.isArray(r)?r:[],i)for(o=0;o<d;o++){f[o]=[];var p=Array.isArray(t[o])?t[o]:[];for(s=h?c[o].length:p.length,l=0;l<s;l++)void 0!==(u=a(p[l],h?c[o][l]:c,(r[o]||[])[l]))&&(f[o][l]=u)}else for(o=0;o<d;o++)void 0!==(u=a(t[o],h?c[o]:c,r[o]))&&(f[o]=u);e.set(f)}else e.set(r)},validateFunction:function(t,e){if(!Array.isArray(t))return!1;var r=e.items,n=Array.isArray(r),a=2===e.dimensions;if(!e.freeLength&&t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(a){if(!Array.isArray(t[i])||!e.freeLength&&t[i].length!==r[i].length)return!1;for(var o=0;o<t[i].length;o++)if(!rt.validate(t[i][o],n?r[i][o]:r))return!1}else if(!rt.validate(t[i],n?r[i]:r))return!1;return!0}}},rt.coerce=function(t,e,r,n,a){var i=X(r,n).get(),o=X(t,n),l=X(e,n),s=o.get();return void 0===a&&(a=i.dflt),i.arrayOk&&ot(s)?(l.set(s),s):(rt.valObjectMeta[i.valType].coerceFunction(s,l,a,i),l.get())},rt.coerce2=function(t,e,r,n,a){var i=X(t,n),o=rt.coerce(t,e,r,n,a),l=i.get();return void 0!==l&&null!==l&&o},rt.coerceFont=function(t,e,r){var n={};return r=r||{},n.family=t(e+".family",r.family),n.size=t(e+".size",r.size),n.color=t(e+".color",r.color),n},rt.coerceHoverinfo=function(t,e,r){var n,a=e._module.attributes,i=a.hoverinfo?{hoverinfo:a.hoverinfo}:C,o=i.hoverinfo;if(1===r._dataLength){var l="all"===o.dflt?o.flags.slice():o.dflt.split("+");l.splice(l.indexOf("name"),1),n=l.join("+")}return rt.coerce(t,e,i,"hoverinfo",n)},rt.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var r,n,a=t.marker.opacity;if(void 0!==a)ot(a)||t.selected||t.unselected||(r=a,n=at*a),e("selected.marker.opacity",r),e("unselected.marker.opacity",n)}},rt.validate=function(t,e){var r=rt.valObjectMeta[e.valType];if(e.arrayOk&&ot(t))return!0;if(r.validateFunction)return r.validateFunction(t,e);var n={},a=n,i={set:function(t){a=t}};return r.coerceFunction(t,i,n,e),a!==n};var lt,st,ut=function(t,e){var r=t%e;return r<0?r+e:r},ct={},ft=r.BADNUM,ht=r.ONEDAY,dt=r.ONEHOUR,pt=r.ONEMIN,gt=r.ONESEC,vt=r.EPOCHJD,mt=t.time.format.utc,yt=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,xt=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,bt=(new Date).getFullYear()-70;function _t(t){return t&&R.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function wt(t,e){return String(t+Math.pow(10,e)).substr(1)}ct.dateTick0=function(t,e){return _t(t)?e?R.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:R.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"},ct.dfltRange=function(t){return _t(t)?R.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},ct.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},ct.dateTime2ms=function(t,e){if(ct.isJSDate(t))return(t=Number(t)-t.getTimezoneOffset()*pt)>=lt&&t<=st?t:ft;if("string"!=typeof t&&"number"!=typeof t)return ft;t=String(t);var r=_t(e),n=t.charAt(0);!r||"G"!==n&&"g"!==n||(t=t.substr(1),e="");var a=r&&"chinese"===e.substr(0,7),i=t.match(a?xt:yt);if(!i)return ft;var o=i[1],l=i[3]||"1",s=Number(i[5]||1),u=Number(i[7]||0),c=Number(i[9]||0),f=Number(i[11]||0);if(r){if(2===o.length)return ft;var h;o=Number(o);try{var d=R.getComponentMethod("calendars","getCal")(e);if(a){var p="i"===l.charAt(l.length-1);l=parseInt(l,10),h=d.newDate(o,d.toMonthIndex(o,l,p),s)}else h=d.newDate(o,Number(l),s)}catch(t){return ft}return h?(h.toJD()-vt)*ht+u*dt+c*pt+f*gt:ft}o=2===o.length?(Number(o)+2e3-bt)%100+bt:Number(o),l-=1;var g=new Date(Date.UTC(2e3,l,s,u,c));return g.setUTCFullYear(o),g.getUTCMonth()!==l?ft:g.getUTCDate()!==s?ft:g.getTime()+f*gt},lt=ct.MIN_MS=ct.dateTime2ms("-9999"),st=ct.MAX_MS=ct.dateTime2ms("9999-12-31 23:59:59.9999"),ct.isDateTime=function(t,e){return ct.dateTime2ms(t,e)!==ft};var At=90*ht,Mt=3*dt,Tt=5*pt;function kt(t,e,r,n,a){if((e||r||n||a)&&(t+=" "+wt(e,2)+":"+wt(r,2),(n||a)&&(t+=":"+wt(n,2),a))){for(var i=4;a%10==0;)i-=1,a/=10;t+="."+wt(a,i)}return t}ct.ms2DateTime=function(t,e,r){if("number"!=typeof t||!(t>=lt&&t<=st))return ft;e||(e=0);var n,a,i,o,l,s,u=Math.floor(10*ut(t+.05,1)),c=Math.round(t-u/10);if(_t(r)){var f=Math.floor(c/ht)+vt,h=Math.floor(ut(t,ht));try{n=R.getComponentMethod("calendars","getCal")(r).fromJD(f).formatDate("yyyy-mm-dd")}catch(t){n=mt("G%Y-%m-%d")(new Date(c))}if("-"===n.charAt(0))for(;n.length<11;)n="-0"+n.substr(1);else for(;n.length<10;)n="0"+n;a=e<At?Math.floor(h/dt):0,i=e<At?Math.floor(h%dt/pt):0,o=e<Mt?Math.floor(h%pt/gt):0,l=e<Tt?h%gt*10+u:0}else s=new Date(c),n=mt("%Y-%m-%d")(s),a=e<At?s.getUTCHours():0,i=e<At?s.getUTCMinutes():0,o=e<Mt?s.getUTCSeconds():0,l=e<Tt?10*s.getUTCMilliseconds()+u:0;return kt(n,a,i,o,l)},ct.ms2DateTimeLocal=function(e){if(!(e>=lt+ht&&e<=st-ht))return ft;var r=Math.floor(10*ut(e+.05,1)),n=new Date(Math.round(e-r/10));return kt(t.time.format("%Y-%m-%d")(n),n.getHours(),n.getMinutes(),n.getSeconds(),10*n.getUTCMilliseconds()+r)},ct.cleanDate=function(t,e,r){if(ct.isJSDate(t)||"number"==typeof t){if(_t(r))return _.error("JS Dates and milliseconds are incompatible with world calendars",t),e;if(!(t=ct.ms2DateTimeLocal(+t))&&void 0!==e)return e}else if(!ct.isDateTime(t,r))return _.error("unrecognized date",t),e;return t};var Et=/%\d?f/g;function Ct(t,e,r,n){t=t.replace(Et,function(t){var r=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(r).substr(2).replace(/0+$/,"")||"0"});var a=new Date(Math.floor(e+.05));if(_t(n))try{t=R.getComponentMethod("calendars","worldCalFmt")(t,e,n)}catch(t){return"Invalid"}return r(t)(a)}var St=[59,59.9,59.99,59.999,59.9999];ct.formatDate=function(t,r,n,a,i,o){if(i=_t(i)&&i,!r)if("y"===n)r=o.year;else if("m"===n)r=o.month;else{if("d"!==n)return function(t,r){var n=ut(t+.05,ht),a=wt(Math.floor(n/dt),2)+":"+wt(ut(Math.floor(n/pt),60),2);if("M"!==r){e(r)||(r=0);var i=(100+Math.min(ut(t/gt,60),St[r])).toFixed(r).substr(1);r>0&&(i=i.replace(/0+$/,"").replace(/[\.]$/,"")),a+=":"+i}return a}(t,n)+"\n"+Ct(o.dayMonthYear,t,a,i);r=o.dayMonth+"\n"+o.year}return Ct(r,t,a,i)};var Lt=3*ht;ct.incrementMonth=function(t,e,r){r=_t(r)&&r;var n=ut(t,ht);if(t=Math.round(t-n),r)try{var a=Math.round(t/ht)+vt,i=R.getComponentMethod("calendars","getCal")(r),o=i.fromJD(a);return e%12?i.add(o,e,"m"):i.add(o,e/12,"y"),(o.toJD()-vt)*ht+n}catch(e){_.error("invalid ms "+t+" in calendar "+r)}var l=new Date(t+Lt);return l.setUTCMonth(l.getUTCMonth()+e)+n-Lt},ct.findExactDates=function(t,r){for(var n,a,i=0,o=0,l=0,s=0,u=_t(r)&&R.getComponentMethod("calendars","getCal")(r),c=0;c<t.length;c++)if(a=t[c],e(a)){if(!(a%ht))if(u)try{1===(n=u.fromJD(a/ht+vt)).day()?1===n.month()?i++:o++:l++}catch(t){}else 1===(n=new Date(a)).getUTCDate()?0===n.getUTCMonth()?i++:o++:l++}else s++;l+=o+=i;var f=t.length-s;return{exactYears:i/f,exactMonths:o/f,exactDays:l/f}};function Ot(t){return!0===t.visible}function Rt(t){return!0===t[0].trace.visible}var Dt,It,Pt,Ft={};function zt(t,e,r,n,a,i,o,l){var s=r-t,u=a-t,c=o-a,f=n-e,h=i-e,d=l-i,p=s*d-c*f;if(0===p)return null;var g=(u*d-c*h)/p,v=(u*f-s*h)/p;return v<0||v>1||g<0||g>1?null:{x:t+s*g,y:e+f*g}}function Nt(t,e,r,n,a){var i=n*t+a*e;if(i<0)return n*n+a*a;if(i>r){var o=n-t,l=a-e;return o*o+l*l}var s=n*e-a*t;return s*s/r}Ft.segmentsIntersect=zt,Ft.segmentDistance=function(t,e,r,n,a,i,o,l){if(zt(t,e,r,n,a,i,o,l))return 0;var s=r-t,u=n-e,c=o-a,f=l-i,h=s*s+u*u,d=c*c+f*f,p=Math.min(Nt(s,u,h,a-t,i-e),Nt(s,u,h,o-t,l-e),Nt(c,f,d,t-a,e-i),Nt(c,f,d,r-a,n-i));return Math.sqrt(p)},Ft.getTextLocation=function(t,e,r,n){if(t===It&&n===Pt||(Dt={},It=t,Pt=n),Dt[r])return Dt[r];var a=t.getPointAtLength(ut(r-n/2,e)),i=t.getPointAtLength(ut(r+n/2,e)),o=Math.atan((i.y-a.y)/(i.x-a.x)),l=t.getPointAtLength(ut(r,e)),s={x:(4*l.x+a.x+i.x)/6,y:(4*l.y+a.y+i.y)/6,theta:o};return Dt[r]=s,s},Ft.clearLocationCache=function(){It=null},Ft.getVisibleSegment=function(t,e,r){var n,a,i=e.left,o=e.right,l=e.top,s=e.bottom,u=0,c=t.getTotalLength(),f=c;function h(e){var r=t.getPointAtLength(e);0===e?n=r:e===c&&(a=r);var u=r.x<i?i-r.x:r.x>o?r.x-o:0,f=r.y<l?l-r.y:r.y>s?r.y-s:0;return Math.sqrt(u*u+f*f)}for(var d=h(u);d;){if((u+=d+r)>f)return;d=h(u)}for(d=h(f);d;){if(u>(f-=d+r))return;d=h(f)}return{min:u,max:f,len:f-u,total:c,isClosed:0===u&&f===c&&Math.abs(n.x-a.x)<.1&&Math.abs(n.y-a.y)<.1}},Ft.findPointOnPath=function(t,e,r,n){for(var a,i,o,l=(n=n||{}).pathLength||t.getTotalLength(),s=n.tolerance||.001,u=n.iterationLimit||30,c=t.getPointAtLength(0)[r]>t.getPointAtLength(l)[r]?-1:1,f=0,h=0,d=l;f<u;){if(a=(h+d)/2,o=(i=t.getPointAtLength(a))[r]-e,Math.abs(o)<s)return i;c*o>0?d=a:h=a,f++}return i};var Bt=function(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null===t||void 0===t)throw new Error("DOM element provided is null or undefined");return t},jt=function(t){return t},Ut=/^\w*$/,Vt={init2dArray:function(t,e){for(var r=new Array(t),n=0;n<t;n++)r[n]=new Array(e);return r},transposeRagged:function(t){var e,r,n=0,a=t.length;for(e=0;e<a;e++)n=Math.max(n,t[e].length);var i=new Array(n);for(e=0;e<n;e++)for(i[e]=new Array(a),r=0;r<a;r++)i[e][r]=t[r][e];return i},dot:function(t,e){if(!t.length||!e.length||t.length!==e.length)return null;var r,n,a=t.length;if(t[0].length)for(r=new Array(a),n=0;n<a;n++)r[n]=Vt.dot(t[n],e);else if(e[0].length){var i=Vt.transposeRagged(e);for(r=new Array(i.length),n=0;n<i.length;n++)r[n]=Vt.dot(t,i[n])}else for(r=0,n=0;n<a;n++)r+=t[n]*e[n];return r},translationMatrix:function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},rotationMatrix:function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},rotationXYMatrix:function(t,e,r){return Vt.dot(Vt.dot(Vt.translationMatrix(e,r),Vt.rotationMatrix(t)),Vt.translationMatrix(-e,-r))},apply2DTransform:function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);var r=1===arguments.length?e[0]:[e[0],e[1]];return Vt.dot(t,[r[0],r[1],1]).slice(0,2)}},apply2DTransform2:function(t){var e=Vt.apply2DTransform(t);return function(t){return e(t.slice(0,2)).concat(e(t.slice(2,4)))}}},Ht=[],qt=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,Gt=/^[^\.\[\]]+$/,Xt=d.isArrayOrTypedArray,Wt={};function Yt(t,e){return t<e}function Zt(t,e){return t<=e}function Jt(t,e){return t>e}function Qt(t,e){return t>=e}Wt.findBin=function(t,r,n){if(e(r.start))return n?Math.ceil((t-r.start)/r.size-1e-9)-1:Math.floor((t-r.start)/r.size+1e-9);var a,i,o=0,l=r.length,s=0,u=l>1?(r[l-1]-r[0])/(l-1):1;for(i=u>=0?n?Yt:Zt:n?Qt:Jt,t+=1e-9*u*(n?-1:1)*(u>=0?1:-1);o<l&&s++<100;)i(r[a=Math.floor((o+l)/2)],t)?o=a+1:l=a;return s>90&&_.log("Long binary search..."),o-1},Wt.sorterAsc=function(t,e){return t-e},Wt.sorterDes=function(t,e){return e-t},Wt.distinctVals=function(t){var e=t.slice();e.sort(Wt.sorterAsc);for(var r=e.length-1,n=e[r]-e[0]||1,a=n/(r||1)/1e4,i=[e[0]],o=0;o<r;o++)e[o+1]>e[o]+a&&(n=Math.min(n,e[o+1]-e[o]),i.push(e[o+1]));return{vals:i,minDiff:n}},Wt.roundUp=function(t,e,r){for(var n,a=0,i=e.length-1,o=0,l=r?0:1,s=r?1:0,u=r?Math.ceil:Math.floor;a<i&&o++<100;)e[n=u((a+i)/2)]<=t?a=n+l:i=n-s;return e[a]};var $t={},Kt=d.isArrayOrTypedArray;$t.aggNums=function(t,r,n,a){var i,o;if((!a||a>n.length)&&(a=n.length),e(r)||(r=!1),Kt(n[0])){for(o=new Array(a),i=0;i<a;i++)o[i]=$t.aggNums(t,r,n[i]);n=o}for(i=0;i<a;i++)e(r)?e(n[i])&&(r=t(+r,+n[i])):r=n[i];return r},$t.len=function(t){return $t.aggNums(function(t){return t+1},0,t)},$t.mean=function(t,e){return e||(e=$t.len(t)),$t.aggNums(function(t,e){return t+e},0,t)/e},$t.variance=function(t,r,n){return r||(r=$t.len(t)),e(n)||(n=$t.mean(t,r)),$t.aggNums(function(t,e){return t+Math.pow(e-n,2)},0,t)/r},$t.stdev=function(t,e,r){return Math.sqrt($t.variance(t,e,r))},$t.interp=function(t,r){if(!e(r))throw"n should be a finite number";if((r=r*t.length-.5)<0)return t[0];if(r>t.length-1)return t[t.length-1];var n=r%1;return n*t[Math.ceil(r)]+(1-n)*t[Math.floor(r)]};var te={},ee={};function re(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}te.throttle=function(t,e,r){var n=ee[t],a=Date.now();if(!n){for(var i in ee)ee[i].ts<a-6e4&&delete ee[i];n=ee[t]={ts:0,timer:null}}function o(){r(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}re(n),a>n.ts+e?o():n.timer=setTimeout(function(){o(),n.timer=null},e)},te.done=function(t){var e=ee[t];return e&&e.timer?new Promise(function(t){var r=e.onDone;e.onDone=function(){r&&r(),t(),e.onDone=null}}):Promise.resolve()},te.clear=function(t){if(t)re(ee[t]),delete ee[t];else for(var e in ee)te.clear(e)};var ne=function(t,r){if(t>0)return Math.log(t)/Math.LN10;var n=Math.log(Math.min(r[0],r[1]))/Math.LN10;return e(n)||(n=Math.log(Math.max(r[0],r[1]))/Math.LN10-6),n},ae={},ie=r.FP_SAFE,oe=r.BADNUM,le=ae={};le.nestedProperty=X,le.keyedContainer=function(t,e,r,n){var a,i;r=r||"name",n=n||"value";var o={};i=e&&e.length?X(t,e).get():t,e=e||"",i=i||[];var l={};for(a=0;a<i.length;a++)l[i[a][r]]=a;var s=Ut.test(n),u={set:function(t,e){var a=null===e?4:0,c=l[t];void 0===c?(a|=3,c=i.length,l[t]=c):e!==(s?i[c][n]:X(i[c],n).get())&&(a|=2);var f=i[c]=i[c]||{};return f[r]=t,s?f[n]=e:X(f,n).set(e),null!==e&&(a&=-5),o[c]=o[c]|a,u},get:function(t){var e=l[t];return void 0===e?void 0:s?i[e][n]:X(i[e],n).get()},rename:function(t,e){var n=l[t];return void 0===n?u:(o[n]=1|o[n],l[e]=n,delete l[t],i[n][r]=e,u)},remove:function(t){var e=l[t];if(void 0===e)return u;var c=i[e];if(Object.keys(c).length>2)return o[e]=2|o[e],u.set(t,null);if(s){for(a=e;a<i.length;a++)o[a]=3|o[a];for(a=e;a<i.length;a++)l[i[a][r]]--;i.splice(e,1),delete l[t]}else X(c,n).set(null),o[e]=6|o[e];return u},constructUpdate:function(){for(var t,a,l={},u=Object.keys(o),c=0;c<u.length;c++)a=u[c],t=e+"["+a+"]",i[a]?(1&o[a]&&(l[t+"."+r]=i[a][r]),2&o[a]&&(l[t+"."+n]=s?4&o[a]?null:i[a][n]:4&o[a]?null:X(i[a],n).get())):l[t]=null;return l}};return u},le.relativeAttr=function(t,e){for(;e;){var r=t.match(qt);if(r)t=r[1];else{if(!t.match(Gt))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e},le.isPlainObject=v,le.mod=ut,le.toLogRange=ne,le.relinkPrivateKeys=function t(e,r){for(var n in r){var a=r[n],i=e[n];if(i!==a)if("_"===n.charAt(0)||"function"==typeof a){if(n in e)continue;e[n]=a}else if(Xt(a)&&Xt(i)&&v(a[0])){if("customdata"===n||"ids"===n)continue;for(var o=Math.min(a.length,i.length),l=0;l<o;l++)i[l]!==a[l]&&v(a[l])&&v(i[l])&&t(i[l],a[l])}else v(a)&&v(i)&&(t(i,a),Object.keys(i).length||delete e[n])}},le.ensureArray=function(t,e){return Array.isArray(t)||(t=[]),t.length=e,t},le.isTypedArray=d.isTypedArray,le.isArrayOrTypedArray=d.isArrayOrTypedArray,le.valObjectMeta=rt.valObjectMeta,le.coerce=rt.coerce,le.coerce2=rt.coerce2,le.coerceFont=rt.coerceFont,le.coerceHoverinfo=rt.coerceHoverinfo,le.coerceSelectionMarkerOpacity=rt.coerceSelectionMarkerOpacity,le.validate=rt.validate,le.dateTime2ms=ct.dateTime2ms,le.isDateTime=ct.isDateTime,le.ms2DateTime=ct.ms2DateTime,le.ms2DateTimeLocal=ct.ms2DateTimeLocal,le.cleanDate=ct.cleanDate,le.isJSDate=ct.isJSDate,le.formatDate=ct.formatDate,le.incrementMonth=ct.incrementMonth,le.dateTick0=ct.dateTick0,le.dfltRange=ct.dfltRange,le.findExactDates=ct.findExactDates,le.MIN_MS=ct.MIN_MS,le.MAX_MS=ct.MAX_MS,le.findBin=Wt.findBin,le.sorterAsc=Wt.sorterAsc,le.sorterDes=Wt.sorterDes,le.distinctVals=Wt.distinctVals,le.roundUp=Wt.roundUp,le.aggNums=$t.aggNums,le.len=$t.len,le.mean=$t.mean,le.variance=$t.variance,le.stdev=$t.stdev,le.interp=$t.interp,le.init2dArray=Vt.init2dArray,le.transposeRagged=Vt.transposeRagged,le.dot=Vt.dot,le.translationMatrix=Vt.translationMatrix,le.rotationMatrix=Vt.rotationMatrix,le.rotationXYMatrix=Vt.rotationXYMatrix,le.apply2DTransform=Vt.apply2DTransform,le.apply2DTransform2=Vt.apply2DTransform2,le.deg2rad=n.deg2rad,le.rad2deg=n.rad2deg,le.wrap360=n.wrap360,le.wrap180=n.wrap180,le.segmentsIntersect=Ft.segmentsIntersect,le.segmentDistance=Ft.segmentDistance,le.getTextLocation=Ft.getTextLocation,le.clearLocationCache=Ft.clearLocationCache,le.getVisibleSegment=Ft.getVisibleSegment,le.findPointOnPath=Ft.findPointOnPath,le.extendFlat=m.extendFlat,le.extendDeep=m.extendDeep,le.extendDeepAll=m.extendDeepAll,le.extendDeepNoArrays=m.extendDeepNoArrays,le.log=_.log,le.warn=_.warn,le.error=_.error,le.counterRegex=et.counter,le.throttle=te.throttle,le.throttleDone=te.done,le.clearThrottle=te.clear,le.getGraphDiv=Bt,le._=function(t,e){for(var r=t._context.locale,n=0;n<2;n++){for(var a=t._context.locales,i=0;i<2;i++){var o=(a[r]||{}).dictionary;if(o){var l=o[e];if(l)return l}a=R.localeRegistry}var s=r.split("-")[0];if(s===r)break;r=s}return e},le.notifier=function(r,n){if(-1===Ht.indexOf(r)){Ht.push(r);var a=1e3;e(n)?a=n:"long"===n&&(a=3e3);var i=t.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0),i.selectAll(".notifier-note").data(Ht).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var r=t.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(o)});for(var n=r.append("p"),i=e.split(/<br\s*\/?>/g),l=0;l<i.length;l++)l&&n.append("br"),n.append("span").text(i[l]);r.transition().duration(700).style("opacity",1).transition().delay(a).call(o)})}function o(e){e.duration(700).style("opacity",0).each("end",function(e){var r=Ht.indexOf(e);-1!==r&&Ht.splice(r,1),t.select(this).remove()})}},le.filterUnique=function(t){for(var e={},r=[],n=0,a=0;a<t.length;a++){var i=t[a];1!==e[i]&&(e[i]=1,r[n++]=i)}return r},le.filterVisible=function(t){for(var e,r=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?Rt:Ot),n=[],a=0;a<t.length;a++){var i=t[a];r(i)&&n.push(i)}return n},le.pushUnique=T,le.cleanNumber=function(t){return"string"==typeof t&&(t=t.replace(o,"")),e(t)?Number(t):i},le.ensureNumber=function(t){return e(t)?(t=Number(t))<-ie||t>ie?oe:e(t)?Number(t):oe:oe},le.noop=M,le.identity=jt,le.swapAttrs=function(t,e,r,n){r||(r="x"),n||(n="y");for(var a=0;a<e.length;a++){var i=e[a],o=le.nestedProperty(t,i.replace("?",r)),l=le.nestedProperty(t,i.replace("?",n)),s=o.get();o.set(l.get()),l.set(s)}},le.raiseToTop=function(t){t.parentNode.appendChild(t)},le.cancelTransition=function(t){return t.transition().duration(0)},le.constrain=function(t,e,r){return e>r?Math.max(r,Math.min(e,t)):Math.max(e,Math.min(r,t))},le.bBoxIntersect=function(t,e,r){return r=r||0,t.left<=e.right+r&&e.left<=t.right+r&&t.top<=e.bottom+r&&e.top<=t.bottom+r},le.simpleMap=function(t,e,r,n){for(var a=t.length,i=new Array(a),o=0;o<a;o++)i[o]=e(t[o],r,n);return i},le.randstr=function t(e,r,n){if(n||(n=16),void 0===r&&(r=24),r<=0)return"0";var a,i,o=Math.log(Math.pow(2,r))/Math.log(n),l="";for(a=2;o===1/0;a*=2)o=Math.log(Math.pow(2,r/a))/Math.log(n)*a;var s=o-Math.floor(o);for(a=0;a<Math.floor(o);a++)l=Math.floor(Math.random()*n).toString(n)+l;s&&(i=Math.pow(n,s),l=Math.floor(Math.random()*i).toString(n)+l);var u=parseInt(l,n);return e&&e.indexOf(l)>-1||u!==1/0&&u>=Math.pow(2,r)?t(e,r,n):l},le.OptionControl=function(t,e){t||(t={}),e||(e="opt");var r={optionList:[],_newoption:function(n){n[e]=t,r[n.name]=n,r.optionList.push(n)}};return r["_"+e]=t,r},le.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var r,n,a,i,o=t.length,l=2*o,s=2*e-1,u=new Array(s),c=new Array(o);for(r=0;r<s;r++)u[r]=(1-Math.cos(Math.PI*(r+1)/e))/(2*e);for(r=0;r<o;r++){for(i=0,n=0;n<s;n++)(a=r+n+1-e)<-o?a-=l*Math.round(a/l):a>=l&&(a-=l*Math.floor(a/l)),a<0?a=-1-a:a>=o&&(a=l-1-a),i+=t[a]*u[n];c[r]=i}return c},le.syncOrAsync=function(t,e,r){var n;function a(){return le.syncOrAsync(t,e,r)}for(;t.length;)if((n=(0,t.splice(0,1)[0])(e))&&n.then)return n.then(a).then(void 0,le.promiseError);return r&&r(e)},le.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},le.noneOrAll=function(t,e,r){if(t){var n,a,i=!1,o=!0;for(n=0;n<r.length;n++)void 0!==(a=t[r[n]])&&null!==a?i=!0:o=!1;if(i&&!o)for(n=0;n<r.length;n++)t[r[n]]=e[r[n]]}},le.mergeArray=function(t,e,r){if(le.isArrayOrTypedArray(t))for(var n=Math.min(t.length,e.length),a=0;a<n;a++)e[a][r]=t[a]},le.fillArray=function(t,e,r,n){if(n=n||le.identity,le.isArrayOrTypedArray(t))for(var a=0;a<e.length;a++)e[a][r]=n(t[a])},le.castOption=function(t,e,r,n){n=n||le.identity;var a=le.nestedProperty(t,r).get();return le.isArrayOrTypedArray(a)?Array.isArray(e)&&le.isArrayOrTypedArray(a[e[0]])?n(a[e[0]][e[1]]):n(a[e]):a},le.extractOption=function(t,e,r,n){if(r in t)return t[r];var a=le.nestedProperty(e,n).get();return Array.isArray(a)?void 0:a},le.tagSelected=function(t,r,n){var a,i,o=r.selectedpoints,l=r._indexToPoints;if(l)for(var s in a={},l)for(var u=l[s],c=0;c<u.length;c++)a[u[c]]=s;function f(e){return void 0!==e&&e<t.length}for(var h=0;h<o.length;h++){var d=o[h];if(e(i=d)&&i>=0&&i%1==0){var p=a?a[d]:d,g=n?n[p]:p;f(g)&&(t[g].selected=1)}}},le.getTargetArray=function(t,e){var r=e.target;if("string"==typeof r&&r){var n=le.nestedProperty(t,r).get();return!!Array.isArray(n)&&n}return!!Array.isArray(r)&&r},le.minExtend=function(t,e){var r={};"object"!=typeof e&&(e={});var n,a,i,o=Object.keys(t);for(n=0;n<o.length;n++)i=t[a=o[n]],"_"!==a.charAt(0)&&"function"!=typeof i&&("module"===a?r[a]=i:Array.isArray(i)?r[a]=i.slice(0,3):r[a]=i&&"object"==typeof i?le.minExtend(t[a],e[a]):i);for(o=Object.keys(e),n=0;n<o.length;n++)"object"==typeof(i=e[a=o[n]])&&a in r&&"object"==typeof r[a]||(r[a]=i);return r},le.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},le.containsAny=function(t,e){for(var r=0;r<e.length;r++)if(-1!==t.indexOf(e[r]))return!0;return!1},le.isPlotDiv=function(e){var r=t.select(e);return r.node()instanceof HTMLElement&&r.size()&&r.classed("js-plotly-plot")},le.removeElement=function(t){var e=t&&t.parentNode;e&&e.removeChild(t)},le.addStyleRule=function(t,e){if(!le.styleSheet){var r=document.createElement("style");r.appendChild(document.createTextNode("")),document.head.appendChild(r),le.styleSheet=r.sheet}var n=le.styleSheet;n.insertRule?n.insertRule(t+"{"+e+"}",0):n.addRule?n.addRule(t,e,0):le.warn("addStyleRule failed")},le.isIE=function(){return void 0!==window.navigator.msSaveBlob},le.isD3Selection=function(t){return t&&"function"==typeof t.classed},le.objectFromPath=function(t,e){for(var r,n=t.split("."),a=r={},i=0;i<n.length;i++){var o=n[i],l=null,s=n[i].match(/(.*)\[([0-9]+)\]/);s?(o=s[1],l=s[2],r=r[o]=[],i===n.length-1?r[l]=e:r[l]={},r=r[l]):(i===n.length-1?r[o]=e:r[o]={},r=r[o])}return a};var se=/^([^\[\.]+)\.(.+)?/,ue=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;le.expandObjectPaths=function(t){var e,r,n,a,i,o,l;if("object"==typeof t&&!Array.isArray(t))for(r in t)t.hasOwnProperty(r)&&((e=r.match(se))?(a=t[r],n=e[1],delete t[r],t[n]=le.extendDeepNoArrays(t[n]||{},le.objectFromPath(r,le.expandObjectPaths(a))[n])):(e=r.match(ue))?(a=t[r],n=e[1],i=parseInt(e[2]),delete t[r],t[n]=t[n]||[],"."===e[3]?(l=e[4],o=t[n][i]=t[n][i]||{},le.extendDeepNoArrays(o,le.objectFromPath(l,le.expandObjectPaths(a)))):t[n][i]=le.expandObjectPaths(a)):t[r]=le.expandObjectPaths(t[r]));return t},le.numSeparate=function(t,e,r){if(r||(r=!1),"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var n=/(\d+)(\d{3})/,a=e.charAt(0),i=e.charAt(1),o=t.split("."),l=o[0],s=o.length>1?a+o[1]:"";if(i&&(o.length>1||l.length>4||r))for(;n.test(l);)l=l.replace(n,"$1"+i+"$2");return l+s};var ce=/%{([^\s%{}]*)}/g,fe=/^\w*$/;le.templateString=function(t,e){var r={};return t.replace(ce,function(t,n){return fe.test(n)?e[n]||"":(r[n]=r[n]||le.nestedProperty(e,n).get,r[n]()||"")})};le.subplotSort=function(t,e){for(var r=Math.min(t.length,e.length)+1,n=0,a=0,i=0;i<r;i++){var o=t.charCodeAt(i)||0,l=e.charCodeAt(i)||0,s=o>=48&&o<=57,u=l>=48&&l<=57;if(s&&(n=10*n+o-48),u&&(a=10*a+l-48),!s||!u){if(n!==a)return n-a;if(o!==l)return o-l}}return a-n};var he=2e9;le.seedPseudoRandom=function(){he=2e9},le.pseudoRandom=function(){var t=he;return he=(69069*he+1)%4294967296,Math.abs(he-t)<429496729?le.pseudoRandom():he/4294967296};var de=ae.extendFlat,pe=ae.isPlainObject,ge={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"]},ve={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","margins","layoutstyle","modebar","camera","arraydraw"]},me=ge.flags.slice().concat(["clearCalc","fullReplot"]),ye=ve.flags.slice().concat("layoutReplot"),xe={traces:ge,layout:ve,traceFlags:function(){return be(me)},layoutFlags:function(){return be(ye)},update:function(t,e){var r=e.editType;if(r&&"none"!==r)for(var n=r.split("+"),a=0;a<n.length;a++)t[n[a]]=!0},overrideAll:_e};function be(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!1;return e}function _e(t,e,r){var n=de({},t);for(var a in n){var i=n[a];pe(i)&&(n[a]=we(i,e,r,a))}return"from-root"===r&&(n.editType=e),n}function we(t,e,r,n){if(t.valType){var a=de({},t);if(a.editType=e,Array.isArray(t.items)){a.items=new Array(t.items.length);for(var i=0;i<t.items.length;i++)a.items[i]=we(t.items[i],e,"from-root")}return a}return _e(t,e,"_"===n.charAt(0)?"nested":"from-root")}var Ae={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"},Me=k({editType:"none"});Me.family.dflt=Ae.HOVERFONT,Me.size.dflt=Ae.HOVERFONTSIZE;var Te={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:Me,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"}},ke={xmlns:"http://www.w3.org/2000/xmlns/",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};ke.svgAttrs={xmlns:ke.svg,"xmlns:xlink":ke.xlink};var Ee={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}},Ce=et.counter,Se={idRegex:{x:Ce("x"),y:Ce("y")},attrRegex:Ce("[xy]axis"),xAxisMatch:Ce("xaxis"),yAxisMatch:Ce("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","maplayer","barlayer","carpetlayer","violinlayer","boxlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}},Le={id2name:function(t){if("string"==typeof t&&t.match(Se.AX_ID_PATTERN)){var e=t.substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},name2id:function(t){if(t.match(Se.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},cleanId:function(t,e){if(t.match(Se.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)){var r=t.substr(1).replace(/^0+/,"");return"1"===r&&(r=""),t.charAt(0)+r}},list:function(t,e,r){var n=t._fullLayout;if(!n)return[];var a,i=Le.listIds(t,e),o=new Array(i.length);for(a=0;a<i.length;a++){var l=i[a];o[a]=n[l.charAt(0)+"axis"+l.substr(1)]}if(!r){var s=n._subplots.gl3d||[];for(a=0;a<s.length;a++){var u=n[s[a]];e?o.push(u[e+"axis"]):o.push(u.xaxis,u.yaxis,u.zaxis)}}return o},listIds:function(t,e){var r=t._fullLayout;if(!r)return[];var n=r._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},getFromId:function(t,e,r){var n=t._fullLayout;return"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),n[Le.id2name(e)]},getFromTrace:function(t,e,r){var n=t._fullLayout,a=null;if(R.traceIs(e,"gl3d")){var i=e.scene;"scene"===i.substr(0,5)&&(a=n[i][r+"axis"])}else a=Le.getFromId(t,e[r+"axis"]||r);return a},idSort:function(t,e){var r=t.charAt(0),n=e.charAt(0);return r!==n?r>n?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)}},Oe={dash:{valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},Re=Oe.dash,De=m.extendFlat,Ie={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:S.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks+margins"},titlefont:k({editType:"ticks+margins"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"plot+margins",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot+margins",impliedEdits:{"^autorange":!1}}],editType:"plot+margins",impliedEdits:{autorange:!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[Se.idRegex.x.toString(),Se.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks+margins",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks+margins"},tick0:{valType:"any",editType:"ticks+margins",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks+margins",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks+margins"},ticktext:{valType:"data_array",editType:"ticks+margins"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks+margins"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:S.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks+margins"},automargin:{valType:"boolean",dflt:!1,editType:"ticks+margins"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:De({},Re,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:k({editType:"ticks+margins"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks+margins"},tickprefix:{valType:"string",dflt:"",editType:"ticks+margins"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},ticksuffix:{valType:"string",dflt:"",editType:"ticks+margins"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks+margins"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks+margins"},tickformat:{valType:"string",dflt:"",editType:"ticks+margins"},tickformatstops:{_isLinkedToArray:"tickformatstop",dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks+margins"},{valType:"any",editType:"ticks+margins"}],editType:"ticks+margins"},value:{valType:"string",dflt:"",editType:"ticks+margins"},editType:"ticks+margins"},hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"layoutstyle"},linecolor:{valType:"color",dflt:S.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:S.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:S.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",Se.idRegex.x.toString(),Se.idRegex.y.toString()],editType:"plot+margins"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot+margins"},overlaying:{valType:"enumerated",values:["free",Se.idRegex.x.toString(),Se.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot+margins"},{valType:"number",min:0,max:1,editType:"plot+margins"}],dflt:[0,1],editType:"plot+margins"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot+margins"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks+margins"}}},Pe={},Fe=Pe={};Fe.defaults=S.defaults;var ze=Fe.defaultLine=S.defaultLine;Fe.lightLine=S.lightLine;var Ne=Fe.background=S.background;function Be(t){if(e(t)||"string"!=typeof t)return t;var r=t.trim();if("rgb"!==r.substr(0,3))return t;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return t;var a=n[1].trim().split(/\s*[\s,]\s*/),i="a"===r.charAt(3)&&4===a.length;if(!i&&3!==a.length)return t;for(var o=0;o<a.length;o++){if(!a[o].length)return t;if(a[o]=Number(a[o]),!(a[o]>=0))return t;if(3===o)a[o]>1&&(a[o]=1);else if(a[o]>=1)return t}var l=Math.round(255*a[0])+", "+Math.round(255*a[1])+", "+Math.round(255*a[2]);return i?"rgba("+l+", "+a[3]+")":"rgb("+l+")"}Fe.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},Fe.rgb=function(t){return Fe.tinyRGB(l(t))},Fe.opacity=function(t){return t?l(t).getAlpha():0},Fe.addOpacity=function(t,e){var r=l(t).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+e+")"},Fe.combine=function(t,e){var r=l(t).toRgb();if(1===r.a)return l(t).toRgbString();var n=l(e||Ne).toRgb(),a=1===n.a?n:{r:255*(1-n.a)+n.r*n.a,g:255*(1-n.a)+n.g*n.a,b:255*(1-n.a)+n.b*n.a},i={r:a.r*(1-r.a)+r.r*r.a,g:a.g*(1-r.a)+r.g*r.a,b:a.b*(1-r.a)+r.b*r.a};return l(i).toRgbString()},Fe.contrast=function(t,e,r){var n=l(t);return 1!==n.getAlpha()&&(n=l(Fe.combine(t,Ne))),(n.isDark()?e?n.lighten(e):Ne:r?n.darken(r):ze).toString()},Fe.stroke=function(t,e){var r=l(e);t.style({stroke:Fe.tinyRGB(r),"stroke-opacity":r.getAlpha()})},Fe.fill=function(t,e){var r=l(e);t.style({fill:Fe.tinyRGB(r),"fill-opacity":r.getAlpha()})},Fe.clean=function(t){if(t&&"object"==typeof t){var e,r,n,a,i=Object.keys(t);for(e=0;e<i.length;e++)if(a=t[n=i[e]],"color"===n.substr(n.length-5))if(Array.isArray(a))for(r=0;r<a.length;r++)a[r]=Be(a[r]);else t[n]=Be(a);else if("colorscale"===n.substr(n.length-10)&&Array.isArray(a))for(r=0;r<a.length;r++)Array.isArray(a[r])&&(a[r][1]=Be(a[r][1]));else if(Array.isArray(a)){var o=a[0];if(!Array.isArray(o)&&o&&"object"==typeof o)for(r=0;r<a.length;r++)Fe.clean(a[r])}else a&&"object"==typeof a&&Fe.clean(a)}};var je=l.mix,Ue=S.lightFraction;function Ve(e,r,n){var a,i,o,l,s,u=[],c=n.map(function(t){return t[e]}),f=t.bisector(r).left;for(a=0;a<c.length;a++)for(o=c[a],i=0;i<o.length;i++)null!==(l=o[i])&&void 0!==l&&((s=f(u,l))<u.length&&u[s]===l||u.splice(s,0,l));return u}var He=ae.cleanNumber,qe=ae.ms2DateTime,Ge=ae.dateTime2ms,Xe=ae.ensureNumber,We=r.FP_SAFE,Ye=r.BADNUM;function Ze(t){return Math.pow(10,t)}var Je=function(r,n){n=n||{};var a=(r._id||"x").charAt(0),i=10;function o(t,e){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&e&&r.range&&2===r.range.length){var n=r.range[0],a=r.range[1];return.5*(n+a-3*i*Math.abs(n-a))}return Ye}function l(t,n,a){var i=Ge(t,a||r.calendar);if(i===Ye){if(!e(t))return Ye;i=Ge(new Date(+t))}return i}function s(t,e,n){return qe(t,e,n||r.calendar)}function u(t){return r._categories[Math.round(t)]}function c(t){if(r._categoriesMap){var n=r._categoriesMap[t];if(void 0!==n)return n}if(e(t))return+t}function f(n){return e(n)?t.round(r._b+r._m*n,2):Ye}function h(t){return(t-r._b)/r._m}r.c2l="log"===r.type?o:Xe,r.l2c="log"===r.type?Ze:Xe,r.l2p=f,r.p2l=h,r.c2p="log"===r.type?function(t,e){return f(o(t,e))}:f,r.p2c="log"===r.type?function(t){return Ze(h(t))}:h,-1!==["linear","-"].indexOf(r.type)?(r.d2r=r.r2d=r.d2c=r.r2c=r.d2l=r.r2l=He,r.c2d=r.c2r=r.l2d=r.l2r=Xe,r.d2p=r.r2p=function(t){return r.l2p(He(t))},r.p2d=r.p2r=h,r.cleanPos=Xe):"log"===r.type?(r.d2r=r.d2l=function(t,e){return o(He(t),e)},r.r2d=r.r2c=function(t){return Ze(He(t))},r.d2c=r.r2l=He,r.c2d=r.l2r=Xe,r.c2r=o,r.l2d=Ze,r.d2p=function(t,e){return r.l2p(r.d2r(t,e))},r.p2d=function(t){return Ze(h(t))},r.r2p=function(t){return r.l2p(He(t))},r.p2r=h,r.cleanPos=Xe):"date"===r.type?(r.d2r=r.r2d=ae.identity,r.d2c=r.r2c=r.d2l=r.r2l=l,r.c2d=r.c2r=r.l2d=r.l2r=s,r.d2p=r.r2p=function(t,e,n){return r.l2p(l(t,0,n))},r.p2d=r.p2r=function(t,e,r){return s(h(t),e,r)},r.cleanPos=function(t){return ae.cleanDate(t,Ye,r.calendar)}):"category"===r.type&&(r.d2c=r.d2l=function(t){if(null!==t&&void 0!==t){if(void 0===r._categoriesMap&&(r._categoriesMap={}),void 0!==r._categoriesMap[t])return r._categoriesMap[t];r._categories.push(t);var e=r._categories.length-1;return r._categoriesMap[t]=e,e}return Ye},r.r2d=r.c2d=r.l2d=u,r.d2r=r.d2l_noadd=c,r.r2c=function(t){var e=c(t);return void 0!==e?e:r.fraction2r(.5)},r.l2r=r.c2r=Xe,r.r2l=c,r.d2p=function(t){return r.l2p(r.r2c(t))},r.p2d=function(t){return u(h(t))},r.r2p=r.d2p,r.p2r=h,r.cleanPos=function(t){return"string"==typeof t&&""!==t?t:Xe(t)}),r.fraction2r=function(t){var e=r.r2l(r.range[0]),n=r.r2l(r.range[1]);return r.l2r(e+t*(n-e))},r.r2fraction=function(t){var e=r.r2l(r.range[0]),n=r.r2l(r.range[1]);return(r.r2l(t)-e)/(n-e)},r.cleanRange=function(t,n){n||(n={}),t||(t="range");var i,o,l=ae.nestedProperty(r,t).get();if(o=(o="date"===r.type?ae.dfltRange(r.calendar):"y"===a?Se.DFLTRANGEY:n.dfltRange||Se.DFLTRANGEX).slice(),l&&2===l.length)for("date"===r.type&&(l[0]=ae.cleanDate(l[0],Ye,r.calendar),l[1]=ae.cleanDate(l[1],Ye,r.calendar)),i=0;i<2;i++)if("date"===r.type){if(!ae.isDateTime(l[i],r.calendar)){r[t]=o;break}if(r.r2l(l[0])===r.r2l(l[1])){var s=ae.constrain(r.r2l(l[0]),ae.MIN_MS+1e3,ae.MAX_MS-1e3);l[0]=r.l2r(s-1e3),l[1]=r.l2r(s+1e3);break}}else{if(!e(l[i])){if(!e(l[1-i])){r[t]=o;break}l[i]=l[1-i]*(i?10:.1)}if(l[i]<-We?l[i]=-We:l[i]>We&&(l[i]=We),l[0]===l[1]){var u=Math.max(1,Math.abs(1e-6*l[0]));l[0]-=u,l[1]+=u}}else ae.nestedProperty(r,t).set(o)},r.setScale=function(t){var e=n._size;if(r._categories||(r._categories=[]),r._categoriesMap||(r._categoriesMap={}),r.overlaying){var i=Le.getFromId({_fullLayout:n},r.overlaying);r.domain=i.domain}var o=t&&r._r?"_r":"range",l=r.calendar;r.cleanRange(o);var s=r.r2l(r[o][0],l),u=r.r2l(r[o][1],l),c=0,f=0,h=function(t,e){var r,a=[],i=t._id;"x"===e?(r=1*i.replace("x",""),i="y"):(r=1*i.replace("y",""),i="x"),"top"!==t.side&&"right"!==t.side||(r-=19937),0!==r&&1!=r||(r="");var o=n[i+"axis"+r];return o&&a.push(o),""===r&&(r=1),(o=n[i+"axis"+(r+=19937)])&&a.push(o),a}(r,a);if("y"===a){if(h[0]){c=b(v=h[0]),v._lastLabel&&v._lastLabel.autoangle===v._lastangle&&v._lastLabel&&c<v._lastLabel.lastLabelWidth&&(c=v._lastLabel.lastLabelWidth);var d=.7*e.b;c<=1&&(c=d),30===v._lastangle&&(d=.5*e.b),p=e.h*(r.domain[1]-r.domain[0])-c+d,v._shortLabel=!1,(!r._lastangle||r._lastangle&&0!=r._lastangle)&&p<100&&c>0&&(p=e.h*(r.domain[1]-r.domain[0]),v._shortLabel=!0)}else p=e.h*(r.domain[1]-r.domain[0]);r._offset=e.t+(1-r.domain[1])*e.h,r._length=p,r._m=r._length/(s-u),r._b=-r._m*u}else{var p,g;if(h.length>0){var v,m;c=b(v=h[0]);var y=.5*e.l;c<=1&&(c=y),h.length>1&&(f=b(m=h[1])),p=e.w*(r.domain[1]-r.domain[0])-(c+f)+y,g=e.l+r.domain[0]*e.w+c-y,p<100&&f>0?(p+=f,m._shortLabel=!0):m&&(m._shortLabel=!1),p<100&&c>0?(p+=c,p-=y,g-=c,g+=y,v._shortLabel=!0):v&&(v._shortLabel=!1)}else p=e.w*(r.domain[1]-r.domain[0]),g=e.l+r.domain[0]*e.w;r._offset=g,r._length=p,r._m=r._length/(u-s),r._b=-r._m*s}if(!isFinite(r._m)||!isFinite(r._b))throw n._replotting=!1,new Error("Something went wrong with axis scaling");if(h.length>0){v=h[0];var x={};c>1&&(x.lastLabelWidth=c),f>1&&(x.lastLabelWidthRight=f),x.autoangle=v._lastangle,v._lastLabel=x}function b(t){var e=0,r="",a=0;return t._categories&&(t._categories.forEach(function(t){t.length>e&&(e=t.length,r=t)}),a=function(t,e,r){var n=$("body");r?n.append('<span id="testObjectDashboardUtils" style="font-size: '+e+"; width: auto; font-family:"+r+';">'+t+"</text>"):n.append('<span id="testObjectDashboardUtils" style="font-size: '+e+'; width: auto;">'+t+"</text>");var a=$("#testObjectDashboardUtils"),i=a.innerWidth()+1,o=a.innerHeight()+1;return a.remove(),{width:i,height:o}}(r,n.font.size,n.font.family).width,30===t._lastangle?a=a*Math.sin(.5235988)/Math.sin(1.5707963):0===t._lastangle&&(a=0)),a}},r.makeCalcdata=function(t,e){var n,a,i,o,l=r.type,s="date"===l&&t[e+"calendar"];if(e in t){if(n=t[e],o=t._length||n.length,ae.isTypedArray(n)&&("linear"===l||"log"===l)){if(o===n.length)return n;if(n.subarray)return n.subarray(0,o)}for(a=new Array(o),i=0;i<o;i++)a[i]=r.d2c(n[i],0,s)}else{var u=e+"0"in t?r.d2c(t[e+"0"],0,s):0,c=t["d"+e]?Number(t["d"+e]):1;for(n=t[{x:"y",y:"x"}[e]],o=t._length||n.length,a=new Array(o),i=0;i<o;i++)a[i]=u+i*c}return a},r.isValidRange=function(t){return Array.isArray(t)&&2===t.length&&e(r.r2l(t[0]))&&e(r.r2l(t[1]))},r.isPtWithinRange=function(t,e){var n=r.c2l(t[a],null,e);return n>=r.r2l(r.range[0])&&n<=r.r2l(r.range[1])},r.clearCalc=function(){r._min=[],r._max=[],r._categories=(r._initialCategories||[]).slice(),r._categoriesMap={};for(var t=0;t<r._categories.length;t++)r._categoriesMap[r._categories[t]]=t};var d=n._d3locale;"date"===r.type&&(r._dateFormat=d?d.timeFormat.utc:t.time.format.utc,r._extraFormat=n._extraFormat),r._separators=n.separators,r._numFormat=d?d.numberFormat:t.format,delete r._minDtick,delete r._forceTick0},Qe=function(t,e,r,n,a){var i=function(t){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(e.every(function(r){return t[r]===t[e[0]]})||1===e.length)return t[e[0]]}(t);if(r("tickprefix")&&r("showtickprefix",i),r("ticksuffix",a.tickSuffixDflt)&&r("showticksuffix",i),r("showticklabels")){var o=a.font||{},l=e.color===t.color?e.color:o.color;if(ae.coerceFont(r,"tickfont",{family:o.family,size:o.size,color:l}),r("tickangle"),"category"!==n){var s=r("tickformat");!function(t,e){var r,n,a=t.tickformatstops,i=e.tickformatstops=[];if(!Array.isArray(a))return;function o(t,e){return ae.coerce(r,n,Ie.tickformatstops,t,e)}for(var l=0;l<a.length;l++)r=a[l],n={},o("dtickrange"),o("value"),i.push(n)}(t,e),s||"date"===n||(r("showexponent",i),r("exponentformat"),r("separatethousands"))}}};var $e=function(t,e,r,n){var a=ae.coerce2(t,e,Ie,"ticklen"),i=ae.coerce2(t,e,Ie,"tickwidth"),o=ae.coerce2(t,e,Ie,"tickcolor",e.color);r("ticks",n.outerTicks||a||i||o?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)},Ke=r.ONEDAY,tr=function(t,r,n,a){var i="auto";"array"!==t.tickmode||"log"!==a&&"date"!==a||(t.tickmode="auto"),Array.isArray(t.tickvals)?i="array":t.dtick&&(i="linear");var o=n("tickmode",i);if("auto"===o)n("nticks");else if("linear"===o){var l="date"===a?Ke:1,s=n("dtick",l);if(e(s))r.dtick=s>0?Number(s):l;else if("string"!=typeof s)r.dtick=l;else{var u=s.charAt(0),c=s.substr(1);((c=e(c)?Number(c):0)<=0||!("date"===a&&"M"===u&&c===Math.round(c)||"log"===a&&"L"===u||"log"===a&&"D"===u&&(1===c||2===c)))&&(r.dtick=l)}var f="date"===a?ae.dateTick0(r.calendar):0,h=n("tick0",f);"date"===a?r.tick0=ae.cleanDate(h,f):e(h)&&"D1"!==s&&"D2"!==s?r.tick0=Number(h):r.tick0=f}else{void 0===n("tickvals")?r.tickmode="auto":n("ticktext")}},er=function(e,r,n,a,i){var o=a.letter,l=a.font||{},s=n("visible",!a.cheateronly),u=r.type;"date"===u&&R.getComponentMethod("calendars","handleDefaults")(e,r,"calendar",a.calendar);Je(r,i);var c=n("autorange",!r.isValidRange(e.range));if(r._rangesliderAutorange=!1,c&&n("rangemode"),n("range"),r.cleanRange(),function(t,e,r){if("category"===e.type){var n,a=t.categoryarray,i=Array.isArray(a)&&a.length>0;i&&(n="array");var o=r("categoryorder",n);"array"===o&&r("categoryarray"),i||"array"!==o||(e.categoryorder="trace")}}(e,r,n),r._initialCategories="category"===u?function(e,r,n,a){switch(r){case"array":return Array.isArray(n)?n.slice():[];case"category ascending":return Ve(e,t.ascending,a);case"category descending":return Ve(e,t.descending,a);case"trace":default:return[]}}(o,r.categoryorder,r.categoryarray,a.data):[],"category"===u||a.noHover||n("hoverformat"),!s)return r;var f=n("color"),h=f===e.color?f:l.color;return n("title",i._dfltTitle[o]),ae.coerceFont(n,"titlefont",{family:l.family,size:Math.round(1.2*l.size),color:h}),tr(e,r,n,u),Qe(e,r,n,u,a),$e(e,r,n,a),function(t,e,r,n){var a=(n=n||{}).dfltColor;function i(r,a){return ae.coerce2(t,e,n.attributes,r,a)}var o=i("linecolor",a),l=i("linewidth");r("showline",n.showLine||!!o||!!l)||(delete e.linecolor,delete e.linewidth);var s=i("gridcolor",je(a,n.bgColor,n.blend||Ue).toRgbString()),u=i("gridwidth");if(r("showgrid",n.showGrid||!!s||!!u)||(delete e.gridcolor,delete e.gridwidth),!n.noZeroLine){var c=i("zerolinecolor",a),f=i("zerolinewidth");r("zeroline",n.showGrid||!!c||!!f)||(delete e.zerolinecolor,delete e.zerolinewidth)}}(e,r,n,{dfltColor:f,bgColor:a.bgColor,showGrid:a.showGrid,attributes:Ie}),(r.showline||r.ticks)&&n("mirror"),a.automargin&&n("automargin"),r},rr=Le.id2name,nr=function(t,e,r,n,a){var i=a._axisConstraintGroups,o=e._id,l=o.charAt(0);if(!e.fixedrange&&(r("constrain"),ae.coerce(t,e,{constraintoward:{valType:"enumerated",values:"x"===l?["left","center","right"]:["bottom","middle","top"],dflt:"x"===l?"center":"middle"}},"constraintoward"),t.scaleanchor)){var s=function(t,e,r,n){var a,i,o,l,s=n[rr(e)].type,u=[];for(i=0;i<r.length;i++)(o=r[i])!==e&&((l=n[rr(o)]).type!==s||l.fixedrange||u.push(o));for(a=0;a<t.length;a++)if(t[a][e]){var c=t[a],f=[];for(i=0;i<u.length;i++)o=u[i],c[o]||f.push(o);return{linkableAxes:f,thisGroup:c}}return{linkableAxes:u,thisGroup:null}}(i,o,n,a),u=ae.coerce(t,e,{scaleanchor:{valType:"enumerated",values:s.linkableAxes}},"scaleanchor");if(u){var c=r("scaleratio");c||(c=e.scaleratio=1),function(t,e,r,n,a){var i,o,l,s,u;null===e?((e={})[r]=1,u=t.length,t.push(e)):u=t.indexOf(e);var c=Object.keys(e);for(i=0;i<t.length;i++)if(l=t[i],i!==u&&l[n]){var f=l[n];for(o=0;o<c.length;o++)s=c[o],l[s]=f*a*e[s];return void t.splice(u,1)}if(1!==a)for(o=0;o<c.length;o++)e[c[o]]*=a;e[n]=1}(i,s.thisGroup,o,u,c)}else-1!==n.indexOf(t.scaleanchor)&&ae.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the targetaxis has fixed range.')}};var ar=function(t,r,n,a){var i,o,l,s,u=a.counterAxes||[],c=a.overlayableAxes||[],f=a.letter,h=a.grid;h&&(o=h._domains[f][h._axisMap[r._id]],i=h._anchors[r._id],o&&(l=h[f+"side"].split(" ")[0],s=h.domain[f]["right"===l||"top"===l?1:0])),o=o||[0,1],i=i||(e(t.position)?"free":u[0]||"free"),l=l||("x"===f?"bottom":"left"),s=s||0,"free"===ae.coerce(t,r,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:i}},"anchor")&&n("position",s),ae.coerce(t,r,{side:{valType:"enumerated",values:"x"===f?["bottom","top"]:["left","right"],dflt:l}},"side");var d=!1;if(c.length&&(d=ae.coerce(t,r,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!d){var p=n("domain",o);p[0]>p[1]-.01&&(r.domain=o),ae.noneOrAll(t.domain,r.domain,o)}return n("layer"),r},ir=r.BADNUM,or=function(t,r){return function(t,r){for(var n,a=0,i=0,o=Math.max(1,(t.length-1)/1e3),l=0;l<t.length;l+=o)n=t[Math.round(l)],ae.isDateTime(n,r)&&(a+=1),e(n)&&(i+=1);return a>2*i}(t,r)?"date":function(t){for(var e,r=Math.max(1,(t.length-1)/1e3),n=0,a=0,i=0;i<t.length;i+=r)e=t[Math.round(i)],ae.cleanNumber(e)!==ir?n++:"string"==typeof e&&""!==e&&"None"!==e&&a++;return a>2*n}(t)?"category":function(t){if(!t)return!1;for(var r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}(t)?"linear":"-"};var lr=Le.name2id,sr=function(t,e,r,n,a){a&&(e._name=a,e._id=lr(a)),"-"===r("type")&&(!function(t,e){if("-"!==t.type)return;var r=t._id,n=r.charAt(0);-1!==r.indexOf("scene")&&(r=n);var a=function(t,e,r){for(var n=0;n<t.length;n++){var a=t[n];if((a[r+"axis"]||r)===e){if(cr(a,r))return a;if((a[r]||[]).length||a[r+"0"])return a}}}(e,r,n);if(!a)return;if("histogram"===a.type&&n==={v:"y",h:"x"}[a.orientation||"v"])return void(t.type="linear");var i=n+"calendar",o=a[i];if(cr(a,n)){for(var l,s=ur(a),u=[],c=0;c<e.length;c++)l=e[c],R.traceIs(l,"box-violin")&&(l[n+"axis"]||n)===r&&(void 0!==l[s]?u.push(l[s][0]):void 0!==l.name?u.push(l.name):u.push("text"),l[i]!==o&&(o=void 0));t.type=or(u,o)}else t.type=or(a[n]||[a[n+"0"]],o)}(e,n),"-"===e.type?e.type="linear":t.type=e.type)};function ur(t){return{v:"x",h:"y"}[t.orientation||"v"]}function cr(t,e){var r=ur(t),n=R.traceIs(t,"box-violin"),a=R.traceIs(t._fullInput||{},"candlestick");return n&&!a&&e===r&&void 0===t[r]&&void 0===t[r+"0"]}var fr={zauto:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{zmin:void 0,zmax:void 0}},zmin:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},zmax:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},colorscale:{valType:"colorscale",editType:"calc",impliedEdits:{autocolorscale:!1}},autocolorscale:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{colorscale:void 0}},reversescale:{valType:"boolean",dflt:!1,editType:"calc"},showscale:{valType:"boolean",dflt:!0,editType:"calc"}},hr=function(t){for(var e,r=t.length,n=new Array(r),a=r-1,i=0;a>=0;a--,i++)e=t[a],n[i]=[1-e[0],e[1]];return n},dr=function(t,e,r,n){var a,i;r?(a=ae.nestedProperty(t,r).get(),i=ae.nestedProperty(t._input,r).get()):(a=t,i=t._input);var o=n+"auto",l=n+"min",u=n+"max",c=a[o],f=a[l],h=a[u],d=a.colorscale;!1===c&&void 0!==f||(f=ae.aggNums(Math.min,null,e)),!1===c&&void 0!==h||(h=ae.aggNums(Math.max,null,e)),f===h&&(f-=.5,h+=.5),a[l]=f,a[u]=h,i[l]=f,i[u]=h,i[o]=!1!==c||void 0===f&&void 0===h,a.autocolorscale&&(d=f*h<0?s.RdBu:f>=0?s.Reds:s.Blues,i.colorscale=d,a.reversescale&&(d=hr(d)),a.colorscale=d)},pr=m.extendFlat,gr=(0,xe.overrideAll)({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:Ie.linecolor,outlinewidth:Ie.linewidth,bordercolor:Ie.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:Ie.tickmode,nticks:Ie.nticks,tick0:Ie.tick0,dtick:Ie.dtick,tickvals:Ie.tickvals,ticktext:Ie.ticktext,ticks:pr({},Ie.ticks,{dflt:""}),ticklen:Ie.ticklen,tickwidth:Ie.tickwidth,tickcolor:Ie.tickcolor,showticklabels:Ie.showticklabels,tickfont:k({}),tickangle:Ie.tickangle,tickformat:Ie.tickformat,tickformatstops:Ie.tickformatstops,tickprefix:Ie.tickprefix,showtickprefix:Ie.showtickprefix,ticksuffix:Ie.ticksuffix,showticksuffix:Ie.showticksuffix,separatethousands:Ie.separatethousands,exponentformat:Ie.exponentformat,showexponent:Ie.showexponent,title:{valType:"string"},titlefont:k({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root"),vr=function(t){return void 0!==s[t]||c(t)},mr=function(t,r,n,a,i){var o,l=i.prefix,s=i.cLetter,u=l.slice(0,l.length-1),c=l?ae.nestedProperty(t,u).get()||{}:t,f=l?ae.nestedProperty(r,u).get()||{}:r,h=c[s+"min"],d=c[s+"max"],p=c.colorscale;a(l+s+"auto",!(e(h)&&e(d)&&h<d)),a(l+s+"min"),a(l+s+"max"),void 0!==p&&(o=!vr(p)),a(l+"autocolorscale",o);var g,v,m=a(l+"colorscale");(a(l+"reversescale")&&(f.colorscale=hr(m)),"marker.line."!==l)&&(l&&(v=c,g=ae.isPlainObject(v.colorbar)),a(l+"showscale",g)&&function(t,e,r){var n=e.colorbar={},a=t.colorbar||{};function i(t,e){return ae.coerce(a,n,gr,t,e)}i("thickness","fraction"===i("thicknessmode")?30/(r.width-r.margin.l-r.margin.r):30),i("len","fraction"===i("lenmode")?1:r.height-r.margin.t-r.margin.b),i("x"),i("xanchor"),i("xpad"),i("y"),i("yanchor"),i("ypad"),ae.noneOrAll(a,n,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor"),tr(a,n,i,"linear");var o={outerTicks:!1,font:r.font};Qe(a,n,i,"linear",o),$e(a,n,i,"linear"),i("title",r._dfltTitle.colorbar),ae.coerceFont(i,"titlefont",r.font),i("titleside")}(c,f,n))},yr=function(t,r){var n=r?ae.nestedProperty(t,r).get()||{}:t,a=n.color,i=!1;if(ae.isArrayOrTypedArray(a))for(var o=0;o<a.length;o++)if(e(a[o])){i=!0;break}return ae.isPlainObject(n)&&(i||!0===n.showscale||e(n.cmin)&&e(n.cmax)||vr(n.colorscale)||ae.isPlainObject(n.colorbar))};function xr(t){var e={r:t[0],g:t[1],b:t[2],a:t[3]};return l(e).toRgbString()}var br={};br.scales=s,br.defaultScale=u,br.attributes=fr,br.handleDefaults=mr,br.calc=dr,br.hasColorscale=yr,br.isValidScale=vr,br.getScale=f,br.flipScale=hr,br.extractScale=function(t,e,r){for(var n=t.length,a=new Array(n),i=new Array(n),o=0;o<n;o++){var l=t[o];a[o]=e+l[0]*(r-e),i[o]=l[1]}return{domain:a,range:i}},br.makeColorScaleFunc=function(r,n){n=n||{};for(var a=r.domain,i=r.range,o=i.length,s=new Array(o),u=0;u<o;u++){var c=l(i[u]).toRgb();s[u]=[c.r,c.g,c.b,c.a]}var f,h=t.scale.linear().domain(a).range(s).clamp(!0),d=n.noNumericCheck,p=n.returnArray;return(f=d&&p?h:d?function(t){return xr(h(t))}:p?function(t){return e(t)?h(t):l(t).isValid()?t:Pe.defaultLine}:function(t){return e(t)?xr(h(t)):l(t).isValid()?t:Pe.defaultLine}).domain=h.domain,f.range=function(){return i},f};var _r={circle:{n:0,f:function(e){var r=t.round(e,2);return"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z"}},square:{n:1,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z"}},diamond:{n:2,f:function(e){var r=t.round(1.3*e,2);return"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"Z"}},cross:{n:3,f:function(e){var r=t.round(.4*e,2),n=t.round(1.2*e,2);return"M"+n+","+r+"H"+r+"V"+n+"H-"+r+"V"+r+"H-"+n+"V-"+r+"H-"+r+"V-"+n+"H"+r+"V-"+r+"H"+n+"Z"}},x:{n:4,f:function(e){var r=t.round(.8*e/Math.sqrt(2),2),n="l"+r+","+r,a="l"+r+",-"+r,i="l-"+r+",-"+r,o="l-"+r+","+r;return"M0,"+r+n+a+i+a+i+o+i+o+n+o+n+"Z"}},"triangle-up":{n:5,f:function(e){var r=t.round(2*e/Math.sqrt(3),2);return"M-"+r+","+t.round(e/2,2)+"H"+r+"L0,-"+t.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var r=t.round(2*e/Math.sqrt(3),2);return"M-"+r+",-"+t.round(e/2,2)+"H"+r+"L0,"+t.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var r=t.round(2*e/Math.sqrt(3),2);return"M"+t.round(e/2,2)+",-"+r+"V"+r+"L-"+t.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var r=t.round(2*e/Math.sqrt(3),2);return"M-"+t.round(e/2,2)+",-"+r+"V"+r+"L"+t.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var r=t.round(.6*e,2),n=t.round(1.2*e,2);return"M-"+n+",-"+r+"H"+r+"V"+n+"Z"}},"triangle-se":{n:10,f:function(e){var r=t.round(.6*e,2),n=t.round(1.2*e,2);return"M"+r+",-"+n+"V"+r+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(e){var r=t.round(.6*e,2),n=t.round(1.2*e,2);return"M"+n+","+r+"H-"+r+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(e){var r=t.round(.6*e,2),n=t.round(1.2*e,2);return"M-"+r+","+n+"V-"+r+"H"+n+"Z"}},pentagon:{n:13,f:function(e){var r=t.round(.951*e,2),n=t.round(.588*e,2),a=t.round(-e,2),i=t.round(-.309*e,2);return"M"+r+","+i+"L"+n+","+t.round(.809*e,2)+"H-"+n+"L-"+r+","+i+"L0,"+a+"Z"}},hexagon:{n:14,f:function(e){var r=t.round(e,2),n=t.round(e/2,2),a=t.round(e*Math.sqrt(3)/2,2);return"M"+a+",-"+n+"V"+n+"L0,"+r+"L-"+a+","+n+"V-"+n+"L0,-"+r+"Z"}},hexagon2:{n:15,f:function(e){var r=t.round(e,2),n=t.round(e/2,2),a=t.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+a+"H"+n+"L"+r+",0L"+n+",-"+a+"H-"+n+"L-"+r+",0Z"}},octagon:{n:16,f:function(e){var r=t.round(.924*e,2),n=t.round(.383*e,2);return"M-"+n+",-"+r+"H"+n+"L"+r+",-"+n+"V"+n+"L"+n+","+r+"H-"+n+"L-"+r+","+n+"V-"+n+"Z"}},star:{n:17,f:function(e){var r=1.4*e,n=t.round(.225*r,2),a=t.round(.951*r,2),i=t.round(.363*r,2),o=t.round(.588*r,2),l=t.round(-r,2),s=t.round(-.309*r,2),u=t.round(.118*r,2),c=t.round(.809*r,2);return"M"+n+","+s+"H"+a+"L"+i+","+u+"L"+o+","+c+"L0,"+t.round(.382*r,2)+"L-"+o+","+c+"L-"+i+","+u+"L-"+a+","+s+"H-"+n+"L0,"+l+"Z"}},hexagram:{n:18,f:function(e){var r=t.round(.66*e,2),n=t.round(.38*e,2),a=t.round(.76*e,2);return"M-"+a+",0l-"+n+",-"+r+"h"+a+"l"+n+",-"+r+"l"+n+","+r+"h"+a+"l-"+n+","+r+"l"+n+","+r+"h-"+a+"l-"+n+","+r+"l-"+n+",-"+r+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(e){var r=t.round(e*Math.sqrt(3)*.8,2),n=t.round(.8*e,2),a=t.round(1.6*e,2),i=t.round(4*e,2),o="A "+i+","+i+" 0 0 1 ";return"M-"+r+","+n+o+r+","+n+o+"0,-"+a+o+"-"+r+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var r=t.round(e*Math.sqrt(3)*.8,2),n=t.round(.8*e,2),a=t.round(1.6*e,2),i=t.round(4*e,2),o="A "+i+","+i+" 0 0 1 ";return"M"+r+",-"+n+o+"-"+r+",-"+n+o+"0,"+a+o+r+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var r=t.round(1.1*e,2),n=t.round(2*e,2),a="A "+n+","+n+" 0 0 1 ";return"M-"+r+",-"+r+a+"-"+r+","+r+a+r+","+r+a+r+",-"+r+a+"-"+r+",-"+r+"Z"}},"star-diamond":{n:22,f:function(e){var r=t.round(1.4*e,2),n=t.round(1.9*e,2),a="A "+n+","+n+" 0 0 1 ";return"M-"+r+",0"+a+"0,"+r+a+r+",0"+a+"0,-"+r+a+"-"+r+",0Z"}},"diamond-tall":{n:23,f:function(e){var r=t.round(.7*e,2),n=t.round(1.4*e,2);return"M0,"+n+"L"+r+",0L0,-"+n+"L-"+r+",0Z"}},"diamond-wide":{n:24,f:function(e){var r=t.round(1.4*e,2),n=t.round(.7*e,2);return"M0,"+n+"L"+r+",0L0,-"+n+"L-"+r+",0Z"}},hourglass:{n:25,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"H-"+r+"L"+r+",-"+r+"H-"+r+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"V-"+r+"L-"+r+","+r+"V-"+r+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var r=t.round(e,2);return"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var r=t.round(e,2),n=t.round(e/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+r+",0A"+r+","+r+" 0 1,1 0,-"+r+"A"+r+","+r+" 0 0,1 "+r+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var r=t.round(e,2);return"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+r+","+r+"H-"+r+"V-"+r+"H"+r+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var r=t.round(1.3*e,2);return"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM0,-"+r+"V"+r+"M-"+r+",0H"+r},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var r=t.round(1.3*e,2),n=t.round(.65*e,2);return"M"+r+",0L0,"+r+"L-"+r+",0L0,-"+r+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var r=t.round(1.4*e,2);return"M0,"+r+"V-"+r+"M"+r+",0H-"+r},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var r=t.round(1.2*e,2),n=t.round(.85*e,2);return"M0,"+r+"V-"+r+"M"+r+",0H-"+r+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var r=t.round(e/2,2),n=t.round(e,2);return"M"+r+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+r+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var r=t.round(1.2*e,2),n=t.round(1.6*e,2),a=t.round(.8*e,2);return"M-"+r+","+a+"L0,0M"+r+","+a+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var r=t.round(1.2*e,2),n=t.round(1.6*e,2),a=t.round(.8*e,2);return"M-"+r+",-"+a+"L0,0M"+r+",-"+a+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var r=t.round(1.2*e,2),n=t.round(1.6*e,2),a=t.round(.8*e,2);return"M"+a+","+r+"L0,0M"+a+",-"+r+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var r=t.round(1.2*e,2),n=t.round(1.6*e,2),a=t.round(.8*e,2);return"M-"+a+","+r+"L0,0M-"+a+",-"+r+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){var r=t.round(1.4*e,2);return"M"+r+",0H-"+r},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){var r=t.round(1.4*e,2);return"M0,"+r+"V-"+r},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){var r=t.round(e,2);return"M"+r+",-"+r+"L-"+r+","+r},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){var r=t.round(e,2);return"M"+r+","+r+"L-"+r+",-"+r},needLine:!0,noDot:!0,noFill:!0}},wr={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}},Ar={entityToUnicode:{mu:"\u03bc","#956":"\u03bc",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:"\xa0","#160":"\xa0",times:"\xd7","#215":"\xd7",plusmn:"\xb1","#177":"\xb1",deg:"\xb0","#176":"\xb0"}},Mr={},Tr=wr.LINE_SPACING;function kr(t,e){return t.node().getBoundingClientRect()[e]}var Er=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;Mr.convertToTspans=function(e,r,n){var a=e.text(),i=!e.attr("data-notex")&&"undefined"!=typeof MathJax&&a.match(Er),o=t.select(e.node().parentNode);if(!o.empty()){var l=e.attr("class")?e.attr("class").split(" ")[0]:"text";return l+="-math",o.selectAll("svg."+l).remove(),o.selectAll("g."+l+"-group").remove(),e.style("display",null).attr({"data-unformatted":a,"data-math":"N"}),i?(r&&r._promises||[]).push(new Promise(function(r){e.style("display","none");var u=parseInt(e.node().style.fontSize,10),c={fontSize:u};!function(e,r,n){var a="math-output-"+ae.randstr([],64),i=t.select("body").append("div").attr({id:a}).style({visibility:"hidden",position:"absolute"}).style({"font-size":r.fontSize+"px"}).text((o=e,o.replace(Cr,"\\lt ").replace(Sr,"\\gt ")));var o;MathJax.Hub.Queue(["Typeset",MathJax.Hub,i.node()],function(){var r=t.select("body").select("#MathJax_SVG_glyphs");if(i.select(".MathJax_SVG").empty()||!i.select("svg").node())ae.log("There was an error in the tex syntax.",e),n();else{var a=i.select("svg").node().getBoundingClientRect();n(i.select(".MathJax_SVG"),r,a)}i.remove()})}(i[2],c,function(t,i,c){o.selectAll("svg."+l).remove(),o.selectAll("g."+l+"-group").remove();var f=t&&t.select("svg");if(!f||!f.node())return s(),void r();var h=o.append("g").classed(l+"-group",!0).attr({"pointer-events":"none","data-unformatted":a,"data-math":"Y"});h.node().appendChild(f.node()),i&&i.node()&&f.node().insertBefore(i.node().cloneNode(!0),f.node().firstChild),f.attr({class:l,height:c.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var d=e.node().style.fill||"black";f.select("g").attr({fill:d,stroke:d});var p=kr(f,"width"),g=kr(f,"height"),v=+e.attr("x")-p*{start:0,middle:.5,end:1}[e.attr("text-anchor")||"start"],m=-(u||kr(e,"height"))/4;"y"===l[0]?(h.attr({transform:"rotate("+[-90,+e.attr("x"),+e.attr("y")]+") translate("+[-p/2,m-g/2]+")"}),f.attr({x:+e.attr("x"),y:+e.attr("y")})):"l"===l[0]?f.attr({x:e.attr("x"),y:m-g/2}):"a"===l[0]?f.attr({x:0,y:m}):f.attr({x:v,y:+e.attr("y")+m-g/2}),n&&n.call(e,h),r(h)})})):s(),e}function s(){o.empty()||(l=e.attr("class")+"-math",o.select("svg."+l).remove()),e.text("").style("white-space","pre"),function(e,r){r=(n=r,function(t,e){if(!t)return"";for(var r=0;r<e.length;r++){var n=e[r];t=t.replace(n.regExp,n.sub)}return t}(n,Fr)).replace(zr," ");var n;var a,i=!1,o=[],l=-1;function s(){l++;var r=document.createElementNS(ke.svg,"tspan");t.select(r).attr({class:"line",dy:l*Tr+"em"}),e.appendChild(r),a=r;var n=o;if(o=[{node:r}],n.length>1)for(var i=1;i<n.length;i++)u(n[i])}function u(e){var r,n=e.type,i={};if("a"===n){r="a";var l=e.target,s=e.href,u=e.popup;s&&(i={"xlink:xlink:show":"_blank"===l||"_"!==l.charAt(0)?"new":"replace",target:l,"xlink:xlink:href":s},u&&(i.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else r="tspan";e.style&&(i.style=e.style);var f=document.createElementNS(ke.svg,r);if("sup"===n||"sub"===n){c(a,Dr),a.appendChild(f);var h=document.createElementNS(ke.svg,"tspan");c(h,Dr),t.select(h).attr("dy",Rr[n]),i.dy=Or[n],a.appendChild(f),a.appendChild(h)}else a.appendChild(f);t.select(f).attr(i),a=e.node=f,o.push(e)}function c(t,e){t.appendChild(document.createTextNode(e))}function f(t){if(1!==o.length){var e=o.pop();t!==e.type&&ae.log("Start tag <"+e.type+"> doesnt match end tag <"+t+">. Pretending it did match.",r),a=o[o.length-1].node}else ae.log("Ignoring unexpected end tag </"+t+">.",r)}jr.test(r)?s():(a=e,o=[{node:e}]);for(var h=r.split(Nr),d=0;d<h.length;d++){var p=h[d],g=p.match(Br),v=g&&g[2].toLowerCase(),m=Lr[v];if("br"===v)s();else if(void 0===m)c(a,p);else if(g[1])f(v);else{var y=g[4],x={type:v},b=Gr(y,Ur);if(b?(b=b.replace(Xr,"$1 fill:"),m&&(b+=";"+m)):m&&(b=m),b&&(x.style=b),"a"===v){i=!0;var _=Gr(y,Vr);if(_){var w=document.createElement("a");w.href=_,-1!==Ir.indexOf(w.protocol)&&(x.href=encodeURI(_),x.target=Gr(y,Hr)||"_blank",x.popup=Gr(y,qr))}}u(x)}}return i}(e.node(),a)&&e.style("pointer-events","all"),Mr.positionText(e),n&&n.call(e)}};var Cr=/(<|&lt;|&#60;)/g,Sr=/(>|&gt;|&#62;)/g;var Lr={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},Or={sub:"0.3em",sup:"-0.6em"},Rr={sub:"-0.21em",sup:"0.42em"},Dr="\u200b",Ir=["http:","https:","mailto:","",void 0,":"],Pr=new RegExp("</?("+Object.keys(Lr).join("|")+")( [^>]*)?/?>","g"),Fr=Object.keys(Ar.entityToUnicode).map(function(t){return{regExp:new RegExp("&"+t+";","g"),sub:Ar.entityToUnicode[t]}}),zr=/(\r\n?|\n)/g,Nr=/(<[^<>]*>)/,Br=/<(\/?)([^ >]*)(\s+(.*))?>/i,jr=/<br(\s+.*)?>/i,Ur=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,Vr=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,Hr=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,qr=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function Gr(t,e){if(!t)return null;var r=t.match(e);return r&&(r[3]||r[4])}var Xr=/(^|;)\s*color:/;function Wr(t,e,r){var n,a,i,o=r.horizontalAlign,l=r.verticalAlign||"top",s=t.node().getBoundingClientRect(),u=e.node().getBoundingClientRect();return a="bottom"===l?function(){return s.bottom-n.height}:"middle"===l?function(){return s.top+(s.height-n.height)/2}:function(){return s.top},i="right"===o?function(){return s.right-n.width}:"center"===o?function(){return s.left+(s.width-n.width)/2}:function(){return s.left},function(){return n=this.node().getBoundingClientRect(),this.style({top:a()-u.top+"px",left:i()-u.left+"px","z-index":1e3}),this}}Mr.plainText=function(t){return(t||"").replace(Pr," ")},Mr.lineCount=function(t){return t.selectAll("tspan.line").size()||1},Mr.positionText=function(e,r,n){return e.each(function(){var e=t.select(this);function a(t,r){return void 0===r?null===(r=e.attr(t))&&(e.attr(t,0),r=0):e.attr(t,r),r}var i=a("x",r),o=a("y",n);"text"===this.nodeName&&e.selectAll("tspan.line").attr({x:i,y:o})})},Mr.makeEditable=function(e,r){var n=r.gd,a=r.delegate,i=t.dispatch("edit","input","cancel"),o=a||e;if(e.style({"pointer-events":a?"none":"all"}),1!==e.size())throw new Error("boo");function l(){var a,l,u,c;a=t.select(n).select(".svg-container"),l=a.append("div"),u=e.node().style,c=parseFloat(u.fontSize||12),l.classed("plugin-editable editable",!0).style({position:"absolute","font-family":u.fontFamily||"Arial","font-size":c,color:r.fill||u.fill||"black",opacity:1,"background-color":r.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(r.text||e.attr("data-unformatted")).call(Wr(e,a,r)).on("blur",function(){n._editing=!1,e.text(this.textContent).style({opacity:1});var r,a=t.select(this).attr("class");(r=a?"."+a.split(" ")[0]+"-math-group":"[class*=-math-group]")&&t.select(e.node().parentNode).select(r).style({opacity:0});var o=this.textContent;t.select(this).transition().duration(0).remove(),t.select(document).on("mouseup",null),i.edit.call(e,o)}).on("focus",function(){var e=this;n._editing=!0,t.select(document).on("mouseup",function(){if(t.event.target===e)return!1;document.activeElement===l.node()&&l.node().blur()})}).on("keyup",function(){27===t.event.which?(n._editing=!1,e.style({opacity:1}),t.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),i.cancel.call(e,this.textContent)):(i.input.call(e,this.textContent),t.select(this).call(Wr(e,a,r)))}).on("keydown",function(){13===t.event.which&&this.blur()}).call(s),e.style({opacity:0});var f,h=o.attr("class");(f=h?"."+h.split(" ")[0]+"-math-group":"[class*=-math-group]")&&t.select(e.node().parentNode).select(f).style({opacity:0})}function s(t){var e=t.node(),r=document.createRange();r.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(r),e.focus()}return r.immediate?l():o.on("click",l),t.rebind(e,i,"on")};var Yr=function(t){var r=t.marker,n=r.sizeref||1,a=r.sizemin||0,i="area"===r.sizemode?function(t){return Math.sqrt(t/n)}:function(t){return t/n};return function(t){var r=i(t/2);return e(r)&&r>0?Math.max(r,a):0}},Zr={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("markers")},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){return ae.isPlainObject(t.marker)&&ae.isArrayOrTypedArray(t.marker.size)}},Jr={},Qr=wr.LINE_SPACING,$r=h.DESELECTDIM,Kr=Jr={};Kr.font=function(t,e,r,n){ae.isPlainObject(e)&&(n=e.color,r=e.size,e=e.family),e&&t.style("font-family",e),r+1&&t.style("font-size",r+"px"),n&&t.call(Pe.fill,n)},Kr.setPosition=function(t,e,r){t.attr("x",e).attr("y",r)},Kr.setSize=function(t,e,r){t.attr("width",e).attr("height",r)},Kr.setRect=function(t,e,r,n,a){t.call(Kr.setPosition,e,r).call(Kr.setSize,n,a)},Kr.translatePoint=function(t,r,n,a){var i=n.c2p(t.x),o=a.c2p(t.y);return!!(e(i)&&e(o)&&r.node())&&("text"===r.node().nodeName?r.attr("x",i).attr("y",o):r.attr("transform","translate("+i+","+o+")"),!0)},Kr.translatePoints=function(e,r,n){e.each(function(e){var a=t.select(this);Kr.translatePoint(e,a,r,n)})},Kr.hideOutsideRangePoint=function(t,e,r,n,a,i){e.attr("display",r.isPtWithinRange(t,a)&&n.isPtWithinRange(t,i)?null:"none")},Kr.hideOutsideRangePoints=function(e,r,n){if(r._hasClipOnAxisFalse){n=n||".point,.textpoint";var a=r.xaxis,i=r.yaxis;e.each(function(r){var o=r[0].trace,l=o.xcalendar,s=o.ycalendar;e.selectAll(n).each(function(e){Kr.hideOutsideRangePoint(e,t.select(this),a,i,l,s)})})}},Kr.crispRound=function(t,r,n){return r&&e(r)?t._context.staticPlot?r:r<1?1:Math.round(r):n||0},Kr.singleLineStyle=function(t,e,r,n,a){e.style("fill","none");var i=(((t||[])[0]||{}).trace||{}).line||{},o=r||i.width||0,l=a||i.dash||"";Pe.stroke(e,n||i.color),Kr.dashLine(e,l,o)},Kr.lineGroupStyle=function(e,r,n,a){e.style("fill","none").each(function(e){var i=(((e||[])[0]||{}).trace||{}).line||{},o=r||i.width||0,l=a||i.dash||"";t.select(this).call(Pe.stroke,n||i.color).call(Kr.dashLine,l,o)})},Kr.dashLine=function(t,e,r){r=+r||0,e=Kr.dashStyle(e,r),t.style({"stroke-dasharray":e,"stroke-width":r+"px"})},Kr.dashStyle=function(t,e){e=+e||1;var r=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=r+"px,"+r+"px":"dash"===t?t=3*r+"px,"+3*r+"px":"longdash"===t?t=5*r+"px,"+5*r+"px":"dashdot"===t?t=3*r+"px,"+r+"px,"+r+"px,"+r+"px":"longdashdot"===t&&(t=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),t},Kr.singleFillStyle=function(e){var r=(((t.select(e.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;r&&e.call(Pe.fill,r)},Kr.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(r){var n=t.select(this);try{n.call(Pe.fill,r[0].trace.fillcolor)}catch(t){ae.error(t,e),n.remove()}})},Kr.symbolNames=[],Kr.symbolFuncs=[],Kr.symbolNeedLines={},Kr.symbolNoDot={},Kr.symbolNoFill={},Kr.symbolList=[],Object.keys(_r).forEach(function(t){var e=_r[t];Kr.symbolList=Kr.symbolList.concat([e.n,t,e.n+100,t+"-open"]),Kr.symbolNames[e.n]=t,Kr.symbolFuncs[e.n]=e.f,e.needLine&&(Kr.symbolNeedLines[e.n]=!0),e.noDot?Kr.symbolNoDot[e.n]=!0:Kr.symbolList=Kr.symbolList.concat([e.n+200,t+"-dot",e.n+300,t+"-open-dot"]),e.noFill&&(Kr.symbolNoFill[e.n]=!0)});var tn=Kr.symbolNames.length,en="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function rn(t,e){var r=t%100;return Kr.symbolFuncs[r](e)+(t>=200?en:"")}Kr.symbolNumber=function(t){if("string"==typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=Kr.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=tn||t>=400?0:Math.floor(Math.max(t,0))};var nn={x1:1,x2:0,y1:0,y2:0},an={x1:0,x2:0,y1:1,y2:0};Kr.gradient=function(e,r,n,a,i,o){var s=r._fullLayout._defs.select(".gradients").selectAll("#"+n).data([a+i+o],ae.identity);s.exit().remove(),s.enter().append("radial"===a?"radialGradient":"linearGradient").each(function(){var e=t.select(this);"horizontal"===a?e.attr(nn):"vertical"===a&&e.attr(an),e.attr("id",n);var r=l(i),s=l(o);e.append("stop").attr({offset:"0%","stop-color":Pe.tinyRGB(s),"stop-opacity":s.getAlpha()}),e.append("stop").attr({offset:"100%","stop-color":Pe.tinyRGB(r),"stop-opacity":r.getAlpha()})}),e.style({fill:"url(#"+n+")","fill-opacity":null})},Kr.initGradients=function(t){var e=t._fullLayout._defs.selectAll(".gradients").data([0]);e.enter().append("g").classed("gradients",!0),e.selectAll("linearGradient,radialGradient").remove()},Kr.singlePointStyle=function(t,e,r,n,a,i){var o=r.marker;!function(t,e,r,n,a,i,o,l){if(R.traceIs(r,"symbols")){var s=Yr(r);e.attr("d",function(t){var e;e="various"===t.ms||"various"===i.size?3:Zr.isBubble(r)?s(t.ms):(i.size||6)/2,t.mrc=e;var n=Kr.symbolNumber(t.mx||i.symbol)||0;return t.om=n%200>=100,rn(n,e)})}e.style("opacity",function(t){return(t.mo+1||i.opacity+1)-1});var u,c,f,h=!1;if(t.so?(f=o.outlierwidth,c=o.outliercolor,u=i.outliercolor):(f=(t.mlw+1||o.width+1||(t.trace?t.trace.marker.line.width:0)+1)-1,c="mlc"in t?t.mlcc=a(t.mlc):ae.isArrayOrTypedArray(o.color)?Pe.defaultLine:o.color,ae.isArrayOrTypedArray(i.color)&&(u=Pe.defaultLine,h=!0),u="mc"in t?t.mcc=n(t.mc):i.color||"rgba(0,0,0,0)"),t.om)e.call(Pe.stroke,u).style({"stroke-width":(f||1)+"px",fill:"none"});else{e.style("stroke-width",f+"px");var d=i.gradient,p=t.mgt;if(p?h=!0:p=d&&d.type,p&&"none"!==p){var g=t.mgc;g?h=!0:g=d.color;var v="g"+l._fullLayout._uid+"-"+r.uid;h&&(v+="-"+t.i),e.call(Kr.gradient,l,v,p,u,g)}else e.call(Pe.fill,u);f&&e.call(Pe.stroke,c)}}(t,e,r,n,a,o,o.line,i)},Kr.pointStyle=function(e,r,n){if(e.size()){var a=r.marker,i=Kr.tryColorscale(a,""),o=Kr.tryColorscale(a,"line");e.each(function(e){Kr.singlePointStyle(e,t.select(this),r,i,o,n)})}},Kr.makeSelectedPointStyleFns=function(t){var e={},r=t.selected||{},n=t.unselected||{},a=t.marker||{},i=r.marker||{},o=n.marker||{},l=a.opacity,s=i.opacity,u=o.opacity,c=void 0!==s,f=void 0!==u;e.opacityFn=function(t){var e=t.mo,r=void 0!==e;if(r||c||f){if(!t.selected)return f?u:$r*(r?e:l);if(c)return s}};var h=i.color,d=o.color;(h||d)&&(e.colorFn=function(t){if(t.selected){if(h)return h}else if(d)return d});var p=i.size,g=o.size,v=void 0!==p,m=void 0!==g;return(v||m)&&(e.sizeFn=function(t){var e=t.mrc;return t.selected?v?p/2:e:m?g/2:e}),e},Kr.selectedPointStyle=function(e,r){if(e.size()&&r.selectedpoints){var n=Kr.makeSelectedPointStyleFns(r),a=r.marker||{};e.each(function(e){var r=t.select(this),a=n.opacityFn(e);void 0!==a&&r.style("opacity",a)}),n.colorFn&&e.each(function(e){var r=t.select(this),a=n.colorFn(e);a&&Pe.fill(r,a)}),R.traceIs(r,"symbols")&&n.sizeFn&&e.each(function(e){var r=t.select(this),i=e.mx||a.symbol||0,o=n.sizeFn(e);r.attr("d",rn(Kr.symbolNumber(i),o)),e.mrc2=o})}},Kr.tryColorscale=function(t,e){var r=e?ae.nestedProperty(t,e).get():t,n=r.colorscale,a=r.color;return n&&ae.isArrayOrTypedArray(a)?br.makeColorScaleFunc(br.extractScale(n,r.cmin,r.cmax)):ae.identity};var on={start:1,end:-1,middle:0,bottom:1,top:-1};function ln(e,r,n,a){var i=t.select(e.node().parentNode),o=-1!==r.indexOf("top")?"top":-1!==r.indexOf("bottom")?"bottom":"middle",l=-1!==r.indexOf("left")?"end":-1!==r.indexOf("right")?"start":"middle",s=a?a/.8+1:0,u=(Mr.lineCount(e)-1)*Qr+1,c=on[l]*s,f=.75*n+on[o]*s+(on[o]-1)*u*n/2;e.attr("text-anchor",l),i.attr("transform","translate("+c+","+f+")")}function sn(t,r){var n=t.ts||r.textfont.size;return e(n)&&n>0?n:0}Kr.textPointStyle=function(e,r,n){e.each(function(e){var a=t.select(this),i=ae.extractOption(e,r,"tx","text");if(i){var o=e.tp||r.textposition,l=sn(e,r);a.call(Kr.font,e.tf||r.textfont.family,l,e.tc||r.textfont.color).text(i).call(Mr.convertToTspans,n).call(ln,o,l,e.mrc)}else a.remove()})},Kr.selectedTextStyle=function(e,r){if(e.size()&&r.selectedpoints){var n=r.selected||{},a=r.unselected||{};e.each(function(e){var i,o=t.select(this),l=e.tc||r.textfont.color,s=e.tp||r.textposition,u=sn(e,r),c=(n.textfont||{}).color,f=(a.textfont||{}).color;e.selected?c&&(i=c):f?i=f:c||(i=Pe.addOpacity(l,$r)),i&&Pe.fill(o,i),ln(o,s,u,e.mrc2||e.mrc)})}};var un=.5;function cn(e,r,n,a){var i=e[0]-r[0],o=e[1]-r[1],l=n[0]-r[0],s=n[1]-r[1],u=Math.pow(i*i+o*o,un/2),c=Math.pow(l*l+s*s,un/2),f=(c*c*i-u*u*l)*a,h=(c*c*o-u*u*s)*a,d=3*c*(u+c),p=3*u*(u+c);return[[t.round(r[0]+(d&&f/d),2),t.round(r[1]+(d&&h/d),2)],[t.round(r[0]-(p&&f/p),2),t.round(r[1]-(p&&h/p),2)]]}Kr.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var r,n="M"+t[0],a=[];for(r=1;r<t.length-1;r++)a.push(cn(t[r-1],t[r],t[r+1],e));for(n+="Q"+a[0][0]+" "+t[1],r=2;r<t.length-1;r++)n+="C"+a[r-2][1]+" "+a[r-1][0]+" "+t[r];return n+="Q"+a[t.length-3][1]+" "+t[t.length-1]},Kr.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var r,n="M"+t[0],a=t.length-1,i=[cn(t[a],t[0],t[1],e)];for(r=1;r<a;r++)i.push(cn(t[r-1],t[r],t[r+1],e));for(i.push(cn(t[a-1],t[a],t[0],e)),r=1;r<=a;r++)n+="C"+i[r-1][1]+" "+i[r][0]+" "+t[r];return n+="C"+i[a][1]+" "+i[0][0]+" "+t[0]+"Z"};var fn={hv:function(e,r){return"H"+t.round(r[0],2)+"V"+t.round(r[1],2)},vh:function(e,r){return"V"+t.round(r[1],2)+"H"+t.round(r[0],2)},hvh:function(e,r){return"H"+t.round((e[0]+r[0])/2,2)+"V"+t.round(r[1],2)+"H"+t.round(r[0],2)},vhv:function(e,r){return"V"+t.round((e[1]+r[1])/2,2)+"H"+t.round(r[0],2)+"V"+t.round(r[1],2)}},hn=function(e,r){return"L"+t.round(r[0],2)+","+t.round(r[1],2)};Kr.steps=function(e){var r=fn[e]||hn;return function(e){for(var n="M"+t.round(e[0][0],2)+","+t.round(e[0][1],2),a=1;a<e.length;a++)n+=r(e[a-1],e[a]);return n}},Kr.makeTester=function(){var e=t.select("body").selectAll("#js-plotly-tester").data([0]);e.enter().append("svg").attr("id","js-plotly-tester").attr(ke.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"});var r=e.selectAll(".js-reference-point").data([0]);r.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),Kr.tester=e,Kr.testref=r},Kr.savedBBoxes={};var dn=0;function pn(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}Kr.bBox=function(e,r,n){var a,i,o;if(n||(n=pn(e)),n){if(a=Kr.savedBBoxes[n])return ae.extendFlat({},a)}else if(1===e.childNodes.length){var l=e.childNodes[0];if(n=pn(l)){var s=+l.getAttribute("x")||0,u=+l.getAttribute("y")||0,c=l.getAttribute("transform");if(!c){var f=Kr.bBox(l,!1,n);return s&&(f.left+=s,f.right+=s),u&&(f.top+=u,f.bottom+=u),f}if(n+="~"+s+"~"+u+"~"+c,a=Kr.savedBBoxes[n])return ae.extendFlat({},a)}}r?i=e:(o=Kr.tester.node(),i=e.cloneNode(!0),o.appendChild(i)),t.select(i).attr("transform",null).call(Mr.positionText,0,0);var h=i.getBoundingClientRect(),d=Kr.testref.node().getBoundingClientRect();r||o.removeChild(i);var p={height:h.height,width:h.width,left:h.left-d.left,top:h.top-d.top,right:h.right-d.left,bottom:h.bottom-d.top};return dn>=1e4&&(Kr.savedBBoxes={},dn=0),n&&(Kr.savedBBoxes[n]=p),dn++,ae.extendFlat({},p)},Kr.setClipUrl=function(e,r){if(r){var n="#"+r,a=t.select("base");a.size()&&a.attr("href")&&(n=window.location.href.split("#")[0]+n),e.attr("clip-path","url("+n+")")}else e.attr("clip-path",null)},Kr.getTranslate=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(t,e,r){return[e,r].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},Kr.setTranslate=function(t,e,r){var n=t.attr?"attr":"getAttribute",a=t.attr?"attr":"setAttribute",i=t[n]("transform")||"";return e=e||0,r=r||0,i=i.replace(/(\btranslate\(.*?\);?)/,"").trim(),i=(i+=" translate("+e+", "+r+")").trim(),t[a]("transform",i),i},Kr.getScale=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(t,e,r){return[e,r].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},Kr.setScale=function(t,e,r){var n=t.attr?"attr":"getAttribute",a=t.attr?"attr":"setAttribute",i=t[n]("transform")||"";return e=e||1,r=r||1,i=i.replace(/(\bscale\(.*?\);?)/,"").trim(),i=(i+=" scale("+e+", "+r+")").trim(),t[a]("transform",i),i},Kr.setPointGroupScale=function(t,e,r){var n,a,i;return e=e||1,r=r||1,a=1===e&&1===r?"":" scale("+e+","+r+")",i=/\s*sc.*/,t.each(function(){n=(this.getAttribute("transform")||"").replace(i,""),n=(n+=a).trim(),this.setAttribute("transform",n)}),a};var gn=/translate\([^)]*\)\s*$/;Kr.setTextPointsScale=function(e,r,n){e.each(function(){var e,a=t.select(this),i=a.select("text");if(i.node()){var o=parseFloat(i.attr("x")||0),l=parseFloat(i.attr("y")||0),s=(a.attr("transform")||"").match(gn);e=1===r&&1===n?[]:["translate("+o+","+l+")","scale("+r+","+n+")","translate("+-o+","+-l+")"],s&&e.push(s),a.attr("transform",e.join(" "))}})};var vn={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}},mn={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}},yn=m.extendFlat,xn=function(t,e,r){return{color:{valType:"color",arrayOk:!0,editType:e||"style"},colorscale:yn({},fr.colorscale,{}),cauto:yn({},fr.zauto,{impliedEdits:{cmin:void 0,cmax:void 0}}),cmax:yn({},fr.zmax,{editType:e||fr.zmax.editType,impliedEdits:{cauto:!1}}),cmin:yn({},fr.zmin,{editType:e||fr.zmin.editType,impliedEdits:{cauto:!1}}),autocolorscale:yn({},fr.autocolorscale,{dflt:!1===r?r:fr.autocolorscale.dflt}),reversescale:yn({},fr.reversescale,{})}},bn={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20},_n=Oe.dash,wn=m.extendFlat,An={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:wn({},_n,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:wn({symbol:{valType:"enumerated",values:Jr.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calcIfAutorange"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:gr,line:wn({width:{valType:"number",min:0,arrayOk:!0,editType:"style"},editType:"calc"},xn()),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},xn()),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:k({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}},Mn=An.marker,Tn={r:An.r,t:An.t,marker:{color:Mn.color,size:Mn.size,symbol:Mn.symbol,opacity:Mn.opacity,editType:"calc"}},kn=m.extendFlat,En=xe.overrideAll,Cn=kn({},Ie.domain,{});function Sn(t,e){return kn({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}})}var Ln=En({radialaxis:Sn(0,{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:Cn,orientation:{valType:"number"}}),angularaxis:Sn(0,{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:Cn}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested"),On={},Rn=ae.extendFlat,Dn=ae.extendDeepAll,In="_isSubplotObj",Pn="_isLinkedToArray",Fn=[In,Pn,"_arrayAttrRegexps","_deprecated"];function zn(t,e,r){if(!t)return!1;if(t._isLinkedToArray)if(Nn(e[r]))r++;else if(r<e.length)return!1;for(;r<e.length;r++){var n=t[e[r]];if(!ae.isPlainObject(n))break;if(t=n,r===e.length-1)break;if(t._isLinkedToArray){if(!Nn(e[++r]))return!1}else if("info_array"===t.valType){var a=e[++r];if(!Nn(a))return!1;var i=t.items;if(Array.isArray(i)){if(a>=i.length)return!1;if(2===t.dimensions){if(r++,e.length===r)return t;var o=e[r];if(!Nn(o))return!1;t=i[a][o]}else t=i[a]}else t=i}}return t}function Nn(t){return t===Math.round(t)&&t>=0}function Bn(t){return function(t){On.crawl(t,function(t,e,r){On.isValObject(t)?"data_array"===t.valType?(t.role="data",r[e+"src"]={valType:"string",editType:"none"}):!0===t.arrayOk&&(r[e+"src"]={valType:"string",editType:"none"}):ae.isPlainObject(t)&&(t.role="object")})}(t),function(t){On.crawl(t,function(t,e,r){if(!t)return;var n=t[Pn];if(!n)return;delete t[Pn],r[e]={items:{}},r[e].items[n]=t,r[e].role="object"})}(t),t}function jn(t,e,r){var n=ae.nestedProperty(t,r),a=Dn({},e.layoutAttributes);a[In]=!0,n.set(a)}function Un(t,e,r){var n=ae.nestedProperty(t,r);n.set(Dn(n.get()||{},e))}On.IS_SUBPLOT_OBJ=In,On.IS_LINKED_TO_ARRAY=Pn,On.DEPRECATED="_deprecated",On.UNDERSCORE_ATTRS=Fn,On.get=function(){var t={};R.allTypes.concat("area").forEach(function(e){t[e]=function(t){var e,r;"area"===t?(e={attributes:Tn},r={}):(e=R.modules[t]._module,r=e.basePlotModule);var n={type:null};Dn(n,C),Dn(n,e.attributes),r.attributes&&Dn(n,r.attributes);n.type=t;var a={meta:e.meta||{},attributes:Bn(n)};if(e.layoutAttributes){var i={};Dn(i,e.layoutAttributes),a.layoutAttributes=Bn(i)}return a}(e)});var e,r={};return Object.keys(R.transformsRegistry).forEach(function(t){r[t]=function(t){var e=R.transformsRegistry[t],r=Dn({},e.attributes);return Object.keys(R.componentsRegistry).forEach(function(e){var n=R.componentsRegistry[e];n.schema&&n.schema.transforms&&n.schema.transforms[t]&&Object.keys(n.schema.transforms[t]).forEach(function(e){Un(r,n.schema.transforms[t][e],e)})}),{attributes:Bn(r)}}(t)}),{defs:{valObjects:ae.valObjectMeta,metaKeys:Fn.concat(["description","role","editType","impliedEdits"]),editType:{traces:xe.traces,layout:xe.layout},impliedEdits:{}},traces:t,layout:function(){var t,e,r={};for(t in Dn(r,O),R.subplotsRegistry)if((e=R.subplotsRegistry[t]).layoutAttributes)if("cartesian"===e.name)jn(r,e,"xaxis"),jn(r,e,"yaxis");else{var n="subplot"===e.attr?e.name:e.attr;jn(r,e,n)}for(t in r=function(t){return Rn(t,{radialaxis:Ln.radialaxis,angularaxis:Ln.angularaxis}),Rn(t,Ln.layout),t}(r),R.componentsRegistry){var a=(e=R.componentsRegistry[t]).schema;if(a&&(a.subplots||a.layout)){var i=a.subplots;if(i&&i.xaxis&&!i.yaxis)for(var o in i.xaxis)delete r.yaxis[o]}else e.layoutAttributes&&Un(r,e.layoutAttributes,e.name)}return{layoutAttributes:Bn(r)}}(),transforms:r,frames:(e={frames:ae.extendDeepAll({},mn)},Bn(e),e.frames),animation:Bn(vn)}},On.crawl=function(t,e,r,n){var a=r||0;n=n||"",Object.keys(t).forEach(function(r){var i=t[r];if(-1===Fn.indexOf(r)){var o=(n?n+".":"")+r;e(i,r,t,a,o),On.isValObject(i)||ae.isPlainObject(i)&&"impliedEdits"!==r&&On.crawl(i,e,a+1,o)}})},On.isValObject=function(t){return t&&void 0!==t.valType},On.findArrayAttributes=function(t){var e=[],r=[];function n(n,a,i,o){if(r=r.slice(0,o).concat([a]),n&&("data_array"===n.valType||!0===n.arrayOk)&&!("colorbar"===r[o-1]&&("ticktext"===a||"tickvals"===a))){var l=function(t){return t.join(".")}(r),s=ae.nestedProperty(t,l).get();ae.isArrayOrTypedArray(s)&&e.push(l)}}if(On.crawl(C,n),t._module&&t._module.attributes&&On.crawl(t._module.attributes,n),t.transforms)for(var a=t.transforms,i=0;i<a.length;i++){var o=a[i]._module;o&&(r=["transforms["+i+"]"],On.crawl(o.attributes,n,1))}return t._fullInput&&t._fullInput._module&&t._fullInput._module.attributes&&(On.crawl(t._fullInput._module.attributes,n),e=ae.filterUnique(e)),e},On.getTraceValObject=function(t,e){var r,n,a=e[0],i=1;if("transforms"===a){if(!Array.isArray(t.transforms))return!1;var o=e[1];if(!Nn(o)||o>=t.transforms.length)return!1;n=(r=(R.transformsRegistry[t.transforms[o].type]||{}).attributes)&&r[e[2]],i=3}else if("area"===t.type)n=Tn[a];else{var l=t._module;if(l||(l=(R.modules[t.type||C.type.dflt]||{})._module),!l)return!1;if(!(n=(r=l.attributes)&&r[a])){var s=l.basePlotModule;s&&s.attributes&&(n=s.attributes[a])}n||(n=C[a])}return zn(n,e,i)},On.getLayoutValObject=function(t,e){return zn(function(t,e){var r,n,a,i,o=t._basePlotModules;if(o){var l;for(r=0;r<o.length;r++){if((a=o[r]).attrRegex&&a.attrRegex.test(e)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!l&&a.layoutAttributes&&(l=a.layoutAttributes)}var s=a.baseLayoutAttrOverrides;if(s&&e in s)return s[e]}if(l)return l}var u=t._modules;if(u)for(r=0;r<u.length;r++)if((i=u[r].layoutAttributes)&&e in i)return i[e];for(n in R.componentsRegistry)if(!(a=R.componentsRegistry[n]).schema&&e===a.name)return a.layoutAttributes;if(e in O)return O[e];if("radialaxis"===e||"angularaxis"===e)return Ln[e];return Ln.layout[e]||!1}(t,e[0]),e,1)};var Vn={};function Hn(t,e,r){var n,a,i,o=!1;if("data"===e.type)n=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;n=t._fullLayout}return a=ae.nestedProperty(n,e.prop).get(),(i=r[e.type]=r[e.type]||{}).hasOwnProperty(e.prop)&&i[e.prop]!==a&&(o=!0),i[e.prop]=a,{changed:o,value:a}}function qn(t,e){var r=[],n=e[0],a={};if("string"==typeof n)a[n]=e[1];else{if(!ae.isPlainObject(n))return r;a=n}return Xn(a,function(t,e,n){r.push({type:"layout",prop:t,value:n})},"",0),r}function Gn(t,e){var r,n,a,i,o=[];if(n=e[0],a=e[1],r=e[2],i={},"string"==typeof n)i[n]=a;else{if(!ae.isPlainObject(n))return o;i=n,void 0===r&&(r=a)}return void 0===r&&(r=null),Xn(i,function(e,n,a){var i;if(Array.isArray(a)){var l=Math.min(a.length,t.data.length);r&&(l=Math.min(l,r.length)),i=[];for(var s=0;s<l;s++)i[s]=r?r[s]:s}else i=r?r.slice(0):null;if(null===i)Array.isArray(a)&&(a=a[0]);else if(Array.isArray(i)){if(!Array.isArray(a)){var u=a;a=[];for(var c=0;c<i.length;c++)a[c]=u}a.length=Math.min(i.length,a.length)}o.push({type:"data",prop:e,traces:i,value:a})},"",0),o}function Xn(t,e,r,n){Object.keys(t).forEach(function(a){var i=t[a];if("_"!==a[0]){var o=r+(n>0?".":"")+a;ae.isPlainObject(i)?Xn(i,e,o,n+1):e(o,a,i)}})}Vn.manageCommandObserver=function(t,e,r,n){var a={},i=!0;e&&e._commandObserver&&(a=e._commandObserver),a.cache||(a.cache={}),a.lookupTable={};var o=Vn.hasSimpleAPICommandBindings(t,r,a.lookupTable);if(e&&e._commandObserver){if(o)return a;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,a}if(o){Hn(t,o,a.cache),a.check=function(){if(i){var e=Hn(t,o,a.cache);return e.changed&&n&&void 0!==a.lookupTable[e.value]&&(a.disable(),Promise.resolve(n({value:e.value,type:o.type,prop:o.prop,traces:o.traces,index:a.lookupTable[e.value]})).then(a.enable,a.enable)),e.changed}};for(var l=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],s=0;s<l.length;s++)t._internalOn(l[s],a.check);a.remove=function(){for(var e=0;e<l.length;e++)t._removeInternalListener(l[e],a.check)}}else ae.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){i=!1},a.enable=function(){i=!0},e&&(e._commandObserver=a),a},Vn.hasSimpleAPICommandBindings=function(t,e,r){var n,a,i=e.length;for(n=0;n<i;n++){var o,l=e[n],s=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!s)return!1;var c=Vn.computeAPICommandBindings(t,s,u);if(1!==c.length)return!1;if(a){if((o=c[0]).type!==a.type)return!1;if(o.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(o.traces))return!1;o.traces.sort();for(var f=0;f<a.traces.length;f++)if(a.traces[f]!==o.traces[f])return!1}else if(o.prop!==a.prop)return!1}else a=c[0],Array.isArray(a.traces)&&a.traces.sort();var h=(o=c[0]).value;if(Array.isArray(h)){if(1!==h.length)return!1;h=h[0]}r&&(r[h]=n)}return a},Vn.executeAPICommand=function(t,e,r){if("skip"===e)return Promise.resolve();var n=R.apiMethodRegistry[e],a=[t];Array.isArray(r)||(r=[]);for(var i=0;i<r.length;i++)a.push(r[i]);return n.apply(null,a).catch(function(t){return ae.warn("API call to Plotly."+e+" rejected.",t),Promise.reject(t)})},Vn.computeAPICommandBindings=function(t,e,r){var n;switch(Array.isArray(r)||(r=[]),e){case"restyle":n=Gn(t,r);break;case"relayout":n=qn(t,r);break;case"update":n=Gn(t,[r[0],r[2]]).concat(qn(t,[r[1]]));break;case"animate":n=function(t,e){return Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}(0,r);break;default:n=[]}return n};var Wn={},Yn=ae._,Zn=r.BADNUM,Jn=Wn={},Qn=ae.relinkPrivateKeys;ae.extendFlat(Jn,R),Jn.attributes=C,Jn.attributes.type.values=Jn.allTypes,Jn.fontAttrs=k,Jn.layoutAttributes=O,Jn.fontWeight="normal";var $n=Jn.transformsRegistry;Jn.executeAPICommand=Vn.executeAPICommand,Jn.computeAPICommandBindings=Vn.computeAPICommandBindings,Jn.manageCommandObserver=Vn.manageCommandObserver,Jn.hasSimpleAPICommandBindings=Vn.hasSimpleAPICommandBindings,Jn.redrawText=function(t){if(!((t=ae.getGraphDiv(t)).data&&t.data[0]&&t.data[0].r))return new Promise(function(e){setTimeout(function(){R.getComponentMethod("annotations","draw")(t),R.getComponentMethod("legend","draw")(t),(t.calcdata||[]).forEach(function(t){t[0]&&t[0].t&&t[0].t.cb&&t[0].t.cb()}),e(Jn.previousPromises(t))},300)})},Jn.resize=function(t){return t=ae.getGraphDiv(t),new Promise(function(e,r){t&&!function(t){var e=window.getComputedStyle(t).display;return!e||"none"===e}(t)||r(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._redrawTimer=setTimeout(function(){if(t.layout.width&&t.layout.height)e(t);else{delete t.layout.width,delete t.layout.height;var r=t.changed;t.autoplay=!0,R.call("relayout",t,{autosize:!0}).then(function(){t.changed=r,e(t)})}},100)})},Jn.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then(function(){t._promises=[]})},Jn.addLinks=function(e){if(e._context.showLink||e._context.showSources){var r=e._fullLayout,n=r._paper.selectAll("text.js-plot-link-container").data([0]);n.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:Pe.defaultLine,"pointer-events":"all"}).each(function(){var e=t.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)});var a=n.node(),i={y:r._paper.attr("height")-9};document.body.contains(a)&&a.getComputedTextLength()>=r.width-20?(i["text-anchor"]="start",i.x=5):(i["text-anchor"]="end",i.x=r._paper.attr("width")-7),n.attr(i);var o=n.select(".js-link-to-tool"),l=n.select(".js-link-spacer"),s=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&function(t,e){e.text("");var r=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)r.on("click",function(){Jn.sendDataToCloud(t)});else{var n=window.location.pathname.split("/"),a=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+a})}}(e,o),l.text(o.text()&&s.text()?" - ":"")}},Jn.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var r=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",n=t.select(e).append("div").attr("id","hiddenform").style("display","none"),a=n.append("form").attr({action:r+"/external",method:"post",target:"_blank"});return a.append("input").attr({type:"text",name:"data"}).node().value=Jn.graphJson(e,!1,"keepdata"),a.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1};var Kn,ta=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],ea=["year","month","dayMonth","dayMonthYear"];function ra(t,e){var r,n,a=t.trace,i=a._arrayAttrs,o={};for(r=0;r<i.length;r++)o[n=i[r]]=ae.nestedProperty(a,n).get().slice();for(t.trace=e,r=0;r<i.length;r++)n=i[r],ae.nestedProperty(t.trace,n).set(o[n])}function na(t,e){var r=t._context.locale,n=!1,a={};function i(t){for(var r=!0,i=0;i<e.length;i++){var o=e[i];a[o]||(t[o]?a[o]=t[o]:r=!1)}r&&(n=!0)}for(var o=0;o<2;o++){for(var l=t._context.locales,s=0;s<2;s++){var u=(l[r]||{}).format;if(u&&(i(u),n))break;l=R.localeRegistry}var c=r.split("-")[0];if(n||c===r)break;r=c}return n||i(R.localeRegistry.en.format),a}function aa(t,e,r,n){for(var a=t.transforms,i=[t],o=0;o<a.length;o++){var l=a[o],s=$n[l.type];s&&s.transform&&(i=s.transform(i,{transform:l,fullTrace:t,fullData:e,layout:r,fullLayout:n,transformIndex:o}))}return i}function ia(t){for(var e=0;e<t.length;e++)t[e].clearCalc()}Jn.supplyDefaults=function(e){var r=e._fullLayout||{};if(r._skipDefaults)delete r._skipDefaults;else{var n,a=e._fullLayout={},i=e.layout||{},o=e._fullData||[],l=e._fullData=[],s=e.data||[],u=e._context||{};e._transitionData||Jn.createTransitionData(e),a._dfltTitle={plot:Yn(e,"Click to enter Plot title"),x:Yn(e,"Click to enter X axis title"),y:Yn(e,"Click to enter Y axis title"),colorbar:Yn(e,"Click to enter Colorscale title"),annotation:Yn(e,"new text")},a._traceWord=Yn(e,"trace");var c=na(e,ta);if(a._mapboxAccessToken=u.mapboxAccessToken,r._initialAutoSizeIsDone){var f=r.width,h=r.height;Jn.supplyLayoutGlobalDefaults(i,a,c),i.width||(a.width=f),i.height||(a.height=h)}else{Jn.supplyLayoutGlobalDefaults(i,a,c);var d=!i.width||!i.height,p=a.autosize,g=u.autosizable;d&&(p||g)?Jn.plotAutoSize(e,i,a):d&&Jn.sanitizeMargins(e),!p&&d&&(i.width=a.width,i.height=a.height)}a._d3locale=function(e,r){return e.decimal=r.charAt(0),e.thousands=r.charAt(1),t.locale(e)}(c,a.separators),a._extraFormat=na(e,ea),a._initialAutoSizeIsDone=!0,a._dataLength=s.length,a._modules=[],a._basePlotModules=[],a._subplots=function(){var t,e,r={};if(!Kn){Kn=[];var n=R.subplotsRegistry;for(var a in n){var i=n[a],o=i.attr;if(o&&(Kn.push(a),Array.isArray(o)))for(e=0;e<o.length;e++)ae.pushUnique(Kn,o[e])}}for(t=0;t<Kn.length;t++)r[Kn[t]]=[];return r}(),a._globalTransforms=(e._context||{}).globalTransforms,Jn.supplyDataDefaults(s,l,i,a),a._has=Jn._hasPlotType.bind(a);var v=a._modules;for(n=0;n<v.length;n++){var m=v[n];m.cleanData&&m.cleanData(l)}if(o.length===s.length)for(n=0;n<l.length;n++)Qn(l[n],o[n]);Jn.supplyLayoutModuleDefaults(i,a,l,e._transitionData),a._hasCartesian=a._has("cartesian"),a._hasGeo=a._has("geo"),a._hasGL3D=a._has("gl3d"),a._hasGL2D=a._has("gl2d"),a._hasTernary=a._has("ternary"),a._hasPie=a._has("pie"),Jn.cleanPlot(l,a,o,r),Jn.linkSubplots(l,a,o,r),Qn(a,r),Jn.doAutoMargin(e);var y=Le.list(e);for(n=0;n<y.length;n++){y[n].setScale()}if((e.calcdata||[]).length===l.length)for(n=0;n<l.length;n++){var x=l[n],b=e.calcdata[n][0];b&&b.trace&&(b.trace._hasCalcTransform?ra(b,x):b.trace=x)}}},Jn.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},Jn._hasPlotType=function(t){var e,r=this._basePlotModules||[];for(e=0;e<r.length;e++){if(r[e].name===t)return!0}var n=this._modules||[];for(e=0;e<n.length;e++){var a=n[e];if(a.categories&&a.categories.indexOf(t)>=0)return!0}return!1},Jn.cleanPlot=function(t,e,r,n){var a,i,o=n._basePlotModules||[];for(a=0;a<o.length;a++){var l=o[a];l.clean&&l.clean(t,e,r,n)}var s=!!n._paper,u=!!n._infolayer,c=n._has&&n._has("gl"),f=e._has&&e._has("gl");c&&!f&&void 0!==n._glcontainer&&(n._glcontainer.selectAll(".gl-canvas").remove(),n._glcanvas=null);t:for(a=0;a<r.length;a++){var h=r[a].uid;for(i=0;i<t.length;i++){if(h===t[i].uid)continue t}var d=".hm"+h+",.contour"+h+",.carpet"+h+",#clip"+h+",.trace"+h;s&&n._paper.selectAll(d).remove(),u&&(n._infolayer.selectAll(".cb"+h).remove(),n._infolayer.selectAll("g.rangeslider-container").selectAll(d).remove())}n._zoomlayer&&n._zoomlayer.selectAll(".select-outline").remove()},Jn.linkSubplots=function(t,e,r,n){var a,i,o,l,s=n._plots||{},u=e._plots={},c=e._subplots,f={_fullData:t,_fullLayout:e},h=c.cartesian.concat(c.gl2d||[]);for(a=0;a<h.length;a++){var d,p=s[o=h[a]],g=Le.getFromId(f,o,"x"),v=Le.getFromId(f,o,"y");for(p?((d=u[o]=p).xaxis.layer!==g.layer&&(d.xlines.attr("d",null),d.xaxislayer.selectAll("*").remove()),d.yaxis.layer!==v.layer&&(d.ylines.attr("d",null),d.yaxislayer.selectAll("*").remove())):(d=u[o]={}).id=o,d.xaxis=g,d.yaxis=v,d._hasClipOnAxisFalse=!1,i=0;i<t.length;i++){var m=t[i];if(m.xaxis===d.xaxis._id&&m.yaxis===d.yaxis._id&&!1===m.cliponaxis){d._hasClipOnAxisFalse=!0;break}}}var y=Le.list(f,null,!0);for(a=0;a<y.length;a++){var x=null;(l=y[a]).overlaying&&(x=Le.getFromId(f,l.overlaying))&&x.overlaying&&(l.overlaying=!1,x=null),l._mainAxis=x||l,x&&(l.domain=x.domain.slice()),l._anchorAxis="free"===l.anchor?null:Le.getFromId(f,l.anchor)}for(a=0;a<y.length;a++){var b="x"===(l=y[a])._id.charAt(0),_=l._mainAxis._anchorAxis,w="",A="",M="";if(_&&(M=_._mainAxis._id,w=b?l._id+M:M+l._id),!w||-1===h.indexOf(w))for(w="",i=0;i<h.length;i++){var T=(o=h[i]).indexOf("y"),k=b?o.substr(0,T):o.substr(T),E=b?o.substr(T):o.substr(0,T);if(k===l._id){A||(A=o);var C=Le.getFromId(f,E);if(M&&C.overlaying===M){w=o;break}}}l._mainSubplot=w||A}},Jn.clearExpandedTraceDefaultColors=function(t){var e,r,n;for(r=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],On.crawl(t._module.attributes,function(t,n,a,i){r[i]=n,r.length=i+1,"color"===t.valType&&void 0===t.dflt&&e.push(r.join("."))})),n=0;n<e.length;n++){ae.nestedProperty(t,"_input."+e[n]).get()||ae.nestedProperty(t,e[n]).set(null)}},Jn.supplyDataDefaults=function(t,e,r,n){var a,i,o,l=n._modules,s=n._basePlotModules,u=0,c=0;function f(t){e.push(t);var r=t._module;r&&(!0===t.visible&&ae.pushUnique(l,r),ae.pushUnique(s,t._module.basePlotModule),u++,!1!==t._input.visible&&c++)}n._transformModules=[];var h={},d=[];for(a=0;a<t.length;a++){if(o=t[a],(i=Jn.supplyTraceDefaults(o,c,n,a)).index=a,i._input=o,i._expandedIndex=u,i.transforms&&i.transforms.length)for(var p=aa(i,e,r,n),g=0;g<p.length;g++){var v=p[g],m=Jn.supplyTraceDefaults(v,u,n,a);Qn(m,v),v.uid=m.uid=i.uid+g,m.index=a,m._input=o,m._fullInput=i,m._expandedIndex=u,m._expandedInput=v,f(m)}else i._fullInput=i,i._expandedInput=i,f(i);R.traceIs(i,"carpetAxis")&&(h[i.carpet]=i),R.traceIs(i,"carpetDependent")&&d.push(a)}for(a=0;a<d.length;a++)if((i=e[d[a]]).visible){var y=h[i.carpet];i._carpet=y,y&&y.visible?(i.xaxis=y.xaxis,i.yaxis=y.yaxis):i.visible=!1}},Jn.supplyAnimationDefaults=function(t){var e;t=t||{};var r={};function n(e,n){return ae.coerce(t||{},r,vn,e,n)}if(n("mode"),n("direction"),n("fromcurrent"),Array.isArray(t.frame))for(r.frame=[],e=0;e<t.frame.length;e++)r.frame[e]=Jn.supplyAnimationFrameDefaults(t.frame[e]||{});else r.frame=Jn.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(r.transition=[],e=0;e<t.transition.length;e++)r.transition[e]=Jn.supplyAnimationTransitionDefaults(t.transition[e]||{});else r.transition=Jn.supplyAnimationTransitionDefaults(t.transition||{});return r},Jn.supplyAnimationFrameDefaults=function(t){var e={};function r(r,n){return ae.coerce(t||{},e,vn.frame,r,n)}return r("duration"),r("redraw"),e},Jn.supplyAnimationTransitionDefaults=function(t){var e={};function r(r,n){return ae.coerce(t||{},e,vn.transition,r,n)}return r("duration"),r("easing"),e},Jn.supplyFrameDefaults=function(t){var e={};function r(r,n){return ae.coerce(t,e,mn,r,n)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),e},Jn.supplyTraceDefaults=function(t,e,r,n){var a,i=r.colorway||Pe.defaults,o={},l=i[e%i.length];function s(e,r){return ae.coerce(t,o,Jn.attributes,e,r)}var u=s("visible");s("type"),s("uid"),s("name",r._traceWord+" "+n);var c=Jn.getModule(o);if(o._module=c,c){var f=c.basePlotModule,h=f.attr;if(h){var d=r._subplots,p=f.attributes,g="";if("gl2d"!==f.name||u){if(Array.isArray(h))for(a=0;a<h.length;a++){var v=h[a],m=ae.coerce(t,o,p,v);d[v]&&ae.pushUnique(d[v],m),g+=m}else g=ae.coerce(t,o,p,h);d[f.name]&&ae.pushUnique(d[f.name],g)}}}return u&&(s("customdata"),s("ids"),R.traceIs(o,"showLegend")&&(s("showlegend"),s("legendgroup")),R.getComponentMethod("fx","supplyDefaults")(t,o,l,r),c&&(c.supplyDefaults(t,o,l,r),ae.coerceHoverinfo(t,o,r)),R.traceIs(o,"noOpacity")||s("opacity"),R.traceIs(o,"notLegendIsolatable")&&(o.visible=!!o.visible),c&&c.selectPoints&&s("selectedpoints"),Jn.supplyTransformDefaults(t,o,r)),o},Jn.supplyTransformDefaults=function(t,e,r){var n=r._globalTransforms||[],a=r._transformModules||[];if(Array.isArray(t.transforms)||0!==n.length)for(var i=t.transforms||[],o=n.concat(i),l=e.transforms=[],s=0;s<o.length;s++){var u,c=o[s],f=c.type,h=$n[f],d=!(c._module&&c._module===h),p=h&&"function"==typeof h.transform;h||ae.warn("Unrecognized transform type "+f+"."),h&&h.supplyDefaults&&(d||p)?((u=h.supplyDefaults(c,e,r,t)).type=f,u._module=h,ae.pushUnique(a,h)):u=ae.extendFlat({},c),l.push(u)}},Jn.supplyLayoutGlobalDefaults=function(t,e,r){function n(r,n){return ae.coerce(t,e,Jn.layoutAttributes,r,n)}var a=ae.coerceFont(n,"font");n("title",e._dfltTitle.plot),ae.coerceFont(n,"titlefont",{family:a.family,size:Math.round(1.4*a.size),color:a.color}),n("autosize",!(t.width&&t.height)),n("width"),n("height"),n("margin.l"),n("margin.r"),n("margin.t"),n("margin.b"),n("margin.pad"),n("margin.autoexpand"),t.width&&t.height&&Jn.sanitizeMargins(e),R.getComponentMethod("grid","sizeDefaults")(t,e),n("paper_bgcolor"),n("separators",r.decimal+r.thousands),n("hidesources"),n("colorway"),n("datarevision"),R.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),R.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,n)},Jn.plotAutoSize=function(t,r,n){var a,i,o=t._context||{},l=o.frameMargins,s=ae.isPlotDiv(t);if(s&&t.emit("plotly_autosize"),o.fillFrame)a=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else if(e(l)&&l>0){var u=function(t){var e,r={left:0,right:0,bottom:0,top:0};if(t)for(e in t)t.hasOwnProperty(e)&&(r.left+=t[e].left||0,r.right+=t[e].right||0,r.bottom+=t[e].bottom||0,r.top+=t[e].top||0);return r}(t._boundingBoxMargins),c=u.left+u.right,f=u.bottom+u.top,h=1-2*l,d=n._container&&n._container.node?n._container.node().getBoundingClientRect():{width:n.width,height:n.height};a=Math.round(h*(d.width-c)),i=Math.round(h*(d.height-f))}else{var p=s?window.getComputedStyle(t):{};a=parseFloat(p.width)||n.width,i=parseFloat(p.height)||n.height}var g=Jn.layoutAttributes.width.min,v=Jn.layoutAttributes.height.min;a<g&&(a=g),i<v&&(i=v);var m=!r.width&&Math.abs(n.width-a)>1,y=!r.height&&Math.abs(n.height-i)>1;(y||m)&&(m&&(n.width=a),y&&(n.height=i)),t._initialAutoSize||(t._initialAutoSize={width:a,height:i}),Jn.sanitizeMargins(n)},Jn.supplyLayoutModuleDefaults=function(t,e,r,n){var a,i,o,l=R.componentsRegistry,s=e._basePlotModules,u=R.subplotsRegistry.cartesian;for(a in l)(o=l[a]).includeBasePlot&&o.includeBasePlot(t,e);for(var c in s.length||s.push(u),e._has("cartesian")&&(R.getComponentMethod("grid","contentDefaults")(t,e),u.finalizeSubplots(t,e)),e._subplots)e._subplots[c].sort(ae.subplotSort);for(i=0;i<s.length;i++)(o=s[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r);var f=e._modules;for(i=0;i<f.length;i++)(o=f[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r);var h=e._transformModules;for(i=0;i<h.length;i++)(o=h[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r,n);for(a in l)(o=l[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r)},Jn.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),void 0!==e._geocontainer&&e._geocontainer.remove(),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),ae.clearThrottle(),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.framework,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t.firstscatter,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._replotPending,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},Jn.style=function(t){var e,r=t._fullLayout._modules,n=[];for(e=0;e<r.length;e++){var a=r[e];a.style&&ae.pushUnique(n,a.style)}for(e=0;e<n.length;e++)n[e](t)},Jn.sanitizeMargins=function(t){if(t&&t.margin){var e,r=t.width,n=t.height,a=t.margin,i=r-(a.l+a.r),o=n-(a.t+a.b);i<0&&(e=(r-1)/(a.l+a.r),a.l=Math.floor(e*a.l),a.r=Math.floor(e*a.r)),o<0&&(e=(n-1)/(a.t+a.b),a.t=Math.floor(e*a.t),a.b=Math.floor(e*a.b))}},Jn.autoMargin=function(t,e,r){var n=t._fullLayout;if(n._pushmargin||(n._pushmargin={}),!1!==n.margin.autoexpand){if(r){var a=void 0===r.pad?12:r.pad;r.l+r.r>.5*n.width&&(r.l=r.r=0),r.b+r.t>.5*n.height&&(r.b=r.t=0),n._pushmargin[e]={l:{val:r.x,size:r.l+a},r:{val:r.x,size:r.r+a},b:{val:r.y,size:r.b+a},t:{val:r.y,size:r.t+a}}}else delete n._pushmargin[e];n._replotting||Jn.doAutoMargin(t)}},Jn.doAutoMargin=function(t){var r=t._fullLayout;r._size||(r._size={}),r._pushmargin||(r._pushmargin={});var n=r._size,a=JSON.stringify(n),i=Math.max(r.margin.l||0,0),o=Math.max(r.margin.r||0,0),l=Math.max(r.margin.t||0,0),s=Math.max(r.margin.b||0,0),u=r._pushmargin;if(!1!==r.margin.autoexpand)for(var c in u.base={l:{val:0,size:i},r:{val:1,size:o},t:{val:1,size:l},b:{val:0,size:s}},u){var f=u[c].l||{},h=u[c].b||{},d=f.val,p=f.size,g=h.val,v=h.size;for(var m in u){if(e(p)&&u[m].r){var y=u[m].r.val,x=u[m].r.size;if(y>d){var b=(p*y+(x-r.width)*d)/(y-d),_=(x*(1-d)+(p-r.width)*(1-y))/(y-d);b>=0&&_>=0&&b+_>i+o&&(i=b,o=_)}}if(e(v)&&u[m].t){var w=u[m].t.val,A=u[m].t.size;if(w>g){var M=(v*w+(A-r.height)*g)/(w-g),T=(A*(1-g)+(v-r.height)*(1-w))/(w-g);M>=0&&T>=0&&M+T>s+l&&(s=M,l=T)}}}}if(n.l=Math.round(i),n.r=Math.round(o),n.t=Math.round(l),n.b=Math.round(s),n.p=Math.round(r.margin.pad),n.w=Math.round(r.width)-n.l-n.r,n.h=Math.round(r.height)-n.t-n.b,n.w<0&&(n.w=Math.round(r.width)-r.margin.l-r.margin.r),n.h<0&&(n.h=Math.round(r.height)-r.margin.t-r.margin.b),!r._replotting&&"{}"!==a&&a!==JSON.stringify(r._size))return R.call("plot",t)},Jn.graphJson=function(t,e,r,n,a){(a&&e&&!t._fullData||a&&!e&&!t._fullLayout)&&Jn.supplyDefaults(t);var i=a?t._fullData:t.data,o=a?t._fullLayout:t.layout,l=(t._transitionData||{})._frames;function s(t){if("function"==typeof t)return null;if(ae.isPlainObject(t)){var e,n,a={};for(e in t)if("function"!=typeof t[e]&&-1===["_","["].indexOf(e.charAt(0))){if("keepdata"===r){if("src"===e.substr(e.length-3))continue}else if("keepstream"===r){if("string"==typeof(n=t[e+"src"])&&n.indexOf(":")>0&&!ae.isPlainObject(t.stream))continue}else if("keepall"!==r&&"string"==typeof(n=t[e+"src"])&&n.indexOf(":")>0)continue;a[e]=s(t[e])}return a}return Array.isArray(t)?t.map(s):ae.isJSDate(t)?ae.ms2DateTimeLocal(+t):t}var u={data:(i||[]).map(function(t){var r=s(t);return e&&delete r.fit,r})};return e||(u.layout=s(o)),t.framework&&t.framework.isPolar&&(u=t.framework.getConfig()),l&&(u.frames=s(l)),"object"===n?u:JSON.stringify(u)},Jn.modifyFrames=function(t,e){var r,n,a,i=t._transitionData._frames,o=t._transitionData._frameHash;for(r=0;r<e.length;r++)switch((n=e[r]).type){case"replace":a=n.value;var l=(i[n.index]||{}).name,s=a.name;i[n.index]=o[s]=a,s!==l&&(delete o[l],o[s]=a);break;case"insert":o[(a=n.value).name]=a,i.splice(n.index,0,a);break;case"delete":delete o[(a=i[n.index]).name],i.splice(n.index,1)}return Promise.resolve()},Jn.computeFrame=function(t,e){var r,n,a,i,o=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var l=o[e.toString()];if(!l)return!1;for(var s=[l],u=[l.name];l.baseframe&&(l=o[l.baseframe.toString()])&&-1===u.indexOf(l.name);)s.push(l),u.push(l.name);for(var c={};l=s.pop();)if(l.layout&&(c.layout=Jn.extendLayout(c.layout,l.layout)),l.data){if(c.data||(c.data=[]),!(n=l.traces))for(n=[],r=0;r<l.data.length;r++)n[r]=r;for(c.traces||(c.traces=[]),r=0;r<l.data.length;r++)void 0!==(a=n[r])&&null!==a&&(-1===(i=c.traces.indexOf(a))&&(i=c.data.length,c.traces[i]=a),c.data[i]=Jn.extendTrace(c.data[i],l.data[r]))}return c},Jn.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},r=t._transitionData._frames,n=0;n<r.length;n++){var a=r[n];a&&a.name&&(e[a.name]=a)}},Jn.extendObjectWithContainers=function(t,e,r){var n,a,i,o,l,s,u,c=ae.extendDeepNoArrays({},e||{}),f=ae.expandObjectPaths(c),h={};if(r&&r.length)for(i=0;i<r.length;i++)void 0===(a=(n=ae.nestedProperty(f,r[i])).get())?ae.nestedProperty(h,r[i]).set(null):(n.set(null),ae.nestedProperty(h,r[i]).set(a));if(t=ae.extendDeepNoArrays(t||{},f),r&&r.length)for(i=0;i<r.length;i++)if(s=ae.nestedProperty(h,r[i]).get()){for(u=(l=ae.nestedProperty(t,r[i])).get(),Array.isArray(u)||(u=[],l.set(u)),o=0;o<s.length;o++){var d=s[o];u[o]=null===d?null:Jn.extendObjectWithContainers(u[o],d)}l.set(u)}return t},Jn.dataArrayContainers=["transforms","dimensions"],Jn.layoutArrayContainers=R.layoutArrayContainers,Jn.extendTrace=function(t,e){return Jn.extendObjectWithContainers(t,e,Jn.dataArrayContainers)},Jn.extendLayout=function(t,e){return Jn.extendObjectWithContainers(t,e,Jn.layoutArrayContainers)},Jn.transition=function(t,e,r,n,a,i){var o,l,s=Array.isArray(e)?e.length:0,u=n.slice(0,s),c=[];var f=!1;for(o=0;o<u.length;o++){l=u[o];t._fullData[l]._module}var h=[Jn.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},function(){var n;for(n=0;n<u.length;n++){var a=u[n],i=t._fullData[a]._module;i&&(i.animatable&&c.push(a),t.data[u[n]]=Jn.extendTrace(t.data[u[n]],e[n]))}var o=ae.expandObjectPaths(ae.extendDeepNoArrays({},r)),l=/^[xy]axis[0-9]*$/;for(var s in o)l.test(s)&&delete o[s].range;return Jn.extendLayout(t.layout,o),delete t.calcdata,Jn.supplyDefaults(t),Jn.doCalcdata(t),R.getComponentMethod("errorbars","calc")(t),Promise.resolve()},Jn.rehover,function(){return t.emit("plotly_transitioning",[]),new Promise(function(e){t._transitioning=!0,i.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push(function(){f=!0}),a.redraw&&t._transitionData._interruptCallbacks.push(function(){return R.call("redraw",t)}),t._transitionData._interruptCallbacks.push(function(){t.emit("plotly_transitioninterrupted",[])});var n,o,l=0,s=0;function u(){return l++,function(){var r;f||++s!==l||(r=e,t._transitionData&&(function(t){if(t)for(;t.length;)t.shift()}(t._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(a.redraw)return R.call("redraw",t)}).then(function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])}).then(r)))}}var h=t._fullLayout._basePlotModules,d=!1;if(r)for(o=0;o<h.length;o++)if(h[o].transitionAxes){var p=ae.expandObjectPaths(r);d=h[o].transitionAxes(t,p,i,u)||d}for(d?(n=ae.extendFlat({},i)).duration=0:n=i,o=0;o<h.length;o++)h[o].plot(t,c,n,u);setTimeout(u())})}],d=ae.syncOrAsync(h,t);return d&&d.then||(d=Promise.resolve()),d.then(function(){return t})},Jn.doCalcdata=function(t,e){var r,n,a,i,o=Le.list(t),l=t._fullData,s=t._fullLayout,u=new Array(l.length),c=(t.calcdata||[]).slice(0);for(t.calcdata=u,t.firstscatter=!0,s._numBoxes=0,s._numViolins=0,s._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,s._piecolormap={},s._piecolorway=null,s._piedefaultcolorcount=0,a=0;a<l.length;a++)Array.isArray(e)&&-1===e.indexOf(a)&&(u[a]=c[a]);for(a=0;a<l.length;a++)(r=l[a])._arrayAttrs=On.findArrayAttributes(r);var f=s._subplots.polar||[];for(a=0;a<f.length;a++)o.push(s[f[a]].radialaxis,s[f[a]].angularaxis);ia(o);var h=!1;for(a=0;a<l.length;a++)if(!0===(r=l[a]).visible&&r.transforms)for((n=r._module)&&n.calc&&n.calc(t,r),i=0;i<r.transforms.length;i++){var d=r.transforms[i];(n=$n[d.type])&&n.calcTransform&&(r._hasCalcTransform=!0,h=!0,n.calcTransform(t,r,d))}for(h&&ia(o),a=0;a<l.length;a++){var p=[];if(!0===(r=l[a]).visible){n=r._module;var g=r.transforms||[];for(i=g.length-1;i>=0;i--)if(g[i].enabled){r._indexToPoints=g[i]._indexToPoints;break}n&&n.calc&&(p=n.calc(t,r))}Array.isArray(p)&&p[0]||(p=[{x:Zn,y:Zn}]),p[0].t||(p[0].t={}),p[0].trace=r,u[a]=p}R.getComponentMethod("fx","calc")(t)},Jn.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},Jn.generalUpdatePerTraceModule=function(t,e,r,n){var a,i=e.traceHash,o={};for(a=0;a<r.length;a++){var l=r[a],s=l[0].trace;s.visible&&(o[s.type]=o[s.type]||[],o[s.type].push(l))}for(var u in i)if(!o[u]){var c=i[u][0];c[0].trace.visible=!1,o[u]=[c]}for(var f in o){var h=o[f];h[0][0].trace._module.plot(t,e,ae.filterVisible(h),n)}e.traceHash=o};var oa={draw:function(r,n,a){var i,o=a.propContainer,l=a.propName,s=a.placeholder,u=a.traceIndex,c=a.avoid||{},f=a.attributes,d=a.transform,p=a.containerGroup,g=r._fullLayout,v=o.titlefont||{},m=v.family,y=v.size,x=v.color,b=1,_=!1,w=(o.title||"").trim();"title"===l?i="titleText":-1!==l.indexOf("axis")?i="axisTitleText":l.indexOf(!0)&&(i="colorbarTitleText");var A=r._context.edits[i];""===w?b=0:w.replace(la," % ")===s.replace(la," % ")&&(b=.2,_=!0,A||(w=""));var M=w||A;p||(p=g._infolayer.selectAll(".g-"+n).data([0])).enter().append("g").classed("g-"+n,!0);var T=p.selectAll("text").data(M?[0]:[]);if(T.enter().append("text"),T.text(w).attr("class",n),T.exit().remove(),!M)return p;function k(t){ae.syncOrAsync([E,C],t)}function E(e){var n;return d?(n="",d.rotate&&(n+="rotate("+[d.rotate,f.x,f.y]+")"),d.offset&&(n+="translate(0, "+d.offset+")")):n=null,e.attr("transform",n),e.style({"font-family":m,"font-size":t.round(y,2)+"px",fill:Pe.rgb(x),opacity:b*Pe.opacity(x),"font-weight":Wn.fontWeight}).attr(f).call(Mr.convertToTspans,r),Wn.previousPromises(r)}function C(r){var n=t.select(r.node().parentNode);if(c&&c.selection&&c.side&&w){n.attr("transform",null);var a=0,i={left:"right",right:"left",top:"bottom",bottom:"top"}[c.side],o=-1!==["left","top"].indexOf(c.side)?-1:1,l=e(c.pad)?c.pad:2,s=Jr.bBox(n.node()),u={left:0,top:0,right:g.width,bottom:g.height},f=c.maxShift||(u[c.side]-s[c.side])*("left"===c.side||"top"===c.side?-1:1);if(f<0)a=f;else{var h=c.offsetLeft||0,d=c.offsetTop||0;s.left-=h,s.right-=h,s.top-=d,s.bottom-=d,c.selection.each(function(){var t=Jr.bBox(this);ae.bBoxIntersect(s,t,l)&&(a=Math.max(a,o*(t[c.side]-s[i])+l))}),a=Math.min(f,a)}if(a>0||f<0){var p={left:[-a,0],right:[a,0],top:[0,-a],bottom:[0,a]}[c.side];n.attr("transform","translate("+p+")")}}}T.call(k),A&&(w?T.on(".opacity",null):(b=0,_=!0,T.text(s).on("mouseover.opacity",function(){t.select(this).transition().duration(h.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){t.select(this).transition().duration(h.HIDE_PLACEHOLDER).style("opacity",0)})),T.call(Mr.makeEditable,{gd:r}).on("edit",function(t){void 0!==u?R.call("restyle",r,l,t,u):R.call("relayout",r,l,t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(k)}).on("input",function(t){this.text(t||" ").call(Mr.positionText,f.x,f.y)}));return T.classed("js-placeholder",_),p}},la=/ [XY][0-9]* /;var sa=r.FP_SAFE,ua=da,ca=pa,fa=function(t){t._length||t.setScale();var e,r=t._min&&t._max&&t._min.length&&t._max.length;t.autorange&&r&&(t.range=da(t),t._r=t.range.slice(),t._rl=ae.simpleMap(t._r,t.r2l),(e=t._input).range=t.range.slice(),e.autorange=t.autorange);if(t._anchorAxis&&t._anchorAxis.rangeslider){var n=t._anchorAxis.rangeslider[t._name];n&&"auto"===n.rangemode&&(n.range=r?da(t):t._rangeInitial?t._rangeInitial.slice():t.range.slice()),(e=t._anchorAxis._input).rangeslider[t._name]=ae.extendFlat({},n)}},ha=function(t,r,n){if(!function(t){return t.autorange||t._rangesliderAutorange}(t)||!r)return;t._min||(t._min=[]);t._max||(t._max=[]);n||(n={});t._m||t.setScale();var a,i,o,l,s,u,c,f,h,d,p,g,v=r.length,m=n.padded||!1,y=n.tozero&&("linear"===t.type||"-"===t.type),x="log"===t.type,b=!1;function _(t){if(Array.isArray(t))return b=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var w=_((t._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),A=_((t._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),M=_(n.vpadplus||n.vpad),T=_(n.vpadminus||n.vpad);if(!b){if(p=1/0,g=-1/0,x)for(a=0;a<v;a++)(l=r[a])<p&&l>0&&(p=l),l>g&&l<sa&&(g=l);else for(a=0;a<v;a++)(l=r[a])<p&&l>-sa&&(p=l),l>g&&l<sa&&(g=l);r=[p,g],v=2}function k(n){if(s=r[n],e(s))for(f=w(n),h=A(n),p=s-T(n),g=s+M(n),x&&p<g/10&&(p=g/10),u=t.c2l(p),c=t.c2l(g),y&&(u=Math.min(0,u),c=Math.max(0,c)),o=0;o<2;o++){var a=o?c:u;if(ga(a)){var v=o?t._max:t._min,b=o?f:h,_=o?ma:va;for(d=!0,i=0;i<v.length&&d;i++){if(l=v[i],_(l.val,a)&&l.pad>=b&&(l.extrapad||!m)){d=!1;break}_(a,l.val)&&l.pad<=b&&(m||!l.extrapad)&&(v.splice(i,1),i--)}if(d){var k=y&&0===a;v.push({val:a,pad:k?0:b,extrapad:!k&&m})}}}}var E=Math.min(6,v);for(a=0;a<E;a++)k(a);for(a=v-1;a>=E;a--)k(a)};function da(t){var e,r,n,a,i,o,l,s,u=[],c=t._min[0].val,f=t._max[0].val,h=0,d=!1,p=pa(t);for(e=1;e<t._min.length&&c===f;e++)c=Math.min(c,t._min[e].val);for(e=1;e<t._max.length&&c===f;e++)f=Math.max(f,t._max[e].val);if(t.range){var g=ae.simpleMap(t.range,t.r2l);d=g[1]<g[0]}for("reversed"===t.autorange&&(d=!0,t.autorange=!0),e=0;e<t._min.length;e++)for(n=t._min[e],r=0;r<t._max.length;r++)s=(a=t._max[r]).val-n.val,l=t._length-p(n)-p(a),s>0&&l>0&&s/l>h&&(i=n,o=a,h=s/l);if(c===f){var v=c-1,m=c+1;u="tozero"===t.rangemode?c<0?[v,0]:[0,m]:"nonnegative"===t.rangemode?[Math.max(0,v),Math.max(0,m)]:[v,m]}else h&&("linear"!==t.type&&"-"!==t.type||("tozero"===t.rangemode?(i.val>=0&&(i={val:0,pad:0}),o.val<=0&&(o={val:0,pad:0})):"nonnegative"===t.rangemode&&(i.val-h*p(i)<0&&(i={val:0,pad:0}),o.val<0&&(o={val:1,pad:0})),h=(o.val-i.val)/(t._length-p(i)-p(o))),u=[i.val-h*p(i),o.val+h*p(o)]);return u[0]===u[1]&&("tozero"===t.rangemode?u=u[0]<0?[u[0],0]:u[0]>0?[0,u[0]]:[0,1]:(u=[u[0]-1,u[0]+1],"nonnegative"===t.rangemode&&(u[0]=Math.max(0,u[0])))),d&&u.reverse(),ae.simpleMap(u,t.l2r||Number)}function pa(t){var e=t._length/20;return"domain"===t.constrain&&t._inputDomain&&(e*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(t){return t.pad+(t.extrapad?e:0)}}function ga(t){return e(t)&&Math.abs(t)<sa}function va(t,e){return t<=e}function ma(t,e){return t>=e}var ya={},xa=r.ONEAVGYEAR,ba=r.ONEAVGMONTH,_a=r.ONEDAY,wa=r.ONEHOUR,Aa=r.ONEMIN,Ma=r.ONESEC,Ta=r.MINUS_SIGN,ka=r.BADNUM,Ea=wr.MID_SHIFT,Ca=wr.LINE_SPACING,Sa=ya={};Sa.setConvert=Je,Sa.id2name=Le.id2name,Sa.name2id=Le.name2id,Sa.cleanId=Le.cleanId,Sa.list=Le.list,Sa.listIds=Le.listIds,Sa.getFromId=Le.getFromId,Sa.getFromTrace=Le.getFromTrace,Sa.expand=ha,Sa.getAutoRange=ua,Sa.coerceRef=function(t,e,r,n,a,i){var o=n.charAt(n.length-1),l=r._fullLayout._subplots[o+"axis"],s=n+"ref",u={};return a||(a=l[0]||i),i||(i=a),u[s]={valType:"enumerated",values:l.concat(i?[i]:[]),dflt:a},ae.coerce(t,e,u,s)},Sa.coercePosition=function(t,e,r,n,a,i){var o,l;if("paper"===n||"pixel"===n)o=ae.ensureNumber,l=r(a,i);else{var s=Sa.getFromId(e,n);l=r(a,i=s.fraction2r(i)),o=s.cleanPos}t[a]=o(l)},Sa.cleanPosition=function(t,e,r){return("paper"===r||"pixel"===r?ae.ensureNumber:Sa.getFromId(e,r).cleanPos)(t)};var La=Sa.getDataConversions=function(t,e,r,n){var a,i="x"===r||"y"===r||"z"===r?r:n;if(Array.isArray(i)){if(a={type:or(n),_categories:[]},Sa.setConvert(a),"category"===a.type)for(var o=0;o<n.length;o++)a.d2c(n[o])}else a=Sa.getFromTrace(t,e,i);return a?{d2c:a.d2c,c2d:a.c2d}:"ids"===i?{d2c:Ra,c2d:Ra}:{d2c:Oa,c2d:Oa}};function Oa(t){return+t}function Ra(t){return String(t)}Sa.getDataToCoordFunc=function(t,e,r,n){return La(t,e,r,n).d2c},Sa.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},Sa.minDtick=function(t,e,r,n){-1===["log","category"].indexOf(t.type)&&n?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=r):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((r-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=r):((e/t._minDtick+1e-6)%1>2e-6||((r-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},Sa.saveRangeInitial=function(t,e){for(var r=Sa.list(t,"",!0),n=!1,a=0;a<r.length;a++){var i=r[a],o=void 0===i._rangeInitial,l=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);(o&&!1===i.autorange||e&&l)&&(i._rangeInitial=i.range.slice(),n=!0)}return n},Sa.saveShowSpikeInitial=function(t,e){for(var r=Sa.list(t,"",!0),n=!1,a="on",i=0;i<r.length;i++){var o=r[i],l=void 0===o._showSpikeInitial,s=l||!(o.showspikes===o._showspikes);(l||e&&s)&&(o._showSpikeInitial=o.showspikes,n=!0),"on"!==a||o.showspikes||(a="off")}return t._fullLayout._cartesianSpikesEnabled=a,n},Sa.autoBin=function(t,r,n,a,i){var o,l,s=ae.aggNums(Math.min,null,t),u=ae.aggNums(Math.max,null,t);if(i||(i=r.calendar),"category"===r.type)return{start:s-.5,end:u+.5,size:1,_dataSpan:u-s};if(n)o=(u-s)/n;else{var c=ae.distinctVals(t),f=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10)),h=f*ae.roundUp(c.minDiff/f,[.9,1.9,4.9,9.9],!0);o=Math.max(h,2*ae.stdev(t)/Math.pow(t.length,a?.25:.4)),e(o)||(o=1)}l="log"===r.type?{type:"linear",range:[s,u]}:{type:r.type,range:ae.simpleMap([s,u],r.c2r,0,i),calendar:i},Sa.setConvert(l),Sa.autoTicks(l,o);var d,p=Sa.tickIncrement(Sa.tickFirst(l),l.dtick,"reverse",i);if("number"==typeof l.dtick)d=(p=function(t,r,n,a,i){var o=0,l=0,s=0,u=0;function c(e){return(1+100*(e-t)/n.dtick)%100<2}for(var f=0;f<r.length;f++)r[f]%1==0?s++:e(r[f])||u++,c(r[f])&&o++,c(r[f]+n.dtick/2)&&l++;var h=r.length-u;if(s===h&&"date"!==n.type)n.dtick<1?t=a-.5*n.dtick:(t-=.5)+n.dtick<a&&(t+=n.dtick);else if(l<.1*h&&(o>.3*h||c(a)||c(i))){var d=n.dtick/2;t+=t+d<a?d:-d}return t}(p,t,l,s,u))+(1+Math.floor((u-p)/l.dtick))*l.dtick;else for("M"===l.dtick.charAt(0)&&(p=function(t,e,r,n,a){var i=ae.findExactDates(e,a);if(i.exactDays>.8){var o=Number(r.substr(1));i.exactYears>.8&&o%12==0?t=Sa.tickIncrement(t,"M6","reverse")+1.5*_a:i.exactMonths>.8?t=Sa.tickIncrement(t,"M1","reverse")+15.5*_a:t-=_a/2;var l=Sa.tickIncrement(t,r);if(l<=n)return l}return t}(p,t,l.dtick,s,i)),d=p,0;d<=u;)d=Sa.tickIncrement(d,l.dtick,!1,i),0;return{start:r.c2r(p,0,i),end:r.c2r(d,0,i),size:l.dtick,_dataSpan:u-s}},Sa.prepTicks=function(t){var e=ae.simpleMap(t.range,t.r2l);if("auto"===t.tickmode||!t.dtick){var r,n=t.nticks;n||("category"===t.type?(r=t.tickfont?1.2*(t.tickfont.size||12):15,n=t._length/r):(r="y"===t._id.charAt(0)?40:80,n=ae.constrain(t._length/r,4,9)+1),"radialaxis"===t._name&&(n*=2)),"array"===t.tickmode&&(n*=100),Sa.autoTicks(t,Math.abs(e[1]-e[0])/n),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),Ua(t)},Sa.calcTicks=function(t){Sa.prepTicks(t);var e=ae.simpleMap(t.range,t.r2l);if("array"===t.tickmode)return function(t){var e,r,n=t.tickvals,a=t.ticktext,i=new Array(n.length),o=ae.simpleMap(t.range,t.r2l),l=1.0001*o[0]-1e-4*o[1],s=1.0001*o[1]-1e-4*o[0],u=Math.min(l,s),c=Math.max(l,s),f=0;Array.isArray(a)||(a=[]);var h="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(r=0;r<n.length;r++)(e=h(n[r]))>u&&e<c&&(void 0===a[r]?i[f]=Sa.tickText(t,e):i[f]=Va(t,e,String(a[r])),f++);f<n.length&&i.splice(f,n.length-f);return i}(t);t._tmin=Sa.tickFirst(t);var r=1.0001*e[0]-1e-4*e[1],n=1.0001*e[1]-1e-4*e[0],a=e[1]<e[0];if(t._tmin<r!==a)return[];var i=[];"category"===t.type&&(n=a?Math.max(-.5,n):Math.min(t._categories.length-.5,n));for(var o=null,l=Math.max(1e3,t._length||0),s=t._tmin;(a?s>=n:s<=n)&&!(i.length>l||s===o);s=Sa.tickIncrement(s,t.dtick,a,t.calendar))o=s,i.push(s);"angular"===t._id&&360===Math.abs(e[1]-e[0])&&i.pop(),t._tmax=i[i.length-1],t._prevDateHead="",t._inCalcTicks=!0;for(var u=new Array(i.length),c=0;c<i.length;c++)u[c]=Sa.tickText(t,i[c]);return t._inCalcTicks=!1,u};var Da=[2,5,10],Ia=[1,2,3,6,12],Pa=[1,2,5,10,15,30],Fa=[1,2,3,7,14],za=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Na=[-.301,0,.301,.699,1],Ba=[15,30,45,90,180];function ja(t,e,r){return e*ae.roundUp(t/e,r)}function Ua(t){var r=t.dtick;if(t._tickexponent=0,e(r)||"string"==typeof r||(r=1),"category"===t.type&&(t._tickround=null),"date"===t.type){var n=t.r2l(t.tick0),a=t.l2r(n).replace(/(^-|i)/g,""),i=a.length;if("M"===String(r).charAt(0))i>10||"01-01"!==a.substr(5)?t._tickround="d":t._tickround=+r.substr(1)%12==0?"y":"m";else if(r>=_a&&i<=10||r>=15*_a)t._tickround="d";else if(r>=Aa&&i<=16||r>=wa)t._tickround="M";else if(r>=Ma&&i<=19||r>=Aa)t._tickround="S";else{var o=t.l2r(n+r).replace(/^-/,"").length;t._tickround=Math.max(i,o)-20}}else if(e(r)||"L"===r.charAt(0)){var l=t.range.map(t.r2d||Number);e(r)||(r=Number(r.substr(1))),t._tickround=2-Math.floor(Math.log(r)/Math.LN10+.01);var s=Math.max(Math.abs(l[0]),Math.abs(l[1])),u=Math.floor(Math.log(s)/Math.LN10+.01);Math.abs(u)>3&&(qa(t.exponentformat)&&!Ga(u)?t._tickexponent=3*Math.round((u-1)/3):t._tickexponent=u)}else t._tickround=null}function Va(t,e,r){var n=t.tickfont||{};return{x:e,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}Sa.autoTicks=function(t,r){var n;function a(t){return Math.pow(t,Math.floor(Math.log(r)/Math.LN10))}if("date"===t.type){t.tick0=ae.dateTick0(t.calendar);var i=2*r;i>xa?(r/=xa,n=a(10),t.dtick="M"+12*ja(r,n,Da)):i>ba?(r/=ba,t.dtick="M"+ja(r,1,Ia)):i>_a?(t.dtick=ja(r,_a,Fa),t.tick0=ae.dateTick0(t.calendar,!0)):i>wa?t.dtick=ja(r,wa,Ia):i>Aa?t.dtick=ja(r,Aa,Pa):i>Ma?t.dtick=ja(r,Ma,Pa):(n=a(10),t.dtick=ja(r,n,Da))}else if("log"===t.type){t.tick0=0;var o=ae.simpleMap(t.range,t.r2l);if(r>.7)t.dtick=Math.ceil(r);else if(Math.abs(o[1]-o[0])<1){var l=1.5*Math.abs((o[1]-o[0])/r);r=Math.abs(Math.pow(10,o[1])-Math.pow(10,o[0]))/l,n=a(10),t.dtick="L"+ja(r,n,Da)}else t.dtick=r>.3?"D2":"D1"}else"category"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(r,1))):"angular"===t._id?(t.tick0=0,n=1,t.dtick=ja(r,n,Ba)):(t.tick0=0,n=a(10),t.dtick=ja(r,n,Da));if(0===t.dtick&&(t.dtick=1),!e(t.dtick)&&"string"!=typeof t.dtick){var s=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(s)}},Sa.tickIncrement=function(r,n,a,i){var o=a?-1:1;if(e(n))return r+o*n;var l=n.charAt(0),s=o*Number(n.substr(1));if("M"===l)return ae.incrementMonth(r,s,i);if("L"===l)return Math.log(Math.pow(10,r)+s)/Math.LN10;if("D"===l){var u="D2"===n?Na:za,c=r+.01*o,f=ae.roundUp(ae.mod(c,1),u,a);return Math.floor(c)+Math.log(t.round(Math.pow(10,f),1))/Math.LN10}throw"unrecognized dtick "+String(n)},Sa.tickFirst=function(r){var n=r.r2l||Number,a=ae.simpleMap(r.range,n),i=a[1]<a[0],o=i?Math.floor:Math.ceil,l=1.0001*a[0]-1e-4*a[1],s=r.dtick,u=n(r.tick0);if(e(s)){var c=o((l-u)/s)*s+u;return"category"===r.type&&(c=ae.constrain(c,0,r._categories.length-1)),c}var f=s.charAt(0),h=Number(s.substr(1));if("M"===f){for(var d,p,g,v=0,m=u;v<10;){if(((d=Sa.tickIncrement(m,s,i,r.calendar))-l)*(m-l)<=0)return i?Math.min(m,d):Math.max(m,d);p=(l-(m+d)/2)/(d-m),g=f+(Math.abs(Math.round(p))||1)*h,m=Sa.tickIncrement(m,g,p<0?!i:i,r.calendar),v++}return ae.error("tickFirst did not converge",r),m}if("L"===f)return Math.log(o((Math.pow(10,l)-u)/h)*h+u)/Math.LN10;if("D"===f){var y="D2"===s?Na:za,x=ae.roundUp(ae.mod(l,1),y,i);return Math.floor(l)+Math.log(t.round(Math.pow(10,x),1))/Math.LN10}throw"unrecognized dtick "+String(s)},Sa.tickText=function(t,r,n){var a,i,o=Va(t,r),l="array"===t.tickmode,s=n||l,u="category"===t.type?t.d2l_noadd:t.d2l;if(l&&Array.isArray(t.ticktext)){var c=ae.simpleMap(t.range,t.r2l),f=Math.abs(c[1]-c[0])/1e4;for(i=0;i<t.ticktext.length&&!(Math.abs(r-u(t.tickvals[i]))<f);i++);if(i<t.ticktext.length)return o.text=String(t.ticktext[i]),o}function h(e){var a;return void 0===e||(n?"none"===e:(a={first:t._tmin,last:t._tmax}[e],"all"!==e&&r!==a))}return a=n?"never":"none"!==t.exponentformat&&h(t.showexponent)?"hide":"","date"===t.type?function(t,r,n,a){var i=t._tickround,o=n&&t.hoverformat||Sa.getTickFormat(t);a&&(i=e(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var l,s=ae.formatDate(r.x,o,i,t._dateFormat,t.calendar,t._extraFormat),u=s.indexOf("\n");-1!==u&&(l=s.substr(u+1),s=s.substr(0,u));a&&("00:00:00"===s||"00:00"===s?(s=l,l=""):8===s.length&&(s=s.replace(/:00$/,"")));l&&(n?"d"===i?s+=", "+l:s=l+(s?", "+s:""):t._inCalcTicks&&l===t._prevDateHead||(s+="<br>"+l,t._prevDateHead=l));r.text=s}(t,o,n,s):"log"===t.type?function(t,r,n,a,i){var o=t.dtick,l=r.x,s=t.tickformat;"never"===i&&(i="");!a||"string"==typeof o&&"L"===o.charAt(0)||(o="L3");if(s||"string"==typeof o&&"L"===o.charAt(0))r.text=Xa(Math.pow(10,l),t,i,a);else if(e(o)||"D"===o.charAt(0)&&ae.mod(l+.01,1)<.1){var u=Math.round(l);-1!==["e","E","power"].indexOf(t.exponentformat)||qa(t.exponentformat)&&Ga(u)?(r.text=0===u?1:1===u?"10":u>1?"10<sup>"+u+"</sup>":"10<sup>"+Ta+-u+"</sup>",r.fontSize*=1.25):(r.text=Xa(Math.pow(10,l),t,"","fakehover"),"D1"===o&&"y"===t._id.charAt(0)&&(r.dy-=r.fontSize/6))}else{if("D"!==o.charAt(0))throw"unrecognized dtick "+String(o);r.text=String(Math.round(Math.pow(10,ae.mod(l,1)))),r.fontSize*=.75}if("D1"===t.dtick){var c=String(r.text).charAt(0);"0"!==c&&"1"!==c||("y"===t._id.charAt(0)?r.dx-=r.fontSize/4:(r.dy+=r.fontSize/2,r.dx+=(t.range[1]>t.range[0]?1:-1)*r.fontSize*(l<0?.5:.25)))}}(t,o,0,s,a):"category"===t.type?function(t,e){var r=t._categories[Math.round(e.x)];void 0===r&&(r="");e.text=String(r)}(t,o):"angular"===t._id?function(t,e,r,n,a){if("radians"!==t.thetaunit||r)e.text=Xa(e.x,t,a,n);else{var i=e.x/180;if(0===i)e.text="0";else{var o=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}var r=function(t){var r=1;for(;!e(Math.round(t*r)/r,t);)r*=10;return r}(t),n=t*r,a=Math.abs(function t(r,n){return e(n,0)?r:t(n,r%n)}(n,r));return[Math.round(n/a),Math.round(r/a)]}(i);if(o[1]>=100)e.text=Xa(ae.deg2rad(e.x),t,a,n);else{var l=e.x<0;1===o[1]?1===o[0]?e.text="\u03c0":e.text=o[0]+"\u03c0":e.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03c0"].join(""),l&&(e.text=Ta+e.text)}}}}(t,o,n,s,a):function(t,e,r,n,a){"never"===a?a="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(a="hide");e.text=Xa(e.x,t,a,n)}(t,o,0,s,a),t.tickprefix&&!h(t.showtickprefix)&&(o.text=t.tickprefix+o.text),t.ticksuffix&&!h(t.showticksuffix)&&(o.text+=t.ticksuffix),o},Sa.hoverLabelText=function(t,e,r){if(r!==ka&&r!==e)return Sa.hoverLabelText(t,e)+" - "+Sa.hoverLabelText(t,r);var n="log"===t.type&&e<=0,a=Sa.tickText(t,t.c2l(n?-e:e),"hover").text;return n?0===e?"0":Ta+a:a};var Ha=["f","p","n","\u03bc","m","","k","M","G","T"];function qa(t){return"SI"===t||"B"===t}function Ga(t){return t>14||t<-15}function Xa(t,r,n,a){var i=t<0,o=r._tickround,l=n||r.exponentformat||"B",s=r._tickexponent,u=Sa.getTickFormat(r),c=r.separatethousands;if(a){var f={exponentformat:l,dtick:"none"===r.showexponent?r.dtick:e(t)&&Math.abs(t)||1,range:"none"===r.showexponent?r.range.map(r.r2d):[0,t||1]};Ua(f),o=(Number(f._tickround)||0)+4,s=f._tickexponent,r.hoverformat&&(u=r.hoverformat)}if(u)return r._numFormat(u)(t).replace(/-/g,Ta);var h,d=Math.pow(10,-o)/2;if("none"===l&&(s=0),(t=Math.abs(t))<d)t="0",i=!1;else{if(t+=d,s&&(t*=Math.pow(10,-s),o+=s),0===o)t=String(Math.floor(t));else if(o<0){t=(t=String(Math.round(t))).substr(0,t.length+o);for(var p=o;p<0;p++)t+="0"}else{var g=(t=String(t)).indexOf(".")+1;g&&(t=t.substr(0,g+o).replace(/\.?0+$/,""))}t=ae.numSeparate(t,r._separators,c)}s&&"hide"!==l&&(qa(l)&&Ga(s)&&(l="power"),h=s<0?Ta+-s:"power"!==l?"+"+s:String(s),"e"===l?t+="e"+h:"E"===l?t+="E"+h:"power"===l?t+="\xd710<sup>"+h+"</sup>":"B"===l&&9===s?t+="B":qa(l)&&(t+=Ha[s/3+5]));return i?Ta+t:t}function Wa(t,e){for(var r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r])}function Ya(t,e,r){var n,a,i=[],o=[],l=t.layout;for(n=0;n<e.length;n++)i.push(Sa.getFromId(t,e[n]));for(n=0;n<r.length;n++)o.push(Sa.getFromId(t,r[n]));var s=Object.keys(i[0]),u=["anchor","domain","overlaying","position","side","tickangle"],c=["linear","log"];for(n=0;n<s.length;n++){var f=s[n],h=i[0][f],d=o[0][f],p=!0,g=!1,v=!1;if("_"!==f.charAt(0)&&"function"!=typeof h&&-1===u.indexOf(f)){for(a=1;a<i.length&&p;a++){var m=i[a][f];"type"===f&&-1!==c.indexOf(h)&&-1!==c.indexOf(m)&&h!==m?g=!0:m!==h&&(p=!1)}for(a=1;a<o.length&&p;a++){var y=o[a][f];"type"===f&&-1!==c.indexOf(d)&&-1!==c.indexOf(y)&&d!==y?v=!0:o[a][f]!==d&&(p=!1)}p&&(g&&(l[i[0]._name].type="linear"),v&&(l[o[0]._name].type="linear"),Za(l,f,i,o,t._fullLayout._dfltTitle))}}for(n=0;n<t._fullLayout.annotations.length;n++){var x=t._fullLayout.annotations[n];-1!==e.indexOf(x.xref)&&-1!==r.indexOf(x.yref)&&ae.swapAttrs(l.annotations[n],["?"])}}function Za(t,e,r,n,a){var i,o=ae.nestedProperty,l=o(t[r[0]._name],e).get(),s=o(t[n[0]._name],e).get();for("title"===e&&(l===a.x&&(l=a.y),s===a.y&&(s=a.x)),i=0;i<r.length;i++)o(t,r[i]._name+"."+e).set(s);for(i=0;i<n.length;i++)o(t,n[i]._name+"."+e).set(l)}Sa.getTickFormat=function(t){var e,r,n,a,i,o,l;function s(t){return"string"!=typeof t?t:Number(t.replace("M",""))*ba}function u(t,e){var r=["L","D"];if(typeof t==typeof e){if("number"==typeof t)return t-e;var n=r.indexOf(t.charAt(0)),a=r.indexOf(e.charAt(0));return n===a?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):n-a}return"number"==typeof t?1:-1}function c(t,e){var r=null===e[0],n=null===e[1],a=u(t,e[0])>=0,i=u(t,e[1])<=0;return(r||a)&&(n||i)}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if(n=t.dtick,a=t.tickformatstops[e].dtickrange,i=void 0,void 0,void 0,i=s||function(t){return t},o=a[0],l=a[1],(!o&&"number"!=typeof o||i(o)<=i(n))&&(!l&&"number"!=typeof l||i(l)>=i(n))){r=t.tickformatstops[e];break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if(c(t.dtick,t.tickformatstops[e].dtickrange)){r=t.tickformatstops[e];break}}return r?r.value:t.tickformat},Sa.getSubplots=function(t,e){var r=t._fullLayout._subplots,n=r.cartesian.concat(r.gl2d||[]),a=e?Sa.findSubplotsWithAxis(n,e):n;return a.sort(function(t,e){var r=t.substr(1).split("y"),n=e.substr(1).split("y");return r[0]===n[0]?+r[1]-+n[1]:+r[0]-+n[0]}),a},Sa.findSubplotsWithAxis=function(t,e){for(var r=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),n=[],a=0;a<t.length;a++){var i=t[a];r.test(i)&&n.push(i)}return n},Sa.makeClipPaths=function(e){var r,n,a=e._fullLayout,i={_offset:0,_length:a.width,_id:""},o={_offset:0,_length:a.height,_id:""},l=Sa.list(e,"x",!0),s=Sa.list(e,"y",!0),u=[];for(r=0;r<l.length;r++)for(u.push({x:l[r],y:o}),n=0;n<s.length;n++)0===r&&u.push({x:i,y:s[n]}),u.push({x:l[r],y:s[n]});var c=a._clips.selectAll(".axesclip").data(u,function(t){return t.x._id+t.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+a._uid+t.x._id+t.y._id}).append("rect"),c.exit().remove(),c.each(function(e){t.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})},Sa.doTicks=function(r,n,a){var i,o=r._fullLayout,l=!1;if("object"==typeof n)n=(i=n)._id,l=!0;else if(i=Sa.getFromId(r,n),"redraw"===n&&o._paper.selectAll("g.subplot").each(function(t){var e=o._plots[t],r=e.xaxis,n=e.yaxis;e.xaxislayer.selectAll("."+r._id+"tick").remove(),e.yaxislayer.selectAll("."+n._id+"tick").remove(),e.gridlayer.selectAll("path").remove(),e.zerolinelayer.selectAll("path").remove(),o._infolayer.select(".g-"+r._id+"title").remove(),o._infolayer.select(".g-"+n._id+"title").remove()}),!n||"redraw"===n)return ae.syncOrAsync(Sa.list(r,"",!0).map(function(t){return function(){if(t._id){var e=Sa.doTicks(r,t._id);return"redraw"===n&&(t._r=t.range.slice(),t._rl=ae.simpleMap(t._r,t.r2l)),e}}}));i.setScale();var s,u,c,f,h,d=n.charAt(0),p=Sa.counterLetter(n),g=Sa.calcTicks(i),v=function(t){return[t.text,t.x,i.mirror,t.font,t.fontSize,t.fontColor].join("_")},m=n+"tick",y=n+"grid",x=n+"zl",b=(i.linewidth||1)/2,_="outside"===i.ticks?i.ticklen:0,w=0,A=Jr.crispRound(r,i.gridwidth,1),M=Jr.crispRound(r,i.zerolinewidth,A),T=Jr.crispRound(r,i.tickwidth,1);if(i._counterangle&&"outside"===i.ticks){var k=i._counterangle*Math.PI/180;_=i.ticklen*Math.cos(k)+1,w=i.ticklen*Math.sin(k)}if(i.showticklabels&&("outside"===i.ticks||i.showline)&&(_+=.2*i.tickfont.size),"x"===d)s=["bottom","top"],u=i._transfn||function(t){return"translate("+(i._offset+i.l2p(t.x))+",0)"},c=function(t,e){if(i._counterangle){var r=i._counterangle*Math.PI/180;return"M0,"+t+"l"+Math.sin(r)*e+","+Math.cos(r)*e}return"M0,"+t+"v"+e};else if("y"===d)s=["left","right"],u=i._transfn||function(t){return"translate(0,"+(i._offset+i.l2p(t.x))+")"},c=function(t,e){if(i._counterangle){var r=i._counterangle*Math.PI/180;return"M"+t+",0l"+Math.cos(r)*e+","+-Math.sin(r)*e}return"M"+t+",0h"+e};else{if("angular"!==n)return void ae.warn("Unrecognized doTicks axis:",n);s=["left","right"],u=i._transfn,c=function(t,e){return"M"+t+",0h"+e}}var E=i.side||s[0],C=[-1,1,E===s[1]?1:-1];if("inside"!==i.ticks==("x"===d)&&(C=C.map(function(t){return-t})),i.visible){i._tickFilter&&(g=g.filter(i._tickFilter));var S=g.filter(z);if("angular"===i._id&&(S=g),l){if(N(i._axislayer,c(i._pos+b*C[2],C[2]*i.ticklen)),i._counteraxis)V({gridlayer:i._gridlayer,zerolinelayer:i._zerolinelayer},i._counteraxis);return B(i._axislayer,i._pos)}if(o._has("cartesian")){var L={};(f=Sa.getSubplots(r,i)).map(function(t){var e=o._plots[t],r=e[p+"axis"],n=r._mainAxis._id;L[n]||(L[n]=1,V(e,r,t))});var O=i._mainSubplot,D=o._plots[O],I=[];if(i.ticks){var P=C[2],F=c(i._mainLinePosition+b*P,P*i.ticklen);i._anchorAxis&&i.mirror&&!0!==i.mirror&&(F+=c(i._mainMirrorPosition-b*P,-P*i.ticklen)),N(D[d+"axislayer"],F),I=Object.keys(i._linepositions)}return I.map(function(t){var e=o._plots[t][d+"axislayer"],r=i._linepositions[t]||[];function n(t){var e=C[t];return c(r[t]+b*e,e*i.ticklen)}N(e,n(0)+n(1))}),B(D[d+"axislayer"],i._mainLinePosition)}}function z(t){var e=i.l2p(t.x);return e>1&&e<i._length-1}function N(t,e){var r=t.selectAll("path."+m).data("inside"===i.ticks?S:g,v);e&&i.ticks?(r.enter().append("path").classed(m,1).classed("ticks",1).classed("crisp",1).call(Pe.stroke,i.tickcolor).style("stroke-width",T+"px").attr("d",e),r.attr("transform",u),r.exit().remove()):r.remove()}function B(a,l){var s,c,p,y,x,A=a.selectAll("g."+m).data(g,v);if(!e(l))return A.remove(),void j();if(!i.showticklabels)return A.remove(),j(),void S();"x"===d?(s=function(t){return t.dx+w*x},y=l+(_+b)*(x="bottom"===E?1:-1),c=function(t){return t.dy+y+t.fontSize*("bottom"===E?1:-.2)},p=function(t){return e(t)&&0!==t&&180!==t?t*x<0?"end":"start":"middle"}):"y"===d?(x="right"===E?1:-1,c=function(t){return t.dy+t.fontSize*Ea-w*x},s=function(t){return t.dx+l+(_+b+(90===Math.abs(i.tickangle)?t.fontSize/2:0))*x},p=function(t){return e(t)&&90===Math.abs(t)?"middle":"right"===E?"start":"end"}):"angular"===n&&(i._labelShift=w,i._labelStandoff=_,i._pad=b,s=i._labelx,c=i._labely,p=i._labelanchor);var M=0,T=0,k=[];function C(r,n){r.each(function(r){var a=p(n,r),i=t.select(this),o=i.select(".text-math-group"),l=u.call(i.node(),r)+(e(n)&&0!=+n?" rotate("+n+","+s(r)+","+(c(r)-r.fontSize/2)+")":""),f=function(t,e,r){var n=(t-1)*e;if("x"===d){if(r<-60||60<r)return-.5*n;if("top"===E)return-n}else{if((r*="left"===E?1:-1)<-30)return-n;if(r<30)return-.5*n}return 0}(Mr.lineCount(i),Ca*r.fontSize,e(n)?+n:0);if(f&&(l+=" translate(0, "+f+")"),o.empty())i.select("text").attr({transform:l,"text-anchor":a});else{var h=Jr.bBox(o.node()).width*{end:-.5,start:.5}[a];o.attr("transform",l+(h?"translate("+h+",0)":""))}})}function S(){if(i.showticklabels){var t=r.getBoundingClientRect(),e=a.node().getBoundingClientRect();i._boundingBox={width:e.width,height:e.height,left:e.left-t.left,right:e.right-t.left,top:e.top-t.top,bottom:e.bottom-t.top}}else{var n,l=o._size;"x"===d?(n="free"===i.anchor?l.t+l.h*(1-i.position):l.t+l.h*(1-i._anchorAxis.domain[{bottom:0,top:1}[i.side]]),i._boundingBox={top:n,bottom:n,left:i._offset,right:i._offset+i._length,width:i._length,height:0}):(n="free"===i.anchor?l.l+l.w*i.position:l.l+l.w*i._anchorAxis.domain[{left:0,right:1}[i.side]],i._boundingBox={left:n,right:n,bottom:i._offset+i._length,top:i._offset,height:i._length,width:0})}if(f){var s=i._counterSpan=[1/0,-1/0];for(h=0;h<f.length;h++){var u=o._plots[f[h]]["x"===d?"yaxis":"xaxis"];c(s,[u._offset,u._offset+u._length])}"free"===i.anchor&&c(s,"x"===d?[i._boundingBox.bottom,i._boundingBox.top]:[i._boundingBox.right,i._boundingBox.left])}function c(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.max(t[1],e[1])}}A.enter().append("g").classed(m,1).append("text").attr("text-anchor","middle").each(function(e){var n=e.text;i._shortLabel&&n.length>9&&(n=n.substring(0,6),n+="...");var a=t.select(this),o=r._promises.length;a.call(Mr.positionText,s(e),c(e)).call(Jr.font,e.font,e.fontSize,e.fontColor).text(n).call(Mr.convertToTspans,r),(o=r._promises[o])?k.push(r._promises.pop().then(function(){C(a,i.tickangle)})):C(a,i.tickangle)}),A.exit().remove(),A.each(function(t){M=Math.max(M,t.fontSize)}),"angular"===n&&A.each(function(e){t.select(this).select("text").call(Mr.positionText,s(e),c(e))}),C(A,i._lastangle||i.tickangle);var L=ae.syncOrAsync([function(){return k.length&&Promise.all(k)},function(){if(C(A,i.tickangle),"x"===d&&!e(i.tickangle)&&("log"!==i.type||"D"!==String(i.dtick).charAt(0))){var r=[];for(A.each(function(e){var n=t.select(this),a=n.select(".text-math-group"),o=i.l2p(e.x);a.empty()&&(a=n.select("text"));var l=Jr.bBox(a.node());r.push({top:0,bottom:10,height:10,left:o-l.width/2,right:o+l.width/2+2,width:l.width+2})}),h=0;h<r.length-1;h++)if(ae.bBoxIntersect(r[h],r[h+1])){T=30;break}T&&(Math.abs((g[g.length-1].x-g[0].x)*i._m)/(g.length-1)<2.5*M&&(T=90),C(A,T)),i._lastangle=T}return j(),n+" done"},S,function(){if(i.automargin&&("x"===d||"y"===d)){var t=i.side[0],e={x:0,y:0,r:0,l:0,t:0,b:0};"x"===d?(e.y="free"===i.anchor?i.position:i._anchorAxis.domain["t"===t?1:0],e[t]+=i._boundingBox.height):(e.x="free"===i.anchor?i.position:i._anchorAxis.domain["r"===t?1:0],e[t]+=i._boundingBox.width),i.title!==o._dfltTitle[d]&&(e[t]+=i.titlefont.size);var n=i._name+".automargin",a=o._pushmargin[n];(!a||a[t].size<e[t])&&Wn.autoMargin(r,n,e)}}]);return L&&L.then&&r._promises.push(L),L}function j(){if(!a){var e=Le.getFromId(r,n);if(!(e.rangeslider&&e.rangeslider.visible&&e._boundingBox&&"bottom"===e.side)){var i,l,s,u,c=t.select(r).selectAll("g."+n+"tick"),f={selection:c,side:e.side},h=n.charAt(0),d=r._fullLayout._size,p=e.titlefont.size;if(c.size()){var g=Jr.getTranslate(c.node().parentNode);f.offsetLeft=g.x,f.offsetTop=g.y}var v=10+1.5*p+(e.linewidth?e.linewidth-1:0);"x"===h?(l="free"===e.anchor?{_offset:d.t+(1-(e.position||0))*d.h,_length:0}:Le.getFromId(r,e.anchor),s=e._offset+e._length/2,u="top"===e.side?-v-p*(e.showticklabels?1:0):l._length+v+p*(e.showticklabels?1.5:.5),u+=l._offset,f.side||(f.side="bottom")):(l="free"===e.anchor?{_offset:d.l+(e.position||0)*d.w,_length:0}:Le.getFromId(r,e.anchor),u=e._offset+e._length/2,s="right"===e.side?l._length+v+p*(e.showticklabels?1:.5):-v-p*(e.showticklabels?.5:0),s+=l._offset,i={rotate:"-90",offset:0},f.side||(f.side="left")),oa.draw(r,n+"title",{propContainer:e,propName:e._name+".title",placeholder:o._dfltTitle[h],avoid:f,transform:i,attributes:{x:s,y:u,"text-anchor":"middle"}})}}}function U(t,e){return!0===t.visible&&t.xaxis+t.yaxis===e&&(!(!R.traceIs(t,"bar")||t.orientation!=={x:"h",y:"v"}[d])||t.fill&&t.fill.charAt(t.fill.length-1)===d)}function V(e,a,o){var l=e.gridlayer.selectAll("."+n),s=e.zerolinelayer,c=e["hidegrid"+d]?[]:S,f=i._gridpath||("x"===d?"M0,"+a._offset+"v":"M"+a._offset+",0h")+a._length,h=l.selectAll("path."+y).data(!1===i.showgrid?[]:c,v);if(h.enter().append("path").classed(y,1).classed("crisp",1).attr("d",f).each(function(e){i.zeroline&&("linear"===i.type||"-"===i.type)&&Math.abs(e.x)<i.dtick/100&&t.select(this).remove()}),h.attr("transform",u).call(Pe.stroke,i.gridcolor||"#ddd").style("stroke-width",A+"px"),"function"==typeof f&&h.attr("d",f),h.exit().remove(),s){for(var p=!1,g=0;g<r._fullData.length;g++)if(U(r._fullData[g],o)){p=!0;break}var m=ae.simpleMap(i.range,i.r2l),b=m[0]*m[1]<=0&&i.zeroline&&("linear"===i.type||"-"===i.type)&&c.length&&(p||z({x:0})||!i.showline),_=s.selectAll("path."+x).data(b?[{x:0,id:n}]:[]);_.enter().append("path").classed(x,1).classed("zl",1).classed("crisp",1).attr("d",f).each(function(){s.selectAll("path").sort(function(t,e){return Le.idSort(t.id,e.id)})}),_.attr("transform",u).call(Pe.stroke,i.zerolinecolor||Pe.defaultLine).style("stroke-width",M+"px"),_.exit().remove()}}},Sa.swap=function(t,e){for(var r=function(t,e){var r,n,a=[];for(r=0;r<e.length;r++){var i=[],o=t._fullData[e[r]].xaxis,l=t._fullData[e[r]].yaxis;if(o&&l){for(n=0;n<a.length;n++)-1===a[n].x.indexOf(o)&&-1===a[n].y.indexOf(l)||i.push(n);if(i.length){var s,u=a[i[0]];if(i.length>1)for(n=1;n<i.length;n++)s=a[i[n]],Wa(u.x,s.x),Wa(u.y,s.y);Wa(u.x,[o]),Wa(u.y,[l])}else a.push({x:[o],y:[l]})}}return a}(t,e),n=0;n<r.length;n++)Ya(t,r[n].x,r[n].y)};var Ja=Se.attrRegex,Qa={},$a=Se.SUBPLOT_PATTERN;Qa.getSubplotCalcData=function(t,e,r){var n=R.subplotsRegistry[e];if(!n)return[];for(var a=n.attr,i=[],o=0;o<t.length;o++){var l=t[o];l[0].trace[a]===r&&i.push(l)}return i},Qa.getModuleCalcData=function(t,e){var r=[],n="string"==typeof e?R.getModule(e):e;if(!n)return r;for(var a=0;a<t.length;a++){var i=t[a],o=i[0].trace;o._module===n&&!0===o.visible&&r.push(i)}return r},Qa.getSubplotData=function(t,e,r){if(!R.subplotsRegistry[e])return[];var n,a,i,o=R.subplotsRegistry[e].attr,l=[];if("gl2d"===e){var s=r.match($a);a="x"+s[1],i="y"+s[2]}for(var u=0;u<t.length;u++)n=t[u],"gl2d"===e&&R.traceIs(n,"gl2d")?n[o[0]]===a&&n[o[1]]===i&&l.push(n):n[o]===r&&l.push(n);return l};var Ka={},ti=Qa.getModuleCalcData;function ei(t,e,r,n,a){var i=t._fullLayout._modules;e.plot&&e.plot.selectAll("g:not(.scatterlayer)").selectAll("g.trace").remove();for(var o=0;o<i.length;o++){var l=i[o];if("cartesian"===l.basePlotModule.name){var s=ti(r,l);l.plot&&l.plot(t,e,s,n,a)}}}function ri(t){var e=t.plotgroup,r=t.id,n=Se.layerValue2layerClass[t.xaxis.layer],a=Se.layerValue2layerClass[t.yaxis.layer];if(t.mainplot){var i=t.mainplotinfo,o=i.plotgroup,l=r+"-x",s=r+"-y";t.gridlayer=i.gridlayer,t.zerolinelayer=i.zerolinelayer,ii(i.overlinesBelow,"path",l),ii(i.overlinesBelow,"path",s),ii(i.overaxesBelow,"g",l),ii(i.overaxesBelow,"g",s),t.plot=ii(i.overplot,"g",r),ii(i.overlinesAbove,"path",l),ii(i.overlinesAbove,"path",s),ii(i.overaxesAbove,"g",l),ii(i.overaxesAbove,"g",s),t.xlines=o.select(".overlines-"+n).select("."+l),t.ylines=o.select(".overlines-"+a).select("."+s),t.xaxislayer=o.select(".overaxes-"+n).select("."+l),t.yaxislayer=o.select(".overaxes-"+a).select("."+s)}else{var u=ii(e,"g","layer-subplot");t.shapelayer=ii(u,"g","shapelayer"),t.imagelayer=ii(u,"g","imagelayer"),t.gridlayer=ii(e,"g","gridlayer"),t.zerolinelayer=ii(e,"g","zerolinelayer"),ii(e,"path","xlines-below"),ii(e,"path","ylines-below"),t.overlinesBelow=ii(e,"g","overlines-below"),ii(e,"g","xaxislayer-below"),ii(e,"g","yaxislayer-below"),t.overaxesBelow=ii(e,"g","overaxes-below"),t.plot=ii(e,"g","plot"),t.overplot=ii(e,"g","overplot"),ii(e,"path","xlines-above"),ii(e,"path","ylines-above"),t.overlinesAbove=ii(e,"g","overlines-above"),ii(e,"g","xaxislayer-above"),ii(e,"g","yaxislayer-above"),t.overaxesAbove=ii(e,"g","overaxes-above"),t.xlines=e.select(".xlines-"+n),t.ylines=e.select(".ylines-"+a),t.xaxislayer=e.select(".xaxislayer-"+n),t.yaxislayer=e.select(".yaxislayer-"+a)}ii(t.gridlayer,"g",t.xaxis._id,t.xaxis._id),ii(t.gridlayer,"g",t.yaxis._id,t.yaxis._id),t.gridlayer.selectAll("g").sort(Le.idSort);for(var c=0;c<Se.traceLayerClasses.length;c++)ii(t.plot,"g",Se.traceLayerClasses[c]);t.xlines.style("fill","none").classed("crisp",!0),t.ylines.style("fill","none").classed("crisp",!0)}function ni(e,r){if(e){var n={};e.each(function(e){t.select(this).remove(),ai(e,r),n[e]=!0});for(var a=r._plots,i=Object.keys(a),o=0;o<i.length;o++)for(var l=a[i[o]].overlays||[],s=0;s<l.length;s++){var u=l[s];n[u.id]&&u.plot.selectAll(".trace").remove()}}}function ai(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}function ii(t,e,r,n){var a=t.selectAll("."+r).data([n||0]);return a.enter().append(e).classed(r,!0),a}Ka.name="cartesian",Ka.attr=["xaxis","yaxis"],Ka.idRoot=["x","y"],Ka.idRegex=Se.idRegex,Ka.attrRegex=Se.attrRegex,Ka.attributes=Ee,Ka.layoutAttributes=Ie,Ka.supplyLayoutDefaults=function(t,e,r){var n,a={},i={},o={},l={};for(n=0;n<r.length;n++){var s=r[n];if(R.traceIs(s,"cartesian")||R.traceIs(s,"gl2d")){var u=Le.id2name(s.xaxis),c=Le.id2name(s.yaxis);R.traceIs(s,"carpet")&&("carpet"!==s.type||s._cheater)||u&&(i[u]=1),"carpet"===s.type&&s._cheater&&u&&(a[u]=1),R.traceIs(s,"2dMap")&&(o[u]=!0,o[c]=!0),R.traceIs(s,"oriented")&&(l["h"===s.orientation?c:u]=!0)}}var f=e._subplots,h=f.xaxis,d=f.yaxis,p=ae.simpleMap(h,Le.id2name),g=ae.simpleMap(d,Le.id2name),v=p.concat(g),m=Pe.background;h.length&&d.length&&(m=ae.coerce(t,e,O,"plot_bgcolor"));var y,x,b,_,w=Pe.combine(m,e.paper_bgcolor);function A(t,e){return ae.coerce(b,_,Ie,t,e)}function M(t,e){return ae.coerce2(b,_,Ie,t,e)}function T(t){return"x"===t?d:h}var k={x:T("x"),y:T("y")};function E(e,r){for(var n="x"===e?p:g,a=[],i=0;i<n.length;i++){var o=n[i];o===r||(t[o]||{}).overlaying||a.push(Le.name2id(o))}return a}for(n=0;n<v.length;n++){y=v[n],ae.isPlainObject(t[y])||(t[y]={}),b=t[y],_=e[y]={},sr(b,_,A,r,y);var C=E(x=y.charAt(0),y),S={letter:x,font:e.font,outerTicks:o[y],showGrid:!l[y],data:r,bgColor:w,calendar:e.calendar,automargin:!0,cheateronly:"x"===x&&a[y]&&!i[y]};er(b,_,A,S,e);var L=M("spikecolor"),D=M("spikethickness"),I=M("spikedash"),P=M("spikemode"),F=M("spikesnap");A("showspikes",!!(L||D||I||P||F))||(delete _.spikecolor,delete _.spikethickness,delete _.spikedash,delete _.spikemode,delete _.spikesnap);var z={letter:x,counterAxes:k[x],overlayableAxes:C,grid:e.grid};ar(b,_,A,z),_._input=b}var N=R.getComponentMethod("rangeslider","handleDefaults"),B=R.getComponentMethod("rangeselector","handleDefaults");for(n=0;n<p.length;n++)y=p[n],b=t[y],_=e[y],N(t,e,y),"date"===_.type&&B(b,_,e,g,_.calendar),A("fixedrange");for(n=0;n<g.length;n++){y=g[n],b=t[y],_=e[y];var j=e[Le.id2name(_.anchor)];A("fixedrange",j&&j.rangeslider&&j.rangeslider.visible)}e._axisConstraintGroups=[];var U=k.x.concat(k.y);for(n=0;n<v.length;n++)x=(y=v[n]).charAt(0),b=t[y],_=e[y],nr(b,_,A,U,e)},Ka.transitionAxes=function(e,r,n,a){var i=e._fullLayout,o=[];var l,s,u,c,f=function(t){var e,r,n,a,l={};for(e in t)if((r=e.split("."))[0].match(Ja)){var s=e.charAt(0),u=r[0];if(n=i[u],a={},Array.isArray(t[e])?a.to=t[e].slice(0):Array.isArray(t[e].range)&&(a.to=t[e].range.slice(0)),!a.to)continue;a.axisName=u,a.length=n._length,o.push(s),l[s]=a}return l}(r),h=Object.keys(f),d=function(t,e,r){var n,a,i,o=t._plots,l=[];for(n in o){var s=o[n];if(-1===l.indexOf(s)){var u=s.xaxis._id,c=s.yaxis._id,f=s.xaxis.range,h=s.yaxis.range;s.xaxis._r=s.xaxis.range.slice(),s.yaxis._r=s.yaxis.range.slice(),a=r[u]?r[u].to:f,i=r[c]?r[c].to:h,f[0]===a[0]&&f[1]===a[1]&&h[0]===i[0]&&h[1]===i[1]||-1===e.indexOf(u)&&-1===e.indexOf(c)||l.push(s)}}return l}(i,h,f);if(!d.length)return function(){function t(t,r,n){for(var a=0;a<t.length;a++)if(r(e,a),n)return}t(i.annotations||[],R.getComponentMethod("annotations","drawOne")),t(i.shapes||[],R.getComponentMethod("shapes","drawOne")),t(i.images||[],R.getComponentMethod("images","draw"),!0)}(),!1;function p(t){var e=t.xaxis,r=t.yaxis;i._defs.select("#"+t.clipId+"> rect").call(Jr.setTranslate,0,0).call(Jr.setScale,1,1),t.plot.call(Jr.setTranslate,e._offset,r._offset).call(Jr.setScale,1,1);var n=t.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(Jr.setPointGroupScale,1,1),n.selectAll(".textpoint").call(Jr.setTextPointsScale,1,1),n.call(Jr.hideOutsideRangePoints,t)}function g(t,r){var n,a,o,l=f[t.xaxis._id],s=f[t.yaxis._id],u=[];if(l){a=(n=e._fullLayout[l.axisName])._r,o=l.to,u[0]=(a[0]*(1-r)+r*o[0]-a[0])/(a[1]-a[0])*t.xaxis._length;var c=a[1]-a[0],h=o[1]-o[0];n.range[0]=a[0]*(1-r)+r*o[0],n.range[1]=a[1]*(1-r)+r*o[1],u[2]=t.xaxis._length*(1-r+r*h/c)}else u[0]=0,u[2]=t.xaxis._length;if(s){a=(n=e._fullLayout[s.axisName])._r,o=s.to,u[1]=(a[1]*(1-r)+r*o[1]-a[1])/(a[0]-a[1])*t.yaxis._length;var d=a[1]-a[0],p=o[1]-o[0];n.range[0]=a[0]*(1-r)+r*o[0],n.range[1]=a[1]*(1-r)+r*o[1],u[3]=t.yaxis._length*(1-r+r*p/d)}else u[1]=0,u[3]=t.yaxis._length;!function(t,r){var n,a=[];for(a=[t._id,r._id],n=0;n<a.length;n++)ya.doTicks(e,a[n],!0);function o(t,r,i){for(n=0;n<t.length;n++){var o=t[n];if(-1===a.indexOf(o.xref)&&-1===a.indexOf(o.yref)||r(e,n),i)return}}o(i.annotations||[],R.getComponentMethod("annotations","drawOne")),o(i.shapes||[],R.getComponentMethod("shapes","drawOne")),o(i.images||[],R.getComponentMethod("images","draw"),!0)}(t.xaxis,t.yaxis);var g=t.xaxis,v=t.yaxis,m=!!l,y=!!s,x=m?g._length/u[2]:1,b=y?v._length/u[3]:1,_=m?u[0]:0,w=y?u[1]:0,A=m?u[0]/u[2]*g._length:0,M=y?u[1]/u[3]*v._length:0,T=g._offset-A,k=v._offset-M;i._defs.select("#"+t.clipId+"> rect").call(Jr.setTranslate,_,w).call(Jr.setScale,1/x,1/b),t.plot.call(Jr.setTranslate,T,k).call(Jr.setScale,x,b).selectAll(".points").selectAll(".point").call(Jr.setPointGroupScale,1/x,1/b),t.plot.selectAll(".points").selectAll(".textpoint").call(Jr.setTextPointsScale,1/x,1/b)}a&&(l=a());var v=t.ease(n.easing);return e._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var t={},r=0;r<h.length;r++){var n=e._fullLayout[h[r]+"axis"];t[n._name+".range[0]"]=n.range[0],t[n._name+".range[1]"]=n.range[1],n.range=n._r.slice()}return R.call("relayout",e,t).then(function(){for(var t=0;t<d.length;t++)p(d[t])})}()}),s=Date.now(),c=window.requestAnimationFrame(function t(){u=Date.now();for(var r=Math.min(1,(u-s)/n.duration),a=v(r),i=0;i<d.length;i++)g(d[i],a);u-s>n.duration?(function(){for(var t={},r=0;r<h.length;r++){var n=e._fullLayout[f[h[r]].axisName],a=f[h[r]].to;t[n._name+".range[0]"]=a[0],t[n._name+".range[1]"]=a[1],n.range=a.slice()}l&&l(),R.call("relayout",e,t).then(function(){for(var t=0;t<d.length;t++)p(d[t])})}(),c=window.cancelAnimationFrame(t)):c=window.requestAnimationFrame(t)}),Promise.resolve()},Ka.finalizeSubplots=function(t,e){var r,n,a,i=e._subplots,o=i.xaxis,l=i.yaxis,s=i.cartesian,u=s.concat(i.gl2d||[]),c={},f={};for(r=0;r<u.length;r++){var h=u[r].split("y");c[h[0]]=1,f["y"+h[1]]=1}for(r=0;r<o.length;r++)c[n=o[r]]||(a=(t[Le.id2name(n)]||{}).anchor,Se.idRegex.y.test(a)||(a="y"),s.push(n+a),u.push(n+a),f[a]||(f[a]=1,ae.pushUnique(l,a)));for(r=0;r<l.length;r++)f[a=l[r]]||(n=(t[Le.id2name(a)]||{}).anchor,Se.idRegex.x.test(n)||(n="x"),s.push(n+a),u.push(n+a),c[n]||(c[n]=1,ae.pushUnique(o,n)));if(!u.length){for(var d in n="",a="",t){if(Se.attrRegex.test(d))"x"===d.charAt(0)?(!n||+d.substr(5)<+n.substr(5))&&(n=d):(!a||+d.substr(5)<+a.substr(5))&&(a=d)}n=n?Le.name2id(n):"x",a=a?Le.name2id(a):"y",o.push(n),l.push(a),s.push(n+a)}},Ka.plot=function(t,e,r,n){var a,i=t._fullLayout,o=i._subplots.cartesian,l=t.calcdata;if(!Array.isArray(e))for(e=[],a=0;a<l.length;a++)e.push(a);for(i._glcanvas&&i._glcanvas.size()&&i._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0})}),a=0;a<o.length;a++){for(var s,u=o[a],c=i._plots[u],f=[],h=0;h<l.length;h++){var d=l[h],p=d[0].trace;p.xaxis+p.yaxis===u&&((-1!==e.indexOf(p.index)||p.carpet)&&(s&&s[0].trace.xaxis+s[0].trace.yaxis===u&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===f.indexOf(s)&&f.push(s),f.push(d)),s=d)}ei(t,c,f,r,n)}},Ka.clean=function(t,e,r,n){var a,i,o,l,s,u,c,f,h,d=n._modules||[],p=e._modules||[];for(s=0;s<d.length;s++)"scatter"===(h=d[s].name)?a=!0:"scattergl"===h&&(o=!0);for(s=0;s<p.length;s++)"scatter"===(h=p[s].name)?i=!0:"scattergl"===h&&(l=!0);if(a&&!i){for(u=n._plots,c=Object.keys(u||{}),s=0;s<c.length;s++)(f=u[c[s]]).plot&&f.plot.select("g.scatterlayer").selectAll("g.trace").remove();n._infolayer.selectAll("g.rangeslider-container").select("g.scatterlayer").selectAll("g.trace").remove()}if(o&&!l)for(u=n._plots,c=Object.keys(u||{}),s=0;s<c.length;s++)(f=u[c[s]])._scene&&f._scene.destroy();var g=n._subplots||{},v=e._subplots||{xaxis:[],yaxis:[]};if(g.xaxis&&g.yaxis){var m=g.xaxis.concat(g.yaxis),y=v.xaxis.concat(v.yaxis);for(s=0;s<m.length;s++)-1===y.indexOf(m[s])&&n._infolayer.selectAll(".g-"+m[s]+"title").remove()}var x=n._has&&n._has("cartesian"),b=e._has&&e._has("cartesian");if(x&&!b)ni(n._cartesianlayer.selectAll(".subplot"),n),n._defs.selectAll(".axesclip").remove(),delete n._axisConstraintGroups;else if(g.cartesian)for(s=0;s<g.cartesian.length;s++){var _=g.cartesian[s];if(-1===v.cartesian.indexOf(_)){var w="."+_+",."+_+"-x,."+_+"-y";n._cartesianlayer.selectAll(w).remove(),ai(_,n)}}},Ka.drawFramework=function(e){var r=e._fullLayout,n=function(t){for(var e=t._fullLayout,r=Object.keys(e._plots),n=[],a=[],i=0;i<r.length;i++){var o=r[i],l=e._plots[o],s=l.xaxis,u=l.yaxis,c=s._mainAxis,f=u._mainAxis,h=c._id+f._id;h!==o&&-1!==r.indexOf(h)?(l.mainplot=h,l.mainplotinfo=e._plots[h],a.push(o)):n.push(o)}return n=n.concat(a)}(e),a=r._cartesianlayer.selectAll(".subplot").data(n,ae.identity);a.enter().append("g").attr("class",function(t){return"subplot "+t}),a.order(),a.exit().call(ni,r),a.each(function(e){var n=r._plots[e];(n.plotgroup=t.select(this),n.overlays=[],ri(n),n.mainplot)&&r._plots[n.mainplot].overlays.push(n);n.draglayer=ii(r._draggers,"g",e)})},Ka.rangePlot=function(t,e,r){ri(e),ei(t,e,r),Wn.style(t)},Ka.toSVG=function(e){var r=e._fullLayout._glimages,n=t.select(e).selectAll(".svg-container");n.filter(function(t,e){return e===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");r.append("svg:image").attr({xmlns:ke.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})};var oi=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,n=t.length,a=t[0],i=t[0],o=1;o<n;++o)if(i=a,e(a=t[o],i)){if(o===r){r++;continue}t[r++]=a}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,n=t[0],a=t[0],i=1;i<r;++i,a=n)if(a=n,(n=t[i])!==a){if(i===e){e++;continue}t[e++]=n}return t.length=e,t}(t))};function li(t,e,r){var n,a,i=t.length,o=e.arrayArgs.length,l=e.indexArgs.length>0,s=[],u=[],c=0,f=0;for(n=0;n<i;++n)u.push(["i",n,"=0"].join(""));for(a=0;a<o;++a)for(n=0;n<i;++n)f=c,c=t[n],0===n?u.push(["d",a,"s",n,"=t",a,"p",c].join("")):u.push(["d",a,"s",n,"=(t",a,"p",c,"-s",f,"*t",a,"p",f,")"].join(""));for(u.length>0&&s.push("var "+u.join(",")),n=i-1;n>=0;--n)c=t[n],s.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(s.push(r),n=0;n<i;++n){for(f=c,c=t[n],a=0;a<o;++a)s.push(["p",a,"+=d",a,"s",n].join(""));l&&(n>0&&s.push(["index[",f,"]-=s",f].join("")),s.push(["++index[",c,"]"].join(""))),s.push("}")}return s.join("\n")}function si(t,e,r){for(var n=t.body,a=[],i=[],o=0;o<t.args.length;++o){var l=t.args[o];if(!(l.count<=0)){var s=new RegExp(l.name,"g"),u="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var f=e.offsetArgIndex.indexOf(o);c=e.offsetArgs[f].array,u="+q"+f;case"array":u="p"+c+u;var h="l"+o,d="a"+c;if(0===e.arrayBlockIndices[c])1===l.count?"generic"===r[c]?l.lvalue?(a.push(["var ",h,"=",d,".get(",u,")"].join("")),n=n.replace(s,h),i.push([d,".set(",u,",",h,")"].join(""))):n=n.replace(s,[d,".get(",u,")"].join("")):n=n.replace(s,[d,"[",u,"]"].join("")):"generic"===r[c]?(a.push(["var ",h,"=",d,".get(",u,")"].join("")),n=n.replace(s,h),l.lvalue&&i.push([d,".set(",u,",",h,")"].join(""))):(a.push(["var ",h,"=",d,"[",u,"]"].join("")),n=n.replace(s,h),l.lvalue&&i.push([d,"[",u,"]=",h].join("")));else{for(var p=[l.name],g=[u],v=0;v<Math.abs(e.arrayBlockIndices[c]);v++)p.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(v+1)+"*t"+c+"b"+v);if(s=new RegExp(p.join(""),"g"),u=g.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(s,[d,"[",u,"]"].join(""))}break;case"scalar":n=n.replace(s,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(s,"index");break;case"shape":n=n.replace(s,"shape")}}}return[a.join("\n"),n,i.join("\n")].join("\n").trim()}var ui=function(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),a=new Array(t.arrayArgs.length),i=0;i<t.arrayArgs.length;++i)a[i]=e[2*i],n[i]=e[2*i+1];var o=[],l=[],s=[],u=[],c=[];for(i=0;i<t.arrayArgs.length;++i){t.arrayBlockIndices[i]<0?(s.push(0),u.push(r),o.push(r),l.push(r+t.arrayBlockIndices[i])):(s.push(t.arrayBlockIndices[i]),u.push(t.arrayBlockIndices[i]+r),o.push(0),l.push(t.arrayBlockIndices[i]));for(var f=[],h=0;h<n[i].length;h++)s[i]<=n[i][h]&&n[i][h]<u[i]&&f.push(n[i][h]-s[i]);c.push(f)}var d=["SS"],p=["'use strict'"],g=[];for(h=0;h<r;++h)g.push(["s",h,"=SS[",h,"]"].join(""));for(i=0;i<t.arrayArgs.length;++i){for(d.push("a"+i),d.push("t"+i),d.push("p"+i),h=0;h<r;++h)g.push(["t",i,"p",h,"=t",i,"[",s[i]+h,"]"].join(""));for(h=0;h<Math.abs(t.arrayBlockIndices[i]);++h)g.push(["t",i,"b",h,"=t",i,"[",o[i]+h,"]"].join(""))}for(i=0;i<t.scalarArgs.length;++i)d.push("Y"+i);if(t.shapeArgs.length>0&&g.push("shape=SS.slice(0)"),t.indexArgs.length>0){var v=new Array(r);for(i=0;i<r;++i)v[i]="0";g.push(["index=[",v.join(","),"]"].join(""))}for(i=0;i<t.offsetArgs.length;++i){var m=t.offsetArgs[i],y=[];for(h=0;h<m.offset.length;++h)0!==m.offset[h]&&(1===m.offset[h]?y.push(["t",m.array,"p",h].join("")):y.push([m.offset[h],"*t",m.array,"p",h].join("")));0===y.length?g.push("q"+i+"=0"):g.push(["q",i,"=",y.join("+")].join(""))}var x=oi([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((g=g.concat(x)).length>0&&p.push("var "+g.join(",")),i=0;i<t.arrayArgs.length;++i)p.push("p"+i+"|=0");t.pre.body.length>3&&p.push(si(t.pre,t,a));var b=si(t.body,t,a),_=function(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}(c);_<r?p.push(function(t,e,r,n){for(var a=e.length,i=r.arrayArgs.length,o=r.blockSize,l=r.indexArgs.length>0,s=[],u=0;u<i;++u)s.push(["var offset",u,"=p",u].join(""));for(u=t;u<a;++u)s.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),s.push(["if(j",u,"<",o,"){"].join("")),s.push(["s",e[u],"=j",u].join("")),s.push(["j",u,"=0"].join("")),s.push(["}else{s",e[u],"=",o].join("")),s.push(["j",u,"-=",o,"}"].join("")),l&&s.push(["index[",e[u],"]=j",u].join(""));for(u=0;u<i;++u){for(var c=["offset"+u],f=t;f<a;++f)c.push(["j",f,"*t",u,"p",e[f]].join(""));s.push(["p",u,"=(",c.join("+"),")"].join(""))}for(s.push(li(e,r,n)),u=t;u<a;++u)s.push("}");return s.join("\n")}(_,c[0],t,b)):p.push(li(c[0],t,b)),t.post.body.length>3&&p.push(si(t.post,t,a)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+p.join("\n")+"\n----------");var w=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",_,function(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var a=t[n],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?e[n]="u"+a.charAt(1)+i:e[n]=a.charAt(0)+i,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}(a)].join("");return new Function(["function ",w,"(",d.join(","),"){",p.join("\n"),"} return ",w].join(""))()};var ci=function(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var a=[],i=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],l=[],s=[],u=0;u<t.arrayArgs.length;++u){var c=t.arrayArgs[u];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),a.push("t"+c),a.push("r"+c),i.push("t"+c),i.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),u>0&&(l.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[u]))),s.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[u])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),u=0;u<t.scalarArgs.length;++u)o.push("scalar"+t.scalarArgs[u]);return r.push(["type=[",i.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(ui.bind(void 0,t))};var fi=function(t){var e=new function(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1};e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var a=r[n];if("array"===a||"object"==typeof a&&a.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if("index"===a){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+r[n]);e.argTypes[n]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(n)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,ci(e)},hi={},di={body:"",args:[],thisVars:[],localVars:[]};function pi(t){if(!t)return di;for(var e=0;e<t.args.length;++e){var r=t.args[e];t.args[e]=0===e?{name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function gi(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(function(t){return fi({args:t.args,pre:pi(t.pre),body:pi(t.body),post:pi(t.proc),funcName:t.funcName})}(t))}var vi={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in vi){var e=vi[t];hi[t]=gi({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),hi[t+"eq"]=gi({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),hi[t+"s"]=gi({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),hi[t+"seq"]=gi({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}}();var mi={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in mi){var e=mi[t];hi[t]=gi({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),hi[t+"eq"]=gi({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var yi={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in yi){var e=yi[t];hi[t]=gi({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),hi[t+"s"]=gi({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),hi[t+"eq"]=gi({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),hi[t+"seq"]=gi({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var xi=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<xi.length;++t){var e=xi[t];hi[e]=gi({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),hi[e+"eq"]=gi({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var bi=["max","min","atan2","pow"];!function(){for(var t=0;t<bi.length;++t){var e=bi[t];hi[e]=gi({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),hi[e+"s"]=gi({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),hi[e+"eq"]=gi({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),hi[e+"seq"]=gi({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var _i=["atan2","pow"];!function(){for(var t=0;t<_i.length;++t){var e=_i[t];hi[e+"op"]=gi({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),hi[e+"ops"]=gi({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),hi[e+"opeq"]=gi({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),hi[e+"opseq"]=gi({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),hi.any=fi({args:["array"],pre:di,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),hi.all=fi({args:["array"],pre:di,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),hi.sum=fi({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),hi.prod=fi({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),hi.norm2squared=fi({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),hi.norm2=fi({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),hi.norminf=fi({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),hi.norm1=fi({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),hi.sup=fi({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),hi.inf=fi({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),hi.argmin=fi({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),hi.argmax=fi({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),hi.random=gi({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),hi.assign=gi({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),hi.assigns=gi({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),hi.equals=fi({args:["array","array"],pre:di,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"});var wi=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e},Ai=function(t){return null!=t&&(Mi(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Mi(t.slice(0,0))}(t)||!!t._isBuffer)};function Mi(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Ti="undefined"!=typeof Float64Array;function ki(t,e){return t[0]-e[0]}function Ei(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(ki);var n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}function Ci(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n="generic"===t;if(-1===e){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(a)()}if(0===e){a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",a)(Si[t][0])}a=["'use strict'"];var i=wi(e),o=i.map(function(t){return"i"+t}),l="this.offset+"+i.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),s=i.map(function(t){return"b"+t}).join(","),u=i.map(function(t){return"c"+t}).join(",");a.push("function "+r+"(a,"+s+","+u+",d){this.data=a","this.shape=["+s+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+i.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),e<4?(a.push("function "+r+"_order(){"),2===e?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?a.push("return this.data.set("+l+",v)}"):a.push("return this.data["+l+"]=v}"),a.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?a.push("return this.data.get("+l+")}"):a.push("return this.data["+l+"]}"),a.push("proto.index=function "+r+"_index(",o.join(),"){return "+l+"}"),a.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+i.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+i.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var c=i.map(function(t){return"a"+t+"=this.shape["+t+"]"}),f=i.map(function(t){return"c"+t+"=this.stride["+t+"]"});a.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+f.join(","));for(var h=0;h<e;++h)a.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");a.push("return new "+r+"(this.data,"+i.map(function(t){return"a"+t}).join(",")+","+i.map(function(t){return"c"+t}).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+i.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+i.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<e;++h)a.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");a.push("return new "+r+"(this.data,"+i.map(function(t){return"a"+t}).join(",")+","+i.map(function(t){return"b"+t}).join(",")+",c)}");var d=new Array(e),p=new Array(e);for(h=0;h<e;++h)d[h]="a[i"+h+"]",p[h]="b[i"+h+"]";a.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+d.join(",")+","+p.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(h=0;h<e;++h)a.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");return a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+i.map(function(t){return"shape["+t+"]"}).join(",")+","+i.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",a.join("\n"))(Si[t],Ei)}var Si={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};var Li=function(t,e,r,n){if(void 0===t)return(0,Si.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var a=e.length;if(void 0===r){r=new Array(a);for(var i=a-1,o=1;i>=0;--i)r[i]=o,o*=e[i]}if(void 0===n)for(n=0,i=0;i<a;++i)r[i]<0&&(n-=(e[i]-1)*r[i]);for(var l=function(t){if(Ai(t))return"buffer";if(Ti)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}(t),s=Si[l];s.length<=a+1;)s.push(Ci(l,s.length-1));return(0,s[a+1])(t,e,r,n)},Oi={};function Ri(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}Oi.INT_BITS=32,Oi.INT_MAX=2147483647,Oi.INT_MIN=-1<<31,Oi.sign=function(t){return(t>0)-(t<0)},Oi.abs=function(t){var e=t>>31;return(t^e)-e},Oi.min=function(t,e){return e^(t^e)&-(t<e)},Oi.max=function(t,e){return t^(t^e)&-(t<e)},Oi.isPow2=function(t){return!(t&t-1||!t)},Oi.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},Oi.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},Oi.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},Oi.countTrailingZeros=Ri,Oi.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},Oi.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},Oi.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var Di=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,a=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--a;t[e]=n<<a&255}}(Di),Oi.reverse=function(t){return Di[255&t]<<24|Di[t>>>8&255]<<16|Di[t>>>16&255]<<8|Di[t>>>24&255]},Oi.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},Oi.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},Oi.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},Oi.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},Oi.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>Ri(t)+1};for(var Ii={byteLength:function(t){return 3*t.length/4-Ui(t)},toByteArray:function(t){var e,r,n,a,i,o=t.length;a=Ui(t),i=new zi(3*o/4-a),r=a>0?o-4:o;var l=0;for(e=0;e<r;e+=4)n=Fi[t.charCodeAt(e)]<<18|Fi[t.charCodeAt(e+1)]<<12|Fi[t.charCodeAt(e+2)]<<6|Fi[t.charCodeAt(e+3)],i[l++]=n>>16&255,i[l++]=n>>8&255,i[l++]=255&n;2===a?(n=Fi[t.charCodeAt(e)]<<2|Fi[t.charCodeAt(e+1)]>>4,i[l++]=255&n):1===a&&(n=Fi[t.charCodeAt(e)]<<10|Fi[t.charCodeAt(e+1)]<<4|Fi[t.charCodeAt(e+2)]>>2,i[l++]=n>>8&255,i[l++]=255&n);return i},fromByteArray:function(t){for(var e,r=t.length,n=r%3,a="",i=[],o=0,l=r-n;o<l;o+=16383)i.push(Vi(t,o,o+16383>l?l:o+16383));1===n?(e=t[r-1],a+=Pi[e>>2],a+=Pi[e<<4&63],a+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],a+=Pi[e>>10],a+=Pi[e>>4&63],a+=Pi[e<<2&63],a+="=");return i.push(a),i.join("")}},Pi=[],Fi=[],zi="undefined"!=typeof Uint8Array?Uint8Array:Array,Ni="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bi=0,ji=Ni.length;Bi<ji;++Bi)Pi[Bi]=Ni[Bi],Fi[Ni.charCodeAt(Bi)]=Bi;function Ui(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function Vi(t,e,r){for(var n,a,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(Pi[(a=n)>>18&63]+Pi[a>>12&63]+Pi[a>>6&63]+Pi[63&a]);return i.join("")}Fi["-".charCodeAt(0)]=62,Fi["_".charCodeAt(0)]=63;var Hi={read:function(t,e,r,n,a){var i,o,l=8*a-n-1,s=(1<<l)-1,u=s>>1,c=-7,f=r?a-1:0,h=r?-1:1,d=t[e+f];for(f+=h,i=d&(1<<-c)-1,d>>=-c,c+=l;c>0;i=256*i+t[e+f],f+=h,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=n;c>0;o=256*o+t[e+f],f+=h,c-=8);if(0===i)i=1-u;else{if(i===s)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),i-=u}return(d?-1:1)*o*Math.pow(2,i-n)},write:function(t,e,r,n,a,i){var o,l,s,u=8*i-a-1,c=(1<<u)-1,f=c>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-o))<1&&(o--,s*=2),(e+=o+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(o++,s/=2),o+f>=c?(l=0,o=c):o+f>=1?(l=(e*s-1)*Math.pow(2,a),o+=f):(l=e*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;t[r+d]=255&l,d+=p,l/=256,a-=8);for(o=o<<a|l,u+=a;u>0;t[r+d]=255&o,d+=p,o/=256,u-=8);t[r+d-p]|=128*g}},qi={};qi.Buffer=Wi,qi.SlowBuffer=function(t){+t!=t&&(t=0);return Wi.alloc(+t)},qi.INSPECT_MAX_BYTES=50;var Gi=2147483647;function Xi(t){if(t>Gi)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=Wi.prototype,e}function Wi(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return Ji(t)}return Yi(t,e,r)}function Yi(t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return Eo(t)||t&&Eo(t.buffer)?function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return n.__proto__=Wi.prototype,n}(t,e,r):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!Wi.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|Ki(t,e),n=Xi(r),a=n.write(t,e);a!==r&&(n=n.slice(0,a));return n}(t,e):function(t){if(Wi.isBuffer(t)){var e=0|$i(t.length),r=Xi(e);return 0===r.length?r:(t.copy(r,0,0,e),r)}if(t){if(ArrayBuffer.isView(t)||"length"in t)return"number"!=typeof t.length||Co(t.length)?Xi(0):Qi(t);if("Buffer"===t.type&&Array.isArray(t.data))return Qi(t.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(t)}function Zi(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Ji(t){return Zi(t),Xi(t<0?0:0|$i(t))}function Qi(t){for(var e=t.length<0?0:0|$i(t.length),r=Xi(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function $i(t){if(t>=Gi)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Gi.toString(16)+" bytes");return 0|t}function Ki(t,e){if(Wi.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Eo(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Mo(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return To(t).length;default:if(n)return Mo(t).length;e=(""+e).toLowerCase(),n=!0}}function to(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function eo(t,e,r,n,a){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Co(r=+r)&&(r=a?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(a)return-1;r=t.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof e&&(e=Wi.from(e,n)),Wi.isBuffer(e))return 0===e.length?-1:ro(t,e,r,n,a);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):ro(t,[e],r,n,a);throw new TypeError("val must be string, number or Buffer")}function ro(t,e,r,n,a){var i,o=1,l=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,l/=2,s/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(a){var c=-1;for(i=r;i<l;i++)if(u(t,i)===u(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===s)return c*o}else-1!==c&&(i-=i-c),c=-1}else for(r+s>l&&(r=l-s),i=r;i>=0;i--){for(var f=!0,h=0;h<s;h++)if(u(t,i+h)!==u(e,h)){f=!1;break}if(f)return i}return-1}function no(t,e,r,n){r=Number(r)||0;var a=t.length-r;n?(n=Number(n))>a&&(n=a):n=a;var i=e.length;n>i/2&&(n=i/2);for(var o=0;o<n;++o){var l=parseInt(e.substr(2*o,2),16);if(Co(l))return o;t[r+o]=l}return o}function ao(t,e,r,n){return ko(Mo(e,t.length-r),t,r,n)}function io(t,e,r,n){return ko(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function oo(t,e,r,n){return io(t,e,r,n)}function lo(t,e,r,n){return ko(To(e),t,r,n)}function so(t,e,r,n){return ko(function(t,e){for(var r,n,a,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,a=r%256,i.push(a),i.push(n);return i}(e,t.length-r),t,r,n)}function uo(t,e,r){return 0===e&&r===t.length?Ii.fromByteArray(t):Ii.fromByteArray(t.slice(e,r))}function co(t,e,r){r=Math.min(t.length,r);for(var n=[],a=e;a<r;){var i,o,l,s,u=t[a],c=null,f=u>239?4:u>223?3:u>191?2:1;if(a+f<=r)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(i=t[a+1]))&&(s=(31&u)<<6|63&i)>127&&(c=s);break;case 3:i=t[a+1],o=t[a+2],128==(192&i)&&128==(192&o)&&(s=(15&u)<<12|(63&i)<<6|63&o)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:i=t[a+1],o=t[a+2],l=t[a+3],128==(192&i)&&128==(192&o)&&128==(192&l)&&(s=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&l)>65535&&s<1114112&&(c=s)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),a+=f}return function(t){var e=t.length;if(e<=fo)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=fo));return r}(n)}qi.kMaxLength=Gi,Wi.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),Wi.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Wi.prototype,"parent",{get:function(){if(this instanceof Wi)return this.buffer}}),Object.defineProperty(Wi.prototype,"offset",{get:function(){if(this instanceof Wi)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&Wi[Symbol.species]===Wi&&Object.defineProperty(Wi,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Wi.poolSize=8192,Wi.from=function(t,e,r){return Yi(t,e,r)},Wi.prototype.__proto__=Uint8Array.prototype,Wi.__proto__=Uint8Array,Wi.alloc=function(t,e,r){return function(t,e,r){return Zi(t),t<=0?Xi(t):void 0!==e?"string"==typeof r?Xi(t).fill(e,r):Xi(t).fill(e):Xi(t)}(t,e,r)},Wi.allocUnsafe=function(t){return Ji(t)},Wi.allocUnsafeSlow=function(t){return Ji(t)},Wi.isBuffer=function(t){return null!=t&&!0===t._isBuffer},Wi.compare=function(t,e){if(!Wi.isBuffer(t)||!Wi.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,a=0,i=Math.min(r,n);a<i;++a)if(t[a]!==e[a]){r=t[a],n=e[a];break}return r<n?-1:n<r?1:0},Wi.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Wi.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Wi.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Wi.allocUnsafe(e),a=0;for(r=0;r<t.length;++r){var i=t[r];if(ArrayBuffer.isView(i)&&(i=Wi.from(i)),!Wi.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,a),a+=i.length}return n},Wi.byteLength=Ki,Wi.prototype._isBuffer=!0,Wi.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)to(this,e,e+1);return this},Wi.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)to(this,e,e+3),to(this,e+1,e+2);return this},Wi.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)to(this,e,e+7),to(this,e+1,e+6),to(this,e+2,e+5),to(this,e+3,e+4);return this},Wi.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?co(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return go(this,e,r);case"utf8":case"utf-8":return co(this,e,r);case"ascii":return ho(this,e,r);case"latin1":case"binary":return po(this,e,r);case"base64":return uo(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vo(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},Wi.prototype.toLocaleString=Wi.prototype.toString,Wi.prototype.equals=function(t){if(!Wi.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Wi.compare(this,t)},Wi.prototype.inspect=function(){var t="",e=qi.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Wi.prototype.compare=function(t,e,r,n,a){if(!Wi.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),e<0||r>t.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&e>=r)return 0;if(n>=a)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,a>>>=0,this===t)return 0;for(var i=a-n,o=r-e,l=Math.min(i,o),s=this.slice(n,a),u=t.slice(e,r),c=0;c<l;++c)if(s[c]!==u[c]){i=s[c],o=u[c];break}return i<o?-1:o<i?1:0},Wi.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},Wi.prototype.indexOf=function(t,e,r){return eo(this,t,e,r,!0)},Wi.prototype.lastIndexOf=function(t,e,r){return eo(this,t,e,r,!1)},Wi.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-e;if((void 0===r||r>a)&&(r=a),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return no(this,t,e,r);case"utf8":case"utf-8":return ao(this,t,e,r);case"ascii":return io(this,t,e,r);case"latin1":case"binary":return oo(this,t,e,r);case"base64":return lo(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return so(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Wi.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var fo=4096;function ho(t,e,r){var n="";r=Math.min(t.length,r);for(var a=e;a<r;++a)n+=String.fromCharCode(127&t[a]);return n}function po(t,e,r){var n="";r=Math.min(t.length,r);for(var a=e;a<r;++a)n+=String.fromCharCode(t[a]);return n}function go(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=e;i<r;++i)a+=Ao(t[i]);return a}function vo(t,e,r){for(var n=t.slice(e,r),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function mo(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function yo(t,e,r,n,a,i){if(!Wi.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function xo(t,e,r,n,a,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function bo(t,e,r,n,a){return e=+e,r>>>=0,a||xo(t,0,r,4),Hi.write(t,e,r,n,23,4),r+4}function _o(t,e,r,n,a){return e=+e,r>>>=0,a||xo(t,0,r,8),Hi.write(t,e,r,n,52,8),r+8}Wi.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=Wi.prototype,n},Wi.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||mo(t,e,this.length);for(var n=this[t],a=1,i=0;++i<e&&(a*=256);)n+=this[t+i]*a;return n},Wi.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||mo(t,e,this.length);for(var n=this[t+--e],a=1;e>0&&(a*=256);)n+=this[t+--e]*a;return n},Wi.prototype.readUInt8=function(t,e){return t>>>=0,e||mo(t,1,this.length),this[t]},Wi.prototype.readUInt16LE=function(t,e){return t>>>=0,e||mo(t,2,this.length),this[t]|this[t+1]<<8},Wi.prototype.readUInt16BE=function(t,e){return t>>>=0,e||mo(t,2,this.length),this[t]<<8|this[t+1]},Wi.prototype.readUInt32LE=function(t,e){return t>>>=0,e||mo(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Wi.prototype.readUInt32BE=function(t,e){return t>>>=0,e||mo(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Wi.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||mo(t,e,this.length);for(var n=this[t],a=1,i=0;++i<e&&(a*=256);)n+=this[t+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*e)),n},Wi.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||mo(t,e,this.length);for(var n=e,a=1,i=this[t+--n];n>0&&(a*=256);)i+=this[t+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*e)),i},Wi.prototype.readInt8=function(t,e){return t>>>=0,e||mo(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Wi.prototype.readInt16LE=function(t,e){t>>>=0,e||mo(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Wi.prototype.readInt16BE=function(t,e){t>>>=0,e||mo(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Wi.prototype.readInt32LE=function(t,e){return t>>>=0,e||mo(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Wi.prototype.readInt32BE=function(t,e){return t>>>=0,e||mo(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Wi.prototype.readFloatLE=function(t,e){return t>>>=0,e||mo(t,4,this.length),Hi.read(this,t,!0,23,4)},Wi.prototype.readFloatBE=function(t,e){return t>>>=0,e||mo(t,4,this.length),Hi.read(this,t,!1,23,4)},Wi.prototype.readDoubleLE=function(t,e){return t>>>=0,e||mo(t,8,this.length),Hi.read(this,t,!0,52,8)},Wi.prototype.readDoubleBE=function(t,e){return t>>>=0,e||mo(t,8,this.length),Hi.read(this,t,!1,52,8)},Wi.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||yo(this,t,e,r,Math.pow(2,8*r)-1,0);var a=1,i=0;for(this[e]=255&t;++i<r&&(a*=256);)this[e+i]=t/a&255;return e+r},Wi.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||yo(this,t,e,r,Math.pow(2,8*r)-1,0);var a=r-1,i=1;for(this[e+a]=255&t;--a>=0&&(i*=256);)this[e+a]=t/i&255;return e+r},Wi.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||yo(this,t,e,1,255,0),this[e]=255&t,e+1},Wi.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||yo(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},Wi.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||yo(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},Wi.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||yo(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},Wi.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||yo(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Wi.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var a=Math.pow(2,8*r-1);yo(this,t,e,r,a-1,-a)}var i=0,o=1,l=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===l&&0!==this[e+i-1]&&(l=1),this[e+i]=(t/o>>0)-l&255;return e+r},Wi.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var a=Math.pow(2,8*r-1);yo(this,t,e,r,a-1,-a)}var i=r-1,o=1,l=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===l&&0!==this[e+i+1]&&(l=1),this[e+i]=(t/o>>0)-l&255;return e+r},Wi.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||yo(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},Wi.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||yo(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},Wi.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||yo(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},Wi.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||yo(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},Wi.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||yo(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Wi.prototype.writeFloatLE=function(t,e,r){return bo(this,t,e,!0,r)},Wi.prototype.writeFloatBE=function(t,e,r){return bo(this,t,e,!1,r)},Wi.prototype.writeDoubleLE=function(t,e,r){return _o(this,t,e,!0,r)},Wi.prototype.writeDoubleBE=function(t,e,r){return _o(this,t,e,!1,r)},Wi.prototype.copy=function(t,e,r,n){if(!Wi.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var a=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var i=a-1;i>=0;--i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return a},Wi.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Wi.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var a=t.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(t=a)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=Wi.isBuffer(t)?t:new Wi(t,n),l=o.length;if(0===l)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%l]}return this};var wo=/[^+/0-9A-Za-z-_]/g;function Ao(t){return t<16?"0"+t.toString(16):t.toString(16)}function Mo(t,e){var r;e=e||1/0;for(var n=t.length,a=null,i=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!a){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(e-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function To(t){return Ii.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(wo,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function ko(t,e,r,n){for(var a=0;a<n&&!(a+r>=e.length||a>=t.length);++a)e[a+r]=t[a];return a}function Eo(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function Co(t){return t!=t}var So=function(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return function(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}(0|t,e);break;case"object":if("number"==typeof t.length)return function t(e,r,n){var a=0|e[n];if(a<=0)return[];var i,o=new Array(a);if(n===e.length-1)for(i=0;i<a;++i)o[i]=r;else for(i=0;i<a;++i)o[i]=t(e,r,n+1);return o}(t,e,0)}return[]},Lo={};(function(t,e){"use strict";t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:So([32,0]),UINT16:So([32,0]),UINT32:So([32,0]),INT8:So([32,0]),INT16:So([32,0]),INT32:So([32,0]),FLOAT:So([32,0]),DOUBLE:So([32,0]),DATA:So([32,0]),UINT8C:So([32,0]),BUFFER:So([32,0])});var r="undefined"!=typeof Uint8ClampedArray,n=t.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=So([32,0])),n.BUFFER||(n.BUFFER=So([32,0]));var a=n.DATA,i=n.BUFFER;function o(t){if(t){var e=t.length||t.byteLength,r=Oi.log2(e);a[r].push(t)}}function l(t){t=Oi.nextPow2(t);var e=Oi.log2(t),r=a[e];return r.length>0?r.pop():new ArrayBuffer(t)}function s(t){return new Uint8Array(l(t),0,t)}function u(t){return new Uint16Array(l(2*t),0,t)}function c(t){return new Uint32Array(l(4*t),0,t)}function f(t){return new Int8Array(l(t),0,t)}function h(t){return new Int16Array(l(2*t),0,t)}function d(t){return new Int32Array(l(4*t),0,t)}function p(t){return new Float32Array(l(4*t),0,t)}function g(t){return new Float64Array(l(8*t),0,t)}function v(t){return r?new Uint8ClampedArray(l(t),0,t):s(t)}function m(t){return new DataView(l(t),0,t)}function y(t){t=Oi.nextPow2(t);var r=Oi.log2(t),n=i[r];return n.length>0?n.pop():new e(t)}Lo.free=function(t){if(e.isBuffer(t))i[Oi.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var r=t.length||t.byteLength,n=0|Oi.log2(r);a[n].push(t)}},Lo.freeUint8=Lo.freeUint16=Lo.freeUint32=Lo.freeInt8=Lo.freeInt16=Lo.freeInt32=Lo.freeFloat32=Lo.freeFloat=Lo.freeFloat64=Lo.freeDouble=Lo.freeUint8Clamped=Lo.freeDataView=function(t){o(t.buffer)},Lo.freeArrayBuffer=o,Lo.freeBuffer=function(t){i[Oi.log2(t.length)].push(t)},Lo.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return l(t);switch(e){case"uint8":return s(t);case"uint16":return u(t);case"uint32":return c(t);case"int8":return f(t);case"int16":return h(t);case"int32":return d(t);case"float":case"float32":return p(t);case"double":case"float64":return g(t);case"uint8_clamped":return v(t);case"buffer":return y(t);case"data":case"dataview":return m(t);default:return null}return null},Lo.mallocArrayBuffer=l,Lo.mallocUint8=s,Lo.mallocUint16=u,Lo.mallocUint32=c,Lo.mallocInt8=f,Lo.mallocInt16=h,Lo.mallocInt32=d,Lo.mallocFloat32=Lo.mallocFloat=p,Lo.mallocFloat64=Lo.mallocDouble=g,Lo.mallocUint8Clamped=v,Lo.mallocDataView=m,Lo.mallocBuffer=y,Lo.clearCache=function(){for(var t=0;t<32;++t)n.UINT8[t].length=0,n.UINT16[t].length=0,n.UINT32[t].length=0,n.INT8[t].length=0,n.INT16[t].length=0,n.INT32[t].length=0,n.FLOAT[t].length=0,n.DOUBLE[t].length=0,n.UINT8C[t].length=0,a[t].length=0,i[t].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},qi.Buffer);var Oo=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function Ro(t,e,r,n,a){this.gl=t,this.type=e,this.handle=r,this.length=n,this.usage=a}var Do=Ro.prototype;function Io(t,e,r,n,a,i){var o=a.length*a.BYTES_PER_ELEMENT;if(i<0)return t.bufferData(e,a,n),o;if(o+i>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,i,a),r}function Po(t,e){for(var r=Lo.malloc(t.length,e),n=t.length,a=0;a<n;++a)r[a]=t[a];return r}Do.bind=function(){this.gl.bindBuffer(this.type,this.handle)},Do.unbind=function(){this.gl.bindBuffer(this.type,null)},Do.dispose=function(){this.gl.deleteBuffer(this.handle)},Do.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&void 0!==t.shape){var r=t.dtype;if(Oo.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER)r=gl.getExtension("OES_element_index_uint")&&"uint16"!==r?"uint32":"uint16";if(r===t.dtype&&function(t,e){for(var r=1,n=e.length-1;n>=0;--n){if(e[n]!==r)return!1;r*=t[n]}return!0}(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=Io(this.gl,this.type,this.length,this.usage,t.data,e):this.length=Io(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var n=Lo.malloc(t.size,r),a=Li(n,t.shape);hi.assign(a,t),this.length=Io(this.gl,this.type,this.length,this.usage,e<0?n:n.subarray(0,t.size),e),Lo.free(n)}}else if(Array.isArray(t)){var i;i=this.type===this.gl.ELEMENT_ARRAY_BUFFER?Po(t,"uint16"):Po(t,"float32"),this.length=Io(this.gl,this.type,this.length,this.usage,e<0?i:i.subarray(0,t.length),e),Lo.free(i)}else if("object"==typeof t&&"number"==typeof t.length)this.length=Io(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(e>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}};var Fo=function(t,e,r,n){if(r=r||t.ARRAY_BUFFER,n=n||t.DYNAMIC_DRAW,r!==t.ARRAY_BUFFER&&r!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(n!==t.DYNAMIC_DRAW&&n!==t.STATIC_DRAW&&n!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var a=new Ro(t,r,t.createBuffer(),0,n);return a.update(e),a},zo=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],n=0;n<t.length-1;n++)r.push(t[n],e[n]||"");return r.push(t[n]),r.join("")},No=zo(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]),Bo={lineVert:zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:No,textVert:zo(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:No,gridVert:zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:No,boxVert:zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])};function jo(t,e,r){this.shortMessage=e||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(r?"\n"+r:""),this.stack=(new Error).stack}jo.prototype=new Error,jo.prototype.name="GLError",jo.prototype.constructor=jo;var Uo=jo,Vo=function(t,e,r,n){for(var a={},i=0,o=r.length;i<o;++i){var l=r[i],s=l.name,u=l.type,c=l.locations;switch(u){case"bool":case"int":case"float":Go(t,e,c[0],n,1,a,s);break;default:if(u.indexOf("vec")>=0){var f=u.charCodeAt(u.length-1)-48;if(f<2||f>4)throw new Uo("","Invalid data type for attribute "+s+": "+u);Go(t,e,c[0],n,f,a,s)}else{if(!(u.indexOf("mat")>=0))throw new Uo("","Unknown data type for attribute "+s+": "+u);var f=u.charCodeAt(u.length-1)-48;if(f<2||f>4)throw new Uo("","Invalid data type for attribute "+s+": "+u);Xo(t,e,c,n,f,a,s)}}}return a};function Ho(t,e,r,n,a,i){this._gl=t,this._wrapper=e,this._index=r,this._locations=n,this._dimension=a,this._constFunc=i}var qo=Ho.prototype;function Go(t,e,r,n,a,i,o){for(var l=["gl","v"],s=[],u=0;u<a;++u)l.push("x"+u),s.push("x"+u);l.push("if(x0.length===void 0){return gl.vertexAttrib"+a+"f(v,"+s.join()+")}else{return gl.vertexAttrib"+a+"fv(v,x0)}");var c=Function.apply(null,l),f=new Ho(t,e,r,n,a,c);Object.defineProperty(i,o,{set:function(e){return t.disableVertexAttribArray(n[r]),c(t,n[r],e),e},get:function(){return f},enumerable:!0})}function Xo(t,e,r,n,a,i,o){for(var l=new Array(a),s=new Array(a),u=0;u<a;++u)Go(t,e,r[u],n,a,l,u),s[u]=l[u];Object.defineProperty(l,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<a;++e)s[e].location=t[e];else for(e=0;e<a;++e)s[e].location=t+e;return t},get:function(){for(var t=new Array(a),e=0;e<a;++e)t[e]=n[r[e]];return t},enumerable:!0}),l.pointer=function(e,i,o,l){e=e||t.FLOAT,i=!!i,o=o||a*a,l=l||0;for(var s=0;s<a;++s){var u=n[r[s]];t.vertexAttribPointer(u,a,e,i,o,l+s*a),t.enableVertexAttribArray(u)}};var c=new Array(a),f=t["vertexAttrib"+a+"fv"];Object.defineProperty(i,o,{set:function(e){for(var i=0;i<a;++i){var o=n[r[i]];if(t.disableVertexAttribArray(o),Array.isArray(e[0]))f.call(t,o,e[i]);else{for(var l=0;l<a;++l)c[l]=e[a*i+l];f.call(t,o,c)}}return e},get:function(){return l},enumerable:!0})}qo.pointer=function(t,e,r,n){var a=this._gl,i=this._locations[this._index];a.vertexAttribPointer(i,this._dimension,t||a.FLOAT,!!e,r||0,n||0),a.enableVertexAttribArray(i)},qo.set=function(t,e,r,n){return this._constFunc(this._locations[this._index],t,e,r,n)},Object.defineProperty(qo,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}});var Wo=function(t,e){for(var r={},n=0;n<t.length;++n)for(var a=t[n].name,i=a.split("."),o=r,l=0;l<i.length;++l){var s=i[l].split("[");if(s.length>1){s[0]in o||(o[s[0]]=[]),o=o[s[0]];for(var u=1;u<s.length;++u){var c=parseInt(s[u]);u<s.length-1||l<i.length-1?(c in o||(u<s.length-1?o[c]=[]:o[c]={}),o=o[c]):o[c]=e?n:t[n].type}}else l<i.length-1?(s[0]in o||(o[s[0]]={}),o=o[s[0]]):o[s[0]]=e?n:t[n].type}return r};var Yo=function(t,e,r,n){function a(t,e,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+e+"],obj"+t+")";case"float":return"gl.uniform1f(locations["+e+"],obj"+t+")";default:var n=r.indexOf("vec");if(!(0<=n&&n<=1&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var a=r.charCodeAt(r.length-1)-48;if(a<2||a>4)throw new Uo("","Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+a+"fv(locations["+e+"],false,obj"+t+")"}throw new Uo("","Unknown uniform data type for "+name+": "+r)}var a=r.charCodeAt(r.length-1)-48;if(a<2||a>4)throw new Uo("","Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+a+"iv(locations["+e+"],obj"+t+")";case"v":return"gl.uniform"+a+"fv(locations["+e+"],obj"+t+")";default:throw new Uo("","Unrecognized data type for vector "+name+": "+r)}}}function i(e){for(var i=["return function updateProperty(obj){"],o=function t(e,r){if("object"!=typeof r)return[[e,r]];var n=[];for(var a in r){var i=r[a],o=e;parseInt(a)+""===a?o+="["+a+"]":o+="."+a,"object"==typeof i?n.push.apply(n,t(o,i)):n.push([o,i])}return n}("",e),l=0;l<o.length;++l){var s=o[l],u=s[0],c=s[1];n[c]&&i.push(a(u,c,r[c].type))}i.push("return obj}");var f=new Function("gl","locations",i.join("\n"));return f(t,n)}function o(a,o,s){if("object"==typeof s){var u=l(s);Object.defineProperty(a,o,{get:Zo(u),set:i(s),enumerable:!0,configurable:!1})}else n[s]?Object.defineProperty(a,o,{get:(c=s,new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+c+"])}")(t,e,n)),set:i(s),enumerable:!0,configurable:!1}):a[o]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new Uo("","Invalid data type");return"b"===t.charAt(0)?Jo(r,!1):Jo(r,0)}if(0===t.indexOf("mat")&&4===t.length){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new Uo("","Invalid uniform dimension type for matrix "+name+": "+t);return Jo(r*r,0)}throw new Uo("","Unknown uniform data type for "+name+": "+t)}}(r[s].type);var c}function l(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var r=0;r<t.length;++r)o(e,r,t[r])}else for(var n in e={},t)o(e,n,t[n]);return e}var s=Wo(r,!0);return{get:Zo(l(s)),set:i(s),enumerable:!0,configurable:!0}};function Zo(t){return new Function("y","return function(){return y}")(t)}function Jo(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}var Qo={uniforms:function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=[],a=0;a<r;++a){var i=t.getActiveUniform(e,a);if(i){var o=tl(t,i.type);if(i.size>1)for(var l=0;l<i.size;++l)n.push({name:i.name.replace("[0]","["+l+"]"),type:o});else n.push({name:i.name,type:o})}}return n},attributes:function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=[],a=0;a<r;++a){var i=t.getActiveAttrib(e,a);i&&n.push({name:i.name,type:tl(t,i.type)})}return n}},$o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},Ko=null;function tl(t,e){if(!Ko){var r=Object.keys($o);Ko={};for(var n=0;n<r.length;++n){var a=r[n];Ko[t[a]]=$o[a]}}return Ko[e]}var el,rl="",nl=function(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var r=t.length*e;if(el!==t||void 0===el)el=t,rl="";else if(rl.length>=r)return rl.substr(0,r);for(;r>rl.length&&e>1;)1&e&&(rl+=t),e>>=1,t+=t;return rl=(rl+=t).substr(0,r)};var al=function(t,e,r){return nl(r=void 0!==r?r+"":" ",e)+t},il=function(t,e,r){e="number"==typeof e?e:1,r=r||": ";var n=t.split(/\r?\n/),a=String(n.length+e-1).length;return n.map(function(t,n){var i=n+e,o=String(i).length,l=al(i,a-o);return l+r+t}).join("\n")};var ol={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34000:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"},ll=function(t){return ol[t]},sl=function(t){return atob(t)},ul=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],cl=(ul=ul.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)})).concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),fl=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],hl=fl.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),dl=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],pl=function(t){var e,r,n,a=0,i=0,o=vl,l=[],s=[],u=1,c=0,f=0,h=!1,d=!1,p="",g=ul,v=fl;"300 es"===(t=t||{}).version&&(g=cl,v=hl);return function(t){return s=[],null!==t?function(t){var r;a=0,n=(p+=t).length;for(;e=p[a],a<n;){switch(r=a,o){case yl:a=_();break;case xl:case bl:a=b();break;case _l:a=w();break;case wl:a=T();break;case Sl:a=M();break;case Al:a=k();break;case ml:a=E();break;case El:a=x();break;case vl:a=y()}if(r!==a)switch(p[r]){case"\n":c=0,++u;break;default:++c}}return i+=a,p=p.slice(a),s}(t.replace?t.replace(/\r\n/g,"\n"):t):function(t){l.length&&m(l.join(""));return o=Cl,m("(eof)"),s}()};function m(t){t.length&&s.push({type:Ll[o],data:t,position:f,line:u,column:c})}function y(){return l=l.length?[]:l,"/"===r&&"*"===e?(f=i+a-1,o=yl,r=e,a+1):"/"===r&&"/"===e?(f=i+a-1,o=xl,r=e,a+1):"#"===e?(o=bl,f=i+a,a):/\s/.test(e)?(o=El,f=i+a,a):(h=/\d/.test(e),d=/[^\w_]/.test(e),f=i+a,o=h?wl:d?_l:ml,a)}function x(){return/[^\s]/g.test(e)?(m(l.join("")),o=vl,a):(l.push(e),r=e,a+1)}function b(){return"\r"!==e&&"\n"!==e||"\\"===r?(l.push(e),r=e,a+1):(m(l.join("")),o=vl,a)}function _(){return"/"===e&&"*"===r?(l.push(e),m(l.join("")),o=vl,a+1):(l.push(e),r=e,a+1)}function w(){if("."===r&&/\d/.test(e))return o=Al,a;if("/"===r&&"*"===e)return o=yl,a;if("/"===r&&"/"===e)return o=xl,a;if("."===e&&l.length){for(;A(l););return o=Al,a}if(";"===e||")"===e||"("===e){if(l.length)for(;A(l););return m(e),o=vl,a+1}var t=2===l.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;A(l););return o=vl,a}return l.push(e),r=e,a+1}function A(t){for(var e,r,n=0;;){if(e=dl.indexOf(t.slice(0,t.length+n).join("")),r=dl[e],-1===e){if(n--+t.length>0)continue;r=t.slice(0,1).join("")}return m(r),f+=r.length,(l=l.slice(r.length)).length}}function M(){return/[^a-fA-F0-9]/.test(e)?(m(l.join("")),o=vl,a):(l.push(e),r=e,a+1)}function T(){return"."===e?(l.push(e),o=Al,r=e,a+1):/[eE]/.test(e)?(l.push(e),o=Al,r=e,a+1):"x"===e&&1===l.length&&"0"===l[0]?(o=Sl,l.push(e),r=e,a+1):/[^\d]/.test(e)?(m(l.join("")),o=vl,a):(l.push(e),r=e,a+1)}function k(){return"f"===e&&(l.push(e),r=e,a+=1),/[eE]/.test(e)?(l.push(e),r=e,a+1):"-"===e&&/[eE]/.test(r)?(l.push(e),r=e,a+1):/[^\d]/.test(e)?(m(l.join("")),o=vl,a):(l.push(e),r=e,a+1)}function E(){if(/[^\d\w_]/.test(e)){var t=l.join("");return o=v.indexOf(t)>-1?kl:g.indexOf(t)>-1?Tl:Ml,m(l.join("")),o=vl,a}return l.push(e),r=e,a+1}},vl=999,ml=9999,yl=0,xl=1,bl=2,_l=3,wl=4,Al=5,Ml=6,Tl=7,kl=8,El=9,Cl=10,Sl=11,Ll=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];var Ol=function(t,e){var r=pl(e),n=[];return n=(n=n.concat(r(t))).concat(r(null))};var Rl=function(t){for(var e=Array.isArray(t)?t:Ol(t),r=0;r<e.length;r++){var n=e[r];if("preprocessor"===n.type){var a=n.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(a&&a[2]){var i=a[1],o=a[2];return(i?sl(o):o).trim()}}}};var Dl={};!function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function e(r){return function(r,n){var a,i,o,l,s,u,c,f,h,d=1,p=r.length,g="";for(i=0;i<p;i++)if("string"==typeof r[i])g+=r[i];else if(Array.isArray(r[i])){if((l=r[i])[2])for(a=n[d],o=0;o<l[2].length;o++){if(!a.hasOwnProperty(l[2][o]))throw new Error(e('[sprintf] property "%s" does not exist',l[2][o]));a=a[l[2][o]]}else a=l[1]?n[l[1]]:n[d++];if(t.not_type.test(l[8])&&t.not_primitive.test(l[8])&&a instanceof Function&&(a=a()),t.numeric_arg.test(l[8])&&"number"!=typeof a&&isNaN(a))throw new TypeError(e("[sprintf] expecting number but found %T",a));switch(t.number.test(l[8])&&(f=a>=0),l[8]){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,l[6]?parseInt(l[6]):0);break;case"e":a=l[7]?parseFloat(a).toExponential(l[7]):parseFloat(a).toExponential();break;case"f":a=l[7]?parseFloat(a).toFixed(l[7]):parseFloat(a);break;case"g":a=l[7]?String(Number(a.toPrecision(l[7]))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=l[7]?a.substring(0,l[7]):a;break;case"t":a=String(!!a),a=l[7]?a.substring(0,l[7]):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=l[7]?a.substring(0,l[7]):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=l[7]?a.substring(0,l[7]):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase()}t.json.test(l[8])?g+=a:(!t.number.test(l[8])||f&&!l[3]?h="":(h=f?"+":"-",a=a.toString().replace(t.sign,"")),u=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",c=l[6]-(h+a).length,s=l[6]&&c>0?u.repeat(c):"",g+=l[5]?h+a+s:"0"===u?h+s+a:s+h+a)}return g}(function(e){if(n[e])return n[e];var r,a=e,i=[],o=0;for(;a;){if(null!==(r=t.text.exec(a)))i.push(r[0]);else if(null!==(r=t.modulo.exec(a)))i.push("%");else{if(null===(r=t.placeholder.exec(a)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){o|=1;var l=[],s=r[2],u=[];if(null===(u=t.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(l.push(u[1]);""!==(s=s.substring(u[0].length));)if(null!==(u=t.key_access.exec(s)))l.push(u[1]);else{if(null===(u=t.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");l.push(u[1])}r[2]=l}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push(r)}a=a.substring(r[0].length)}return n[e]=i}(r),arguments)}function r(t,r){return e.apply(null,[t].concat(r||[]))}var n=Object.create(null);void 0!==Dl&&(Dl.sprintf=e,Dl.vsprintf=r),"undefined"!=typeof window&&(window.sprintf=e,window.vsprintf=r)}();var Il=Dl.sprintf,Pl=function(t,e,r){"use strict";var n=Rl(e)||"of unknown name (see npm glsl-shader-name)",a="unknown type";void 0!==r&&(a=r===ll.FRAGMENT_SHADER?"fragment":"vertex");for(var i=Il("Error compiling %s shader %s:\n",a,n),o=Il("%s%s",i,t),l=t.split("\n"),s={},u=0;u<l.length;u++){var c=l[u];if(""!==c&&"\0"!==c){var f=parseInt(c.split(":")[2]);if(isNaN(f))throw new Error(Il("Could not parse error: %s",c));s[f]=c}}for(var h=il(e).split("\n"),u=0;u<h.length;u++)if(s[u+3]||s[u+2]||s[u+1]){var d=h[u];if(i+=d+"\n",s[u+1]){var p=s[u+1];p=p.substr(p.split(":",3).join(":").length+1).trim(),i+=Il("^^^ %s\n\n",p)}}return{long:i.trim(),short:o.trim()}};var Fl=function(t,e){var r={identity:e},n=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?n.apply(this,arguments):r},writable:!0}),r};var zl=function(){var t={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw new Error("Weakmap-shim: Key must be object");var r=e.valueOf(t);return r&&r.identity===t?r:Fl(e,t)}};var Nl={shader:function(t,e,r){return ql(t).getShaderReference(e,r)},program:function(t,e,r,n,a){return ql(t).getProgram(e,r,n,a)}},Bl=new("undefined"==typeof WeakMap?function(){var t=zl();return{get:function(e,r){var n=t(e);return n.hasOwnProperty("value")?n.value:r},set:function(e,r){return t(e).value=r,this},has:function(e){return"value"in t(e)},delete:function(e){return delete t(e).value}}}:WeakMap),jl=0;function Ul(t,e,r,n,a,i,o){this.id=t,this.src=e,this.type=r,this.shader=n,this.count=i,this.programs=[],this.cache=o}function Vl(t){this.gl=t,this.shaders=[{},{}],this.programs={}}Ul.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,r=this.programs,n=0,a=r.length;n<a;++n){var i=t.programs[r[n]];i&&(delete t.programs[n],e.deleteProgram(i))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var Hl=Vl.prototype;function ql(t){var e=Bl.get(t);return e||(e=new Vl(t),Bl.set(t,e)),e}function Gl(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}Hl.getShaderReference=function(t,e){var r=this.gl,n=this.shaders[t===r.FRAGMENT_SHADER|0],a=n[e];if(a&&r.isShader(a.shader))a.count+=1;else{var i=function(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(n);try{var i=Pl(a,r,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new Uo(a,"Error compiling shader:\n"+a)}throw new Uo(a,i.short,i.long)}return n}(r,t,e);a=n[e]=new Ul(jl++,e,t,i,[],1,this)}return a},Hl.getProgram=function(t,e,r,n){var a=[t.id,e.id,r.join(":"),n.join(":")].join("@"),i=this.programs[a];return i&&this.gl.isProgram(i)||(this.programs[a]=i=function(t,e,r,n,a){var i=t.createProgram();t.attachShader(i,e),t.attachShader(i,r);for(var o=0;o<n.length;++o)t.bindAttribLocation(i,a[o],n[o]);if(t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){var l=t.getProgramInfoLog(i);throw new Uo(l,"Error linking program: "+l)}return i}(this.gl,t.shader,e.shader,r,n),t.programs.push(a),e.programs.push(a)),i};var Xl=Gl.prototype;function Wl(t,e){return t.name<e.name?-1:1}Xl.bind=function(){var t;this.program||this._relink();var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(e>r)for(t=r;t<e;t++)this.gl.enableVertexAttribArray(t);else if(r>e)for(t=e;t<r;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},Xl.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},Xl.update=function(t,e,r,n){if(!e||1===arguments.length){var a=t;t=a.vertex,e=a.fragment,r=a.uniforms,n=a.attributes}var i=this,o=i.gl,l=i._vref;i._vref=Nl.shader(o,o.VERTEX_SHADER,t),l&&l.dispose(),i.vertShader=i._vref.shader;var s=this._fref;if(i._fref=Nl.shader(o,o.FRAGMENT_SHADER,e),s&&s.dispose(),i.fragShader=i._fref.shader,!r||!n){var u=o.createProgram();if(o.attachShader(u,i.fragShader),o.attachShader(u,i.vertShader),o.linkProgram(u),!o.getProgramParameter(u,o.LINK_STATUS)){var c=o.getProgramInfoLog(u);throw new Uo(c,"Error linking program:"+c)}r=r||Qo.uniforms(o,u),n=n||Qo.attributes(o,u),o.deleteProgram(u)}(n=n.slice()).sort(Wl);var f,h=[],d=[],p=[];for(f=0;f<n.length;++f){var g=n[f];if(g.type.indexOf("mat")>=0){for(var v=0|g.type.charAt(g.type.length-1),m=new Array(v),y=0;y<v;++y)m[y]=p.length,d.push(g.name+"["+y+"]"),"number"==typeof g.location?p.push(g.location+y):Array.isArray(g.location)&&g.location.length===v&&"number"==typeof g.location[y]?p.push(0|g.location[y]):p.push(-1);h.push({name:g.name,type:g.type,locations:m})}else h.push({name:g.name,type:g.type,locations:[p.length]}),d.push(g.name),"number"==typeof g.location?p.push(0|g.location):p.push(-1)}var x=0;for(f=0;f<p.length;++f)if(p[f]<0){for(;p.indexOf(x)>=0;)x+=1;p[f]=x}var b=new Array(r.length);function _(){i.program=Nl.program(o,i._vref,i._fref,d,p);for(var t=0;t<r.length;++t)b[t]=o.getUniformLocation(i.program,r[t].name)}_(),i._relink=_,i.types={uniforms:Wo(r),attributes:Wo(n)},i.attributes=Vo(o,i,h,p),Object.defineProperty(i,"uniforms",Yo(o,i,r,b))};var Yl=function(t,e,r,n,a){var i=new Gl(t);return i.update(e,r,n,a),i},Zl=function(t){var e=t.gl,r=Fo(e,[0,0,0,1,1,0,1,1]),n=Yl(e,Bo.boxVert,Bo.lineFrag);return new Jl(t,r,n)};function Jl(t,e,r){this.plot=t,this.vbo=e,this.shader=r}var Ql,$l,Kl=Jl.prototype;function ts(t,e,r,n,a){var i=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),r?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function es(t,e,r,n){return new Function([ts("A","x"+t+"y",e,["y"],n),ts("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}Kl.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},Kl.drawBox=(Ql=[0,0],$l=[0,0],function(t,e,r,n,a){var i=this.plot,o=this.shader,l=i.gl;Ql[0]=t,Ql[1]=e,$l[0]=r,$l[1]=n,o.uniforms.lo=Ql,o.uniforms.hi=$l,o.uniforms.color=a,l.drawArrays(l.TRIANGLE_STRIP,0,4)}),Kl.dispose=function(){this.vbo.dispose(),this.shader.dispose()};var rs={ge:es(">=",!1,"GE"),gt:es(">",!1,"GT"),lt:es("<",!0,"LT"),le:es("<=",!0,"LE"),eq:es("-",!0,"EQ",!0)};function ns(t,e,r,n,a){var i=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),r?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function as(t,e,r,n){return new Function([ns("A","x"+t+"y",e,["y"],n),ns("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}var is={ge:as(">=",!1,"GE"),gt:as(">",!1,"GT"),lt:as("<",!0,"LT"),le:as("<=",!0,"LE"),eq:as("-",!0,"EQ",!0)},os=function(t){var e=t.gl,r=Fo(e),n=Yl(e,Bo.gridVert,Bo.gridFrag),a=Yl(e,Bo.tickVert,Bo.gridFrag);return new ls(t,r,n,a)};function ls(t,e,r,n){this.plot=t,this.vbo=e,this.shader=r,this.tickShader=n,this.ticks=[[],[]]}function ss(t,e){return t-e}var us,cs,fs,hs,ds,ps=ls.prototype;ps.draw=(us=[0,0],cs=[0,0],fs=[0,0],function(){for(var t=this.plot,e=this.vbo,r=this.shader,n=this.ticks,a=t.gl,i=t._tickBounds,o=t.dataBox,l=t.viewBox,s=t.gridLineWidth,u=t.gridLineColor,c=t.gridLineEnable,f=t.pixelRatio,h=0;h<2;++h){var d=i[h],p=i[h+2]-d,g=.5*(o[h+2]+o[h]),v=o[h+2]-o[h];cs[h]=2*p/v,us[h]=2*(d-g)/v}r.bind(),e.bind(),r.attributes.dataCoord.pointer(),r.uniforms.dataShift=us,r.uniforms.dataScale=cs;var m=0;for(h=0;h<2;++h){fs[0]=fs[1]=0,fs[h]=1,r.uniforms.dataAxis=fs,r.uniforms.lineWidth=s[h]/(l[h+2]-l[h])*f,r.uniforms.color=u[h];var y=6*n[h].length;c[h]&&y&&a.drawArrays(a.TRIANGLES,m,y),m+=y}}),ps.drawTickMarks=function(){var t=[0,0],e=[0,0],r=[1,0],n=[0,1],a=[0,0],i=[0,0];return function(){for(var o=this.plot,l=this.vbo,s=this.tickShader,u=this.ticks,c=o.gl,f=o._tickBounds,h=o.dataBox,d=o.viewBox,p=o.pixelRatio,g=o.screenBox,v=g[2]-g[0],m=g[3]-g[1],y=d[2]-d[0],x=d[3]-d[1],b=0;b<2;++b){var _=f[b],w=f[b+2]-_,A=.5*(h[b+2]+h[b]),M=h[b+2]-h[b];e[b]=2*w/M,t[b]=2*(_-A)/M}e[0]*=y/v,t[0]*=y/v,e[1]*=x/m,t[1]*=x/m,s.bind(),l.bind(),s.attributes.dataCoord.pointer();var T=s.uniforms;T.dataShift=t,T.dataScale=e;var k=o.tickMarkLength,E=o.tickMarkWidth,C=o.tickMarkColor,S=6*u[0].length,L=Math.min(is.ge(u[0],(h[0]-f[0])/(f[2]-f[0]),ss),u[0].length),O=Math.min(is.gt(u[0],(h[2]-f[0])/(f[2]-f[0]),ss),u[0].length),R=0+6*L,D=6*Math.max(0,O-L),I=Math.min(is.ge(u[1],(h[1]-f[1])/(f[3]-f[1]),ss),u[1].length),P=Math.min(is.gt(u[1],(h[3]-f[1])/(f[3]-f[1]),ss),u[1].length),F=S+6*I,z=6*Math.max(0,P-I);a[0]=2*(d[0]-k[1])/v-1,a[1]=(d[3]+d[1])/m-1,i[0]=k[1]*p/v,i[1]=E[1]*p/m,z&&(T.color=C[1],T.tickScale=i,T.dataAxis=n,T.screenOffset=a,c.drawArrays(c.TRIANGLES,F,z)),a[0]=(d[2]+d[0])/v-1,a[1]=2*(d[1]-k[0])/m-1,i[0]=E[0]*p/v,i[1]=k[0]*p/m,D&&(T.color=C[0],T.tickScale=i,T.dataAxis=r,T.screenOffset=a,c.drawArrays(c.TRIANGLES,R,D)),a[0]=2*(d[2]+k[3])/v-1,a[1]=(d[3]+d[1])/m-1,i[0]=k[3]*p/v,i[1]=E[3]*p/m,z&&(T.color=C[3],T.tickScale=i,T.dataAxis=n,T.screenOffset=a,c.drawArrays(c.TRIANGLES,F,z)),a[0]=(d[2]+d[0])/v-1,a[1]=2*(d[3]+k[2])/m-1,i[0]=E[2]*p/v,i[1]=k[2]*p/m,D&&(T.color=C[2],T.tickScale=i,T.dataAxis=r,T.screenOffset=a,c.drawArrays(c.TRIANGLES,R,D))}}(),ps.update=(hs=[1,1,-1,-1,1,-1],ds=[1,-1,1,1,-1,-1],function(t){for(var e=t.ticks,r=t.bounds,n=new Float32Array(18*(e[0].length+e[1].length)),a=(this.plot.zeroLineEnable,0),i=[[],[]],o=0;o<2;++o)for(var l=i[o],s=e[o],u=r[o],c=r[o+2],f=0;f<s.length;++f){var h=(s[f].x-u)/(c-u);l.push(h);for(var d=0;d<6;++d)n[a++]=h,n[a++]=hs[d],n[a++]=ds[d]}this.ticks=i,this.vbo.update(n)}),ps.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};var gs=function(t){var e=t.gl,r=Fo(e,[-1,-1,-1,1,1,-1,1,1]),n=Yl(e,Bo.lineVert,Bo.lineFrag);return new vs(t,r,n)};function vs(t,e,r){this.plot=t,this.vbo=e,this.shader=r}var ms,ys,xs=vs.prototype;xs.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},xs.drawLine=(ms=[0,0],ys=[0,0],function(t,e,r,n,a,i){var o=this.plot,l=this.shader,s=o.gl;ms[0]=t,ms[1]=e,ys[0]=r,ys[1]=n,l.uniforms.start=ms,l.uniforms.end=ys,l.uniforms.width=a*o.pixelRatio,l.uniforms.color=i,s.drawArrays(s.TRIANGLE_STRIP,0,4)}),xs.dispose=function(){this.vbo.dispose(),this.shader.dispose()};var bs,_s,ws,As=bs={};function Ms(){throw new Error("setTimeout has not been defined")}function Ts(){throw new Error("clearTimeout has not been defined")}function ks(t){if(_s===setTimeout)return setTimeout(t,0);if((_s===Ms||!_s)&&setTimeout)return _s=setTimeout,setTimeout(t,0);try{return _s(t,0)}catch(e){try{return _s.call(null,t,0)}catch(e){return _s.call(this,t,0)}}}!function(){try{_s="function"==typeof setTimeout?setTimeout:Ms}catch(t){_s=Ms}try{ws="function"==typeof clearTimeout?clearTimeout:Ts}catch(t){ws=Ts}}();var Es,Cs=[],Ss=!1,Ls=-1;function Os(){Ss&&Es&&(Ss=!1,Es.length?Cs=Es.concat(Cs):Ls=-1,Cs.length&&Rs())}function Rs(){if(!Ss){var t=ks(Os);Ss=!0;for(var e=Cs.length;e;){for(Es=Cs,Cs=[];++Ls<e;)Es&&Es[Ls].run();Ls=-1,e=Cs.length}Es=null,Ss=!1,function(t){if(ws===clearTimeout)return clearTimeout(t);if((ws===Ts||!ws)&&clearTimeout)return ws=clearTimeout,clearTimeout(t);try{ws(t)}catch(e){try{return ws.call(null,t)}catch(e){return ws.call(this,t)}}}(t)}}function Ds(t,e){this.fun=t,this.array=e}function Is(){}As.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Cs.push(new Ds(t,e)),1!==Cs.length||Ss||ks(Rs)},Ds.prototype.run=function(){this.fun.apply(null,this.array)},As.title="browser",As.browser=!0,As.env={},As.argv=[],As.version="",As.versions={},As.on=Is,As.addListener=Is,As.once=Is,As.off=Is,As.removeListener=Is,As.removeAllListeners=Is,As.emit=Is,As.prependListener=Is,As.prependOnceListener=Is,As.listeners=function(t){return[]},As.binding=function(t){throw new Error("process.binding is not supported")},As.cwd=function(){return"/"},As.chdir=function(t){throw new Error("process.chdir is not supported")},As.umask=function(){return 0};var Ps=function(t,e,r){var n=t*e,a=Fs*t,i=a-(a-t),o=t-i,l=Fs*e,s=l-(l-e),u=e-s,c=o*u-(n-i*s-o*s-i*u);if(r)return r[0]=c,r[1]=n,r;return[c,n]},Fs=+(Math.pow(2,27)+1);var zs=function(t,e,r){var n=t+e,a=n-t,i=e-a,o=t-(n-a);if(r)return r[0]=o+i,r[1]=n,r;return[o+i,n]};var Ns=function(t,e){var r=t.length;if(1===r){var n=Ps(t[0],e);return n[0]?n:[n[1]]}var a=new Array(2*r),i=[.1,.1],o=[.1,.1],l=0;Ps(t[0],e,i),i[0]&&(a[l++]=i[0]);for(var s=1;s<r;++s){Ps(t[s],e,o);var u=i[1];zs(u,o[0],i),i[0]&&(a[l++]=i[0]);var c=o[1],f=i[1],h=c+f,d=h-c,p=f-d;i[1]=h,p&&(a[l++]=p)}i[1]&&(a[l++]=i[1]);0===l&&(a[l++]=0);return a.length=l,a};var Bs=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,a=t-(r-n)+(e-n);if(a)return[a,r];return[r]}(t[0],-e[0]);var a,i,o=new Array(r+n),l=0,s=0,u=0,c=Math.abs,f=t[s],h=c(f),d=-e[u],p=c(d);h<p?(i=f,(s+=1)<r&&(f=t[s],h=c(f))):(i=d,(u+=1)<n&&(d=-e[u],p=c(d)));s<r&&h<p||u>=n?(a=f,(s+=1)<r&&(f=t[s],h=c(f))):(a=d,(u+=1)<n&&(d=-e[u],p=c(d)));var g,v,m=a+i,y=m-a,x=i-y,b=x,_=m;for(;s<r&&u<n;)h<p?(a=f,(s+=1)<r&&(f=t[s],h=c(f))):(a=d,(u+=1)<n&&(d=-e[u],p=c(d))),(x=(i=b)-(y=(m=a+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g;for(;s<r;)(x=(i=b)-(y=(m=(a=f)+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(s+=1)<r&&(f=t[s]);for(;u<n;)(x=(i=b)-(y=(m=(a=d)+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(u+=1)<n&&(d=-e[u]);b&&(o[l++]=b);_&&(o[l++]=_);l||(o[l++]=0);return o.length=l,o};var js=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,a=t-(r-n)+(e-n);if(a)return[a,r];return[r]}(t[0],e[0]);var a,i,o=new Array(r+n),l=0,s=0,u=0,c=Math.abs,f=t[s],h=c(f),d=e[u],p=c(d);h<p?(i=f,(s+=1)<r&&(f=t[s],h=c(f))):(i=d,(u+=1)<n&&(d=e[u],p=c(d)));s<r&&h<p||u>=n?(a=f,(s+=1)<r&&(f=t[s],h=c(f))):(a=d,(u+=1)<n&&(d=e[u],p=c(d)));var g,v,m=a+i,y=m-a,x=i-y,b=x,_=m;for(;s<r&&u<n;)h<p?(a=f,(s+=1)<r&&(f=t[s],h=c(f))):(a=d,(u+=1)<n&&(d=e[u],p=c(d))),(x=(i=b)-(y=(m=a+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g;for(;s<r;)(x=(i=b)-(y=(m=(a=f)+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(s+=1)<r&&(f=t[s]);for(;u<n;)(x=(i=b)-(y=(m=(a=d)+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(u+=1)<n&&(d=e[u]);b&&(o[l++]=b);_&&(o[l++]=_);l||(o[l++]=0);return o.length=l,o};var Us={},Vs=6;function Hs(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var a=r[n-1]=new Array(t.length-1),i=0,o=0;i<t.length;++i)i!==e&&(a[o++]=t[n][i]);return r}function qs(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",qs(t.slice(0,e)),",",qs(t.slice(e)),")"].join("")}function Gs(t,e){if("m"===t.charAt(0)){if("w"===e.charAt(0)){var r=t.split("[");return["w",e.substr(1),"m",r[0].substr(1)].join("")}return["prod(",t,",",e,")"].join("")}return Gs(e,t)}function Xs(t){if(2===t.length)return[["diff(",Gs(t[0][0],t[1][1]),",",Gs(t[1][0],t[0][1]),")"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",qs(Xs(Hs(t,r))),",",(n=r,!0&n?"-":""),t[0][r],")"].join(""));return e;var n}function Ws(t,e){for(var r=[],n=0;n<e-2;++n)r.push(["prod(m",t,"[",n,"],m",t,"[",n,"])"].join(""));return qs(r)}function Ys(t){for(var e=[],r=[],n=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-2,"]"].join("")}return e}(t),a=0;a<t;++a)n[0][a]="1",n[t-1][a]="w"+a;for(a=0;a<t;++a)0==(1&a)?e.push.apply(e,Xs(Hs(n,a))):r.push.apply(r,Xs(Hs(n,a)));var i=qs(e),o=qs(r),l="exactInSphere"+t,s=[];for(a=0;a<t;++a)s.push("m"+a);var u=["function ",l,"(",s.join(),"){"];for(a=0;a<t;++a){u.push("var w",a,"=",Ws(a,t),";");for(var c=0;c<t;++c)c!==a&&u.push("var w",a,"m",c,"=scale(w",a,",m",c,"[0]);")}return u.push("var p=",i,",n=",o,",d=diff(p,n);return d[d.length-1];}return ",l),new Function("sum","diff","prod","scale",u.join(""))(js,Bs,Ps,Ns)}var Zs=[function(){return 0},function(){return 0},function(){return 0}];!function(){for(;Zs.length<=Vs;)Zs.push(Ys(Zs.length));for(var t=[],e=["slow"],r=0;r<=Vs;++r)t.push("a"+r),e.push("o"+r);var n=["function testInSphere(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=Vs;++r)n.push("case ",r,":return o",r,"(",t.slice(0,r).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),e.push(n.join(""));var a=Function.apply(void 0,e);for(Us=a.apply(void 0,[function(t){var e=Zs[t.length];return e||(e=Zs[t.length]=Ys(t.length)),e.apply(void 0,t)}].concat(Zs)),r=0;r<=Vs;++r)Us[r]=Zs[r]}();var Js=Us[4],Qs=function(t,e){for(var r=[],n=t.length,a=e.stars,i=0;i<n;++i)for(var o=a[i],l=1;l<o.length;l+=2){var s=o[l];if(!(s<i)&&!e.isConstraint(i,s)){for(var u=o[l-1],c=-1,f=1;f<o.length;f+=2)if(o[f-1]===s){c=o[f];break}c<0||Js(t[i],t[s],t[u],t[c])<0&&r.push(i,s)}}for(;r.length>0;){for(var s=r.pop(),i=r.pop(),u=-1,c=-1,o=a[i],h=1;h<o.length;h+=2){var d=o[h-1],p=o[h];d===s?c=p:p===s&&(u=d)}u<0||c<0||(Js(t[i],t[s],t[u],t[c])>=0||(e.flip(i,s),$s(t,e,r,u,i,c),$s(t,e,r,i,c,u),$s(t,e,r,c,s,u),$s(t,e,r,s,u,c)))}};function $s(t,e,r,n,a,i){var o=e.opposite(n,a);if(!(o<0)){if(a<n){var l=n;n=a,a=l,l=i,i=o,o=l}e.isConstraint(n,a)||Js(t[n],t[a],t[i],t[o])<0&&r.push(n,a)}}var Ks,tu=function(t,e,r){var n=function(t,e){for(var r=t.cells(),n=r.length,a=0;a<n;++a){var i=r[a],o=i[0],l=i[1],s=i[2];l<s?l<o&&(i[0]=l,i[1]=s,i[2]=o):s<o&&(i[0]=s,i[1]=o,i[2]=l)}r.sort(ru);for(var u=new Array(n),a=0;a<u.length;++a)u[a]=0;var c=[],f=[],h=new Array(3*n),d=new Array(3*n),p=null;e&&(p=[]);for(var g=new eu(r,h,d,u,c,f,p),a=0;a<n;++a)for(var i=r[a],v=0;v<3;++v){var o=i[v],l=i[(v+1)%3],m=h[3*a+v]=g.locate(l,o,t.opposite(l,o)),y=d[3*a+v]=t.isConstraint(o,l);m<0&&(y?f.push(a):(c.push(a),u[a]=1),e&&p.push([l,o,-1]))}return g}(t,r);if(0===e)return r?n.cells.concat(n.boundary):n.cells;var a=1,i=n.active,o=n.next,l=n.flags,s=n.cells,u=n.constraint,c=n.neighbor;for(;i.length>0||o.length>0;){for(;i.length>0;){var f=i.pop();if(l[f]!==-a){l[f]=a;s[f];for(var h=0;h<3;++h){var d=c[3*f+h];d>=0&&0===l[d]&&(u[3*f+h]?o.push(d):(i.push(d),l[d]=a))}}}var p=o;o=i,i=p,o.length=0,a=-a}var g=function(t,e,r){for(var n=0,a=0;a<t.length;++a)e[a]===r&&(t[n++]=t[a]);return t.length=n,t}(s,l,e);if(r)return g.concat(n.boundary);return g};function eu(t,e,r,n,a,i,o){this.cells=t,this.neighbor=e,this.flags=n,this.constraint=r,this.active=a,this.next=i,this.boundary=o}function ru(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}eu.prototype.locate=(Ks=[0,0,0],function(t,e,r){var n=t,a=e,i=r;return e<r?e<t&&(n=e,a=r,i=t):r<t&&(n=r,a=t,i=e),n<0?-1:(Ks[0]=n,Ks[1]=a,Ks[2]=i,rs.eq(this.cells,Ks,ru))});var nu={},au=5;function iu(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var a=r[n-1]=new Array(t.length-1),i=0,o=0;i<t.length;++i)i!==e&&(a[o++]=t[n][i]);return r}function ou(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",ou(t.slice(0,e)),",",ou(t.slice(e)),")"].join("")}function lu(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",ou(lu(iu(t,r))),",",(n=r,1&n?"-":""),t[0][r],")"].join(""));return e;var n}function su(t){for(var e=[],r=[],n=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}(t),a=[],i=0;i<t;++i)0==(1&i)?e.push.apply(e,lu(iu(n,i))):r.push.apply(r,lu(iu(n,i))),a.push("m"+i);var o=ou(e),l=ou(r),s="orientation"+t+"Exact",u=["function ",s,"(",a.join(),"){var p=",o,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",s].join("");return new Function("sum","prod","scale","sub",u)(js,Ps,Ns,Bs)}var uu=su(3),cu=su(4),fu=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,a=(t[1]-r[1])*(e[0]-r[0]),i=(t[0]-r[0])*(e[1]-r[1]),o=a-i;if(a>0){if(i<=0)return o;n=a+i}else{if(!(a<0))return o;if(i>=0)return o;n=-(a+i)}var l=3.3306690738754716e-16*n;return o>=l||o<=-l?o:uu(t,e,r)},function(t,e,r,n){var a=t[0]-n[0],i=e[0]-n[0],o=r[0]-n[0],l=t[1]-n[1],s=e[1]-n[1],u=r[1]-n[1],c=t[2]-n[2],f=e[2]-n[2],h=r[2]-n[2],d=i*u,p=o*s,g=o*l,v=a*u,m=a*s,y=i*l,x=c*(d-p)+f*(g-v)+h*(m-y),b=7.771561172376103e-16*((Math.abs(d)+Math.abs(p))*Math.abs(c)+(Math.abs(g)+Math.abs(v))*Math.abs(f)+(Math.abs(m)+Math.abs(y))*Math.abs(h));return x>b||-x>b?x:cu(t,e,r,n)}];!function(){for(;fu.length<=au;)fu.push(su(fu.length));for(var t=[],e=["slow"],r=0;r<=au;++r)t.push("a"+r),e.push("o"+r);var n=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=au;++r)n.push("case ",r,":return o",r,"(",t.slice(0,r).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(n.join(""));var a=Function.apply(void 0,e);for(nu=a.apply(void 0,[function(t){var e=fu[t.length];return e||(e=fu[t.length]=su(t.length)),e.apply(void 0,t)}].concat(fu)),r=0;r<=au;++r)nu[r]=fu[r]}();var hu=nu[3],du=0,pu=1,gu=2,vu=function(t,e){for(var r=t.length,n=e.length,a=[],i=0;i<r;++i)a.push(new yu(t[i],null,du,i));for(var i=0;i<n;++i){var o=e[i],l=t[o[0]],s=t[o[1]];l[0]<s[0]?a.push(new yu(l,s,gu,i),new yu(s,l,pu,i)):l[0]>s[0]&&a.push(new yu(s,l,gu,i),new yu(l,s,pu,i))}a.sort(xu);for(var u=a[0].a[0]-(1+Math.abs(a[0].a[0]))*Math.pow(2,-52),c=[new mu([u,1],[u,0],-1,[],[],[],[])],f=[],i=0,h=a.length;i<h;++i){var d=a[i],p=d.type;p===du?_u(f,c,t,d.a,d.idx):p===gu?Au(c,t,d):Mu(c,t,d)}return f};function mu(t,e,r,n,a){this.a=t,this.b=e,this.idx=r,this.lowerIds=n,this.upperIds=a}function yu(t,e,r,n){this.a=t,this.b=e,this.type=r,this.idx=n}function xu(t,e){var r=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return r||(t.type!==du&&(r=hu(t.a,t.b,e.b))?r:t.idx-e.idx)}function bu(t,e){return hu(t.a,t.b,e)}function _u(t,e,r,n,a){for(var i=rs.lt(e,n,bu),o=rs.gt(e,n,bu),l=i;l<o;++l){for(var s=e[l],u=s.lowerIds,c=u.length;c>1&&hu(r[u[c-2]],r[u[c-1]],n)>0;)t.push([u[c-1],u[c-2],a]),c-=1;u.length=c,u.push(a);var f=s.upperIds;for(c=f.length;c>1&&hu(r[f[c-2]],r[f[c-1]],n)<0;)t.push([f[c-2],f[c-1],a]),c-=1;f.length=c,f.push(a)}}function wu(t,e){var r;return(r=t.a[0]<e.a[0]?hu(t.a,t.b,e.a):hu(e.b,e.a,t.a))?r:(r=e.b[0]<t.b[0]?hu(t.a,t.b,e.b):hu(e.b,e.a,t.b))||t.idx-e.idx}function Au(t,e,r){var n=rs.le(t,r,wu),a=t[n],i=a.upperIds,o=i[i.length-1];a.upperIds=[o],t.splice(n+1,0,new mu(r.a,r.b,r.idx,[o],i))}function Mu(t,e,r){var n=r.a;r.a=r.b,r.b=n;var a=rs.eq(t,r,wu),i=t[a];t[a-1].upperIds=i.upperIds,t.splice(a,1)}var Tu=function(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=[];return new ku(r,e)};function ku(t,e){this.stars=t,this.edges=e}var Eu=ku.prototype;function Cu(t,e,r){for(var n=1,a=t.length;n<a;n+=2)if(t[n-1]===e&&t[n]===r)return t[n-1]=t[a-2],t[n]=t[a-1],void(t.length=a-2)}Eu.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(r,n){return t[0]=Math.min(r,n),t[1]=Math.max(r,n),rs.eq(this.edges,t,e)>=0}}(),Eu.removeTriangle=function(t,e,r){var n=this.stars;Cu(n[t],e,r),Cu(n[e],r,t),Cu(n[r],t,e)},Eu.addTriangle=function(t,e,r){var n=this.stars;n[t].push(e,r),n[e].push(r,t),n[r].push(t,e)},Eu.opposite=function(t,e){for(var r=this.stars[e],n=1,a=r.length;n<a;n+=2)if(r[n]===t)return r[n-1];return-1},Eu.flip=function(t,e){var r=this.opposite(t,e),n=this.opposite(e,t);this.removeTriangle(t,e,r),this.removeTriangle(e,t,n),this.addTriangle(t,n,r),this.addTriangle(e,r,n)},Eu.edges=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,o=a.length;i<o;i+=2)e.push([a[i],a[i+1]]);return e},Eu.cells=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,o=a.length;i<o;i+=2){var l=a[i],s=a[i+1];r<Math.min(l,s)&&e.push([r,l,s])}return e};var Su=function(t,e,r){Array.isArray(e)?(r=r||{},e=e||[]):(r=e||{},e=[]);var n=!!Ru(r,"delaunay",!0),a=!!Ru(r,"interior",!0),i=!!Ru(r,"exterior",!0),o=!!Ru(r,"infinity",!1);if(!a&&!i||0===t.length)return[];var l=vu(t,e);if(n||a!==i||o){for(var s=Tu(t.length,function(t){return t.map(Lu).sort(Ou)}(e)),u=0;u<l.length;++u){var c=l[u];s.addTriangle(c[0],c[1],c[2])}return n&&Qs(t,s),i?a?o?tu(s,0,o):s.cells():tu(s,1,o):tu(s,-1)}return l};function Lu(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function Ou(t,e){return t[0]-e[0]||t[1]-e[1]}function Ru(t,e,r){return e in t?t[e]:r}var Du=function(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))};var Iu={},Pu={exports:{}};!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function a(t,e,r){if(a.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var i;"object"==typeof t?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;try{i=Iu.Buffer}catch(t){}function o(t,e,r){for(var n=0,a=Math.min(t.length,r),i=e;i<a;i++){var o=t.charCodeAt(i)-48;n<<=4,n|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return n}function l(t,e,r,n){for(var a=0,i=Math.min(t.length,r),o=e;o<i;o++){var l=t.charCodeAt(o)-48;a*=n,a+=l>=49?l-49+10:l>=17?l-17+10:l}return a}a.isBN=function(t){return t instanceof a||null!==t&&"object"==typeof t&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)},a.max=function(t,e){return t.cmp(e)>0?t:e},a.min=function(t,e){return t.cmp(e)<0?t:e},a.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var a=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&a++,16===e?this._parseHex(t,a):this._parseBase(t,e,a),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},a.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},a.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var i,o,l=0;if("be"===n)for(a=t.length-1,i=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[i]|=o<<l&67108863,this.words[i+1]=o>>>26-l&67108863,(l+=24)>=26&&(l-=26,i++);else if("le"===n)for(a=0,i=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[i]|=o<<l&67108863,this.words[i+1]=o>>>26-l&67108863,(l+=24)>=26&&(l-=26,i++);return this.strip()},a.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,a,i=0;for(r=t.length-6,n=0;r>=e;r-=6)a=o(t,r,r+6),this.words[n]|=a<<i&67108863,this.words[n+1]|=a>>>26-i&4194303,(i+=24)>=26&&(i-=26,n++);r+6!==e&&(a=o(t,e,r+6),this.words[n]|=a<<i&67108863,this.words[n+1]|=a>>>26-i&4194303),this.strip()},a.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,a=1;a<=67108863;a*=e)n++;n--,a=a/e|0;for(var i=t.length-r,o=i%n,s=Math.min(i,i-o)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(a),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var f=1;for(u=l(t,c,t.length,e),c=0;c<o;c++)f*=e;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},a.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},a.prototype.clone=function(){var t=new a(null);return this.copy(t),t},a.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var s=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var a=0|t.words[0],i=0|e.words[0],o=a*i,l=67108863&o,s=o/67108864|0;r.words[0]=l;for(var u=1;u<n;u++){for(var c=s>>>26,f=67108863&s,h=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=h;d++){var p=u-d|0;c+=(o=(a=0|t.words[p])*(i=0|e.words[d])+f)/67108864|0,f=67108863&o}r.words[u]=0|f,s=0|c}return 0!==s?r.words[u]=0|s:r.length--,r.strip()}a.prototype.toString=function(t,e){var n;if(t=t||10,e=0|e||1,16===t||"hex"===t){n="";for(var a=0,i=0,o=0;o<this.length;o++){var l=this.words[o],f=(16777215&(l<<a|i)).toString(16);n=0!==(i=l>>>24-a&16777215)||o!==this.length-1?s[6-f.length]+f+n:f+n,(a+=2)>=26&&(a-=26,o--)}for(0!==i&&(n=i.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var h=u[t],d=c[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(d).toString(t);n=(p=p.idivn(d)).isZero()?g+n:s[h-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(t,e){return r(void 0!==i),this.toArrayLike(i,t,e)},a.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},a.prototype.toArrayLike=function(t,e,n){var a=this.byteLength(),i=n||Math.max(1,a);r(a<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var o,l,s="le"===e,u=new t(i),c=this.clone();if(s){for(l=0;!c.isZero();l++)o=c.andln(255),c.iushrn(8),u[l]=o;for(;l<i;l++)u[l]=0}else{for(l=0;l<i-a;l++)u[l]=0;for(l=0;!c.isZero();l++)o=c.andln(255),c.iushrn(8),u[i-l-1]=o}return u},Math.clz32?a.prototype._countBits=function(t){return 32-Math.clz32(t)}:a.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},a.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},a.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},a.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},a.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},a.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},a.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},a.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},a.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var a=0;a<e;a++)this.words[a]=67108863&~this.words[a];return n>0&&(this.words[a]=~this.words[a]&67108863>>26-n),this.strip()},a.prototype.notn=function(t){return this.clone().inotn(t)},a.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,a=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<a:this.words[n]&~(1<<a),this.strip()},a.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var a=0,i=0;i<n.length;i++)e=(0|r.words[i])+(0|n.words[i])+a,this.words[i]=67108863&e,a=e>>>26;for(;0!==a&&i<r.length;i++)e=(0|r.words[i])+a,this.words[i]=67108863&e,a=e>>>26;if(this.length=r.length,0!==a)this.words[this.length]=a,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},a.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)i=(e=(0|r.words[o])-(0|n.words[o])+i)>>26,this.words[o]=67108863&e;for(;0!==i&&o<r.length;o++)i=(e=(0|r.words[o])+i)>>26,this.words[o]=67108863&e;if(0===i&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(t){return this.clone().isub(t)};var h=function(t,e,r){var n,a,i,o=t.words,l=e.words,s=r.words,u=0,c=0|o[0],f=8191&c,h=c>>>13,d=0|o[1],p=8191&d,g=d>>>13,v=0|o[2],m=8191&v,y=v>>>13,x=0|o[3],b=8191&x,_=x>>>13,w=0|o[4],A=8191&w,M=w>>>13,T=0|o[5],k=8191&T,E=T>>>13,C=0|o[6],S=8191&C,L=C>>>13,O=0|o[7],R=8191&O,D=O>>>13,I=0|o[8],P=8191&I,F=I>>>13,z=0|o[9],N=8191&z,B=z>>>13,j=0|l[0],U=8191&j,V=j>>>13,H=0|l[1],q=8191&H,G=H>>>13,X=0|l[2],W=8191&X,Y=X>>>13,Z=0|l[3],J=8191&Z,Q=Z>>>13,$=0|l[4],K=8191&$,tt=$>>>13,et=0|l[5],rt=8191&et,nt=et>>>13,at=0|l[6],it=8191&at,ot=at>>>13,lt=0|l[7],st=8191&lt,ut=lt>>>13,ct=0|l[8],ft=8191&ct,ht=ct>>>13,dt=0|l[9],pt=8191&dt,gt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var vt=(u+(n=Math.imul(f,U))|0)+((8191&(a=(a=Math.imul(f,V))+Math.imul(h,U)|0))<<13)|0;u=((i=Math.imul(h,V))+(a>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(p,U),a=(a=Math.imul(p,V))+Math.imul(g,U)|0,i=Math.imul(g,V);var mt=(u+(n=n+Math.imul(f,q)|0)|0)+((8191&(a=(a=a+Math.imul(f,G)|0)+Math.imul(h,q)|0))<<13)|0;u=((i=i+Math.imul(h,G)|0)+(a>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,U),a=(a=Math.imul(m,V))+Math.imul(y,U)|0,i=Math.imul(y,V),n=n+Math.imul(p,q)|0,a=(a=a+Math.imul(p,G)|0)+Math.imul(g,q)|0,i=i+Math.imul(g,G)|0;var yt=(u+(n=n+Math.imul(f,W)|0)|0)+((8191&(a=(a=a+Math.imul(f,Y)|0)+Math.imul(h,W)|0))<<13)|0;u=((i=i+Math.imul(h,Y)|0)+(a>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(b,U),a=(a=Math.imul(b,V))+Math.imul(_,U)|0,i=Math.imul(_,V),n=n+Math.imul(m,q)|0,a=(a=a+Math.imul(m,G)|0)+Math.imul(y,q)|0,i=i+Math.imul(y,G)|0,n=n+Math.imul(p,W)|0,a=(a=a+Math.imul(p,Y)|0)+Math.imul(g,W)|0,i=i+Math.imul(g,Y)|0;var xt=(u+(n=n+Math.imul(f,J)|0)|0)+((8191&(a=(a=a+Math.imul(f,Q)|0)+Math.imul(h,J)|0))<<13)|0;u=((i=i+Math.imul(h,Q)|0)+(a>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(A,U),a=(a=Math.imul(A,V))+Math.imul(M,U)|0,i=Math.imul(M,V),n=n+Math.imul(b,q)|0,a=(a=a+Math.imul(b,G)|0)+Math.imul(_,q)|0,i=i+Math.imul(_,G)|0,n=n+Math.imul(m,W)|0,a=(a=a+Math.imul(m,Y)|0)+Math.imul(y,W)|0,i=i+Math.imul(y,Y)|0,n=n+Math.imul(p,J)|0,a=(a=a+Math.imul(p,Q)|0)+Math.imul(g,J)|0,i=i+Math.imul(g,Q)|0;var bt=(u+(n=n+Math.imul(f,K)|0)|0)+((8191&(a=(a=a+Math.imul(f,tt)|0)+Math.imul(h,K)|0))<<13)|0;u=((i=i+Math.imul(h,tt)|0)+(a>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(k,U),a=(a=Math.imul(k,V))+Math.imul(E,U)|0,i=Math.imul(E,V),n=n+Math.imul(A,q)|0,a=(a=a+Math.imul(A,G)|0)+Math.imul(M,q)|0,i=i+Math.imul(M,G)|0,n=n+Math.imul(b,W)|0,a=(a=a+Math.imul(b,Y)|0)+Math.imul(_,W)|0,i=i+Math.imul(_,Y)|0,n=n+Math.imul(m,J)|0,a=(a=a+Math.imul(m,Q)|0)+Math.imul(y,J)|0,i=i+Math.imul(y,Q)|0,n=n+Math.imul(p,K)|0,a=(a=a+Math.imul(p,tt)|0)+Math.imul(g,K)|0,i=i+Math.imul(g,tt)|0;var _t=(u+(n=n+Math.imul(f,rt)|0)|0)+((8191&(a=(a=a+Math.imul(f,nt)|0)+Math.imul(h,rt)|0))<<13)|0;u=((i=i+Math.imul(h,nt)|0)+(a>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(S,U),a=(a=Math.imul(S,V))+Math.imul(L,U)|0,i=Math.imul(L,V),n=n+Math.imul(k,q)|0,a=(a=a+Math.imul(k,G)|0)+Math.imul(E,q)|0,i=i+Math.imul(E,G)|0,n=n+Math.imul(A,W)|0,a=(a=a+Math.imul(A,Y)|0)+Math.imul(M,W)|0,i=i+Math.imul(M,Y)|0,n=n+Math.imul(b,J)|0,a=(a=a+Math.imul(b,Q)|0)+Math.imul(_,J)|0,i=i+Math.imul(_,Q)|0,n=n+Math.imul(m,K)|0,a=(a=a+Math.imul(m,tt)|0)+Math.imul(y,K)|0,i=i+Math.imul(y,tt)|0,n=n+Math.imul(p,rt)|0,a=(a=a+Math.imul(p,nt)|0)+Math.imul(g,rt)|0,i=i+Math.imul(g,nt)|0;var wt=(u+(n=n+Math.imul(f,it)|0)|0)+((8191&(a=(a=a+Math.imul(f,ot)|0)+Math.imul(h,it)|0))<<13)|0;u=((i=i+Math.imul(h,ot)|0)+(a>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(R,U),a=(a=Math.imul(R,V))+Math.imul(D,U)|0,i=Math.imul(D,V),n=n+Math.imul(S,q)|0,a=(a=a+Math.imul(S,G)|0)+Math.imul(L,q)|0,i=i+Math.imul(L,G)|0,n=n+Math.imul(k,W)|0,a=(a=a+Math.imul(k,Y)|0)+Math.imul(E,W)|0,i=i+Math.imul(E,Y)|0,n=n+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Q)|0)+Math.imul(M,J)|0,i=i+Math.imul(M,Q)|0,n=n+Math.imul(b,K)|0,a=(a=a+Math.imul(b,tt)|0)+Math.imul(_,K)|0,i=i+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,a=(a=a+Math.imul(m,nt)|0)+Math.imul(y,rt)|0,i=i+Math.imul(y,nt)|0,n=n+Math.imul(p,it)|0,a=(a=a+Math.imul(p,ot)|0)+Math.imul(g,it)|0,i=i+Math.imul(g,ot)|0;var At=(u+(n=n+Math.imul(f,st)|0)|0)+((8191&(a=(a=a+Math.imul(f,ut)|0)+Math.imul(h,st)|0))<<13)|0;u=((i=i+Math.imul(h,ut)|0)+(a>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(P,U),a=(a=Math.imul(P,V))+Math.imul(F,U)|0,i=Math.imul(F,V),n=n+Math.imul(R,q)|0,a=(a=a+Math.imul(R,G)|0)+Math.imul(D,q)|0,i=i+Math.imul(D,G)|0,n=n+Math.imul(S,W)|0,a=(a=a+Math.imul(S,Y)|0)+Math.imul(L,W)|0,i=i+Math.imul(L,Y)|0,n=n+Math.imul(k,J)|0,a=(a=a+Math.imul(k,Q)|0)+Math.imul(E,J)|0,i=i+Math.imul(E,Q)|0,n=n+Math.imul(A,K)|0,a=(a=a+Math.imul(A,tt)|0)+Math.imul(M,K)|0,i=i+Math.imul(M,tt)|0,n=n+Math.imul(b,rt)|0,a=(a=a+Math.imul(b,nt)|0)+Math.imul(_,rt)|0,i=i+Math.imul(_,nt)|0,n=n+Math.imul(m,it)|0,a=(a=a+Math.imul(m,ot)|0)+Math.imul(y,it)|0,i=i+Math.imul(y,ot)|0,n=n+Math.imul(p,st)|0,a=(a=a+Math.imul(p,ut)|0)+Math.imul(g,st)|0,i=i+Math.imul(g,ut)|0;var Mt=(u+(n=n+Math.imul(f,ft)|0)|0)+((8191&(a=(a=a+Math.imul(f,ht)|0)+Math.imul(h,ft)|0))<<13)|0;u=((i=i+Math.imul(h,ht)|0)+(a>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(N,U),a=(a=Math.imul(N,V))+Math.imul(B,U)|0,i=Math.imul(B,V),n=n+Math.imul(P,q)|0,a=(a=a+Math.imul(P,G)|0)+Math.imul(F,q)|0,i=i+Math.imul(F,G)|0,n=n+Math.imul(R,W)|0,a=(a=a+Math.imul(R,Y)|0)+Math.imul(D,W)|0,i=i+Math.imul(D,Y)|0,n=n+Math.imul(S,J)|0,a=(a=a+Math.imul(S,Q)|0)+Math.imul(L,J)|0,i=i+Math.imul(L,Q)|0,n=n+Math.imul(k,K)|0,a=(a=a+Math.imul(k,tt)|0)+Math.imul(E,K)|0,i=i+Math.imul(E,tt)|0,n=n+Math.imul(A,rt)|0,a=(a=a+Math.imul(A,nt)|0)+Math.imul(M,rt)|0,i=i+Math.imul(M,nt)|0,n=n+Math.imul(b,it)|0,a=(a=a+Math.imul(b,ot)|0)+Math.imul(_,it)|0,i=i+Math.imul(_,ot)|0,n=n+Math.imul(m,st)|0,a=(a=a+Math.imul(m,ut)|0)+Math.imul(y,st)|0,i=i+Math.imul(y,ut)|0,n=n+Math.imul(p,ft)|0,a=(a=a+Math.imul(p,ht)|0)+Math.imul(g,ft)|0,i=i+Math.imul(g,ht)|0;var Tt=(u+(n=n+Math.imul(f,pt)|0)|0)+((8191&(a=(a=a+Math.imul(f,gt)|0)+Math.imul(h,pt)|0))<<13)|0;u=((i=i+Math.imul(h,gt)|0)+(a>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(N,q),a=(a=Math.imul(N,G))+Math.imul(B,q)|0,i=Math.imul(B,G),n=n+Math.imul(P,W)|0,a=(a=a+Math.imul(P,Y)|0)+Math.imul(F,W)|0,i=i+Math.imul(F,Y)|0,n=n+Math.imul(R,J)|0,a=(a=a+Math.imul(R,Q)|0)+Math.imul(D,J)|0,i=i+Math.imul(D,Q)|0,n=n+Math.imul(S,K)|0,a=(a=a+Math.imul(S,tt)|0)+Math.imul(L,K)|0,i=i+Math.imul(L,tt)|0,n=n+Math.imul(k,rt)|0,a=(a=a+Math.imul(k,nt)|0)+Math.imul(E,rt)|0,i=i+Math.imul(E,nt)|0,n=n+Math.imul(A,it)|0,a=(a=a+Math.imul(A,ot)|0)+Math.imul(M,it)|0,i=i+Math.imul(M,ot)|0,n=n+Math.imul(b,st)|0,a=(a=a+Math.imul(b,ut)|0)+Math.imul(_,st)|0,i=i+Math.imul(_,ut)|0,n=n+Math.imul(m,ft)|0,a=(a=a+Math.imul(m,ht)|0)+Math.imul(y,ft)|0,i=i+Math.imul(y,ht)|0;var kt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(a=(a=a+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;u=((i=i+Math.imul(g,gt)|0)+(a>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(N,W),a=(a=Math.imul(N,Y))+Math.imul(B,W)|0,i=Math.imul(B,Y),n=n+Math.imul(P,J)|0,a=(a=a+Math.imul(P,Q)|0)+Math.imul(F,J)|0,i=i+Math.imul(F,Q)|0,n=n+Math.imul(R,K)|0,a=(a=a+Math.imul(R,tt)|0)+Math.imul(D,K)|0,i=i+Math.imul(D,tt)|0,n=n+Math.imul(S,rt)|0,a=(a=a+Math.imul(S,nt)|0)+Math.imul(L,rt)|0,i=i+Math.imul(L,nt)|0,n=n+Math.imul(k,it)|0,a=(a=a+Math.imul(k,ot)|0)+Math.imul(E,it)|0,i=i+Math.imul(E,ot)|0,n=n+Math.imul(A,st)|0,a=(a=a+Math.imul(A,ut)|0)+Math.imul(M,st)|0,i=i+Math.imul(M,ut)|0,n=n+Math.imul(b,ft)|0,a=(a=a+Math.imul(b,ht)|0)+Math.imul(_,ft)|0,i=i+Math.imul(_,ht)|0;var Et=(u+(n=n+Math.imul(m,pt)|0)|0)+((8191&(a=(a=a+Math.imul(m,gt)|0)+Math.imul(y,pt)|0))<<13)|0;u=((i=i+Math.imul(y,gt)|0)+(a>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(N,J),a=(a=Math.imul(N,Q))+Math.imul(B,J)|0,i=Math.imul(B,Q),n=n+Math.imul(P,K)|0,a=(a=a+Math.imul(P,tt)|0)+Math.imul(F,K)|0,i=i+Math.imul(F,tt)|0,n=n+Math.imul(R,rt)|0,a=(a=a+Math.imul(R,nt)|0)+Math.imul(D,rt)|0,i=i+Math.imul(D,nt)|0,n=n+Math.imul(S,it)|0,a=(a=a+Math.imul(S,ot)|0)+Math.imul(L,it)|0,i=i+Math.imul(L,ot)|0,n=n+Math.imul(k,st)|0,a=(a=a+Math.imul(k,ut)|0)+Math.imul(E,st)|0,i=i+Math.imul(E,ut)|0,n=n+Math.imul(A,ft)|0,a=(a=a+Math.imul(A,ht)|0)+Math.imul(M,ft)|0,i=i+Math.imul(M,ht)|0;var Ct=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(a=(a=a+Math.imul(b,gt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((i=i+Math.imul(_,gt)|0)+(a>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(N,K),a=(a=Math.imul(N,tt))+Math.imul(B,K)|0,i=Math.imul(B,tt),n=n+Math.imul(P,rt)|0,a=(a=a+Math.imul(P,nt)|0)+Math.imul(F,rt)|0,i=i+Math.imul(F,nt)|0,n=n+Math.imul(R,it)|0,a=(a=a+Math.imul(R,ot)|0)+Math.imul(D,it)|0,i=i+Math.imul(D,ot)|0,n=n+Math.imul(S,st)|0,a=(a=a+Math.imul(S,ut)|0)+Math.imul(L,st)|0,i=i+Math.imul(L,ut)|0,n=n+Math.imul(k,ft)|0,a=(a=a+Math.imul(k,ht)|0)+Math.imul(E,ft)|0,i=i+Math.imul(E,ht)|0;var St=(u+(n=n+Math.imul(A,pt)|0)|0)+((8191&(a=(a=a+Math.imul(A,gt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((i=i+Math.imul(M,gt)|0)+(a>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(N,rt),a=(a=Math.imul(N,nt))+Math.imul(B,rt)|0,i=Math.imul(B,nt),n=n+Math.imul(P,it)|0,a=(a=a+Math.imul(P,ot)|0)+Math.imul(F,it)|0,i=i+Math.imul(F,ot)|0,n=n+Math.imul(R,st)|0,a=(a=a+Math.imul(R,ut)|0)+Math.imul(D,st)|0,i=i+Math.imul(D,ut)|0,n=n+Math.imul(S,ft)|0,a=(a=a+Math.imul(S,ht)|0)+Math.imul(L,ft)|0,i=i+Math.imul(L,ht)|0;var Lt=(u+(n=n+Math.imul(k,pt)|0)|0)+((8191&(a=(a=a+Math.imul(k,gt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((i=i+Math.imul(E,gt)|0)+(a>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(N,it),a=(a=Math.imul(N,ot))+Math.imul(B,it)|0,i=Math.imul(B,ot),n=n+Math.imul(P,st)|0,a=(a=a+Math.imul(P,ut)|0)+Math.imul(F,st)|0,i=i+Math.imul(F,ut)|0,n=n+Math.imul(R,ft)|0,a=(a=a+Math.imul(R,ht)|0)+Math.imul(D,ft)|0,i=i+Math.imul(D,ht)|0;var Ot=(u+(n=n+Math.imul(S,pt)|0)|0)+((8191&(a=(a=a+Math.imul(S,gt)|0)+Math.imul(L,pt)|0))<<13)|0;u=((i=i+Math.imul(L,gt)|0)+(a>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(N,st),a=(a=Math.imul(N,ut))+Math.imul(B,st)|0,i=Math.imul(B,ut),n=n+Math.imul(P,ft)|0,a=(a=a+Math.imul(P,ht)|0)+Math.imul(F,ft)|0,i=i+Math.imul(F,ht)|0;var Rt=(u+(n=n+Math.imul(R,pt)|0)|0)+((8191&(a=(a=a+Math.imul(R,gt)|0)+Math.imul(D,pt)|0))<<13)|0;u=((i=i+Math.imul(D,gt)|0)+(a>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(N,ft),a=(a=Math.imul(N,ht))+Math.imul(B,ft)|0,i=Math.imul(B,ht);var Dt=(u+(n=n+Math.imul(P,pt)|0)|0)+((8191&(a=(a=a+Math.imul(P,gt)|0)+Math.imul(F,pt)|0))<<13)|0;u=((i=i+Math.imul(F,gt)|0)+(a>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var It=(u+(n=Math.imul(N,pt))|0)+((8191&(a=(a=Math.imul(N,gt))+Math.imul(B,pt)|0))<<13)|0;return u=((i=Math.imul(B,gt))+(a>>>13)|0)+(It>>>26)|0,It&=67108863,s[0]=vt,s[1]=mt,s[2]=yt,s[3]=xt,s[4]=bt,s[5]=_t,s[6]=wt,s[7]=At,s[8]=Mt,s[9]=Tt,s[10]=kt,s[11]=Et,s[12]=Ct,s[13]=St,s[14]=Lt,s[15]=Ot,s[16]=Rt,s[17]=Dt,s[18]=It,0!==u&&(s[19]=u,r.length++),r};function d(t,e,r){return(new p).mulp(t,e,r)}function p(t,e){this.x=t,this.y=e}Math.imul||(h=f),a.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?h(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,a=0,i=0;i<r.length-1;i++){var o=a;a=0;for(var l=67108863&n,s=Math.min(i,e.length-1),u=Math.max(0,i-t.length+1);u<=s;u++){var c=i-u,f=(0|t.words[c])*(0|e.words[u]),h=67108863&f;l=67108863&(h=h+l|0),a+=(o=(o=o+(f/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[i]=l,n=o,o=a}return 0!==n?r.words[i]=n:r.length--,r.strip()}(this,t,e):d(this,t,e)},p.prototype.makeRBT=function(t){for(var e=new Array(t),r=a.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},p.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,a=0;a<e;a++)n|=(1&t)<<e-a-1,t>>=1;return n},p.prototype.permute=function(t,e,r,n,a,i){for(var o=0;o<i;o++)n[o]=e[t[o]],a[o]=r[t[o]]},p.prototype.transform=function(t,e,r,n,a,i){this.permute(i,t,e,r,n,a);for(var o=1;o<a;o<<=1)for(var l=o<<1,s=Math.cos(2*Math.PI/l),u=Math.sin(2*Math.PI/l),c=0;c<a;c+=l)for(var f=s,h=u,d=0;d<o;d++){var p=r[c+d],g=n[c+d],v=r[c+d+o],m=n[c+d+o],y=f*v-h*m;m=f*m+h*v,v=y,r[c+d]=p+v,n[c+d]=g+m,r[c+d+o]=p-v,n[c+d+o]=g-m,d!==l&&(y=s*f-u*h,h=s*h+u*f,f=y)}},p.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,a=0;for(r=r/2|0;r;r>>>=1)a++;return 1<<a+1+n},p.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var a=t[n];t[n]=t[r-n-1],t[r-n-1]=a,a=e[n],e[n]=-e[r-n-1],e[r-n-1]=-a}},p.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var a=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&a,r=a<67108864?0:a/67108864|0}return t},p.prototype.convert13b=function(t,e,n,a){for(var i=0,o=0;o<e;o++)i+=0|t[o],n[2*o]=8191&i,i>>>=13,n[2*o+1]=8191&i,i>>>=13;for(o=2*e;o<a;++o)n[o]=0;r(0===i),r(0==(-8192&i))},p.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},p.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),a=this.makeRBT(n),i=this.stub(n),o=new Array(n),l=new Array(n),s=new Array(n),u=new Array(n),c=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,u,n),this.transform(o,i,l,s,n,a),this.transform(u,i,c,f,n,a);for(var d=0;d<n;d++){var p=l[d]*c[d]-s[d]*f[d];s[d]=l[d]*f[d]+s[d]*c[d],l[d]=p}return this.conjugate(l,s,n),this.transform(l,s,h,i,n,a),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},a.prototype.mul=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},a.prototype.mulf=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),d(this,t,e)},a.prototype.imul=function(t){return this.clone().mulTo(t,this)},a.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var a=(0|this.words[n])*t,i=(67108863&a)+(67108863&e);e>>=26,e+=a/67108864|0,e+=i>>>26,this.words[n]=67108863&i}return 0!==e&&(this.words[n]=e,this.length++),this},a.prototype.muln=function(t){return this.clone().imuln(t)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,a=r%26;e[r]=(t.words[n]&1<<a)>>>a}return e}(t);if(0===e.length)return new a(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,a=(t-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(e=0;e<this.length;e++){var l=this.words[e]&i,s=(0|this.words[e])-l<<n;this.words[e]=s|o,o=l>>>26-n}o&&(this.words[e]=o,this.length++)}if(0!==a){for(e=this.length-1;e>=0;e--)this.words[e+a]=this.words[e];for(e=0;e<a;e++)this.words[e]=0;this.length+=a}return this.strip()},a.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},a.prototype.iushrn=function(t,e,n){var a;r("number"==typeof t&&t>=0),a=e?(e-e%26)/26:0;var i=t%26,o=Math.min((t-i)/26,this.length),l=67108863^67108863>>>i<<i,s=n;if(a-=o,a=Math.max(0,a),s){for(var u=0;u<o;u++)s.words[u]=this.words[u];s.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=a);u--){var f=0|this.words[u];this.words[u]=c<<26-i|f>>>i,c=f&l}return s&&0!==c&&(s.words[s.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},a.prototype.shln=function(t){return this.clone().ishln(t)},a.prototype.ushln=function(t){return this.clone().iushln(t)},a.prototype.shrn=function(t){return this.clone().ishrn(t)},a.prototype.ushrn=function(t){return this.clone().iushrn(t)},a.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,a=1<<e;return!(this.length<=n)&&!!(this.words[n]&a)},a.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var a=67108863^67108863>>>e<<e;this.words[this.length-1]&=a}return this.strip()},a.prototype.maskn=function(t){return this.clone().imaskn(t)},a.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},a.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},a.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},a.prototype.addn=function(t){return this.clone().iaddn(t)},a.prototype.subn=function(t){return this.clone().isubn(t)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(t,e,n){var a,i,o=t.length+n;this._expand(o);var l=0;for(a=0;a<t.length;a++){i=(0|this.words[a+n])+l;var s=(0|t.words[a])*e;l=((i-=67108863&s)>>26)-(s/67108864|0),this.words[a+n]=67108863&i}for(;a<this.length-n;a++)l=(i=(0|this.words[a+n])+l)>>26,this.words[a+n]=67108863&i;if(0===l)return this.strip();for(r(-1===l),l=0,a=0;a<this.length;a++)l=(i=-(0|this.words[a])+l)>>26,this.words[a]=67108863&i;return this.negative=1,this.strip()},a.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var l,s=n.length-i.length;if("mod"!==e){(l=new a(null)).length=s+1,l.words=new Array(l.length);for(var u=0;u<l.length;u++)l.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,s);0===c.negative&&(n=c,l&&(l.words[s]=1));for(var f=s-1;f>=0;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(h=Math.min(h/o|0,67108863),n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);l&&(l.words[f]=h)}return l&&l.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:l||null,mod:n}},a.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===t.negative?(l=this.neg().divmod(t,e),"mod"!==e&&(i=l.div.neg()),"div"!==e&&(o=l.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(l=this.divmod(t.neg(),e),"mod"!==e&&(i=l.div.neg()),{div:i,mod:l.mod}):0!=(this.negative&t.negative)?(l=this.neg().divmod(t.neg(),e),"div"!==e&&(o=l.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:l.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new a(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,o,l},a.prototype.div=function(t){return this.divmod(t,"div",!1).div},a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},a.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),a=t.andln(1),i=r.cmp(n);return i<0||1===a&&0===i?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},a.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,a=this.length-1;a>=0;a--)n=(e*n+(0|this.words[a]))%t;return n},a.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var a=(0|this.words[n])+67108864*e;this.words[n]=a/t|0,e=a%t}return this.strip()},a.prototype.divn=function(t){return this.clone().idivn(t)},a.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new a(1),o=new a(0),l=new a(0),s=new a(1),u=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++u;for(var c=n.clone(),f=e.clone();!e.isZero();){for(var h=0,d=1;0==(e.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(e.iushrn(h);h-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(c),o.isub(f)),i.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(l.isOdd()||s.isOdd())&&(l.iadd(c),s.isub(f)),l.iushrn(1),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(l),o.isub(s)):(n.isub(e),l.isub(i),s.isub(o))}return{a:l,b:s,gcd:n.iushln(u)}},a.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,o=new a(1),l=new a(0),s=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,c=1;0==(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);for(var f=0,h=1;0==(n.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(n.iushrn(f);f-- >0;)l.isOdd()&&l.iadd(s),l.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(l)):(n.isub(e),l.isub(o))}return(i=0===e.cmpn(1)?o:l).cmpn(0)<0&&i.iadd(t),i},a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var a=e.cmp(r);if(a<0){var i=e;e=r,r=i}else if(0===a||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},a.prototype.invm=function(t){return this.egcd(t).a.umod(t)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(t){return this.words[0]&t},a.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,a=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=a,this;for(var i=a,o=n;0!==i&&o<this.length;o++){var l=0|this.words[o];i=(l+=i)>>>26,l&=67108863,this.words[o]=l}return 0!==i&&(this.words[o]=i,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var a=0|this.words[0];e=a===t?0:a<t?-1:1}return 0!==this.negative?0|-e:e},a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],a=0|t.words[r];if(n!==a){n<a?e=-1:n>a&&(e=1);break}}return e},a.prototype.gtn=function(t){return 1===this.cmpn(t)},a.prototype.gt=function(t){return 1===this.cmp(t)},a.prototype.gten=function(t){return this.cmpn(t)>=0},a.prototype.gte=function(t){return this.cmp(t)>=0},a.prototype.ltn=function(t){return-1===this.cmpn(t)},a.prototype.lt=function(t){return-1===this.cmp(t)},a.prototype.lten=function(t){return this.cmpn(t)<=0},a.prototype.lte=function(t){return this.cmp(t)<=0},a.prototype.eqn=function(t){return 0===this.cmpn(t)},a.prototype.eq=function(t){return 0===this.cmp(t)},a.red=function(t){return new _(t)},a.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(t){return this.red=t,this},a.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},a.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},a.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},a.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},a.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},a.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},a.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},a.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new a(e,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function m(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){if("string"==typeof t){var e=a._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function w(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new a(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},n(m,v),m.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var a=t.words[9];for(e.words[e.length++]=4194303&a,n=10;n<t.length;n++){var i=0|t.words[n];t.words[n-10]=(4194303&i)<<4|a>>>22,a=i}a>>>=22,t.words[n-10]=a,0===a&&t.length>10?t.length-=10:t.length-=9},m.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(y,v),n(x,v),n(b,v),b.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,a=67108863&n;n>>>=26,t.words[r]=a,e=n}return 0!==e&&(t.words[t.length++]=e),t},a._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new m;else if("p224"===t)e=new y;else if("p192"===t)e=new x;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new b}return g[t]=e,e},_.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},_.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},_.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},_.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},_.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},_.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},_.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},_.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},_.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},_.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new a(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var l=new a(1).toRed(this),s=l.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);0!==this.pow(c,u).cmp(s);)c.redIAdd(s);for(var f=this.pow(c,i),h=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=o;0!==d.cmp(l);){for(var g=d,v=0;0!==g.cmp(l);v++)g=g.redSqr();r(v<p);var m=this.pow(f,new a(1).iushln(p-v-1));h=h.redMul(m),f=m.redSqr(),d=d.redMul(f),p=v}return h},_.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},_.prototype.pow=function(t,e){if(e.isZero())return new a(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new a(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],o=0,l=0,s=e.bitLength()%26;for(0===s&&(s=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=s-1;c>=0;c--){var f=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==o?(o<<=1,o|=f,(4===++l||0===n&&0===c)&&(i=this.mul(i,r[o]),l=0,o=0)):l=0}s=26}return i},_.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},_.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},a.mont=function(t){return new w(t)},n(w,_),w.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},w.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},w.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),i=a;return a.cmp(this.m)>=0?i=a.isub(this.m):a.cmpn(0)<0&&(i=a.iadd(this.m)),i._forceRed(this)},w.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new a(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},w.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Pu,this),Pu=Pu.exports;var Fu=function(t){return t.cmp(new Pu(0))};var zu={};(function(t){var e=!1;if("undefined"!=typeof Float64Array){var r=new Float64Array(1),n=new Uint32Array(r.buffer);if(r[0]=1,e=!0,1072693248===n[1]){(zu=function(t){return r[0]=t,[n[0],n[1]]}).pack=function(t,e){return n[0]=t,n[1]=e,r[0]},zu.lo=function(t){return r[0]=t,n[0]},zu.hi=function(t){return r[0]=t,n[1]}}else if(1072693248===n[0]){(zu=function(t){return r[0]=t,[n[1],n[0]]}).pack=function(t,e){return n[1]=t,n[0]=e,r[0]},zu.lo=function(t){return r[0]=t,n[1]},zu.hi=function(t){return r[0]=t,n[0]}}else e=!1}if(!e){var a=new t(8);(zu=function(t){return a.writeDoubleLE(t,0,!0),[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]}).pack=function(t,e){return a.writeUInt32LE(t,0,!0),a.writeUInt32LE(e,4,!0),a.readDoubleLE(0,!0)},zu.lo=function(t){return a.writeDoubleLE(t,0,!0),a.readUInt32LE(0,!0)},zu.hi=function(t){return a.writeDoubleLE(t,0,!0),a.readUInt32LE(4,!0)}}zu.sign=function(t){return zu.hi(t)>>>31},zu.exponent=function(t){return(zu.hi(t)<<1>>>21)-1023},zu.fraction=function(t){var e=zu.lo(t),r=zu.hi(t),n=1048575&r;return 2146435072&r&&(n+=1<<20),[e,n]},zu.denormalized=function(t){return!(2146435072&zu.hi(t))}}).call(this,qi.Buffer);var Nu=function(t){var e=zu.exponent(t);return e<52?new Pu(t):new Pu(t*Math.pow(2,52-e)).ushln(e-52)};var Bu=function(t,e){var r=Fu(t),n=Fu(e);if(0===r)return[Nu(0),Nu(1)];if(0===n)return[Nu(0),Nu(0)];n<0&&(t=t.neg(),e=e.neg());var a=t.gcd(e);if(a.cmpn(1))return[t.div(a),e.div(a)];return[t,e]};var ju=function(t,e){return Bu(t[0].mul(e[1]),t[1].mul(e[0]))};var Uu=function(t){return t&&"object"==typeof t&&Boolean(t.words)};var Vu=function(t){return Array.isArray(t)&&2===t.length&&Uu(t[0])&&Uu(t[1])};var Hu=function(t){return new Pu(t)};var qu=function t(e,r){if(Vu(e))return r?ju(e,t(r)):[e[0].clone(),e[1].clone()];var n=0;var a,i;if(Uu(e))a=e.clone();else if("string"==typeof e)a=Hu(e);else{if(0===e)return[Nu(0),Nu(1)];if(e===Math.floor(e))a=Nu(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),n-=256;a=Nu(e)}}if(Vu(r))a.mul(r[1]),i=r[0].clone();else if(Uu(r))i=r.clone();else if("string"==typeof r)i=Hu(r);else if(r)if(r===Math.floor(r))i=Nu(r);else{for(;r!==Math.floor(r);)r*=Math.pow(2,256),n+=256;i=Nu(r)}else i=Nu(1);n>0?a=a.ushln(n):n<0&&(i=i.ushln(-n));return Bu(a,i)};var Gu=function(t){var e=t.length,r=t.words,n=0;if(1===e)n=r[0];else if(2===e)n=r[0]+67108864*r[1];else for(var a=0;a<e;a++){var i=r[a];n+=i*Math.pow(67108864,a)}return Fu(t)*n};var Xu=Oi.countTrailingZeros,Wu=function(t){var e=Xu(zu.lo(t));if(e<32)return e;var r=Xu(zu.hi(t));if(r>20)return 52;return r+32};var Yu=function(t){var e=t[0],r=t[1];if(0===e.cmpn(0))return 0;var n=e.abs().divmod(r.abs()),a=n.div,i=Gu(a),o=n.mod,l=e.negative!==r.negative?-1:1;if(0===o.cmpn(0))return l*i;if(i){var s=Wu(i)+4,u=Gu(o.ushln(s).divRound(r));return l*(i+u*Math.pow(2,-s))}var c=r.bitLength()-o.bitLength()+53,u=Gu(o.ushln(c).divRound(r));return c<1023?l*u*Math.pow(2,-c):(u*=Math.pow(2,-1023),l*u*Math.pow(2,1023-c))};var Zu={},Ju="d",Qu="ax",$u="vv",Ku="fp",tc="es",ec="rs",rc="re",nc="rb",ac="ri",ic="rp",oc="bs",lc="be",sc="bb",uc="bi",cc="bp",fc="rv",hc="Q",dc=[Ju,Qu,$u,ec,rc,nc,ac,oc,lc,sc,uc];function pc(t){var e="bruteForce"+(t?"Full":"Partial"),r=[],n=dc.slice();t||n.splice(3,0,Ku);var a=["function "+e+"("+n.join()+"){"];function i(e,n){var i=function(t,e,r){var n="bruteForce"+(t?"Red":"Blue")+(e?"Flip":"")+(r?"Full":""),a=["function ",n,"(",dc.join(),"){","var ",tc,"=2*",Ju,";"],i="for(var i="+ec+","+ic+"="+tc+"*"+ec+";i<"+rc+";++i,"+ic+"+="+tc+"){var x0="+nc+"["+Qu+"+"+ic+"],x1="+nc+"["+Qu+"+"+ic+"+"+Ju+"],xi="+ac+"[i];",o="for(var j="+oc+","+cc+"="+tc+"*"+oc+";j<"+lc+";++j,"+cc+"+="+tc+"){var y0="+sc+"["+Qu+"+"+cc+"],"+(r?"y1="+sc+"["+Qu+"+"+cc+"+"+Ju+"],":"")+"yi="+uc+"[j];";return t?a.push(i,hc,":",o):a.push(o,hc,":",i),r?a.push("if(y1<x0||x1<y0)continue;"):e?a.push("if(y0<=x0||x1<y0)continue;"):a.push("if(y0<x0||x1<y0)continue;"),a.push("for(var k="+Qu+"+1;k<"+Ju+";++k){var r0="+nc+"[k+"+ic+"],r1="+nc+"[k+"+Ju+"+"+ic+"],b0="+sc+"[k+"+cc+"],b1="+sc+"[k+"+Ju+"+"+cc+"];if(r1<b0||b1<r0)continue "+hc+";}var "+fc+"="+$u+"("),e?a.push("yi,xi"):a.push("xi,yi"),a.push(");if("+fc+"!==void 0)return "+fc+";}}}"),{name:n,code:a.join("")}}(e,n,t);r.push(i.code),a.push("return "+i.name+"("+dc.join()+");")}a.push("if("+rc+"-"+ec+">"+lc+"-"+oc+"){"),t?(i(!0,!1),a.push("}else{"),i(!1,!1)):(a.push("if("+Ku+"){"),i(!0,!0),a.push("}else{"),i(!0,!1),a.push("}}else{if("+Ku+"){"),i(!1,!0),a.push("}else{"),i(!1,!1),a.push("}")),a.push("}}return "+e);var o=r.join("")+a.join("");return new Function(o)()}Zu.partial=pc(!1),Zu.full=pc(!0);var gc=function(t,e){var r="abcdef".split("").concat(e),n=[];t.indexOf("lo")>=0&&n.push("lo=e[k+n]");t.indexOf("hi")>=0&&n.push("hi=e[k+o]");return r.push(vc.replace("_",n.join()).replace("$",t)),Function.apply(void 0,r)},vc="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";var mc=function(t,e,r,n,a,i){if(n<=r+1)return r;var o=r,l=n,s=n+r>>>1,u=2*t,c=s,f=a[u*s+e];for(;o<l;){if(l-o<xc){bc(t,e,o,l,a,i),f=a[u*s+e];break}var h=l-o,d=Math.random()*h+o|0,p=a[u*d+e],g=Math.random()*h+o|0,v=a[u*g+e],m=Math.random()*h+o|0,y=a[u*m+e];p<=v?y>=v?(c=g,f=v):p>=y?(c=d,f=p):(c=m,f=y):v>=y?(c=g,f=v):y>=p?(c=d,f=p):(c=m,f=y);for(var x=u*(l-1),b=u*c,_=0;_<u;++_,++x,++b){var w=a[x];a[x]=a[b],a[b]=w}var A=i[l-1];i[l-1]=i[c],i[c]=A,c=yc(t,e,o,l-1,a,i,f);for(var x=u*(l-1),b=u*c,_=0;_<u;++_,++x,++b){var w=a[x];a[x]=a[b],a[b]=w}var A=i[l-1];if(i[l-1]=i[c],i[c]=A,s<c){for(l=c-1;o<l&&a[u*(l-1)+e]===f;)l-=1;l+=1}else{if(!(c<s))break;for(o=c+1;o<l&&a[u*o+e]===f;)o+=1}}return yc(t,e,r,s,a,i,a[u*s+e])},yc=gc("lo<p0",["p0"]),xc=8;function bc(t,e,r,n,a,i){for(var o=2*t,l=o*(r+1)+e,s=r+1;s<n;++s,l+=o)for(var u=a[l],c=s,f=o*(s-1);c>r&&a[f+e]>u;--c,f-=o){for(var h=f,d=f+o,p=0;p<o;++p,++h,++d){var g=a[h];a[h]=a[d],a[d]=g}var v=i[c];i[c]=i[c-1],i[c-1]=v}}var _c=function(t,e){e<=4*wc?Ac(0,e-1,t):function t(e,r,n){var a=(r-e+1)/6|0,i=e+a,o=r-a,l=e+r>>1,s=l-a,u=l+a,c=i,f=s,h=l,d=u,p=o,g=e+1,v=r-1,m=0;Cc(c,f,n)&&(m=c,c=f,f=m);Cc(d,p,n)&&(m=d,d=p,p=m);Cc(c,h,n)&&(m=c,c=h,h=m);Cc(f,h,n)&&(m=f,f=h,h=m);Cc(c,d,n)&&(m=c,c=d,d=m);Cc(h,d,n)&&(m=h,h=d,d=m);Cc(f,p,n)&&(m=f,f=p,p=m);Cc(f,h,n)&&(m=f,f=h,h=m);Cc(d,p,n)&&(m=d,d=p,p=m);var y=n[2*f];var x=n[2*f+1];var b=n[2*d];var _=n[2*d+1];var w=2*c;var A=2*h;var M=2*p;var T=2*i;var k=2*l;var E=2*o;for(var C=0;C<2;++C){var S=n[w+C],L=n[A+C],O=n[M+C];n[T+C]=S,n[k+C]=L,n[E+C]=O}Tc(s,e,n);Tc(u,r,n);for(var R=g;R<=v;++R)if(Sc(R,y,x,n))R!==g&&Mc(R,g,n),++g;else if(!Sc(R,b,_,n))for(;;){if(Sc(v,b,_,n)){Sc(v,y,x,n)?(kc(R,g,v,n),++g,--v):(Mc(R,v,n),--v);break}if(--v<R)break}Ec(e,g-1,y,x,n);Ec(r,v+1,b,_,n);g-2-e<=wc?Ac(e,g-2,n):t(e,g-2,n);r-(v+2)<=wc?Ac(v+2,r,n):t(v+2,r,n);v-g<=wc?Ac(g,v,n):t(g,v,n)}(0,e-1,t)},wc=32;function Ac(t,e,r){for(var n=2*(t+1),a=t+1;a<=e;++a){for(var i=r[n++],o=r[n++],l=a,s=n-2;l-- >t;){var u=r[s-2],c=r[s-1];if(u<i)break;if(u===i&&c<o)break;r[s]=u,r[s+1]=c,s-=2}r[s]=i,r[s+1]=o}}function Mc(t,e,r){e*=2;var n=r[t*=2],a=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=n,r[e+1]=a}function Tc(t,e,r){e*=2,r[t*=2]=r[e],r[t+1]=r[e+1]}function kc(t,e,r,n){e*=2,r*=2;var a=n[t*=2],i=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=n[r],n[e+1]=n[r+1],n[r]=a,n[r+1]=i}function Ec(t,e,r,n,a){e*=2,a[t*=2]=a[e],a[e]=r,a[t+1]=a[e+1],a[e+1]=n}function Cc(t,e,r){e*=2;var n=r[t*=2],a=r[e];return!(n<a)&&(n!==a||r[t+1]>r[e+1])}function Sc(t,e,r,n){var a=n[t*=2];return a<e||a===e&&n[t+1]<r}var Lc={init:function(t){var e=Oi.nextPow2(t);Rc.length<e&&(Lo.free(Rc),Rc=Lo.mallocInt32(e));Dc.length<e&&(Lo.free(Dc),Dc=Lo.mallocInt32(e));Ic.length<e&&(Lo.free(Ic),Ic=Lo.mallocInt32(e));Pc.length<e&&(Lo.free(Pc),Pc=Lo.mallocInt32(e));Fc.length<e&&(Lo.free(Fc),Fc=Lo.mallocInt32(e));zc.length<e&&(Lo.free(zc),zc=Lo.mallocInt32(e));var r=8*e;Nc.length<r&&(Lo.free(Nc),Nc=Lo.mallocDouble(r))},sweepBipartite:function(t,e,r,n,a,i,o,l,s,u){for(var c=0,f=2*t,h=t-1,d=f-1,p=r;p<n;++p){var g=i[p],v=f*p;Nc[c++]=a[v+h],Nc[c++]=-(g+1),Nc[c++]=a[v+d],Nc[c++]=g}for(var p=o;p<l;++p){var g=u[p]+Oc,m=f*p;Nc[c++]=s[m+h],Nc[c++]=-g,Nc[c++]=s[m+d],Nc[c++]=g}var y=c>>>1;_c(Nc,y);for(var x=0,b=0,p=0;p<y;++p){var _=0|Nc[2*p+1];if(_>=Oc)Bc(Ic,Pc,b--,_=_-Oc|0);else if(_>=0)Bc(Rc,Dc,x--,_);else if(_<=-Oc){_=-_-Oc|0;for(var w=0;w<x;++w){var A=e(Rc[w],_);if(void 0!==A)return A}jc(Ic,Pc,b++,_)}else{_=-_-1|0;for(var w=0;w<b;++w){var A=e(_,Ic[w]);if(void 0!==A)return A}jc(Rc,Dc,x++,_)}}},sweepComplete:function(t,e,r,n,a,i,o,l,s,u){for(var c=0,f=2*t,h=t-1,d=f-1,p=r;p<n;++p){var g=i[p]+1<<1,v=f*p;Nc[c++]=a[v+h],Nc[c++]=-g,Nc[c++]=a[v+d],Nc[c++]=g}for(var p=o;p<l;++p){var g=u[p]+1<<1,m=f*p;Nc[c++]=s[m+h],Nc[c++]=1|-g,Nc[c++]=s[m+d],Nc[c++]=1|g}var y=c>>>1;_c(Nc,y);for(var x=0,b=0,_=0,p=0;p<y;++p){var w=0|Nc[2*p+1],A=1&w;if(p<y-1&&w>>1==Nc[2*p+3]>>1&&(A=2,p+=1),w<0){for(var M=-(w>>1)-1,T=0;T<_;++T){var k=e(Fc[T],M);if(void 0!==k)return k}if(0!==A)for(var T=0;T<x;++T){var k=e(Rc[T],M);if(void 0!==k)return k}if(1!==A)for(var T=0;T<b;++T){var k=e(Ic[T],M);if(void 0!==k)return k}0===A?jc(Rc,Dc,x++,M):1===A?jc(Ic,Pc,b++,M):2===A&&jc(Fc,zc,_++,M)}else{var M=(w>>1)-1;0===A?Bc(Rc,Dc,x--,M):1===A?Bc(Ic,Pc,b--,M):2===A&&Bc(Fc,zc,_--,M)}}},scanBipartite:function(t,e,r,n,a,i,o,l,s,u,c,f){var h=0,d=2*t,p=e,g=e+t,v=1,m=1;n?m=Oc:v=Oc;for(var y=a;y<i;++y){var x=y+v,b=d*y;Nc[h++]=o[b+p],Nc[h++]=-x,Nc[h++]=o[b+g],Nc[h++]=x}for(var y=s;y<u;++y){var x=y+m,_=d*y;Nc[h++]=c[_+p],Nc[h++]=-x}var w=h>>>1;_c(Nc,w);for(var A=0,y=0;y<w;++y){var M=0|Nc[2*y+1];if(M<0){var x=-M,T=!1;if(x>=Oc?(T=!n,x-=Oc):(T=!!n,x-=1),T)jc(Rc,Dc,A++,x);else{var k=f[x],E=d*x,C=c[E+e+1],S=c[E+e+1+t];t:for(var L=0;L<A;++L){var O=Rc[L],R=d*O;if(!(S<o[R+e+1]||o[R+e+1+t]<C)){for(var D=e+2;D<t;++D)if(c[E+D+t]<o[R+D]||o[R+D+t]<c[E+D])continue t;var I,P=l[O];if(void 0!==(I=n?r(k,P):r(P,k)))return I}}}}else Bc(Rc,Dc,A--,M-v)}},scanComplete:function(t,e,r,n,a,i,o,l,s,u,c){for(var f=0,h=2*t,d=e,p=e+t,g=n;g<a;++g){var v=g+Oc,m=h*g;Nc[f++]=i[m+d],Nc[f++]=-v,Nc[f++]=i[m+p],Nc[f++]=v}for(var g=l;g<s;++g){var v=g+1,y=h*g;Nc[f++]=u[y+d],Nc[f++]=-v}var x=f>>>1;_c(Nc,x);for(var b=0,g=0;g<x;++g){var _=0|Nc[2*g+1];if(_<0){var v=-_;if(v>=Oc)Rc[b++]=v-Oc;else{var w=c[v-=1],A=h*v,M=u[A+e+1],T=u[A+e+1+t];t:for(var k=0;k<b;++k){var E=Rc[k],C=o[E];if(C===w)break;var S=h*E;if(!(T<i[S+e+1]||i[S+e+1+t]<M)){for(var L=e+2;L<t;++L)if(u[A+L+t]<i[S+L]||i[S+L+t]<u[A+L])continue t;var O=r(C,w);if(void 0!==O)return O}}}}else{for(var v=_-Oc,k=b-1;k>=0;--k)if(Rc[k]===v){for(var L=k+1;L<b;++L)Rc[L-1]=Rc[L];break}--b}}}},Oc=1<<28,Rc=Lo.mallocInt32(1024),Dc=Lo.mallocInt32(1024),Ic=Lo.mallocInt32(1024),Pc=Lo.mallocInt32(1024),Fc=Lo.mallocInt32(1024),zc=Lo.mallocInt32(1024),Nc=Lo.mallocDouble(8192);function Bc(t,e,r,n){var a=e[n],i=t[r-1];t[a]=i,e[i]=a}function jc(t,e,r,n){t[r]=n,e[n]=r}var Uc=function(t,e,r,n,a,i,o,l,s){!function(t,e){var r=8*Oi.log2(e+1)*(t+1)|0,n=Oi.nextPow2(Kc*r);ef.length<n&&(Lo.free(ef),ef=Lo.mallocInt32(n));var a=Oi.nextPow2(tf*r);rf<a&&(Lo.free(rf),rf=Lo.mallocDouble(a))}(t,n+o);var u,c=0,f=2*t;nf(c++,0,0,n,0,o,r?16:0,-1/0,1/0),r||nf(c++,0,0,o,0,n,1,-1/0,1/0);for(;c>0;){var h=(c-=1)*Kc,d=ef[h],p=ef[h+1],g=ef[h+2],v=ef[h+3],m=ef[h+4],y=ef[h+5],x=c*tf,b=rf[x],_=rf[x+1],w=1&y,A=!!(16&y),M=a,T=i,k=l,E=s;if(w&&(M=l,T=s,k=a,E=i),!(2&y&&(g=Zc(t,d,p,g,M,T,_),p>=g)||4&y&&(p=Jc(t,d,p,g,M,T,b))>=g)){var C=g-p,S=m-v;if(A){if(t*C*(C+S)<Xc){if(void 0!==(u=Lc.scanComplete(t,d,e,p,g,M,T,v,m,k,E)))return u;continue}}else{if(t*Math.min(C,S)<qc){if(void 0!==(u=Vc(t,d,e,w,p,g,M,T,v,m,k,E)))return u;continue}if(t*C*S<Gc){if(void 0!==(u=Lc.scanBipartite(t,d,e,w,p,g,M,T,v,m,k,E)))return u;continue}}var L=Wc(t,d,p,g,M,T,b,_);if(p<L)if(t*(L-p)<qc){if(void 0!==(u=Hc(t,d+1,e,p,L,M,T,v,m,k,E)))return u}else if(d===t-2){if(void 0!==(u=w?Lc.sweepBipartite(t,e,v,m,k,E,p,L,M,T):Lc.sweepBipartite(t,e,p,L,M,T,v,m,k,E)))return u}else nf(c++,d+1,p,L,v,m,w,-1/0,1/0),nf(c++,d+1,v,m,p,L,1^w,-1/0,1/0);if(L<g){var O=mc(t,d,v,m,k,E),R=k[f*O+d],D=Yc(t,d,O,m,k,E,R);if(D<m&&nf(c++,d,L,g,D,m,(4|w)+(A?16:0),R,_),v<O&&nf(c++,d,L,g,v,O,(2|w)+(A?16:0),b,R),O+1===D){if(void 0!==(u=A?of(t,d,e,L,g,M,T,O,k,E[O]):af(t,d,e,w,L,g,M,T,O,k,E[O])))return u}else if(O<D){var I;if(A){if(I=Qc(t,d,L,g,M,T,R),L<I){var P=Yc(t,d,L,I,M,T,R);if(d===t-2){if(L<P&&void 0!==(u=Lc.sweepComplete(t,e,L,P,M,T,O,D,k,E)))return u;if(P<I&&void 0!==(u=Lc.sweepBipartite(t,e,P,I,M,T,O,D,k,E)))return u}else L<P&&nf(c++,d+1,L,P,O,D,16,-1/0,1/0),P<I&&(nf(c++,d+1,P,I,O,D,0,-1/0,1/0),nf(c++,d+1,O,D,P,I,1,-1/0,1/0))}}else I=w?$c(t,d,L,g,M,T,R):Qc(t,d,L,g,M,T,R),L<I&&(d===t-2?u=w?Lc.sweepBipartite(t,e,O,D,k,E,L,I,M,T):Lc.sweepBipartite(t,e,L,I,M,T,O,D,k,E):(nf(c++,d+1,L,I,O,D,w,-1/0,1/0),nf(c++,d+1,O,D,L,I,1^w,-1/0,1/0)))}}}}},Vc=Zu.partial,Hc=Zu.full,qc=128,Gc=1<<22,Xc=1<<22,Wc=gc("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),Yc=gc("lo===p0",["p0"]),Zc=gc("lo<p0",["p0"]),Jc=gc("hi<=p0",["p0"]),Qc=gc("lo<=p0&&p0<=hi",["p0"]),$c=gc("lo<p0&&p0<=hi",["p0"]),Kc=6,tf=2,ef=Lo.mallocInt32(1024),rf=Lo.mallocDouble(1024);function nf(t,e,r,n,a,i,o,l,s){var u=Kc*t;ef[u]=e,ef[u+1]=r,ef[u+2]=n,ef[u+3]=a,ef[u+4]=i,ef[u+5]=o;var c=tf*t;rf[c]=l,rf[c+1]=s}function af(t,e,r,n,a,i,o,l,s,u,c){var f=2*t,h=s*f,d=u[h+e];t:for(var p=a,g=a*f;p<i;++p,g+=f){var v=o[g+e],m=o[g+e+t];if(!(d<v||m<d)&&(!n||d!==v)){for(var y,x=l[p],b=e+1;b<t;++b){v=o[g+b],m=o[g+b+t];var _=u[h+b],w=u[h+b+t];if(m<_||w<v)continue t}if(void 0!==(y=n?r(c,x):r(x,c)))return y}}}function of(t,e,r,n,a,i,o,l,s,u){var c=2*t,f=l*c,h=s[f+e];t:for(var d=n,p=n*c;d<a;++d,p+=c){var g=o[d];if(g!==u){var v=i[p+e],m=i[p+e+t];if(!(h<v||m<h)){for(var y=e+1;y<t;++y){v=i[p+y],m=i[p+y+t];var x=s[f+y],b=s[f+y+t];if(m<x||b<v)continue t}var _=r(g,u);if(void 0!==_)return _}}}}var lf,sf=function(t,e,r){switch(arguments.length){case 1:return lf=[],ff(n=t,n,hf,!0),lf;case 2:return"function"==typeof e?ff(t,t,e,!0):function(t,e){return lf=[],ff(t,e,hf,!1),lf}(t,e);case 3:return ff(t,e,r,!1);default:throw new Error("box-intersect: Invalid arguments")}var n};function uf(t,e){for(var r=0;r<t;++r)if(!(e[r]<=e[r+t]))return!0;return!1}function cf(t,e,r,n){for(var a=0,i=0,o=0,l=t.length;o<l;++o){var s=t[o];if(!uf(e,s)){for(var u=0;u<2*e;++u)r[a++]=s[u];n[i++]=o}}return i}function ff(t,e,r,n){var a=t.length,i=e.length;if(!(a<=0||i<=0)){var o=t[0].length>>>1;if(!(o<=0)){var l,s=Lo.mallocDouble(2*o*a),u=Lo.mallocInt32(a);if((a=cf(t,o,s,u))>0){if(1===o&&n)Lc.init(a),l=Lc.sweepComplete(o,r,0,a,s,u,0,a,s,u);else{var c=Lo.mallocDouble(2*o*i),f=Lo.mallocInt32(i);(i=cf(e,o,c,f))>0&&(Lc.init(a+i),l=1===o?Lc.sweepBipartite(o,r,0,a,s,u,0,i,c,f):Uc(o,r,n,a,s,u,i,c,f),Lo.free(c),Lo.free(f))}Lo.free(s),Lo.free(u)}return l}}}function hf(t,e){lf.push([t,e])}var df=function(t,e){return Bu(t[0].mul(e[0]),t[1].mul(e[1]))};var pf=function(t){return Fu(t[0])*Fu(t[1])};var gf=function(t,e){return Bu(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))};var vf=function(t,e){return Bu(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))};var mf=function(t,e){for(var r=t.length,n=new Array(r),a=0;a<r;++a)n[a]=vf(t[a],e[a]);return n};var yf=function(t,e){for(var r=qu(e),n=t.length,a=new Array(n),i=0;i<n;++i)a[i]=df(t[i],r);return a};var xf=function(t,e){for(var r=t.length,n=new Array(r),a=0;a<r;++a)n[a]=gf(t[a],e[a]);return n};var bf=function(t,e,r,n){var a=xf(e,t),i=xf(n,r),o=_f(a,i);if(0===pf(o))return null;var l=xf(t,r),s=_f(i,l),u=ju(s,o),c=yf(a,u);return mf(t,c)};function _f(t,e){return gf(df(t[0],e[1]),df(t[1],e[0]))}var wf=Math.pow(2,-1074),Af=-1>>>0,Mf=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-wf:wf;var r=zu.hi(t),n=zu.lo(t);e>t==t>0?n===Af?(r+=1,n=0):n+=1:0===n?(n=Af,r-=1):n-=1;return zu.pack(n,r)};var Tf=function(t){for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=qu(t[r]);return e};var kf=function(t,e,r,n){var a=Ef(t,r,n),i=Ef(e,r,n);if(a>0&&i>0||a<0&&i<0)return!1;var o=Ef(r,t,e),l=Ef(n,t,e);if(o>0&&l>0||o<0&&l<0)return!1;if(0===a&&0===i&&0===o&&0===l)return function(t,e,r,n){for(var a=0;a<2;++a){var i=t[a],o=e[a],l=Math.min(i,o),s=Math.max(i,o),u=r[a],c=n[a],f=Math.min(u,c),h=Math.max(u,c);if(h<l||s<f)return!1}return!0}(t,e,r,n);return!0},Ef=nu[3];var Cf=Sf;function Sf(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}var Lf=Sf.prototype;Object.defineProperty(Lf,"length",{get:function(){return this.roots.length}}),Lf.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},Lf.find=function(t){for(var e=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[e]!==t;){var n=r[e];r[e]=t,e=n}return t},Lf.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var a=this.ranks,i=this.roots,o=a[r],l=a[n];o<l?i[r]=n:l<o?i[n]=r:(i[n]=r,++a[r])}};var Of=function(t,e,r){var n;if(r){n=e;for(var a=new Array(e.length),i=0;i<e.length;++i){var o=e[i];a[i]=[o[0],o[1],r[i]]}e=a}var l=function(t,e,r){var n=If(t,[],Df(t));return zf(e,n,r),!!n}(t,e,!!r);for(;Nf(t,e,!!r);)l=!0;if(r&&l){n.length=0,r.length=0;for(var i=0;i<e.length;++i){var o=e[i];n.push([o[0],o[1]]),r.push(o[2])}}return l};function Rf(t){var e=Yu(t);return[Mf(e,-1/0),Mf(e,1/0)]}function Df(t){for(var e=new Array(t.length),r=0;r<t.length;++r){var n=t[r];e[r]=[Mf(n[0],-1/0),Mf(n[1],-1/0),Mf(n[0],1/0),Mf(n[1],1/0)]}return e}function If(t,e,r){for(var n=e.length,a=new Cf(n),i=[],o=0;o<e.length;++o){var l=e[o],s=Rf(l[0]),u=Rf(l[1]);i.push([Mf(s[0],-1/0),Mf(u[0],-1/0),Mf(s[1],1/0),Mf(u[1],1/0)])}sf(i,function(t,e){a.link(t,e)});var c=!0,f=new Array(n);for(o=0;o<n;++o){(d=a.find(o))!==o&&(c=!1,t[d]=[Math.min(t[o][0],t[d][0]),Math.min(t[o][1],t[d][1])])}if(c)return null;var h=0;for(o=0;o<n;++o){var d;(d=a.find(o))===o?(f[o]=h,t[h++]=t[o]):f[o]=-1}t.length=h;for(o=0;o<n;++o)f[o]<0&&(f[o]=f[a.find(o)]);return f}function Pf(t,e){return t[0]-e[0]||t[1]-e[1]}function Ff(t,e){var r=t[0]-e[0]||t[1]-e[1];return r||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function zf(t,e,r){if(0!==t.length){if(e)for(var n=0;n<t.length;++n){var a=e[(o=t[n])[0]],i=e[o[1]];o[0]=Math.min(a,i),o[1]=Math.max(a,i)}else for(n=0;n<t.length;++n){var o;a=(o=t[n])[0],i=o[1];o[0]=Math.min(a,i),o[1]=Math.max(a,i)}r?t.sort(Ff):t.sort(Pf);var l=1;for(n=1;n<t.length;++n){var s=t[n-1],u=t[n];(u[0]!==s[0]||u[1]!==s[1]||r&&u[2]!==s[2])&&(t[l++]=u)}t.length=l}}function Nf(t,e,r){var n=function(t,e){for(var r=new Array(e.length),n=0;n<e.length;++n){var a=e[n],i=t[a[0]],o=t[a[1]];r[n]=[Mf(Math.min(i[0],o[0]),-1/0),Mf(Math.min(i[1],o[1]),-1/0),Mf(Math.max(i[0],o[0]),1/0),Mf(Math.max(i[1],o[1]),1/0)]}return r}(t,e),a=function(t,e,r){var n=[];return sf(r,function(r,a){var i=e[r],o=e[a];if(i[0]!==o[0]&&i[0]!==o[1]&&i[1]!==o[0]&&i[1]!==o[1]){var l=t[i[0]],s=t[i[1]],u=t[o[0]],c=t[o[1]];kf(l,s,u,c)&&n.push([r,a])}}),n}(t,e,n),i=Df(t),o=function(t,e,r,n){var a=[];return sf(r,n,function(r,n){var i=e[r];if(i[0]!==n&&i[1]!==n){var o=t[n],l=t[i[0]],s=t[i[1]];kf(l,s,o,o)&&a.push([r,n])}}),a}(t,e,n,i),l=If(t,function(t,e,r,n,a){var i,o,l=t.map(function(t){return[qu(t[0]),qu(t[1])]});for(i=0;i<r.length;++i){var s=r[i];o=s[0];var u=s[1],c=e[o],f=e[u],h=bf(Tf(t[c[0]]),Tf(t[c[1]]),Tf(t[f[0]]),Tf(t[f[1]]));if(h){var d=t.length;t.push([Yu(h[0]),Yu(h[1])]),l.push(h),n.push([o,d],[u,d])}}for(n.sort(function(t,e){if(t[0]!==e[0])return t[0]-e[0];var r=l[t[1]],n=l[e[1]];return Du(r[0],n[0])||Du(r[1],n[1])}),i=n.length-1;i>=0;--i){var p=e[o=(w=n[i])[0]],g=p[0],v=p[1],m=t[g],y=t[v];if((m[0]-y[0]||m[1]-y[1])<0){var x=g;g=v,v=x}p[0]=g;var b,_=p[1]=w[1];for(a&&(b=p[2]);i>0&&n[i-1][0]===o;){var w,A=(w=n[--i])[1];a?e.push([_,A,b]):e.push([_,A]),_=A}a?e.push([_,v,b]):e.push([_,v])}return l}(t,e,a,o,r));return zf(e,l,r),!!l||(a.length>0||o.length>0)}var Bf=function(t,e){var r=t.length;if("number"!=typeof e){e=0;for(var n=0;n<r;++n){var a=t[n];e=Math.max(e,a[0],a[1])}e=1+(0|e)}e|=0;for(var i=new Array(e),n=0;n<e;++n)i[n]=[];for(var n=0;n<r;++n){var a=t[n];i[a[0]].push(a[1]),i[a[1]].push(a[0])}for(var o=0;o<e;++o)oi(i[o],function(t,e){return t-e});return i};var jf=function(t,e){if(1===t.length)return Ns(e,t[0]);if(1===e.length)return Ns(t,e[0]);if(0===t.length||0===e.length)return[0];var r=[0];if(t.length<e.length)for(var n=0;n<t.length;++n)r=js(r,Ns(e,t[n]));else for(var n=0;n<e.length;++n)r=js(r,Ns(t,e[n]));return r};var Uf=function(t){return t<0?-1:t>0?1:0},Vf=function(t,e,r,n){var a=nu(e,r,n);if(0===a){var i=Uf(nu(t,e,r)),o=Uf(nu(t,e,n));if(i===o){if(0===i){var l=Hf(t,e,r),s=Hf(t,e,n);return l===s?0:l?1:-1}return 0}return 0===o?i>0?-1:Hf(t,e,n)?-1:1:0===i?o>0?1:Hf(t,e,r)?1:-1:Uf(o-i)}var u=nu(t,e,r);if(u>0)return a>0&&nu(t,e,n)>0?1:-1;if(u<0)return a>0||nu(t,e,n)>0?1:-1;var c=nu(t,e,n);return c>0?1:Hf(t,e,r)?1:-1};function Hf(t,e,r){var n=zs(t[0],-e[0]),a=zs(t[1],-e[1]),i=zs(r[0],-e[0]),o=zs(r[1],-e[1]),l=js(jf(n,i),jf(a,o));return l[l.length-1]>=0}var qf=function(t,e){for(var r=0|e.length,n=t.length,a=[new Array(r),new Array(r)],i=0;i<r;++i)a[0][i]=[],a[1][i]=[];for(var i=0;i<n;++i){var o=t[i];a[0][o[0]].push(o),a[1][o[1]].push(o)}for(var l=[],i=0;i<r;++i)a[0][i].length+a[1][i].length===0&&l.push([i]);function s(t,e){var r=a[e][t[e]];r.splice(r.indexOf(t),1)}function u(t,r,n){for(var i,o,l,u=0;u<2;++u)if(a[u][r].length>0){i=a[u][r][0],l=u;break}o=i[1^l];for(var c=0;c<2;++c)for(var f=a[c][r],h=0;h<f.length;++h){var d=f[h],p=d[1^c],g=Vf(e[t],e[r],e[o],e[p]);g>0&&(i=d,o=p,l=c)}return n?o:(i&&s(i,l),o)}function c(t,r){var n=a[r][t][0],i=[t];s(n,r);for(var o=n[1^r];;){for(;o!==t;)i.push(o),o=u(i[i.length-2],o,!1);if(a[0][t].length+a[1][t].length===0)break;var l=i[i.length-1],c=t,f=i[1],h=u(l,c,!0);if(Vf(e[l],e[c],e[f],e[h])<0)break;i.push(t),o=u(l,c)}return i}function f(t,e){return e[1]===e[e.length-1]}for(var i=0;i<r;++i)for(var h=0;h<2;++h){for(var d=[];a[h][i].length>0;){a[0][i].length;var p=c(i,h);f(d,p)?d.push.apply(d,p):(d.length>0&&l.push(d),d=p)}d.length>0&&l.push(d)}return l};var Gf=function(t,e){for(var r=Bf(t,e.length),n=new Array(e.length),a=new Array(e.length),i=[],o=0;o<e.length;++o){var l=r[o].length;a[o]=l,n[o]=!0,l<=1&&i.push(o)}for(;i.length>0;){var s=i.pop();n[s]=!1;for(var u=r[s],o=0;o<u.length;++o){var c=u[o];0==--a[c]&&i.push(c)}}for(var f=new Array(e.length),h=[],o=0;o<e.length;++o)if(n[o]){var s=h.length;f[o]=s,h.push(e[o])}else f[o]=-1;for(var d=[],o=0;o<t.length;++o){var p=t[o];n[p[0]]&&n[p[1]]&&d.push([f[p[0]],f[p[1]]])}return[d,h]};function Xf(t,e,r,n,a,i){var o=["function ",t,"(a,l,h,",n.join(","),"){",i?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",a?".get(m)":"[m]"];return i?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),i?o.push("return -1};"):o.push("return i};"),o.join("")}function Wf(t,e,r,n){return new Function([Xf("A","x"+t+"y",e,["y"],!1,n),Xf("B","x"+t+"y",e,["y"],!0,n),Xf("P","c(x,y)"+t+"0",e,["y","c"],!1,n),Xf("Q","c(x,y)"+t+"0",e,["y","c"],!0,n),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}var Yf={ge:Wf(">=",!1,"GE"),gt:Wf(">",!1,"GT"),lt:Wf("<",!0,"LT"),le:Wf("<=",!0,"LE"),eq:Wf("-",!0,"EQ",!0)},Zf=0,Jf=1,Qf=function(t){if(!t||0===t.length)return new fh(null);return new fh(ch(t))};function $f(t,e,r,n,a){this.mid=t,this.left=e,this.right=r,this.leftPoints=n,this.rightPoints=a,this.count=(e?e.count:0)+(r?r.count:0)+n.length}var Kf=$f.prototype;function th(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function eh(t,e){var r=ch(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function rh(t,e){var r=t.intervals([]);r.push(e),eh(t,r)}function nh(t,e){var r=t.intervals([]),n=r.indexOf(e);return n<0?Zf:(r.splice(n,1),eh(t,r),Jf)}function ah(t,e,r){for(var n=0;n<t.length&&t[n][0]<=e;++n){var a=r(t[n]);if(a)return a}}function ih(t,e,r){for(var n=t.length-1;n>=0&&t[n][1]>=e;--n){var a=r(t[n]);if(a)return a}}function oh(t,e){for(var r=0;r<t.length;++r){var n=e(t[r]);if(n)return n}}function lh(t,e){return t-e}function sh(t,e){var r=t[0]-e[0];return r||t[1]-e[1]}function uh(t,e){var r=t[1]-e[1];return r||t[0]-e[0]}function ch(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(lh);var n=e[e.length>>1],a=[],i=[],o=[];for(r=0;r<t.length;++r){var l=t[r];l[1]<n?a.push(l):n<l[0]?i.push(l):o.push(l)}var s=o,u=o.slice();return s.sort(sh),u.sort(uh),new $f(n,ch(a),ch(i),s,u)}function fh(t){this.root=t}Kf.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},Kf.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?rh(this,t):this.left.insert(t):this.left=ch([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?rh(this,t):this.right.insert(t):this.right=ch([t]);else{var r=Yf.ge(this.leftPoints,t,sh),n=Yf.ge(this.rightPoints,t,uh);this.leftPoints.splice(r,0,t),this.rightPoints.splice(n,0,t)}},Kf.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid){return this.left?4*(this.right?this.right.count:0)>3*(e-1)?nh(this,t):2===(i=this.left.remove(t))?(this.left=null,this.count-=1,Jf):(i===Jf&&(this.count-=1),i):Zf}else{if(!(t[0]>this.mid)){if(1===this.count)return this.leftPoints[0]===t?2:Zf;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var r=this,n=this.left;n.right;)r=n,n=n.right;if(r===this)n.right=this.right;else{var a=this.left;i=this.right;r.count-=n.count,r.right=n.left,n.left=a,n.right=i}th(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?th(this,this.left):th(this,this.right);return Jf}for(a=Yf.ge(this.leftPoints,t,sh);a<this.leftPoints.length&&this.leftPoints[a][0]===t[0];++a)if(this.leftPoints[a]===t){this.count-=1,this.leftPoints.splice(a,1);for(i=Yf.ge(this.rightPoints,t,uh);i<this.rightPoints.length&&this.rightPoints[i][1]===t[1];++i)if(this.rightPoints[i]===t)return this.rightPoints.splice(i,1),Jf}return Zf}return this.right?4*(this.left?this.left.count:0)>3*(e-1)?nh(this,t):2===(i=this.right.remove(t))?(this.right=null,this.count-=1,Jf):(i===Jf&&(this.count-=1),i):Zf;var i}},Kf.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(r=this.left.queryPoint(t,e))return r;return ah(this.leftPoints,t,e)}if(t>this.mid){var r;if(this.right)if(r=this.right.queryPoint(t,e))return r;return ih(this.rightPoints,t,e)}return oh(this.leftPoints,e)},Kf.queryInterval=function(t,e,r){var n;if(t<this.mid&&this.left&&(n=this.left.queryInterval(t,e,r)))return n;if(e>this.mid&&this.right&&(n=this.right.queryInterval(t,e,r)))return n;return e<this.mid?ah(this.leftPoints,e,r):t>this.mid?ih(this.rightPoints,t,r):oh(this.leftPoints,r)};var hh=fh.prototype;hh.insert=function(t){this.root?this.root.insert(t):this.root=new $f(t[0],null,null,[t],[t])},hh.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),e!==Zf}return!1},hh.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},hh.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(hh,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(hh,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var dh=function(t){return new bh(t||Th,null)},ph=0,gh=1;function vh(t,e,r,n,a,i){this._color=t,this.key=e,this.value=r,this.left=n,this.right=a,this._count=i}function mh(t){return new vh(t._color,t.key,t.value,t.left,t.right,t._count)}function yh(t,e){return new vh(t,e.key,e.value,e.left,e.right,e._count)}function xh(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function bh(t,e){this._compare=t,this.root=e}var _h=bh.prototype;function wh(t,e){this.tree=t,this._stack=e}Object.defineProperty(_h,"keys",{get:function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t}}),Object.defineProperty(_h,"values",{get:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t}}),Object.defineProperty(_h,"length",{get:function(){return this.root?this.root._count:0}}),_h.insert=function(t,e){for(var r=this._compare,n=this.root,a=[],i=[];n;){var o=r(t,n.key);a.push(n),i.push(o),n=o<=0?n.left:n.right}a.push(new vh(ph,t,e,null,null,1));for(var l=a.length-2;l>=0;--l){n=a[l];i[l]<=0?a[l]=new vh(n._color,n.key,n.value,a[l+1],n.right,n._count+1):a[l]=new vh(n._color,n.key,n.value,n.left,a[l+1],n._count+1)}for(l=a.length-1;l>1;--l){var s=a[l-1];n=a[l];if(s._color===gh||n._color===gh)break;var u=a[l-2];if(u.left===s)if(s.left===n){if(!(c=u.right)||c._color!==ph){if(u._color=ph,u.left=s.right,s._color=gh,s.right=u,a[l-2]=s,a[l-1]=n,xh(u),xh(s),l>=3)(f=a[l-3]).left===u?f.left=s:f.right=s;break}s._color=gh,u.right=yh(gh,c),u._color=ph,l-=1}else{if(!(c=u.right)||c._color!==ph){if(s.right=n.left,u._color=ph,u.left=n.right,n._color=gh,n.left=s,n.right=u,a[l-2]=n,a[l-1]=s,xh(u),xh(s),xh(n),l>=3)(f=a[l-3]).left===u?f.left=n:f.right=n;break}s._color=gh,u.right=yh(gh,c),u._color=ph,l-=1}else if(s.right===n){if(!(c=u.left)||c._color!==ph){if(u._color=ph,u.right=s.left,s._color=gh,s.left=u,a[l-2]=s,a[l-1]=n,xh(u),xh(s),l>=3)(f=a[l-3]).right===u?f.right=s:f.left=s;break}s._color=gh,u.left=yh(gh,c),u._color=ph,l-=1}else{var c;if(!(c=u.left)||c._color!==ph){var f;if(s.left=n.right,u._color=ph,u.right=n.left,n._color=gh,n.right=s,n.left=u,a[l-2]=n,a[l-1]=s,xh(u),xh(s),xh(n),l>=3)(f=a[l-3]).right===u?f.right=n:f.left=n;break}s._color=gh,u.left=yh(gh,c),u._color=ph,l-=1}}return a[0]._color=gh,new bh(r,a[0])},_h.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return function t(e,r){var n;if(r.left&&(n=t(e,r.left)))return n;return(n=e(r.key,r.value))||(r.right?t(e,r.right):void 0)}(t,this.root);case 2:return function t(e,r,n,a){if(r(e,a.key)<=0){var i;if(a.left&&(i=t(e,r,n,a.left)))return i;if(i=n(a.key,a.value))return i}if(a.right)return t(e,r,n,a.right)}(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return function t(e,r,n,a,i){var o,l=n(e,i.key),s=n(r,i.key);if(l<=0){if(i.left&&(o=t(e,r,n,a,i.left)))return o;if(s>0&&(o=a(i.key,i.value)))return o}if(s>0&&i.right)return t(e,r,n,a,i.right)}(e,r,this._compare,t,this.root)}},Object.defineProperty(_h,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new wh(this,t)}}),Object.defineProperty(_h,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new wh(this,t)}}),_h.at=function(t){if(t<0)return new wh(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new wh(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new wh(this,[])},_h.ge=function(t){for(var e=this._compare,r=this.root,n=[],a=0;r;){var i=e(t,r.key);n.push(r),i<=0&&(a=n.length),r=i<=0?r.left:r.right}return n.length=a,new wh(this,n)},_h.gt=function(t){for(var e=this._compare,r=this.root,n=[],a=0;r;){var i=e(t,r.key);n.push(r),i<0&&(a=n.length),r=i<0?r.left:r.right}return n.length=a,new wh(this,n)},_h.lt=function(t){for(var e=this._compare,r=this.root,n=[],a=0;r;){var i=e(t,r.key);n.push(r),i>0&&(a=n.length),r=i<=0?r.left:r.right}return n.length=a,new wh(this,n)},_h.le=function(t){for(var e=this._compare,r=this.root,n=[],a=0;r;){var i=e(t,r.key);n.push(r),i>=0&&(a=n.length),r=i<0?r.left:r.right}return n.length=a,new wh(this,n)},_h.find=function(t){for(var e=this._compare,r=this.root,n=[];r;){var a=e(t,r.key);if(n.push(r),0===a)return new wh(this,n);r=a<=0?r.left:r.right}return new wh(this,[])},_h.remove=function(t){var e=this.find(t);return e?e.remove():this},_h.get=function(t){for(var e=this._compare,r=this.root;r;){var n=e(t,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var Ah=wh.prototype;function Mh(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function Th(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(Ah,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(Ah,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),Ah.clone=function(){return new wh(this.tree,this._stack.slice())},Ah.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new vh(r._color,r.key,r.value,r.left,r.right,r._count);for(var n=t.length-2;n>=0;--n){(r=t[n]).left===t[n+1]?e[n]=new vh(r._color,r.key,r.value,e[n+1],r.right,r._count):e[n]=new vh(r._color,r.key,r.value,r.left,e[n+1],r._count)}if((r=e[e.length-1]).left&&r.right){var a=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var i=e[a-1];e.push(new vh(r._color,i.key,i.value,r.left,r.right,r._count)),e[a-1].key=r.key,e[a-1].value=r.value;for(n=e.length-2;n>=a;--n)r=e[n],e[n]=new vh(r._color,r.key,r.value,r.left,e[n+1],r._count);e[a-1].left=e[a]}if((r=e[e.length-1])._color===ph){var o=e[e.length-2];o.left===r?o.left=null:o.right===r&&(o.right=null),e.pop();for(n=0;n<e.length;++n)e[n]._count--;return new bh(this.tree._compare,e[0])}if(r.left||r.right){r.left?Mh(r,r.left):r.right&&Mh(r,r.right),r._color=gh;for(n=0;n<e.length-1;++n)e[n]._count--;return new bh(this.tree._compare,e[0])}if(1===e.length)return new bh(this.tree._compare,null);for(n=0;n<e.length;++n)e[n]._count--;var l=e[e.length-2];return function(t){for(var e,r,n,a,i=t.length-1;i>=0;--i){if(e=t[i],0===i)return void(e._color=gh);if((r=t[i-1]).left===e){if((n=r.right).right&&n.right._color===ph)return a=(n=r.right=mh(n)).right=mh(n.right),r.right=n.left,n.left=r,n.right=a,n._color=r._color,e._color=gh,r._color=gh,a._color=gh,xh(r),xh(n),i>1&&((o=t[i-2]).left===r?o.left=n:o.right=n),void(t[i-1]=n);if(n.left&&n.left._color===ph)return a=(n=r.right=mh(n)).left=mh(n.left),r.right=a.left,n.left=a.right,a.left=r,a.right=n,a._color=r._color,r._color=gh,n._color=gh,e._color=gh,xh(r),xh(n),xh(a),i>1&&((o=t[i-2]).left===r?o.left=a:o.right=a),void(t[i-1]=a);if(n._color===gh){if(r._color===ph)return r._color=gh,void(r.right=yh(ph,n));r.right=yh(ph,n);continue}n=mh(n),r.right=n.left,n.left=r,n._color=r._color,r._color=ph,xh(r),xh(n),i>1&&((o=t[i-2]).left===r?o.left=n:o.right=n),t[i-1]=n,t[i]=r,i+1<t.length?t[i+1]=e:t.push(e),i+=2}else{if((n=r.left).left&&n.left._color===ph)return a=(n=r.left=mh(n)).left=mh(n.left),r.left=n.right,n.right=r,n.left=a,n._color=r._color,e._color=gh,r._color=gh,a._color=gh,xh(r),xh(n),i>1&&((o=t[i-2]).right===r?o.right=n:o.left=n),void(t[i-1]=n);if(n.right&&n.right._color===ph)return a=(n=r.left=mh(n)).right=mh(n.right),r.left=a.right,n.right=a.left,a.right=r,a.left=n,a._color=r._color,r._color=gh,n._color=gh,e._color=gh,xh(r),xh(n),xh(a),i>1&&((o=t[i-2]).right===r?o.right=a:o.left=a),void(t[i-1]=a);if(n._color===gh){if(r._color===ph)return r._color=gh,void(r.left=yh(ph,n));r.left=yh(ph,n);continue}var o;n=mh(n),r.left=n.right,n.right=r,n._color=r._color,r._color=ph,xh(r),xh(n),i>1&&((o=t[i-2]).right===r?o.right=n:o.left=n),t[i-1]=n,t[i]=r,i+1<t.length?t[i+1]=e:t.push(e),i+=2}}}(e),l.left===r?l.left=null:l.right=null,new bh(this.tree._compare,e[0])},Object.defineProperty(Ah,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(Ah,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(Ah,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++t,e[n].left&&(t+=e[n].left._count));return t},enumerable:!0}),Ah.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(Ah,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),Ah.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),n=e[e.length-1];r[r.length-1]=new vh(n._color,n.key,t,n.left,n.right,n._count);for(var a=e.length-2;a>=0;--a)(n=e[a]).left===e[a+1]?r[a]=new vh(n._color,n.key,n.value,r[a+1],n.right,n._count):r[a]=new vh(n._color,n.key,n.value,n.left,r[a+1],n._count);return new bh(this.tree._compare,r[0])},Ah.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(Ah,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}});var kh=function(t,e){var r,n,a,i;if(e[0][0]<e[1][0])r=e[0],n=e[1];else{if(!(e[0][0]>e[1][0]))return Eh(e,t);r=e[1],n=e[0]}if(t[0][0]<t[1][0])a=t[0],i=t[1];else{if(!(t[0][0]>t[1][0]))return-Eh(t,e);a=t[1],i=t[0]}var o=nu(r,n,i),l=nu(r,n,a);if(o<0){if(l<=0)return o}else if(o>0){if(l>=0)return o}else if(l)return l;if(o=nu(i,a,n),l=nu(i,a,r),o<0){if(l<=0)return o}else if(o>0){if(l>=0)return o}else if(l)return l;return n[0]-i[0]};function Eh(t,e){var r,n,a,i;if(e[0][0]<e[1][0])r=e[0],n=e[1];else{if(!(e[0][0]>e[1][0])){var o=Math.min(t[0][1],t[1][1]),l=Math.max(t[0][1],t[1][1]),s=Math.min(e[0][1],e[1][1]),u=Math.max(e[0][1],e[1][1]);return l<s?l-s:o>u?o-u:l-u}r=e[1],n=e[0]}t[0][1]<t[1][1]?(a=t[0],i=t[1]):(a=t[1],i=t[0]);var c=nu(n,r,a);return c||((c=nu(n,r,i))||i-n)}var Ch=function(t){for(var e=t.length,r=2*e,n=new Array(r),a=0;a<e;++a){var i=t[a],o=i[0][0]<i[1][0];n[2*a]=new Dh(i[0][0],i,o,a),n[2*a+1]=new Dh(i[1][0],i,!o,a)}n.sort(function(t,e){var r=t.x-e.x;return r||((r=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1]))});for(var l=dh(kh),s=[],u=[],c=[],a=0;a<r;){for(var f=n[a].x,h=[];a<r;){var d=n[a];if(d.x!==f)break;a+=1,d.segment[0][0]===d.x&&d.segment[1][0]===d.x?d.create&&(d.segment[0][1]<d.segment[1][1]?(h.push(new Rh(d.segment[0][1],d.index,!0,!0)),h.push(new Rh(d.segment[1][1],d.index,!1,!1))):(h.push(new Rh(d.segment[1][1],d.index,!0,!1)),h.push(new Rh(d.segment[0][1],d.index,!1,!0)))):l=d.create?l.insert(d.segment,d.index):l.remove(d.segment)}s.push(l.root),u.push(f),c.push(h)}return new Sh(s,u,c)};function Sh(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function Lh(t,e){return t.y-e}function Oh(t,e){for(var r=null;t;){var n,a,i=t.key;i[0][0]<i[1][0]?(n=i[0],a=i[1]):(n=i[1],a=i[0]);var o=nu(n,a,e);if(o<0)t=t.left;else if(o>0)if(e[0]!==i[1][0])r=t,t=t.right;else{if(l=Oh(t.right,e))return l;t=t.left}else{if(e[0]!==i[1][0])return t;var l;if(l=Oh(t.right,e))return l;t=t.left}}return r}function Rh(t,e,r,n){this.y=t,this.index=e,this.start=r,this.closed=n}function Dh(t,e,r,n){this.x=t,this.segment=e,this.create=r,this.index=n}Sh.prototype.castUp=function(t){var e=Yf.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var r=Oh(this.slabs[e],t),n=-1;if(r&&(n=r.value),this.coordinates[e]===t[0]){var a=null;if(r&&(a=r.key),e>0){var i=Oh(this.slabs[e-1],t);i&&(a?kh(i.key,a)>0&&(a=i.key,n=i.value):(n=i.value,a=i.key))}var o=this.horizontal[e];if(o.length>0){var l=Yf.ge(o,t[1],Lh);if(l<o.length){var s=o[l];if(t[1]===s.y){if(s.closed)return s.index;for(;l<o.length-1&&o[l+1].y===t[1];)if((s=o[l+=1]).closed)return s.index;if(s.y===t[1]&&!s.start){if((l+=1)>=o.length)return n;s=o[l]}}if(s.start)if(a){var u=nu(a[0],a[1],[t[0],s.y]);a[0][0]>a[1][0]&&(u=-u),u>0&&(n=s.index)}else n=s.index;else s.y!==t[1]&&(n=s.index)}}}return n};var Ih=function(t){for(var e=t.length,r=[],n=[],a=0;a<e;++a)for(var i=t[a],o=i.length,l=o-1,s=0;s<o;l=s++){var u=i[l],c=i[s];u[0]===c[0]?n.push([u,c]):r.push([u,c])}if(0===r.length)return 0===n.length?Nh:(f=zh(n),function(t){return f(t[0],t[1])?0:1});var f;var h=Ch(r),d=function(t,e){return function(r){var n=Yf.le(e,r[0]);if(n<0)return 1;var a=t[n];if(!a){if(!(n>0&&e[n]===r[0]))return 1;a=t[n-1]}for(var i=1;a;){var o=a.key,l=Ph(r,o[0],o[1]);if(o[0][0]<o[1][0])if(l<0)a=a.left;else{if(!(l>0))return 0;i=-1,a=a.right}else if(l>0)a=a.left;else{if(!(l<0))return 0;i=1,a=a.right}}return i}}(h.slabs,h.coordinates);return 0===n.length?d:function(t,e){return function(r){return t(r[0],r[1])?0:e(r)}}(zh(n),d)},Ph=nu[3];function Fh(){return!0}function zh(t){for(var e={},r=0;r<t.length;++r){var n=t[r],a=n[0][0],i=n[0][1],o=n[1][1],l=[Math.min(i,o),Math.max(i,o)];a in e?e[a].push(l):e[a]=[l]}var s={},u=Object.keys(e);for(r=0;r<u.length;++r){var c=e[u[r]];s[u[r]]=Qf(c)}return function(t){return function(e,r){var n=t[e];return!!n&&!!n.queryPoint(r,Fh)}}(s)}function Nh(t){return 1}var Bh=function(t,e){var r=Gf(t,e);t=r[0];for(var n=(e=r[1]).length,a=(t.length,Bf(t,e.length)),i=0;i<n;++i)if(a[i].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var o=qf(t,e);for(var l=(o=o.filter(function(t){for(var r=t.length,n=[0],a=0;a<r;++a){var i=e[t[a]],o=e[t[(a+1)%r]],l=Ps(-i[0],i[1]),s=Ps(-i[0],o[1]),u=Ps(o[0],i[1]),c=Ps(o[0],o[1]);n=js(n,js(js(l,s),js(u,c)))}return n[n.length-1]>0})).length,s=new Array(l),u=new Array(l),i=0;i<l;++i){s[i]=i;var c=new Array(l),f=o[i].map(function(t){return e[t]}),h=Ih([f]),d=0;t:for(var p=0;p<l;++p)if(c[p]=0,i!==p){for(var g=o[p],v=g.length,m=0;m<v;++m){var y=h(e[g[m]]);if(0!==y){y<0&&(c[p]=1,d+=1);continue t}}c[p]=1,d+=1}u[i]=[d,i,c]}u.sort(function(t,e){return e[0]-t[0]});for(var i=0;i<l;++i)for(var c=u[i],x=c[1],b=c[2],p=0;p<l;++p)b[p]&&(s[p]=x);for(var _=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=[];return e}(l),i=0;i<l;++i)_[i].push(s[i]),_[s[i]].push(i);for(var w={},A=jh(n,!1),i=0;i<l;++i)for(var g=o[i],v=g.length,p=0;p<v;++p){var M=g[p],T=g[(p+1)%v],k=Math.min(M,T)+":"+Math.max(M,T);if(k in w){var E=w[k];_[E].push(i),_[i].push(E),A[M]=A[T]=!0}else w[k]=i}function C(t){for(var e=t.length,r=0;r<e;++r)if(!A[t[r]])return!1;return!0}for(var S=[],L=jh(l,-1),i=0;i<l;++i)s[i]!==i||C(o[i])?L[i]=-1:(S.push(i),L[i]=0);var r=[];for(;S.length>0;){var O=S.pop(),R=_[O];oi(R,function(t,e){return t-e});var D,I=R.length,P=L[O];if(0===P){var g=o[O];D=[g]}for(var i=0;i<I;++i){var F=R[i];if(!(L[F]>=0)&&(L[F]=1^P,S.push(F),0===P)){var g=o[F];C(g)||(g.reverse(),D.push(g))}}0===P&&r.push(D)}return r};function jh(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}var Uh={};function Vh(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}Uh.INT_BITS=32,Uh.INT_MAX=2147483647,Uh.INT_MIN=-1<<31,Uh.sign=function(t){return(t>0)-(t<0)},Uh.abs=function(t){var e=t>>31;return(t^e)-e},Uh.min=function(t,e){return e^(t^e)&-(t<e)},Uh.max=function(t,e){return t^(t^e)&-(t<e)},Uh.isPow2=function(t){return!(t&t-1||!t)},Uh.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},Uh.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},Uh.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},Uh.countTrailingZeros=Vh,Uh.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},Uh.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},Uh.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var Hh=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,a=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--a;t[e]=n<<a&255}}(Hh),Uh.reverse=function(t){return Hh[255&t]<<24|Hh[t>>>8&255]<<16|Hh[t>>>16&255]<<8|Hh[t>>>24&255]},Uh.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},Uh.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},Uh.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},Uh.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},Uh.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>Vh(t)+1};var qh=Gh;function Gh(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}Gh.prototype.length=function(){return this.roots.length},Gh.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},Gh.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var r=e[t];e[t]=e[r],t=r}return t},Gh.prototype.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var a=this.ranks,i=this.roots,o=a[r],l=a[n];o<l?i[r]=n:l<o?i[n]=r:(i[n]=r,++a[r])}};var Xh={};function Wh(t,e){var r=t.length,n=t.length-e.length,a=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return(l=t[0]+t[1]-e[0]-e[1])||a(t[0],t[1])-a(e[0],e[1]);case 3:var i=t[0]+t[1],o=e[0]+e[1];if(l=i+t[2]-(o+e[2]))return l;var l,s=a(t[0],t[1]),u=a(e[0],e[1]);return(l=a(s,t[2])-a(u,e[2]))||a(s+t[2],i)-a(u+e[2],o);default:var c=t.slice(0);c.sort();var f=e.slice(0);f.sort();for(var h=0;h<r;++h)if(n=c[h]-f[h])return n;return 0}}function Yh(t,e){return Wh(t[0],e[0])}function Zh(t,e){if(e){for(var r=t.length,n=new Array(r),a=0;a<r;++a)n[a]=[t[a],e[a]];n.sort(Yh);for(a=0;a<r;++a)t[a]=n[a][0],e[a]=n[a][1];return t}return t.sort(Wh),t}function Jh(t){if(0===t.length)return[];for(var e=1,r=t.length,n=1;n<r;++n){var a=t[n];if(Wh(a,t[n-1])){if(n===e){e++;continue}t[e++]=a}}return t.length=e,t}function Qh(t,e){for(var r=0,n=t.length-1,a=-1;r<=n;){var i=r+n>>1,o=Wh(t[i],e);o<=0?(0===o&&(a=i),r=i+1):o>0&&(n=i-1)}return a}function $h(t,e){for(var r=new Array(t.length),n=0,a=r.length;n<a;++n)r[n]=[];for(var i=[],o=(n=0,e.length);n<o;++n)for(var l=e[n],s=l.length,u=1,c=1<<s;u<c;++u){i.length=Uh.popCount(u);for(var f=0,h=0;h<s;++h)u&1<<h&&(i[f++]=l[h]);var d=Qh(t,i);if(!(d<0))for(;r[d++].push(n),!(d>=t.length||0!==Wh(t[d],i)););}return r}function Kh(t,e){if(e<0)return[];for(var r=[],n=(1<<e+1)-1,a=0;a<t.length;++a)for(var i=t[a],o=n;o<1<<i.length;o=Uh.nextCombination(o)){for(var l=new Array(e+1),s=0,u=0;u<i.length;++u)o&1<<u&&(l[s++]=i[u]);r.push(l)}return Zh(r)}Xh.dimension=function(t){for(var e=0,r=Math.max,n=0,a=t.length;n<a;++n)e=r(e,t[n].length);return e-1},Xh.countVertices=function(t){for(var e=-1,r=Math.max,n=0,a=t.length;n<a;++n)for(var i=t[n],o=0,l=i.length;o<l;++o)e=r(e,i[o]);return e+1},Xh.cloneCells=function(t){for(var e=new Array(t.length),r=0,n=t.length;r<n;++r)e[r]=t[r].slice(0);return e},Xh.compareCells=Wh,Xh.normalize=Zh,Xh.unique=Jh,Xh.findCell=Qh,Xh.incidence=$h,Xh.dual=function(t,e){if(!e)return $h(Jh(Kh(t,0)),t);for(var r=new Array(e),n=0;n<e;++n)r[n]=[];n=0;for(var a=t.length;n<a;++n)for(var i=t[n],o=0,l=i.length;o<l;++o)r[i[o]].push(n);return r},Xh.explode=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var a=t[r],i=0|a.length,o=1,l=1<<i;o<l;++o){for(var s=[],u=0;u<i;++u)o>>>u&1&&s.push(a[u]);e.push(s)}return Zh(e)},Xh.skeleton=Kh,Xh.boundary=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,o=a.length;i<o;++i){for(var l=new Array(a.length-1),s=0,u=0;s<o;++s)s!==i&&(l[u++]=a[s]);e.push(l)}return Zh(e)},Xh.connectedComponents=function(t,e){return e?function(t,e){for(var r=new qh(e),n=0;n<t.length;++n)for(var a=t[n],i=0;i<a.length;++i)for(var o=i+1;o<a.length;++o)r.link(a[i],a[o]);var l=[],s=r.ranks;for(n=0;n<s.length;++n)s[n]=-1;for(n=0;n<t.length;++n){var u=r.find(t[n][0]);s[u]<0?(s[u]=l.length,l.push([t[n].slice(0)])):l[s[u]].push(t[n].slice(0))}return l}(t,e):function(t){for(var e=Jh(Zh(Kh(t,0))),r=new qh(e.length),n=0;n<t.length;++n)for(var a=t[n],i=0;i<a.length;++i)for(var o=Qh(e,[a[i]]),l=i+1;l<a.length;++l)r.link(o,Qh(e,[a[l]]));var s=[],u=r.ranks;for(n=0;n<u.length;++n)u[n]=-1;for(n=0;n<t.length;++n){var c=r.find(Qh(e,[t[n][0]]));u[c]<0?(u[c]=s.length,s.push([t[n].slice(0)])):s[u[c]].push(t[n].slice(0))}return s}(t)};var td=function(t,e,r){for(var n=e.length,a=t.length,i=new Array(n),o=new Array(n),l=new Array(n),s=new Array(n),u=0;u<n;++u)i[u]=o[u]=-1,l[u]=1/0,s[u]=!1;for(var u=0;u<a;++u){var c=t[u];if(2!==c.length)throw new Error("Input must be a graph");var f=c[1],h=c[0];-1!==o[h]?o[h]=-2:o[h]=f,-1!==i[f]?i[f]=-2:i[f]=h}function d(t){if(s[t])return 1/0;var r,n,a,l,u,c=i[t],f=o[t];return c<0||f<0?1/0:(r=e[t],n=e[c],a=e[f],l=Math.abs(nu(r,n,a)),u=Math.sqrt(Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2)),l/u)}function p(t,e){var r=w[t],n=w[e];w[t]=n,w[e]=r,A[r]=e,A[n]=t}function g(t){return l[w[t]]}function v(t){return 1&t?t-1>>1:(t>>1)-1}function m(t){for(var e=g(t);;){var r=e,n=2*t+1,a=2*(t+1),i=t;if(n<T){var o=g(n);o<r&&(i=n,r=o)}if(a<T){var l=g(a);l<r&&(i=a)}if(i===t)return t;p(t,i),t=i}}function y(t){for(var e=g(t);t>0;){var r=v(t);if(r>=0){var n=g(r);if(e<n){p(t,r),t=r;continue}}return t}}function x(){if(T>0){var t=w[0];return p(0,T-1),T-=1,m(0),t}return-1}function b(t,e){var r=w[t];return l[r]===e?t:(l[r]=-1/0,y(t),x(),l[r]=e,y((T+=1)-1))}function _(t){if(!s[t]){s[t]=!0;var e=i[t],r=o[t];i[r]>=0&&(i[r]=e),o[e]>=0&&(o[e]=r),A[e]>=0&&b(A[e],d(e)),A[r]>=0&&b(A[r],d(r))}}for(var w=[],A=new Array(n),u=0;u<n;++u){var M=l[u]=d(u);M<1/0?(A[u]=w.length,w.push(u)):A[u]=-1}for(var T=w.length,u=T>>1;u>=0;--u)m(u);for(;;){var k=x();if(k<0||l[k]>r)break;_(k)}for(var E=[],u=0;u<n;++u)s[u]||(A[u]=E.length,E.push(e[u].slice()));E.length;function C(t,e){if(t[e]<0)return e;var r=e,n=e;do{var a=t[n];if(!s[n]||a<0||a===n)break;if(a=t[n=a],!s[n]||a<0||a===n)break;n=a,r=t[r]}while(r!==n);for(var i=e;i!==n;i=t[i])t[i]=n;return n}var S=[];return t.forEach(function(t){var e=C(i,t[0]),r=C(o,t[1]);if(e>=0&&r>=0&&e!==r){var n=A[e],a=A[r];n!==a&&S.push([n,a])}}),Xh.unique(Xh.normalize(S)),{positions:E,edges:S}};var ed=function(t){function e(t){throw new Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var r=t.order;Array.isArray(r)||e("Must specify order");var n=t.arrayArguments||1;n<1&&e("Must have at least one array argument");var a=t.scalarArguments||0;a<0&&e("Scalar arg count must be > 0");"function"!=typeof t.vertex&&e("Must specify vertex creation function");"function"!=typeof t.cell&&e("Must specify cell creation function");"function"!=typeof t.phase&&e("Must specify phase function");for(var i=t.getters||[],o=new Array(n),l=0;l<n;++l)i.indexOf(l)>=0?o[l]=!0:o[l]=!1;return function(t,e,r,n,a,i){var o=i.length,l=a.length;if(l<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var s="extractContour"+a.join("_"),u=[],c=[],f=[],h=0;h<o;++h)f.push(rd(h));for(var h=0;h<n;++h)f.push(sd(h));for(var h=0;h<l;++h)c.push(id(h)+"="+rd(0)+".shape["+h+"]|0");for(var h=0;h<o;++h){c.push(nd(h)+"="+rd(h)+".data",ld(h)+"="+rd(h)+".offset|0");for(var d=0;d<l;++d)c.push(od(h,d)+"="+rd(h)+".stride["+d+"]|0")}for(var h=0;h<o;++h){c.push(ud(h)+"="+ld(h)),c.push(ad(h,0));for(var d=1;d<1<<l;++d){for(var p=[],g=0;g<l;++g)d&1<<g&&p.push("-"+od(h,g));c.push(cd(h,d)+"=("+p.join("")+")|0"),c.push(ad(h,d)+"=0")}}for(var h=0;h<o;++h)for(var d=0;d<l;++d){var v=[od(h,a[d])];d>0&&v.push(od(h,a[d-1])+"*"+id(a[d-1])),c.push(hd(h,a[d])+"=("+v.join("-")+")|0")}for(var h=0;h<l;++h)c.push(fd(h)+"=0");c.push(xd+"=0");for(var m=["2"],h=l-2;h>=0;--h)m.push(id(a[h]));c.push(bd+"=("+m.join("*")+")|0",yd+"=mallocUint32("+bd+")",md+"=mallocUint32("+bd+")",_d+"=0"),c.push(dd(0)+"=0");for(var d=1;d<1<<l;++d){for(var y=[],x=[],g=0;g<l;++g)d&1<<g&&(0===x.length?y.push("1"):y.unshift(x.join("*"))),x.push(id(a[g]));var b="";y[0].indexOf(id(a[l-2]))<0&&(b="-");var _=Ad(l,d,a);c.push(gd(_)+"=(-"+y.join("-")+")|0",pd(_)+"=("+b+y.join("-")+")|0",dd(_)+"=0")}function w(t,e){u.push("for(",fd(a[t]),"=",e,";",fd(a[t]),"<",id(a[t]),";","++",fd(a[t]),"){")}function A(t){for(var e=0;e<o;++e)u.push(ud(e),"+=",hd(e,a[t]),";");u.push("}")}function M(){for(var t=1;t<1<<l;++t)u.push(wd,"=",gd(t),";",gd(t),"=",pd(t),";",pd(t),"=",wd,";")}c.push(vd(0)+"=0",wd+"=0"),function t(e,r){if(e<0)return void function(t){for(var e=0;e<o;++e)i[e]?u.push(ad(e,0),"=",nd(e),".get(",ud(e),");"):u.push(ad(e,0),"=",nd(e),"[",ud(e),"];");for(var r=[],e=0;e<o;++e)r.push(ad(e,0));for(var e=0;e<n;++e)r.push(sd(e));u.push(dd(0),"=",yd,"[",_d,"]=phase(",r.join(),");");for(var a=1;a<1<<l;++a)u.push(dd(a),"=",yd,"[",_d,"+",gd(a),"];");for(var s=[],a=1;a<1<<l;++a)s.push("("+dd(0)+"!=="+dd(a)+")");u.push("if(",s.join("||"),"){");for(var c=[],e=0;e<l;++e)c.push(fd(e));for(var e=0;e<o;++e){c.push(ad(e,0));for(var a=1;a<1<<l;++a)i[e]?u.push(ad(e,a),"=",nd(e),".get(",ud(e),"+",cd(e,a),");"):u.push(ad(e,a),"=",nd(e),"[",ud(e),"+",cd(e,a),"];"),c.push(ad(e,a))}for(var e=0;e<1<<l;++e)c.push(dd(e));for(var e=0;e<n;++e)c.push(sd(e));u.push("vertex(",c.join(),");",vd(0),"=",md,"[",_d,"]=",xd,"++;");for(var f=(1<<l)-1,h=dd(f),a=0;a<l;++a)if(0==(t&~(1<<a))){for(var d=f^1<<a,p=dd(d),g=[],v=d;v>0;v=v-1&d)g.push(md+"["+_d+"+"+gd(v)+"]");g.push(vd(0));for(var v=0;v<o;++v)1&a?g.push(ad(v,f),ad(v,d)):g.push(ad(v,d),ad(v,f));1&a?g.push(h,p):g.push(p,h);for(var v=0;v<n;++v)g.push(sd(v));u.push("if(",h,"!==",p,"){","face(",g.join(),")}")}u.push("}",_d,"+=1;")}(r);!function(t){for(var e=t-1;e>=0;--e)w(e,0);for(var r=[],e=0;e<o;++e)i[e]?r.push(nd(e)+".get("+ud(e)+")"):r.push(nd(e)+"["+ud(e)+"]");for(var e=0;e<n;++e)r.push(sd(e));u.push(yd,"[",_d,"++]=phase(",r.join(),");");for(var e=0;e<t;++e)A(e);for(var l=0;l<o;++l)u.push(ud(l),"+=",hd(l,a[t]),";")}(e);u.push("if(",id(a[e]),">0){",fd(a[e]),"=1;");t(e-1,r|1<<a[e]);for(var s=0;s<o;++s)u.push(ud(s),"+=",hd(s,a[e]),";");e===l-1&&(u.push(_d,"=0;"),M());w(e,2);t(e-1,r);e===l-1&&(u.push("if(",fd(a[l-1]),"&1){",_d,"=0;}"),M());A(e);u.push("}")}(l-1,0),u.push("freeUint32(",md,");freeUint32(",yd,");");var T=["'use strict';","function ",s,"(",f.join(),"){","var ",c.join(),";",u.join(""),"}","return ",s].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",T)(t,e,r,Lo.mallocUint32,Lo.freeUint32)}(t.vertex,t.cell,t.phase,a,r,o)};function rd(t){return"a"+t}function nd(t){return"d"+t}function ad(t,e){return"c"+t+"_"+e}function id(t){return"s"+t}function od(t,e){return"t"+t+"_"+e}function ld(t){return"o"+t}function sd(t){return"x"+t}function ud(t){return"p"+t}function cd(t,e){return"d"+t+"_"+e}function fd(t){return"i"+t}function hd(t,e){return"u"+t+"_"+e}function dd(t){return"b"+t}function pd(t){return"y"+t}function gd(t){return"e"+t}function vd(t){return"v"+t}var md="V",yd="P",xd="N",bd="Q",_d="X",wd="T";function Ad(t,e,r){for(var n=0,a=0;a<t;++a)e&1<<a&&(n|=1<<r[a]);return n}var Md={},Td=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],kd=607/128,Ed=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Cd(t){if(t<0)return Number("0/0");for(var e=Ed[0],r=Ed.length-1;r>0;--r)e+=Ed[r]/(t+r);var n=t+kd+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(n)-n+Math.log(e)-Math.log(t)}(Md=function t(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));if(e>100)return Math.exp(Cd(e));e-=1;for(var r=Td[0],n=1;n<9;n++)r+=Td[n]/(e+n);var a=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*r}).log=Cd;var Sd=function(t){var e=t.length;if(e<Ld){for(var r=1,n=0;n<e;++n)for(var a=0;a<n;++a)if(t[n]<t[a])r=-r;else if(t[n]===t[a])return 0;return r}for(var i=Lo.mallocUint8(e),n=0;n<e;++n)i[n]=0;for(var r=1,n=0;n<e;++n)if(!i[n]){var o=1;i[n]=1;for(var a=t[n];a!==n;a=t[a]){if(i[a])return Lo.freeUint8(i),0;o+=1,i[a]=1}1&o||(r=-r)}return Lo.freeUint8(i),r},Ld=32;var Od=function(t,e){e=e||new Array(t.length);for(var r=0;r<t.length;++r)e[t[r]]=r;return e},Rd={};Rd.rank=function(t){var e=t.length;switch(e){case 0:case 1:return 0;case 2:return t[1]}var r,n,a,i=Lo.mallocUint32(e),o=Lo.mallocUint32(e),l=0;for(Od(t,o),a=0;a<e;++a)i[a]=t[a];for(a=e-1;a>0;--a)n=o[a],r=i[a],i[a]=i[n],i[n]=r,o[a]=o[r],o[r]=n,l=(l+r)*a;return Lo.freeUint32(o),Lo.freeUint32(i),l},Rd.unrank=function(t,e,r){switch(t){case 0:return r||[];case 1:return r?(r[0]=0,r):[0];case 2:return r?(e?(r[0]=0,r[1]=1):(r[0]=1,r[1]=0),r):e?[0,1]:[1,0]}var n,a,i,o=1;for((r=r||new Array(t))[0]=0,i=1;i<t;++i)r[i]=i,o=o*i|0;for(i=t-1;i>0;--i)e=e-(n=e/o|0)*o|0,o=o/i|0,a=0|r[i],r[i]=0|r[n],r[n]=0|a;return r};var Dd=function(t){if(t<0)return[];if(0===t)return[[0]];for(var e=0|Math.round(Md(t+1)),r=[],n=0;n<e;++n){for(var a=Rd.unrank(t,n),i=[0],o=0,l=0;l<a.length;++l)o+=1<<a[l],i.push(o);Sd(a)<1&&(i[0]=o,i[t]=0),r.push(i)}return r};var Id=fi({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"}),Pd=function(t,e){var r=[];return e=+e||0,Id(t.hi(t.shape[0]-1),r,e),r};var Fd=function(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(t,e){for(var r=Pd(t,e),n=r.length,a=new Array(n),i=new Array(n),o=0;o<n;++o)a[o]=[r[o]],i[o]=[o];return{positions:a,cells:i}}(t,e);var r=t.order.join()+"-"+t.dtype,n=zd[r],e=+e||0;n||(n=zd[r]=function(t,e){var r=t.length,n=["'use strict';"],a="surfaceNets"+t.join("_")+"d"+e;n.push("var contour=genContour({","order:[",t.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===e&&n.push("getters:[0],");for(var i=[],o=[],l=0;l<r;++l)i.push("d"+l),o.push("d"+l);for(var l=0;l<1<<r;++l)i.push("v"+l),o.push("v"+l);for(var l=0;l<1<<r;++l)i.push("p"+l),o.push("p"+l);i.push("a","b","c"),o.push("a","c"),n.push("vertex:function vertexFunc(",i.join(),"){");for(var s=[],l=0;l<1<<r;++l)s.push("(p"+l+"<<"+l+")");n.push("var m=(",s.join("+"),")|0;if(m===0||m===",(1<<(1<<r))-1,"){return}");var u=[],c=[];1<<(1<<r)<=128?(n.push("switch(m){"),c=n):n.push("switch(m>>>7){");for(var l=0;l<1<<(1<<r);++l){if(1<<(1<<r)>128&&l%128==0){u.length>0&&c.push("}}");var f="vExtra"+u.length;n.push("case ",l>>>7,":",f,"(m&0x7f,",o.join(),");break;"),c=["function ",f,"(m,",o.join(),"){switch(m){"],u.push(c)}c.push("case ",127&l,":");for(var h=new Array(r),d=new Array(r),p=new Array(r),g=new Array(r),v=0,m=0;m<r;++m)h[m]=[],d[m]=[],p[m]=0,g[m]=0;for(var m=0;m<1<<r;++m)for(var y=0;y<r;++y){var x=m^1<<y;if(!(x>m)&&!(l&1<<x)!=!(l&1<<m)){var b=1;l&1<<x?d[y].push("v"+x+"-v"+m):(d[y].push("v"+m+"-v"+x),b=-b),b<0?(h[y].push("-v"+m+"-v"+x),p[y]+=2):(h[y].push("v"+m+"+v"+x),p[y]-=2),v+=1;for(var _=0;_<r;++_)_!==y&&(x&1<<_?g[_]+=1:g[_]-=1)}}for(var w=[],y=0;y<r;++y)if(0===h[y].length)w.push("d"+y+"-0.5");else{var A="";p[y]<0?A=p[y]+"*c":p[y]>0&&(A="+"+p[y]+"*c");var M=h[y].length/v*.5,T=.5+g[y]/v*.5;w.push("d"+y+"-"+T+"-"+M+"*("+h[y].join("+")+A+")/("+d[y].join("+")+")")}c.push("a.push([",w.join(),"]);","break;")}n.push("}},"),u.length>0&&c.push("}}");for(var k=[],l=0;l<1<<r-1;++l)k.push("v"+l);k.push("c0","c1","p0","p1","a","b","c"),n.push("cell:function cellFunc(",k.join(),"){");var E=Dd(r-1);n.push("if(p0){b.push(",E.map(function(t){return"["+t.map(function(t){return"v"+t})+"]"}).join(),")}else{b.push(",E.map(function(t){var e=t.slice();return e.reverse(),"["+e.map(function(t){return"v"+t})+"]"}).join(),")}}});function ",a,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",a,";");for(var l=0;l<u.length;++l)n.push(u[l].join(""));return new Function("genContour",n.join(""))(ed)}(t.order,t.dtype));return n(t,e)};var zd={};var Nd={};function Bd(t,e,r,n){var a=function(t,e){var r=Fd(t,128);return e?td(r.cells,r.positions,.25):{edges:r.cells,positions:r.positions}}(t,n),i=function(t,e,r){for(var n=e.textAlign||"start",a=e.textBaseline||"alphabetic",i=[1<<30,1<<30],o=[0,0],l=t.length,s=0;s<l;++s)for(var u=t[s],c=0;c<2;++c)i[c]=0|Math.min(i[c],u[c]),o[c]=0|Math.max(o[c],u[c]);var f=0;switch(n){case"center":f=-.5*(i[0]+o[0]);break;case"right":case"end":f=-o[0];break;case"left":case"start":f=-i[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var h=0;switch(a){case"hanging":case"top":h=-i[1];break;case"middle":h=-.5*(i[1]+o[1]);break;case"alphabetic":case"ideographic":h=-3*r;break;case"bottom":h=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+a+"'")}var d=1/r;return"lineHeight"in e?d*=+e.lineHeight:"width"in e?d=e.width/(o[0]-i[0]):"height"in e&&(d=e.height/(o[1]-i[1])),t.map(function(t){return[d*(t[0]+f),d*(t[1]+h)]})}(a.positions,e,r),o=a.edges,l="ccw"===e.orientation;if(Of(i,o),e.polygons||e.polygon||e.polyline){for(var s=Bh(o,i),u=new Array(s.length),c=0;c<s.length;++c){for(var f=s[c],h=new Array(f.length),d=0;d<f.length;++d){for(var p=f[d],g=new Array(p.length),v=0;v<p.length;++v)g[v]=i[p[v]].slice();l&&g.reverse(),h[d]=g}u[c]=h}return u}return e.triangles||e.triangulate||e.triangle?{cells:Su(i,o,{delaunay:!1,exterior:!1,interior:!0}),positions:i}:{edges:o,positions:i}}function jd(t,e,r){try{return Bd(t,e,r,!0)}catch(t){}try{return Bd(t,e,r,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}(Nd=function(t,e,r,n){var a=n.size||64,i=n.font||"normal";return r.font=a+"px "+i,r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",jd(function(t,e,r,n){var a=0|Math.ceil(e.measureText(r).width+2*n);if(a>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var i=3*n;t.height<i&&(t.height=i),e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff",e.fillText(r,n,2*n);var o=e.getImageData(0,0,a,i);return Li(o.data,[i,a,4]).pick(-1,-1,0).transpose(1,0)}(e,r,t,a),n,a)}).processPixels=jd;var Ud=function(t,e){"object"==typeof e&&null!==e||(e={});return Nd(t,e.canvas||Vd,e.context||Hd,e)},Vd=null,Hd=null;"undefined"!=typeof document&&((Vd=document.createElement("canvas")).width=8192,Vd.height=1024,Hd=Vd.getContext("2d"));var qd={};(function(t){"use strict";qd=function t(e,n,a){var a=a||{};var i=r[e];i||(i=r[e]={" ":{data:new Float32Array(0),shape:.2}});var o=i[n];if(!o)if(n.length<=1||!/\d/.test(n))o=i[n]=function(t){for(var e=t.cells,r=t.positions,n=new Float32Array(6*e.length),a=0,i=0,o=0;o<e.length;++o)for(var l=e[o],s=0;s<3;++s){var u=r[l[s]];n[a++]=u[0],n[a++]=u[1]+1.4,i=Math.max(u[0],i)}return{data:n,shape:i}}(Ud(n,{triangles:!0,font:e,textAlign:a.textAlign||"left",textBaseline:"alphabetic"}));else{for(var l=n.split(/(\d|\s)/),s=new Array(l.length),u=0,c=0,f=0;f<l.length;++f)s[f]=t(e,l[f]),u+=s[f].data.length,c+=s[f].shape,f>0&&(c+=.02);for(var h=new Float32Array(u),d=0,p=-.5*c,f=0;f<s.length;++f){for(var g=s[f].data,v=0;v<g.length;v+=2)h[d++]=g[v]+p,h[d++]=g[v+1];p+=s[f].shape+.02}o=i[n]={data:h,shape:c}}return o};var e=window||t.global||{},r=e.__TEXT_CACHE||{};e.__TEXT_CACHE={}}).call(this,bs);var Gd=function(t){var e=t.gl,r=Fo(e),n=Yl(e,Bo.textVert,Bo.textFrag);return new Xd(t,r,n)};function Xd(t,e,r){this.plot=t,this.vbo=e,this.shader=r,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var Wd=Xd.prototype;Wd.drawTicks=function(){var t=[0,0],e=[0,0],r=[0,0];return function(n){var a=this.plot,i=this.shader,o=this.tickX[n],l=this.tickOffset[n],s=a.gl,u=a.viewBox,c=a.dataBox,f=a.screenBox,h=a.pixelRatio,d=a.tickEnable,p=a.tickPad,g=a.tickColor,v=a.tickAngle,m=a.labelEnable,y=a.labelPad,x=a.labelColor,b=a.labelAngle,_=this.labelOffset[n],w=this.labelCount[n],A=is.lt(o,c[n]),M=is.le(o,c[n+2]);t[0]=t[1]=0,t[n]=1,e[n]=(u[2+n]+u[n])/(f[2+n]-f[n])-1;var T=2/f[2+(1^n)]-f[1^n];e[1^n]=T*u[1^n]-1,d[n]&&(e[1^n]-=T*h*p[n],A<M&&l[M]>l[A]&&(i.uniforms.dataAxis=t,i.uniforms.screenOffset=e,i.uniforms.color=g[n],i.uniforms.angle=v[n],s.drawArrays(s.TRIANGLES,l[A],l[M]-l[A]))),m[n]&&w&&(e[1^n]-=T*h*y[n],i.uniforms.dataAxis=r,i.uniforms.screenOffset=e,i.uniforms.color=x[n],i.uniforms.angle=b[n],s.drawArrays(s.TRIANGLES,_,w)),e[1^n]=T*u[2+(1^n)]-1,d[n+2]&&(e[1^n]+=T*h*p[n+2],A<M&&l[M]>l[A]&&(i.uniforms.dataAxis=t,i.uniforms.screenOffset=e,i.uniforms.color=g[n+2],i.uniforms.angle=v[n+2],s.drawArrays(s.TRIANGLES,l[A],l[M]-l[A]))),m[n+2]&&w&&(e[1^n]+=T*h*y[n+2],i.uniforms.dataAxis=r,i.uniforms.screenOffset=e,i.uniforms.color=x[n+2],i.uniforms.angle=b[n+2],s.drawArrays(s.TRIANGLES,_,w))}}(),Wd.drawTitle=function(){var t=[0,0],e=[0,0];return function(){var r=this.plot,n=this.shader,a=r.gl,i=r.screenBox,o=r.titleCenter,l=r.titleAngle,s=r.titleColor,u=r.pixelRatio;if(this.titleCount){for(var c=0;c<2;++c)e[c]=2*(o[c]*u-i[c])/(i[2+c]-i[c])-1;n.bind(),n.uniforms.dataAxis=t,n.uniforms.screenOffset=e,n.uniforms.angle=l,n.uniforms.color=s,a.drawArrays(a.TRIANGLES,this.titleOffset,this.titleCount)}}}(),Wd.bind=function(){var t=[0,0],e=[0,0],r=[0,0];return function(){var n=this.plot,a=this.shader,i=n._tickBounds,o=n.dataBox,l=n.screenBox,s=n.viewBox;a.bind();for(var u=0;u<2;++u){var c=i[u],f=i[u+2]-c,h=.5*(o[u+2]+o[u]),d=o[u+2]-o[u],p=s[u],g=s[u+2]-p,v=l[u],m=l[u+2]-v;e[u]=2*f/d*g/m,t[u]=2*(c-h)/d*g/m}r[1]=2*n.pixelRatio/(l[3]-l[1]),r[0]=r[1]*(l[3]-l[1])/(l[2]-l[0]),a.uniforms.dataScale=e,a.uniforms.dataShift=t,a.uniforms.textScale=r,this.vbo.bind(),a.attributes.textCoordinate.pointer()}}(),Wd.update=function(t){var e,r,n,a,i,o=[],l=t.ticks,s=t.bounds;for(i=0;i<2;++i){var u=[Math.floor(o.length/3)],c=[-1/0],f=l[i];for(e=0;e<f.length;++e){var h=f[e],d=h.x,p=h.text,g=h.font||"sans-serif";a=h.fontSize||12;for(var v=1/(s[i+2]-s[i]),m=s[i],y=p.split("\n"),x=0;x<y.length;x++)for(n=qd(g,y[x]).data,r=0;r<n.length;r+=2)o.push(n[r]*a,-n[r+1]*a-x*a*1.2,(d-m)*v);u.push(Math.floor(o.length/3)),c.push(d)}this.tickOffset[i]=u,this.tickX[i]=c}for(i=0;i<2;++i){for(this.labelOffset[i]=Math.floor(o.length/3),n=qd(t.labelFont[i],t.labels[i],{textAlign:"center"}).data,a=t.labelSize[i],e=0;e<n.length;e+=2)o.push(n[e]*a,-n[e+1]*a,0);this.labelCount[i]=Math.floor(o.length/3)-this.labelOffset[i]}for(this.titleOffset=Math.floor(o.length/3),n=qd(t.titleFont,t.title).data,a=t.titleSize,e=0;e<n.length;e+=2)o.push(n[e]*a,-n[e+1]*a,0);this.titleCount=Math.floor(o.length/3)-this.titleOffset,this.vbo.update(o)},Wd.dispose=function(){this.vbo.dispose(),this.shader.dispose()};var Yd=fi,Zd=function(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");Jd||function(t){Jd=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],Qd=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],$d=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}(t);if("number"==typeof arguments[1])return op(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return op(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e=arguments[1],r=Kd(e)?e:e.raw;if(r)return function(t,e,r,n,a,i){var o=ip(t);return t.texImage2D(t.TEXTURE_2D,0,a,a,i,e),new rp(t,o,r,n,a,i)}(t,r,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return function(t,e){var r=e.dtype,n=e.shape.slice(),a=t.getParameter(t.MAX_TEXTURE_SIZE);if(n[0]<0||n[0]>a||n[1]<0||n[1]>a)throw new Error("gl-texture2d: Invalid texture size");var i=ap(n,e.stride.slice()),o=0;"float32"===r?o=t.FLOAT:"float64"===r?(o=t.FLOAT,i=!1,r="float32"):"uint8"===r?o=t.UNSIGNED_BYTE:(o=t.UNSIGNED_BYTE,i=!1,r="uint8");var l,s,u=0;if(2===n.length)u=t.LUMINANCE,n=[n[0],n[1],1],e=Li(e.data,n,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==n.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===n[2])u=t.ALPHA;else if(2===n[2])u=t.LUMINANCE_ALPHA;else if(3===n[2])u=t.RGB;else{if(4!==n[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");u=t.RGBA}}o!==t.FLOAT||t.getExtension("OES_texture_float")||(o=t.UNSIGNED_BYTE,i=!1);var c=e.size;if(i)l=0===e.offset&&e.data.length===c?e.data:e.data.subarray(e.offset,e.offset+c);else{var f=[n[2],n[2]*n[0],1];s=Lo.malloc(c,r);var h=Li(s,n,f,0);"float32"!==r&&"float64"!==r||o!==t.UNSIGNED_BYTE?hi.assign(h,e):tp(h,e),l=s.subarray(0,c)}var d=ip(t);t.texImage2D(t.TEXTURE_2D,0,u,n[0],n[1],0,u,o,l),i||Lo.free(s);return new rp(t,d,n[0],n[1],u,o)}(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")},Jd=null,Qd=null,$d=null;function Kd(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var tp=function(t,e){hi.muls(t,e,255)};function ep(t,e,r){var n=t.gl,a=n.getParameter(n.MAX_TEXTURE_SIZE);if(e<0||e>a||r<0||r>a)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),n.texImage2D(n.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function rp(t,e,r,n,a,i){this.gl=t,this.handle=e,this.format=a,this.type=i,this._shape=[r,n],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,l=[this._wrapS,this._wrapT];Object.defineProperties(l,[{get:function(){return o._wrapS},set:function(t){return o.wrapS=t}},{get:function(){return o._wrapT},set:function(t){return o.wrapT=t}}]),this._wrapVector=l;var s=[this._shape[0],this._shape[1]];Object.defineProperties(s,[{get:function(){return o._shape[0]},set:function(t){return o.width=t}},{get:function(){return o._shape[1]},set:function(t){return o.height=t}}]),this._shapeVector=s}var np=rp.prototype;function ap(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function ip(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function op(t,e,r,n,a){var i=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-texture2d: Invalid texture shape");if(a===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=ip(t);return t.texImage2D(t.TEXTURE_2D,0,n,e,r,0,n,a,null),new rp(t,o,e,r,n,a)}Object.defineProperties(np,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&Jd.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),Qd.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&Jd.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),Qd.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),$d.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),$d.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if($d.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return ep(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return ep(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,ep(this,this._shape[0],t),t}}}),np.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},np.dispose=function(){this.gl.deleteTexture(this.handle)},np.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},np.setPixels=function(t,e,r,n){var a=this.gl;this.bind(),Array.isArray(e)?(n=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),n=n||0;var i=Kd(t)?t:t.raw;if(i){this._mipLevels.indexOf(n)<0?(a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,this.type,i),this._mipLevels.push(n)):a.texSubImage2D(a.TEXTURE_2D,n,e,r,this.format,this.type,i)}else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>n||r+t.shape[0]>this._shape[0]>>>n||e<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(t,e,r,n,a,i,o,l){var s=l.dtype,u=l.shape.slice();if(u.length<2||u.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,f=0,h=ap(u,l.stride.slice());"float32"===s?c=t.FLOAT:"float64"===s?(c=t.FLOAT,h=!1,s="float32"):"uint8"===s?c=t.UNSIGNED_BYTE:(c=t.UNSIGNED_BYTE,h=!1,s="uint8");if(2===u.length)f=t.LUMINANCE,u=[u[0],u[1],1],l=Li(l.data,u,[l.stride[0],l.stride[1],1],l.offset);else{if(3!==u.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===u[2])f=t.ALPHA;else if(2===u[2])f=t.LUMINANCE_ALPHA;else if(3===u[2])f=t.RGB;else{if(4!==u[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");f=t.RGBA}u[2]}f!==t.LUMINANCE&&f!==t.ALPHA||a!==t.LUMINANCE&&a!==t.ALPHA||(f=a);if(f!==a)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var d=l.size,p=o.indexOf(n)<0;p&&o.push(n);if(c===i&&h)0===l.offset&&l.data.length===d?p?t.texImage2D(t.TEXTURE_2D,n,a,u[0],u[1],0,a,i,l.data):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],a,i,l.data):p?t.texImage2D(t.TEXTURE_2D,n,a,u[0],u[1],0,a,i,l.data.subarray(l.offset,l.offset+d)):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],a,i,l.data.subarray(l.offset,l.offset+d));else{var g;g=i===t.FLOAT?Lo.mallocFloat32(d):Lo.mallocUint8(d);var v=Li(g,u,[u[2],u[2]*u[0],1]);c===t.FLOAT&&i===t.UNSIGNED_BYTE?tp(v,l):hi.assign(v,l),p?t.texImage2D(t.TEXTURE_2D,n,a,u[0],u[1],0,a,i,g.subarray(0,d)):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],a,i,g.subarray(0,d)),i===t.FLOAT?Lo.freeFloat32(g):Lo.freeUint8(g)}}(a,e,r,n,this.format,this.type,this._mipLevels,t)}};var lp,sp,up,cp,fp=function(t,e,r,n){lp||(lp=t.FRAMEBUFFER_UNSUPPORTED,sp=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,up=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,cp=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var a=t.getExtension("WEBGL_draw_buffers");!hp&&a&&function(t,e){var r=t.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL);hp=new Array(r+1);for(var n=0;n<=r;++n){for(var a=new Array(r),i=0;i<n;++i)a[i]=t.COLOR_ATTACHMENT0+i;for(var i=n;i<r;++i)a[i]=t.NONE;hp[n]=a}}(t,a);Array.isArray(e)&&(n=r,r=0|e[1],e=0|e[0]);if("number"!=typeof e)throw new Error("gl-fbo: Missing shape parameter");var i=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-fbo: Parameters are too large for FBO");var o=1;if("color"in(n=n||{})){if((o=Math.max(0|n.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(o>1){if(!a)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(o>t.getParameter(a.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+o+" draw buffers")}}var l=t.UNSIGNED_BYTE,s=t.getExtension("OES_texture_float");if(n.float&&o>0){if(!s)throw new Error("gl-fbo: Context does not support floating point textures");l=t.FLOAT}else n.preferFloat&&o>0&&s&&(l=t.FLOAT);var u=!0;"depth"in n&&(u=!!n.depth);var c=!1;"stencil"in n&&(c=!!n.stencil);return new yp(t,e,r,l,o,u,c,a)},hp=null;function dp(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function pp(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function gp(t){switch(t){case lp:throw new Error("gl-fbo: Framebuffer unsupported");case sp:throw new Error("gl-fbo: Framebuffer incomplete attachment");case up:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case cp:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function vp(t,e,r,n,a,i){if(!n)return null;var o=Zd(t,e,r,a,n);return o.magFilter=t.NEAREST,o.minFilter=t.NEAREST,o.mipSamples=1,o.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,i,t.TEXTURE_2D,o.handle,0),o}function mp(t,e,r,n,a){var i=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,n,e,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,a,t.RENDERBUFFER,i),i}function yp(t,e,r,n,a,i,o,l){this.gl=t,this._shape=[0|e,0|r],this._destroyed=!1,this._ext=l,this.color=new Array(a);for(var s=0;s<a;++s)this.color[s]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=i,this._useStencil=o;var u=this,c=[0|e,0|r];Object.defineProperties(c,{0:{get:function(){return u._shape[0]},set:function(t){return u.width=t}},1:{get:function(){return u._shape[1]},set:function(t){return u.height=t}}}),this._shapeVector=c,function(t){var e=dp(t.gl),r=t.gl,n=t.handle=r.createFramebuffer(),a=t._shape[0],i=t._shape[1],o=t.color.length,l=t._ext,s=t._useStencil,u=t._useDepth,c=t._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var f=0;f<o;++f)t.color[f]=vp(r,a,i,c,r.RGBA,r.COLOR_ATTACHMENT0+f);0===o?(t._color_rb=mp(r,a,i,r.RGBA4,r.COLOR_ATTACHMENT0),l&&l.drawBuffersWEBGL(hp[0])):o>1&&l.drawBuffersWEBGL(hp[o]);var h=r.getExtension("WEBGL_depth_texture");h?s?t.depth=vp(r,a,i,h.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):u&&(t.depth=vp(r,a,i,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):u&&s?t._depth_rb=mp(r,a,i,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):u?t._depth_rb=mp(r,a,i,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):s&&(t._depth_rb=mp(r,a,i,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var d=r.checkFramebufferStatus(r.FRAMEBUFFER);if(d!==r.FRAMEBUFFER_COMPLETE){for(t._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(r.deleteRenderbuffer(t._depth_rb),t._depth_rb=null),f=0;f<t.color.length;++f)t.color[f].dispose(),t.color[f]=null;t._color_rb&&(r.deleteRenderbuffer(t._color_rb),t._color_rb=null),pp(r,e),gp(d)}pp(r,e)}(this)}var xp=yp.prototype;function bp(t,e,r){if(t._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==r){var n=t.gl,a=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(e<0||e>a||r<0||r>a)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=r;for(var i=dp(n),o=0;o<t.color.length;++o)t.color[o].shape=t._shape;t._color_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._color_rb),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,t._shape[0],t._shape[1])),n.bindFramebuffer(n.FRAMEBUFFER,t.handle);var l=n.checkFramebufferStatus(n.FRAMEBUFFER);l!==n.FRAMEBUFFER_COMPLETE&&(t.dispose(),pp(n,i),gp(l)),pp(n,i)}}Object.defineProperties(xp,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw new Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],r=0|t[1];return bp(this,e,r),[e,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return bp(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,bp(this,this._shape[0],t),t},enumerable:!1}}),xp.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1])}},xp.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};var _p=function(t,e){var r=fp(t,e),n=Lo.mallocUint8(e[0]*e[1]*4);return new Mp(t,r,n)},wp=Oi.nextPow2,Ap=Yd({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_55_arg0_<255||_inline_55_arg1_<255||_inline_55_arg2_<255||_inline_55_arg3_<255){var _inline_55_l=_inline_55_arg4_-_inline_55_arg6_[0],_inline_55_a=_inline_55_arg5_-_inline_55_arg6_[1],_inline_55_f=_inline_55_l*_inline_55_l+_inline_55_a*_inline_55_a;_inline_55_f<this_closestD2&&(this_closestD2=_inline_55_f,this_closestX=_inline_55_arg6_[0],this_closestY=_inline_55_arg6_[1])}}",args:[{name:"_inline_55_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_55_a","_inline_55_f","_inline_55_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});function Mp(t,e,r){this.gl=t,this.fbo=e,this.buffer=r,this._readTimeout=null;var n=this;this._readCallback=function(){n.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,n.buffer),n._readTimeout=null)}}var Tp=Mp.prototype;Object.defineProperty(Tp,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],r=this.fbo.shape[1];if(r*e*4>this.buffer.length){Lo.free(this.buffer);for(var n=this.buffer=Lo.mallocUint8(wp(r*e*4)),a=0;a<r*e*4;++a)n[a]=255}return t}}}),Tp.begin=function(){var t=this.gl;this.shape;t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},Tp.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},Tp.query=function(t,e,r){if(!this.gl)return null;var n=this.fbo.shape.slice();t|=0,e|=0,"number"!=typeof r&&(r=1);var a=0|Math.min(Math.max(t-r,0),n[0]),i=0|Math.min(Math.max(t+r,0),n[0]),o=0|Math.min(Math.max(e-r,0),n[1]),l=0|Math.min(Math.max(e+r,0),n[1]);if(i<=a||l<=o)return null;var s=[i-a,l-o],u=Li(this.buffer,[s[0],s[1],4],[4,4*n[0],1],4*(a+n[0]*o)),c=Ap(u.hi(s[0],s[1],1),r,r),f=c[0],h=c[1];return f<0||Math.pow(this.radius,2)<c[2]?null:new function(t,e,r,n,a){this.coord=[t,e],this.id=r,this.value=n,this.distance=a}(f+a|0,h+o|0,u.get(f,h,0),[u.get(f,h,1),u.get(f,h,2),u.get(f,h,3)],Math.sqrt(c[2]))},Tp.dispose=function(){this.gl&&(this.fbo.dispose(),Lo.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};var kp=function(t){var e=t.gl,r=_p(e,[e.drawingBufferWidth,e.drawingBufferHeight]),n=new Ep(e,r);return n.grid=os(n),n.text=Gd(n),n.line=gs(n),n.box=Zl(n),n.update(t),n};function Ep(t,e){this.gl=t,this.pickBuffer=e,this.screenBox=[0,0,t.drawingBufferWidth,t.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var Cp=Ep.prototype;function Sp(t){for(var e=t.slice(),r=0;r<e.length;++r)e[r]=e[r].slice();return e}function Lp(t,e){return t.x-e.x}Cp.setDirty=function(){this.dirty=this.pickDirty=!0},Cp.setOverlayDirty=function(){this.dirty=!0},Cp.nextDepthValue=function(){return this._depthCounter++/65536},Cp.draw=function(){var t=this.gl,e=this.screenBox,r=this.viewBox,n=this.dataBox,a=this.pixelRatio,i=this.grid,o=this.line,l=this.text,s=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,t.bindFramebuffer(t.FRAMEBUFFER,null),t.enable(t.SCISSOR_TEST),t.disable(t.DEPTH_TEST),t.depthFunc(t.LESS),t.depthMask(!1),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD,t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.borderColor){t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]);var u=this.borderColor;t.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}t.scissor(r[0],r[1],r[2]-r[0],r[3]-r[1]),t.viewport(r[0],r[1],r[2]-r[0],r[3]-r[1]);var c=this.backgroundColor;t.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),t.clear(t.COLOR_BUFFER_BIT),i.draw();var f=this.zeroLineEnable,h=this.zeroLineColor,d=this.zeroLineWidth;if(f[0]||f[1]){o.bind();for(var p=0;p<2;++p)if(f[p]&&n[p]<=0&&n[p+2]>=0){var g=e[p]-n[p]*(e[p+2]-e[p])/(n[p+2]-n[p]);0===p?o.drawLine(g,e[1],g,e[3],d[p],h[p]):o.drawLine(e[0],g,e[2],g,d[p],h[p])}}for(p=0;p<s.length;++p)s[p].draw();t.viewport(e[0],e[1],e[2]-e[0],e[3]-e[1]),t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.grid.drawTickMarks(),o.bind();var v=this.borderLineEnable,m=this.borderLineWidth,y=this.borderLineColor;for(v[1]&&o.drawLine(r[0],r[1]-.5*m[1]*a,r[0],r[3]+.5*m[3]*a,m[1],y[1]),v[0]&&o.drawLine(r[0]-.5*m[0]*a,r[1],r[2]+.5*m[2]*a,r[1],m[0],y[0]),v[3]&&o.drawLine(r[2],r[1]-.5*m[1]*a,r[2],r[3]+.5*m[3]*a,m[3],y[3]),v[2]&&o.drawLine(r[0]-.5*m[0]*a,r[3],r[2]+.5*m[2]*a,r[3],m[2],y[2]),l.bind(),p=0;p<2;++p)l.drawTicks(p);this.titleEnable&&l.drawTitle();var x=this.overlays;for(p=0;p<x.length;++p)x[p].draw();t.disable(t.SCISSOR_TEST),t.disable(t.BLEND),t.depthMask(!0)}},Cp.drawPick=function(){if(!this.static){var t=this.pickBuffer;this.gl;this._pickTimeout=null,t.begin();for(var e=1,r=this.objects,n=0;n<r.length;++n)e=r[n].drawPick(e);t.end()}},Cp.pick=function(t,e){if(!this.static){var r=this.pixelRatio,n=this.pickPixelRatio,a=this.viewBox,i=0|Math.round((t-a[0]/r)*n),o=0|Math.round((e-a[1]/r)*n),l=this.pickBuffer.query(i,o,this.pickRadius);if(!l)return null;for(var s=l.id+(l.value[0]<<8)+(l.value[1]<<16)+(l.value[2]<<24),u=this.objects,c=0;c<u.length;++c){var f=u[c].pick(i,o,s);if(f)return f}return null}},Cp.setScreenBox=function(t){var e=this.screenBox,r=this.pixelRatio;e[0]=0|Math.round(t[0]*r),e[1]=0|Math.round(t[1]*r),e[2]=0|Math.round(t[2]*r),e[3]=0|Math.round(t[3]*r),this.setDirty()},Cp.setDataBox=function(t){var e=this.dataBox;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3])&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this.setDirty())},Cp.setViewBox=function(t){var e=this.pixelRatio,r=this.viewBox;r[0]=0|Math.round(t[0]*e),r[1]=0|Math.round(t[1]*e),r[2]=0|Math.round(t[2]*e),r[3]=0|Math.round(t[3]*e);var n=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((t[2]-t[0])*n),0|Math.round((t[3]-t[1])*n)],this.setDirty()},Cp.update=function(t){t=t||{};var e=this.gl;this.pixelRatio=t.pixelRatio||1;var r=this.pixelRatio;this.pickPixelRatio=Math.max(r,1),this.setScreenBox(t.screenBox||[0,0,e.drawingBufferWidth/r,e.drawingBufferHeight/r]);this.screenBox;this.setViewBox(t.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/r,.125*(this.screenBox[3]-this.screenBox[1])/r,.875*(this.screenBox[2]-this.screenBox[0])/r,.875*(this.screenBox[3]-this.screenBox[1])/r]);var n=this.viewBox,a=(n[2]-n[0])/(n[3]-n[1]);this.setDataBox(t.dataBox||[-10,-10/a,10,10/a]),this.borderColor=!1!==t.borderColor&&(t.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(t.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(t.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(t.gridLineWidth||[1,1]).slice(),this.gridLineColor=Sp(t.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(t.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(t.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=Sp(t.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(t.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(t.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=Sp(t.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(t.titleCenter||[.5*(n[0]+n[2])/r,(n[3]+120)/r]).slice(),this.titleEnable=!("titleEnable"in t&&!t.titleEnable),this.titleAngle=t.titleAngle||0,this.titleColor=(t.titleColor||[0,0,0,1]).slice(),this.labelPad=(t.labelPad||[15,15,15,15]).slice(),this.labelAngle=(t.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(t.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=Sp(t.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(t.tickPad||[15,15,15,15]).slice(),this.tickAngle=(t.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(t.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=Sp(t.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(t.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(t.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=Sp(t.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var i=t.ticks||[[],[]],o=this._tickBounds;o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var l=0;l<2;++l){var s=i[l].slice(0);0!==s.length&&(s.sort(Lp),o[l]=Math.min(o[l],s[0].x),o[l+2]=Math.max(o[l+2],s[s.length-1].x))}this.grid.update({bounds:o,ticks:i}),this.text.update({bounds:o,ticks:i,labels:t.labels||["x","y"],labelSize:t.labelSize||[12,12],labelFont:t.labelFont||["sans-serif","sans-serif"],title:t.title||"",titleSize:t.titleSize||18,titleFont:t.titleFont||"sans-serif"}),this.static=!!t.static,this.setDirty()},Cp.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var t=this.objects.length-1;t>=0;--t)this.objects[t].dispose();this.objects.length=0;for(t=this.overlays.length-1;t>=0;--t)this.overlays[t].dispose();this.overlays.length=0,this.gl=null},Cp.addObject=function(t){this.objects.indexOf(t)<0&&(this.objects.push(t),this.setDirty())},Cp.removeObject=function(t){for(var e=this.objects,r=0;r<e.length;++r)if(e[r]===t){e.splice(r,1),this.setDirty();break}},Cp.addOverlay=function(t){this.overlays.indexOf(t)<0&&(this.overlays.push(t),this.setOverlayDirty())},Cp.removeOverlay=function(t){for(var e=this.overlays,r=0;r<e.length;++r)if(e[r]===t){e.splice(r,1),this.setOverlayDirty();break}};var Op={};Op.boxVertex=zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),Op.boxFragment=zo(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"]);var Rp=function(t,e){var r=t.gl,n=Fo(r,[0,0,0,1,1,0,1,1]),a=Yl(r,Op.boxVertex,Op.boxFragment),i=new Dp(t,n,a);return i.update(e),t.addOverlay(i),i};function Dp(t,e,r){this.plot=t,this.boxBuffer=e,this.boxShader=r,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var Ip=Dp.prototype;Ip.draw=function(){if(this.enabled){var t=this.plot,e=this.selectBox,r=this.borderWidth,n=(this.innerFill,this.innerColor),a=(this.outerFill,this.outerColor),i=this.borderColor,o=t.box,l=t.screenBox,s=t.dataBox,u=t.viewBox,c=t.pixelRatio,f=(e[0]-s[0])*(u[2]-u[0])/(s[2]-s[0])+u[0],h=(e[1]-s[1])*(u[3]-u[1])/(s[3]-s[1])+u[1],d=(e[2]-s[0])*(u[2]-u[0])/(s[2]-s[0])+u[0],p=(e[3]-s[1])*(u[3]-u[1])/(s[3]-s[1])+u[1];if(f=Math.max(f,u[0]),h=Math.max(h,u[1]),d=Math.min(d,u[2]),p=Math.min(p,u[3]),!(d<f||p<h)){o.bind();var g=l[2]-l[0],v=l[3]-l[1];if(this.outerFill&&(o.drawBox(0,0,g,h,a),o.drawBox(0,h,f,p,a),o.drawBox(0,p,g,v,a),o.drawBox(d,h,g,p,a)),this.innerFill&&o.drawBox(f,h,d,p,n),r>0){var m=r*c;o.drawBox(f-m,h-m,d+m,h+m,i),o.drawBox(f-m,p-m,d+m,p+m,i),o.drawBox(f-m,h-m,f+m,p+m,i),o.drawBox(d-m,h-m,d+m,p+m,i)}}}},Ip.update=function(t){t=t||{},this.innerFill=!!t.innerFill,this.outerFill=!!t.outerFill,this.innerColor=(t.innerColor||[0,0,0,.5]).slice(),this.outerColor=(t.outerColor||[0,0,0,.5]).slice(),this.borderColor=(t.borderColor||[0,0,0,1]).slice(),this.borderWidth=t.borderWidth||0,this.selectBox=(t.selectBox||this.selectBox).slice()},Ip.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};var Pp=function(t,e){var r=new Fp(t);return r.update(e),t.addOverlay(r),r};function Fp(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var zp=Fp.prototype;zp.update=function(t){t=t||{},this.enable=(t.enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(t){return t.slice()}),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},zp.draw=function(){var t=this.enable,e=this.width,r=this.color,n=this.center,a=this.plot,i=a.line,o=a.dataBox,l=a.viewBox;if(i.bind(),o[0]<=n[0]&&n[0]<=o[2]&&o[1]<=n[1]&&n[1]<=o[3]){var s=l[0]+(n[0]-o[0])/(o[2]-o[0])*(l[2]-l[0]),u=l[1]+(n[1]-o[1])/(o[3]-o[1])*(l[3]-l[1]);t[0]&&i.drawLine(s,u,l[0],u,e[0],r[0]),t[1]&&i.drawLine(s,u,s,l[1],e[1],r[1]),t[2]&&i.drawLine(s,u,l[2],u,e[2],r[2]),t[3]&&i.drawLine(s,u,s,l[3],e[3],r[3])}},zp.dispose=function(){this.plot.removeOverlay(this)};var Np=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var r=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(r.width=e.width);"number"==typeof e.height&&(r.height=e.height);var n,a=e;try{var i=[t];0===t.indexOf("webgl")&&i.push("experimental-"+t);for(var o=0;o<i.length;o++)if(n=r.getContext(i[o],a))return n}catch(t){n=null}return n||null};var Bp=function(t){return Np("webgl",t)},jp={};(function(t){"use strict";var e;e="function"!=typeof t.matchMedia||!t.matchMedia("(hover: none)").matches,jp=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Up=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}(),Vp={left:0,top:0},Hp=function(t,e,r){e=e||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n=t.clientX||0,a=t.clientY||0,i=(o=e,o===window||o===document||o===document.body?Vp:o.getBoundingClientRect());var o;return r[0]=n-i.left,r[1]=a-i.top,r};var qp=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];function Gp(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Xp=Gp;function Wp(t){return"function"==typeof t}function Yp(t){return"object"==typeof t&&null!==t}function Zp(t){return void 0===t}Gp.EventEmitter=Gp,Gp.prototype._events=void 0,Gp.prototype._maxListeners=void 0,Gp.defaultMaxListeners=10,Gp.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},Gp.prototype.emit=function(t){var e,r,n,a,i,o;if(this._events||(this._events={}),"error"===t&&(!this._events.error||Yp(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(Zp(r=this._events[t]))return!1;if(Wp(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(Yp(r))for(a=Array.prototype.slice.call(arguments,1),n=(o=r.slice()).length,i=0;i<n;i++)o[i].apply(this,a);return!0},Gp.prototype.addListener=function(t,e){var r;if(!Wp(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,Wp(e.listener)?e.listener:e),this._events[t]?Yp(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,Yp(this._events[t])&&!this._events[t].warned&&(r=Zp(this._maxListeners)?Gp.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},Gp.prototype.on=Gp.prototype.addListener,Gp.prototype.once=function(t,e){if(!Wp(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},Gp.prototype.removeListener=function(t,e){var r,n,a,i;if(!Wp(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(r=this._events[t]).length,n=-1,r===e||Wp(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(Yp(r)){for(i=a;i-- >0;)if(r[i]===e||r[i].listener&&r[i].listener===e){n=i;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},Gp.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(Wp(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},Gp.prototype.listeners=function(t){return this._events&&this._events[t]?Wp(this._events[t])?[this._events[t]]:this._events[t].slice():[]},Gp.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(Wp(e))return 1;if(e)return e.length}return 0},Gp.listenerCount=function(t,e){return t.listenerCount(e)};var Jp,Qp=Xp.EventEmitter,$p={init:function(t){if(t._ev instanceof Qp)return t;var e=new Qp,r=new Qp;return t._ev=e,t._internalEv=r,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=r.on.bind(r),t._internalOnce=r.once.bind(r),t._removeInternalListener=r.removeListener.bind(r),t._removeAllInternalListeners=r.removeAllListeners.bind(r),t.emit=function(n,a){"undefined"!=typeof jQuery&&jQuery(t).trigger(n,a),e.emit(n,a),r.emit(n,a)},t},triggerHandler:function(t,e,r){var n,a;"undefined"!=typeof jQuery&&(n=jQuery(t).triggerHandler(e,r));var i=t._ev;if(!i)return n;var o=i._events[e];if(!o)return n;"function"==typeof o&&(o=[o]);for(var l=o.pop(),s=0;s<o.length;s++)o[s](r);return a=l(r),void 0!==n?n:a},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}},Kp=Jp={};Kp.wrapped=function(t,e,r){(t=Bt(t))._fullLayout&&te.clear(t._fullLayout._uid+Ae.HOVERID),Kp.raw(t,e,r)},Kp.raw=function(t,e){var r=t._fullLayout,n=t._hoverdata;e||(e={}),e.target&&!1===$p.triggerHandler(t,"plotly_beforehover",e)||(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&n&&t.emit("plotly_unhover",{event:e,points:n}))};var tg={},eg=tg={};function rg(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function ng(t){t._dragging=!1,t._replotPending&&R.call("plot",t)}function ag(t){return Hp(t.changedTouches?t.changedTouches[0]:t,document.body)}eg.align=function(t,e,r,n,a){var i=(t-r)/(n-r),o=i+e/(n-r),l=(i+o)/2;return"left"===a||"bottom"===a?i:"center"===a||"middle"===a?l:"right"===a||"top"===a?o:i<2/3-l?i:o>4/3-l?o:l},eg.getCursor=function(t,e,r,n){return t="left"===r?0:"center"===r?1:"right"===r?2:ae.constrain(Math.floor(3*t),0,2),e="bottom"===n?0:"middle"===n?1:"top"===n?2:ae.constrain(Math.floor(3*e),0,2),qp[e][t]},eg.unhover=Jp.wrapped,eg.unhoverRaw=Jp.raw,eg.init=function(t){var e,r,n,a,i,o,l,s,u=t.gd,c=1,f=h.DBLCLICKDELAY,d=t.element;u._mouseDownTime||(u._mouseDownTime=0),d.style.pointerEvents="all",d.onmousedown=g,Up?(d._ontouchstart&&d.removeEventListener("touchstart",d._ontouchstart),d._ontouchstart=g,d.addEventListener("touchstart",g,{passive:!1})):d.ontouchstart=g;var p=t.clampFn||function(t,e,r){return Math.abs(t)<r&&(t=0),Math.abs(e)<r&&(e=0),[t,e]};function g(h){h.preventDefault(),u._dragged=!1,u._dragging=!0;var p=ag(h);e=p[0],r=p[1],l=h.target,o=h,s=2===h.buttons||h.ctrlKey,(n=(new Date).getTime())-u._mouseDownTime<f?c+=1:(c=1,u._mouseDownTime=n),t.prepFn&&t.prepFn(h,e,r),jp&&!s?(i=rg()).style.cursor=window.getComputedStyle(d).cursor:jp||(i=document,a=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(d).cursor),document.addEventListener("mousemove",v),document.addEventListener("mouseup",m),document.addEventListener("touchmove",v),document.addEventListener("touchend",m)}function v(n){n.preventDefault();var a=ag(n),i=t.minDrag||Se.MINDRAG,o=p(a[0]-e,a[1]-r,i),l=o[0],c=o[1];(l||c)&&(u._dragged=!0,eg.unhover(u)),u._dragged&&t.moveFn&&!s&&t.moveFn(l,c)}function m(e){if(document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",m),e.preventDefault(),jp?ae.removeElement(i):a&&(i.documentElement.style.cursor=a,a=null),u._dragging){if(u._dragging=!1,(new Date).getTime()-u._mouseDownTime>f&&(c=Math.max(c-1,1)),u._dragged)t.doneFn&&t.doneFn(e);else if(t.clickFn&&t.clickFn(c,o),!s){var r;try{r=new MouseEvent("click",e)}catch(t){var n=ag(e);(r=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,n[0],n[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}l.dispatchEvent(r)}ng(u),u._dragged=!1}else u._dragged=!1}},eg.coverSlip=rg;function ig(t,e,r,n){n=n||ae.identity,Array.isArray(t)&&(e[0][r]=n(t))}var og={getSubplot:function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},flat:function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=e;return r},p2c:function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n].p2c(e);return r},getDistanceFunction:function(t,e,r,n){return"closest"===t?n||og.quadrature(e,r):"x"===t?e:r},getClosest:function(t,e,r){if(!1!==r.index)r.index>=0&&r.index<t.length?r.distance=0:r.index=!1;else for(var n=0;n<t.length;n++){var a=e(t[n]);a<=r.distance&&(r.index=n,r.distance=a)}return r},inbox:function(t,e,r){return t*e<0||0===t?r:1/0},quadrature:function(t,e){return function(r){var n=t(r),a=e(r);return Math.sqrt(n*n+a*a)}},makeEventData:function(t,e,r){var n="index"in t?t.index:t.pointNumber,a={data:e._input,fullData:e,curveNumber:e.index,pointNumber:n};if(e._indexToPoints){var i=e._indexToPoints[n];1===i.length?a.pointIndex=i[0]:a.pointIndices=i}else a.pointIndex=n;return e._module.eventData?a=e._module.eventData(a,t,e,r,n):("xVal"in t?a.x=t.xVal:"x"in t&&(a.x=t.x),"yVal"in t?a.y=t.yVal:"y"in t&&(a.y=t.y),t.xa&&(a.xaxis=t.xa),t.ya&&(a.yaxis=t.ya),void 0!==t.zLabelVal&&(a.z=t.zLabelVal)),og.appendArrayPointValue(a,e,n),a},appendArrayPointValue:function(t,e,r){var n=e._arrayAttrs;if(n)for(var a=0;a<n.length;a++){var i=n[a],o=sg(i);if(void 0===t[o]){var l=ug(ae.nestedProperty(e,i).get(),r);void 0!==l&&(t[o]=l)}}},appendArrayMultiPointValues:function(t,e,r){var n=e._arrayAttrs;if(n)for(var a=0;a<n.length;a++){var i=n[a],o=sg(i);if(void 0===t[o]){for(var l=ae.nestedProperty(e,i).get(),s=new Array(r.length),u=0;u<r.length;u++)s[u]=ug(l,r[u]);t[o]=s}}}},lg={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function sg(t){return lg[t]||t}function ug(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}var cg=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)},fg="data-savedcursor",hg=function(t,e){var r=t.attr(fg);if(e){if(!r){for(var n=(t.attr("class")||"").split(" "),a=0;a<n.length;a++){var i=n[a];0===i.indexOf("cursor-")&&t.attr(fg,i.substr(7)).classed(i,!1)}t.attr(fg)||t.attr(fg,"!!")}cg(t,e)}else r&&(t.attr(fg,null),"!!"===r?cg(t):cg(t,r))},dg={},pg=Ae.YANGLE,gg=Math.PI*pg/180,vg=1/Math.sin(gg),mg=Math.cos(gg),yg=Math.sin(gg),xg=Ae.HOVERARROWSIZE,bg=Ae.HOVERTEXTPAD;function _g(e,r,n){var a=r.hovermode,i=r.rotateLabels,o=r.bgColor,l=r.container,s=r.outerContainer,u=r.commonLabelOpts||{},c=r.fontFamily||Ae.HOVERFONT,f=r.fontSize||Ae.HOVERFONTSIZE,h=e[0],d=h.xa,p=h.ya,g="y"===a?"yLabel":"xLabel",v=h[g],m=(String(v)||"").split(" ")[0],y=s.node().getBoundingClientRect(),x=y.top,b=y.width,_=y.height,w=void 0!==v&&h.distance<=r.hoverdistance&&("x"===a||"y"===a);if(w){var A,M,T=!0;for(A=0;A<e.length;A++){T&&void 0===e[A].zLabel&&(T=!1),M=e[A].hoverinfo||e[A].trace.hoverinfo;var k=Array.isArray(M)?M:M.split("+");if(-1===k.indexOf("all")&&-1===k.indexOf(a)){w=!1;break}}T&&(w=!1)}var E=l.selectAll("g.axistext").data(w?[0]:[]);E.enter().append("g").classed("axistext",!0),E.exit().remove(),E.each(function(){var r=t.select(this),i=r.selectAll("path").data([0]),o=r.selectAll("text").data([0]);i.enter().append("path").style({"stroke-width":"1px"}),i.style({fill:u.bgcolor||Pe.defaultLine,stroke:u.bordercolor||Pe.background}),o.enter().append("text").attr("data-notex",1),o.text(v).call(Jr.font,u.font.family||c,u.font.size||f,u.font.color||Pe.background).call(Mr.positionText,0,0).call(Mr.convertToTspans,n),r.attr("transform","");var l=o.node().getBoundingClientRect();if("x"===a){o.attr("text-anchor","middle").call(Mr.positionText,0,"top"===d.side?x-l.bottom-xg-bg:x-l.top+xg+bg);var s="top"===d.side?"-":"";i.attr("d","M0,0L"+xg+","+s+xg+"H"+(bg+l.width/2)+"v"+s+(2*bg+l.height)+"H-"+(bg+l.width/2)+"V"+s+xg+"H-"+xg+"Z"),r.attr("transform","translate("+(d._offset+(h.x0+h.x1)/2)+","+(p._offset+("top"===d.side?0:p._length))+")")}else{o.attr("text-anchor","right"===p.side?"start":"end").call(Mr.positionText,("right"===p.side?1:-1)*(bg+xg),x-l.top-l.height/2);var y="right"===p.side?"":"-";i.attr("d","M0,0L"+y+xg+","+xg+"V"+(bg+l.height/2)+"h"+y+(2*bg+l.width)+"V-"+(bg+l.height/2)+"H"+y+xg+"V-"+xg+"Z"),r.attr("transform","translate("+(d._offset+("right"===p.side?d._length:0))+","+(p._offset+(h.y0+h.y1)/2)+")")}e=e.filter(function(t){return void 0!==t.zLabelVal||(t[g]||"").split(" ")[0]===m})});var C=l.selectAll("g.hovertext").data(e,function(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa,t.ya||""].join(",")});return C.enter().append("g").classed("hovertext",!0).each(function(){var e=t.select(this);e.append("rect").call(Pe.fill,Pe.addOpacity(o,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(Jr.font,c,f)}),C.exit().remove(),C.each(function(e){var r=t.select(this).attr("transform",""),l="",s="",u=Pe.opacity(e.color)?e.color:Pe.defaultLine,h=Pe.combine(u,o),d=e.borderColor||Pe.contrast(h);if(void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name){l=Mr.plainText(e.name||"");var p=Math.round(e.nameLength);p>-1&&l.length>p&&(l=p>3?l.substr(0,p-3)+"...":l.substr(0,p))}void 0!==e.extraText&&(s+=e.extraText),void 0!==e.zLabel?(void 0!==e.xLabel&&(s+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(s+="y: "+e.yLabel+"<br>"),s+=(s?"z: ":"")+e.zLabel):w&&e[a+"Label"]===v?s=e[("x"===a?"y":"x")+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&(s=e.yLabel):s=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",e.text&&!Array.isArray(e.text)&&(s+=(s?"<br>":"")+e.text),""===s&&(""===l&&r.remove(),s=l);var g=r.select("text.nums").call(Jr.font,e.fontFamily||c,e.fontSize||f,e.fontColor||d).text(s).attr("data-notex",1).call(Mr.positionText,0,0).call(Mr.convertToTspans,n),m=r.select("text.name"),y=0;l&&l!==s?(m.call(Jr.font,e.fontFamily||c,e.fontSize||f,h).text(l).attr("data-notex",1).call(Mr.positionText,0,0).call(Mr.convertToTspans,n),y=m.node().getBoundingClientRect().width+2*bg):(m.remove(),r.select("rect").remove()),r.select("path").style({fill:h,stroke:d});var A,M,T=g.node().getBoundingClientRect(),k=e.xa._offset+(e.x0+e.x1)/2,E=e.ya._offset+(e.y0+e.y1)/2,C=Math.abs(e.x1-e.x0),S=Math.abs(e.y1-e.y0),L=T.width+xg+bg+y;e.ty0=x-T.top,e.bx=T.width+2*bg,e.by=T.height+2*bg,e.anchor="start",e.txwidth=T.width,e.tx2width=y,e.offset=0,i?(e.pos=k,A=E+S/2+L<=_,M=E-S/2-L>=0,"top"!==e.idealAlign&&A||!M?A?(E+=S/2,e.anchor="start"):e.anchor="middle":(E-=S/2,e.anchor="end")):(e.pos=E,A=k+C/2+L<=b,M=k-C/2-L>=0,"left"!==e.idealAlign&&A||!M?A?(k+=C/2,e.anchor="start"):e.anchor="middle":(k-=C/2,e.anchor="end")),g.attr("text-anchor",e.anchor),y&&m.attr("text-anchor",e.anchor),r.attr("transform","translate("+k+","+E+")"+(i?"rotate("+pg+")":""))}),C}function wg(e,r){e.each(function(e){var n=t.select(this);if(e.del)n.remove();else{var a="end"===e.anchor?-1:1,i=n.select("text.nums"),o={start:1,end:-1,middle:0}[e.anchor],l=o*(xg+bg),s=l+o*(e.txwidth+bg),u=0,c=e.offset;"middle"===e.anchor&&(l-=e.tx2width/2,s+=e.txwidth/2+bg),r&&(c*=-yg,u=e.offset*mg),n.select("path").attr("d","middle"===e.anchor?"M-"+(e.bx/2+e.tx2width/2)+","+(c-e.by/2)+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(a*xg+u)+","+(xg+c)+"v"+(e.by/2-xg)+"h"+a*e.bx+"v-"+e.by+"H"+(a*xg+u)+"V"+(c-xg)+"Z"),i.call(Mr.positionText,l+u,c+e.ty0-e.by/2+bg),e.tx2width&&(n.select("text.name").call(Mr.positionText,s+o*bg+u,c+e.ty0-e.by/2+bg),n.select("rect").call(Jr.setRect,s+(o-1)*e.tx2width/2+u,c-e.by/2-1,e.tx2width,e.by+2))}})}function Ag(t,e){var r=t.index,n=t.trace||{},a=t.cd[0],i=t.cd[r]||{},o=Array.isArray(r)?function(t,e){return ae.castOption(a,r,t)||ae.extractOption({},n,"",e)}:function(t,e){return ae.extractOption(i,n,t,e)};function l(e,r,n){var a=o(r,n);a&&(t[e]=a)}if(l("hoverinfo","hi","hoverinfo"),l("color","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),t.posref="y"===e?t.xa._offset+(t.x0+t.x1)/2:t.ya._offset+(t.y0+t.y1)/2,t.x0=ae.constrain(t.x0,0,t.xa._length),t.x1=ae.constrain(t.x1,0,t.xa._length),t.y0=ae.constrain(t.y0,0,t.ya._length),t.y1=ae.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:ya.hoverLabelText(t.xa,t.xLabelVal),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:ya.hoverLabelText(t.ya,t.yLabelVal),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!(isNaN(t.xerr)||"log"===t.xa.type&&t.xerr<=0)){var s=ya.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;void 0!==t.xerrneg?t.xLabel+=" +"+s+" / -"+ya.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:t.xLabel+=" \xb1 "+s,"x"===e&&(t.distance+=1)}if(!(isNaN(t.yerr)||"log"===t.ya.type&&t.yerr<=0)){var u=ya.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;void 0!==t.yerrneg?t.yLabel+=" +"+u+" / -"+ya.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:t.yLabel+=" \xb1 "+u,"y"===e&&(t.distance+=1)}var c=t.hoverinfo||t.trace.hoverinfo;return"all"!==c&&(-1===(c=Array.isArray(c)?c:c.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===c.indexOf("y")&&(t.yLabel=void 0),-1===c.indexOf("z")&&(t.zLabel=void 0),-1===c.indexOf("text")&&(t.text=void 0),-1===c.indexOf("name")&&(t.name=void 0)),t}function Mg(t,e){var r,n,a=e.container,i=e.fullLayout,o=e.event,s=!!t.hLinePoint,u=!!t.vLinePoint;if(a.selectAll(".spikeline").remove(),u||s){var c=Pe.combine(i.plot_bgcolor,i.paper_bgcolor);if(s){var f,h,d=t.hLinePoint;r=d&&d.xa,"cursor"===(n=d&&d.ya).spikesnap?(f=o.pointerX,h=o.pointerY):(f=r._offset+d.x,h=n._offset+d.y);var p,g,v=l.readability(d.color,c)<1.5?Pe.contrast(c):d.color,m=n.spikemode,y=n.spikethickness,x=n.spikecolor||v,b=n._boundingBox,_=(b.left+b.right)/2<f?b.right:b.left;-1===m.indexOf("toaxis")&&-1===m.indexOf("across")||(-1!==m.indexOf("toaxis")&&(p=_,g=f),-1!==m.indexOf("across")&&(p=n._counterSpan[0],g=n._counterSpan[1]),a.insert("line",":first-child").attr({x1:p,x2:g,y1:h,y2:h,"stroke-width":y,stroke:x,"stroke-dasharray":Jr.dashStyle(n.spikedash,y)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:p,x2:g,y1:h,y2:h,"stroke-width":y+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)),-1!==m.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:_+("right"!==n.side?y:-y),cy:h,r:y,fill:x}).classed("spikeline",!0)}if(u){var w,A,M=t.vLinePoint;r=M&&M.xa,n=M&&M.ya,"cursor"===r.spikesnap?(w=o.pointerX,A=o.pointerY):(w=r._offset+M.x,A=n._offset+M.y);var T,k,E=l.readability(M.color,c)<1.5?Pe.contrast(c):M.color,C=r.spikemode,S=r.spikethickness,L=r.spikecolor||E,O=r._boundingBox,R=(O.top+O.bottom)/2<A?O.bottom:O.top;-1===C.indexOf("toaxis")&&-1===C.indexOf("across")||(-1!==C.indexOf("toaxis")&&(T=R,k=A),-1!==C.indexOf("across")&&(T=r._counterSpan[0],k=r._counterSpan[1]),a.insert("line",":first-child").attr({x1:w,x2:w,y1:T,y2:k,"stroke-width":S,stroke:L,"stroke-dasharray":Jr.dashStyle(r.spikedash,S)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:w,x2:w,y1:T,y2:k,"stroke-width":S+2,stroke:c}).classed("spikeline",!0).classed("crisp",!0)),-1!==C.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:w,cy:R-("top"!==r.side?S:-S),r:S,fill:L}).classed("spikeline",!0)}}}function Tg(t,e){return!e||(e.vLinePoint!==t._spikepoints.vLinePoint||e.hLinePoint!==t._spikepoints.hLinePoint)}dg.hover=function(r,n,a,i){r=ae.getGraphDiv(r),ae.throttle(r._fullLayout._uid+Ae.HOVERID,Ae.HOVERMINTIME,function(){!function(r,n,a,i){a||(a="xy");var o=Array.isArray(a)?a:[a],l=r._fullLayout,s=l._plots||[],u=s[a],c=l._has("cartesian");if(u){var f=u.overlays.map(function(t){return t.id});o=o.concat(f)}for(var h=o.length,d=new Array(h),p=new Array(h),g=!1,v=0;v<h;v++){var m=o[v],y=s[m];if(y)g=!0,d[v]=ya.getFromId(r,y.xaxis._id),p[v]=ya.getFromId(r,y.yaxis._id);else{var x=l[m]._subplot;d[v]=x.xaxis,p[v]=x.yaxis}}var b=n.hovermode||l.hovermode;b&&!g&&(b="closest");if(-1===["x","y","closest"].indexOf(b)||!r.calcdata||r.querySelector(".zoombox")||r._dragging)return tg.unhoverRaw(r,n);var _,w,A,M,T,k,E,C,S,L,O,D,I,P=-1===l.hoverdistance?1/0:l.hoverdistance,F=-1===l.spikedistance?1/0:l.spikedistance,z=[],N=[],B={hLinePoint:null,vLinePoint:null};if(Array.isArray(n))for(b="array",A=0;A<n.length;A++)"skip"!==(T=r.calcdata[n[A].curveNumber||0])[0].trace.hoverinfo&&N.push(T);else{for(M=0;M<r.calcdata.length;M++)T=r.calcdata[M],"skip"!==(k=T[0].trace).hoverinfo&&-1!==o.indexOf(og.getSubplot(k))&&N.push(T);var j,U,V=!n.target;if(V)j="xpx"in n?n.xpx:d[0]._length/2,n.pointerX=j+d[0]._offset,U="ypx"in n?n.ypx:p[0]._length/2,n.pointerY=U+p[0]._offset;else{if(!1===$p.triggerHandler(r,"plotly_beforehover",n))return;var H=n.target.getBoundingClientRect();if(j=n.clientX-H.left,U=n.clientY-H.top,j<0||j>H.width||U<0||U>H.height)return tg.unhoverRaw(r,n);n.pointerX=n.offsetX,n.pointerY=n.offsetY}if(_="xval"in n?og.flat(o,n.xval):og.p2c(d,j),w="yval"in n?og.flat(o,n.yval):og.p2c(p,U),!e(_[0])||!e(w[0]))return ae.warn("Fx.hover failed",n,r),tg.unhoverRaw(r,n)}var q=1/0;for(M=0;M<N.length;M++)if((T=N[M])&&T[0]&&T[0].trace&&!0===T[0].trace.visible&&(k=T[0].trace,-1===["carpet","contourcarpet"].indexOf(k._module.name))){if(E=og.getSubplot(k),C=o.indexOf(E),S=b,D={cd:T,trace:k,xa:d[C],ya:p[C],maxHoverDistance:P,maxSpikeDistance:F,index:!1,distance:Math.min(q,P),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:Pe.defaultLine,name:k.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},l[E]&&(D.subplot=l[E]._subplot),I=z.length,"array"===S){var G=n[M];"pointNumber"in G?(D.index=G.pointNumber,S="closest"):(S="","xval"in G&&(L=G.xval,S="x"),"yval"in G&&(O=G.yval,S=S?"closest":"y"))}else L=_[C],O=w[C];if(0!==P)if(k._module&&k._module.hoverPoints){var X=k._module.hoverPoints(D,L,O,S,l._hoverlayer);if(X)for(var W,Y=0;Y<X.length;Y++)W=X[Y],e(W.x0)&&e(W.y0)&&z.push(Ag(W,b))}else ae.log("Unrecognized trace type in hover:",k);if("closest"===b&&z.length>I&&(z.splice(0,I),q=z[0].distance),c&&0!==F&&0===z.length){D.distance=F,D.index=!1;var Z=k._module.hoverPoints(D,L,O,"closest",l._hoverlayer);if(Z&&(Z=Z.filter(function(t){return t.spikeDistance<=F})),Z&&Z.length){var J,Q=Z.filter(function(t){return t.xa.showspikes});if(Q.length){var $=Q[0];e($.x0)&&e($.y0)&&(J=rt($),(!B.vLinePoint||B.vLinePoint.spikeDistance>J.spikeDistance)&&(B.vLinePoint=J))}var K=Z.filter(function(t){return t.ya.showspikes});if(K.length){var tt=K[0];e(tt.x0)&&e(tt.y0)&&(J=rt(tt),(!B.hLinePoint||B.hLinePoint.spikeDistance>J.spikeDistance)&&(B.hLinePoint=J))}}}}function et(t,e){for(var r,n=null,a=1/0,i=0;i<t.length;i++)(r=t[i].spikeDistance)<a&&r<=e&&(n=t[i],a=r);return n}function rt(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}var nt={fullLayout:l,container:l._hoverlayer,outerContainer:l._paperdiv,event:n},at=r._spikepoints,it={vLinePoint:B.vLinePoint,hLinePoint:B.hLinePoint};if(r._spikepoints=it,c&&0!==F&&0!==z.length){var ot=z.filter(function(t){return t.ya.showspikes}),lt=et(ot,F);B.hLinePoint=rt(lt);var st=z.filter(function(t){return t.xa.showspikes}),ut=et(st,F);B.vLinePoint=rt(ut)}if(0===z.length){var ct=tg.unhoverRaw(r,n);return!c||null===B.hLinePoint&&null===B.vLinePoint||Tg(at)&&Mg(B,nt),ct}c&&Tg(at)&&Mg(B,nt);z.sort(function(t,e){return t.distance-e.distance});var ft=r._hoverdata,ht=[];for(A=0;A<z.length;A++){var dt=z[A];ht.push(og.makeEventData(dt,dt.trace,dt.cd))}r._hoverdata=ht;var pt="y"===b&&N.length>1,gt=Pe.combine(l.plot_bgcolor||Pe.background,l.paper_bgcolor),vt={hovermode:b,rotateLabels:pt,bgColor:gt,container:l._hoverlayer,outerContainer:l._paperdiv,commonLabelOpts:l.hoverlabel,hoverdistance:l.hoverdistance},mt=_g(z,vt,r);if(function(t,e,r){var n,a,i,o,l,s,u,c=0,f=t.map(function(t,n){var a=t[e];return[{i:n,dp:0,pos:t.pos,posref:t.posref,size:t.by*("x"===a._id.charAt(0)?vg:1)/2,pmin:0,pmax:"x"===a._id.charAt(0)?r.width:r.height}]}).sort(function(t,e){return t[0].posref-e[0].posref});function h(t){var e=t[0],r=t[t.length-1];if(a=e.pmin-e.pos-e.dp+e.size,i=r.pos+r.dp+r.size-e.pmax,a>.01){for(l=t.length-1;l>=0;l--)t[l].dp+=a;n=!1}if(!(i<.01)){if(a<-.01){for(l=t.length-1;l>=0;l--)t[l].dp-=i;n=!1}if(n){var u=0;for(o=0;o<t.length;o++)(s=t[o]).pos+s.dp+s.size>e.pmax&&u++;for(o=t.length-1;o>=0&&!(u<=0);o--)(s=t[o]).pos>e.pmax-1&&(s.del=!0,u--);for(o=0;o<t.length&&!(u<=0);o++)if((s=t[o]).pos<e.pmin+1)for(s.del=!0,u--,i=2*s.size,l=t.length-1;l>=0;l--)t[l].dp-=i;for(o=t.length-1;o>=0&&!(u<=0);o--)(s=t[o]).pos+s.dp+s.size>e.pmax&&(s.del=!0,u--)}}}for(;!n&&c<=t.length;){for(c++,n=!0,o=0;o<f.length-1;){var d=f[o],p=f[o+1],g=d[d.length-1],v=p[0];if((a=g.pos+g.dp+g.size-v.pos-v.dp+v.size)>.01&&g.pmin===v.pmin&&g.pmax===v.pmax){for(l=p.length-1;l>=0;l--)p[l].dp+=a;for(d.push.apply(d,p),f.splice(o+1,1),u=0,l=d.length-1;l>=0;l--)u+=d[l].dp;for(i=u/d.length,l=d.length-1;l>=0;l--)d[l].dp-=i;n=!1}else o++}f.forEach(h)}for(o=f.length-1;o>=0;o--){var m=f[o];for(l=m.length-1;l>=0;l--){var y=m[l],x=t[y.i];x.offset=y.dp,x.del=y.del}}}(z,pt?"xa":"ya",l),wg(mt,pt),n.target&&n.target.tagName){var yt=R.getComponentMethod("annotations","hasClickToShow")(r,ht);hg(t.select(n.target),yt?"pointer":"")}if(!n.target||i||!function(t,e,r){if(!r||r.length!==t._hoverdata.length)return!0;for(var n=r.length-1;n>=0;n--){var a=r[n],i=t._hoverdata[n];if(a.curveNumber!==i.curveNumber||String(a.pointNumber)!==String(i.pointNumber))return!0}return!1}(r,0,ft))return;ft&&r.emit("plotly_unhover",{event:n,points:ft});r.emit("plotly_hover",{event:n,points:r._hoverdata,xaxes:d,yaxes:p,xvals:_,yvals:w})}(r,n,a,i)})},dg.loneHover=function(e,r){var n={color:e.color||Pe.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},a=t.select(r.container),i=r.outerContainer?t.select(r.outerContainer):a,o={hovermode:"closest",rotateLabels:!1,bgColor:r.bgColor||Pe.background,container:a,outerContainer:i},l=_g([n],o,r.gd);return wg(l,o.rotateLabels),l.node()};var kg=dg.hover,Eg=function(t,e,r,n){r("hoverlabel.bgcolor",(n=n||{}).bgcolor),r("hoverlabel.bordercolor",n.bordercolor),r("hoverlabel.namelength",n.namelength),ae.coerceFont(r,"hoverlabel.font",n.font)};var Cg={moduleType:"component",name:"fx",constants:Ae,schema:{layout:Te},attributes:E,layoutAttributes:Te,supplyLayoutGlobalDefaults:function(t,e){Eg(0,0,function(r,n){return ae.coerce(t,e,Te,r,n)})},supplyDefaults:function(t,e,r,n){Eg(0,0,function(r,n){return ae.coerce(t,e,E,r,n)},n.hoverlabel)},supplyLayoutDefaults:function(t,e,r){function n(r,n){return ae.coerce(t,e,Te,r,n)}var a;n("dragmode"),e._has("cartesian")?(e._isHoriz=function(t){for(var e=!0,r=0;r<t.length;r++){var n=t[r];if("h"!==n.orientation){e=!1;break}}return e}(r),a=e._isHoriz?"y":"x"):a="closest",n("hovermode",a)&&(n("hoverdistance"),n("spikedistance"));var i=e._has("mapbox"),o=e._has("geo"),l=e._basePlotModules.length;"zoom"===e.dragmode&&((i||o)&&1===l||i&&o&&2===l)&&(e.dragmode="pan")},calc:function(t){var e=t.calcdata,r=t._fullLayout;function n(t){return function(e){return ae.coerceHoverinfo({hoverinfo:e},{_module:t._module},r)}}for(var a=0;a<e.length;a++){var i=e[a],o=i[0].trace;if(!R.traceIs(o,"pie")){var l=R.traceIs(o,"2dMap")?ig:ae.fillArray;l(o.hoverinfo,i,"hi",n(o)),o.hoverlabel&&(l(o.hoverlabel.bgcolor,i,"hbg"),l(o.hoverlabel.bordercolor,i,"hbc"),l(o.hoverlabel.font.size,i,"hts"),l(o.hoverlabel.font.color,i,"htc"),l(o.hoverlabel.font.family,i,"htf"),l(o.hoverlabel.namelength,i,"hnl"))}}},getDistanceFunction:og.getDistanceFunction,getClosest:og.getClosest,inbox:og.inbox,quadrature:og.quadrature,appendArrayPointValue:og.appendArrayPointValue,castHoverOption:function(t,e,r){return ae.castOption(t,e,"hoverlabel."+r)},castHoverinfo:function(t,e,r){return ae.castOption(t,r,"hoverinfo",function(r){return ae.coerceHoverinfo({hoverinfo:r},{_module:t._module},e)})},hover:dg.hover,unhover:tg.unhover,loneHover:dg.loneHover,loneUnhover:function(e){var r=ae.isD3Selection(e)?e:t.select(e);r.selectAll("g.hovertext").remove(),r.selectAll(".spikeline").remove()},click:function(t,e,r){var n=R.getComponentMethod("annotations","onClick")(t,t._hoverdata);function a(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==r&&kg(t,e,r,!0),t._hoverdata&&e&&e.target&&(n&&n.then?n.then(a):a(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}};var Sg=function(t){return t.split("").map(function(t){return t in Lg?Lg[t]:""}).join("")},Lg={" ":" ",0:"\u2070",1:"\xb9",2:"\xb2",3:"\xb3",4:"\u2074",5:"\u2075",6:"\u2076",7:"\u2077",8:"\u2078",9:"\u2079","+":"\u207a","-":"\u207b",a:"\u1d43",b:"\u1d47",c:"\u1d9c",d:"\u1d48",e:"\u1d49",f:"\u1da0",g:"\u1d4d",h:"\u02b0",i:"\u2071",j:"\u02b2",k:"\u1d4f",l:"\u02e1",m:"\u1d50",n:"\u207f",o:"\u1d52",p:"\u1d56",r:"\u02b3",s:"\u02e2",t:"\u1d57",u:"\u1d58",v:"\u1d5b",w:"\u02b7",x:"\u02e3",y:"\u02b8",z:"\u1dbb"};var Og=function(t){return""+function(t){for(var e=Ar.entityToUnicode,r=0;(r=t.indexOf("&",r))>=0;){var n=t.indexOf(";",r);if(n<r)r+=1;else{var a=e[t.slice(r+1,n)];t=a?t.slice(0,r)+a+t.slice(n+1):t.slice(0,r)+t.slice(n+1)}}return t}(function(t){return t.replace(/\<.*\>/g,"")}(function(t){for(var e=0;(e=t.indexOf("<sup>",e))>=0;){var r=t.indexOf("</sup>",e);if(r<e)break;t=t.slice(0,e)+Sg(t.slice(e+5,r))+t.slice(r+6)}return t}(t.replace(/\<br\>/g,"\n"))))},Rg=function(){},Dg=wr.FROM_BL,Ig=function(t,e,r){void 0===r&&(r=Dg[t.constraintoward||"center"]);var n=[t.r2l(t.range[0]),t.r2l(t.range[1])],a=n[0]+(n[1]-n[0])*r;t.range=t._input.range=[t.l2r(a+(n[0]-a)*e),t.l2r(a+(n[1]-a)*e)]},Pg={},Fg=Le.id2name,zg=ca,Ng=r.ALMOST_EQUAL,Bg=wr.FROM_BL;function jg(t,e){var r=t._inputDomain,n=Bg[t.constraintoward],a=r[0]+(r[1]-r[0])*n;t.domain=t._input.domain=[a+(r[0]-a)/e,a+(r[1]-a)/e]}Pg.enforce=function(t){var e,r,n,a,i,o,l,s=t._fullLayout,u=s._axisConstraintGroups||[];for(e=0;e<u.length;e++){var c=u[e],f=Object.keys(c),h=1/0,d=0,p=1/0,g={},v={},m=!1;for(r=0;r<f.length;r++)v[n=f[r]]=a=s[Fg(n)],a._inputDomain?a.domain=a._inputDomain.slice():a._inputDomain=a.domain.slice(),a._inputRange||(a._inputRange=a.range.slice()),a.setScale(),g[n]=i=Math.abs(a._m)/c[n],h=Math.min(h,i),"domain"!==a.constrain&&a._constraintShrinkable||(p=Math.min(p,i)),delete a._constraintShrinkable,d=Math.max(d,i),"domain"===a.constrain&&(m=!0);if(!(h>Ng*d)||m)for(r=0;r<f.length;r++)if(i=g[n=f[r]],o=(a=v[n]).constrain,i!==p||"domain"===o)if(l=i/p,"range"===o)Ig(a,l);else{var y=a._inputDomain,x=(a.domain[1]-a.domain[0])/(y[1]-y[0]),b=(a.r2l(a.range[1])-a.r2l(a.range[0]))/(a.r2l(a._inputRange[1])-a.r2l(a._inputRange[0]));if((l/=x)*b<1){a.domain=a._input.domain=y.slice(),Ig(a,l);continue}if(b<1&&(a.range=a._input.range=a._inputRange.slice(),l*=b),a.autorange&&a._min.length&&a._max.length){var _=a.r2l(a.range[0]),w=a.r2l(a.range[1]),A=(_+w)/2,M=A,T=A,k=Math.abs(w-A),E=A-k*l*1.0001,C=A+k*l*1.0001,S=zg(a);jg(a,l),a.setScale();var L,O,R=Math.abs(a._m);for(O=0;O<a._min.length;O++)(L=a._min[O].val-S(a._min[O])/R)>E&&L<M&&(M=L);for(O=0;O<a._max.length;O++)(L=a._max[O].val+S(a._max[O])/R)<C&&L>T&&(T=L);l/=(T-M)/(2*k),M=a.l2r(M),T=a.l2r(T),a.range=a._input.range=_<w?[M,T]:[T,M]}jg(a,l)}}},Pg.clean=function(t,e){if(e._inputDomain){for(var r=!1,n=e._id,a=t._fullLayout._axisConstraintGroups,i=0;i<a.length;i++)if(a[i][n]){r=!0;break}r&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}};var Ug={};function Vg(t){return t.target||t.srcElement||window}Ug.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},Ug.element=Vg,Ug.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=Vg(t).getBoundingClientRect();return t.clientX-e.left}return 0},Ug.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=Vg(t).getBoundingClientRect();return t.clientY-e.top}return 0};var Hg=function(t,e){e||(e=t,t=window);var r=0,n=0,a=0,i={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function l(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==i.alt,i.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==i.shift,i.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==i.control,i.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==i.meta,i.meta=!!t.metaKey),e}function s(t,o){var s=Ug.x(o),u=Ug.y(o);"buttons"in o&&(t=0|o.buttons),(t!==r||s!==n||u!==a||l(o))&&(r=0|t,n=s||0,a=u||0,e&&e(r,n,a,i))}function u(t){s(0,t)}function c(){(r||n||a||i.shift||i.alt||i.meta||i.control)&&(n=a=0,r=0,i.shift=i.alt=i.control=i.meta=!1,e&&e(0,0,0,i))}function f(t){l(t)&&e&&e(r,n,a,i)}function h(t){0===Ug.buttons(t)?s(0,t):s(r,t)}function d(t){s(r|Ug.buttons(t),t)}function p(t){s(r&~Ug.buttons(t),t)}function g(){o||(o=!0,t.addEventListener("mousemove",h),t.addEventListener("mousedown",d),t.addEventListener("mouseup",p),t.addEventListener("mouseleave",u),t.addEventListener("mouseenter",u),t.addEventListener("mouseout",u),t.addEventListener("mouseover",u),t.addEventListener("blur",c),t.addEventListener("keyup",f),t.addEventListener("keydown",f),t.addEventListener("keypress",f),t!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",f)))}g();var v={element:t};return Object.defineProperties(v,{enabled:{get:function(){return o},set:function(e){e?g():o&&(o=!1,t.removeEventListener("mousemove",h),t.removeEventListener("mousedown",d),t.removeEventListener("mouseup",p),t.removeEventListener("mouseleave",u),t.removeEventListener("mouseenter",u),t.removeEventListener("mouseout",u),t.removeEventListener("mouseover",u),t.removeEventListener("blur",c),t.removeEventListener("keyup",f),t.removeEventListener("keydown",f),t.removeEventListener("keypress",f),t!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f)))},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return i},enumerable:!0}}),v};var qg=function(t,e){e||(e=[0,""]),t=String(t);var r=parseFloat(t,10);return e[0]=r,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e},Gg=Yg,Xg=96;function Wg(t,e){var r=qg(getComputedStyle(t).getPropertyValue(e));return r[0]*Yg(r[1],t)}function Yg(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return function(t,e){var r=document.createElement("div");r.style["font-size"]="128"+t,e.appendChild(r);var n=Wg(r,"font-size")/128;return e.removeChild(r),n}(t,e);case"em":return Wg(e,"font-size");case"rem":return Wg(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return Xg;case"cm":return Xg/2.54;case"mm":return Xg/25.4;case"pt":return Xg/72;case"pc":return Xg/6}return 1}var Zg=function(t,e,r){"function"==typeof t&&(r=!!e,e=t,t=window);var n=Gg("ex",t),a=function(t){r&&t.preventDefault();var a=t.deltaX||0,i=t.deltaY||0,o=t.deltaZ||0,l=t.deltaMode,s=1;switch(l){case 1:s=n;break;case 2:s=window.innerHeight}if(i*=s,o*=s,(a*=s)||i||o)return e(a,i,o,t)};return t.addEventListener("wheel",a),a};var Jg=function(t){var e=t.mouseContainer,r=t.glplot,n=new function(t,e){this.element=t,this.plot=e,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}(e,r);function a(){t.xaxis.autorange=!1,t.yaxis.autorange=!1}function i(e,i,o){var l,s,u=t.calcDataBox(),c=r.viewBox,f=n.lastPos[0],h=n.lastPos[1],d=Se.MINDRAG*r.pixelRatio,p=Se.MINZOOM*r.pixelRatio;function g(e,r,a){var i=Math.min(r,a),o=Math.max(r,a);i!==o?(u[e]=i,u[e+2]=o,n.dataBox=u,t.setRanges(u)):(t.selectBox.selectBox=[0,0,1,1],t.glplot.setDirty())}switch(i*=r.pixelRatio,o*=r.pixelRatio,o=c[3]-c[1]-o,t.fullLayout.dragmode){case"zoom":if(e){var v=i/(c[2]-c[0])*(u[2]-u[0])+u[0],m=o/(c[3]-c[1])*(u[3]-u[1])+u[1];n.boxInited||(n.boxStart[0]=v,n.boxStart[1]=m,n.dragStart[0]=i,n.dragStart[1]=o),n.boxEnd[0]=v,n.boxEnd[1]=m,n.boxInited=!0,n.boxEnabled||n.boxStart[0]===n.boxEnd[0]&&n.boxStart[1]===n.boxEnd[1]||(n.boxEnabled=!0);var y=Math.abs(n.dragStart[0]-i)<p,x=Math.abs(n.dragStart[1]-o)<p;if(!function(){for(var e=t.graphDiv._fullLayout._axisConstraintGroups,r=t.xaxis._id,n=t.yaxis._id,a=0;a<e.length;a++)if(-1!==e[a][r]){if(-1!==e[a][n])return!0;break}return!1}()||y&&x)y&&(n.boxEnd[0]=n.boxStart[0]),x&&(n.boxEnd[1]=n.boxStart[1]);else{l=n.boxEnd[0]-n.boxStart[0],s=n.boxEnd[1]-n.boxStart[1];var b=(u[3]-u[1])/(u[2]-u[0]);Math.abs(l*b)>Math.abs(s)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(l)*b*(s>=0?1:-1),n.boxEnd[1]<u[1]?(n.boxEnd[1]=u[1],n.boxEnd[0]=n.boxStart[0]+(u[1]-n.boxStart[1])/Math.abs(b)):n.boxEnd[1]>u[3]&&(n.boxEnd[1]=u[3],n.boxEnd[0]=n.boxStart[0]+(u[3]-n.boxStart[1])/Math.abs(b))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(s)/b*(l>=0?1:-1),n.boxEnd[0]<u[0]?(n.boxEnd[0]=u[0],n.boxEnd[1]=n.boxStart[1]+(u[0]-n.boxStart[0])*Math.abs(b)):n.boxEnd[0]>u[2]&&(n.boxEnd[0]=u[2],n.boxEnd[1]=n.boxStart[1]+(u[2]-n.boxStart[0])*Math.abs(b)))}}else n.boxEnabled?(l=n.boxStart[0]!==n.boxEnd[0],s=n.boxStart[1]!==n.boxEnd[1],l||s?(l&&(g(0,n.boxStart[0],n.boxEnd[0]),t.xaxis.autorange=!1),s&&(g(1,n.boxStart[1],n.boxEnd[1]),t.yaxis.autorange=!1),t.relayoutCallback()):t.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,e?(n.panning||(n.dragStart[0]=i,n.dragStart[1]=o),Math.abs(n.dragStart[0]-i)<d&&(i=n.dragStart[0]),Math.abs(n.dragStart[1]-o)<d&&(o=n.dragStart[1]),l=(f-i)*(u[2]-u[0])/(r.viewBox[2]-r.viewBox[0]),s=(h-o)*(u[3]-u[1])/(r.viewBox[3]-r.viewBox[1]),u[0]+=l,u[2]+=l,u[1]+=s,u[3]+=s,t.setRanges(u),n.panning=!0,n.lastInputTime=Date.now(),a(),t.cameraChanged(),t.handleAnnotations()):n.panning&&(n.panning=!1,t.relayoutCallback())}n.lastPos[0]=i,n.lastPos[1]=o}return n.mouseListener=Hg(e,i),e.addEventListener("touchstart",function(t){var r=Hp(t.changedTouches[0],e);i(0,r[0],r[1]),i(1,r[0],r[1]),t.preventDefault()},!!Up&&{passive:!1}),e.addEventListener("touchmove",function(t){t.preventDefault();var r=Hp(t.changedTouches[0],e);i(1,r[0],r[1]),t.preventDefault()},!!Up&&{passive:!1}),e.addEventListener("touchend",function(t){i(0,n.lastPos[0],n.lastPos[1]),t.preventDefault()},!!Up&&{passive:!1}),n.wheelListener=Zg(e,function(e,i){if(!t.scrollZoom)return!1;var o=t.calcDataBox(),l=r.viewBox,s=n.lastPos[0],u=n.lastPos[1],c=Math.exp(5*i/(l[3]-l[1])),f=s/(l[2]-l[0])*(o[2]-o[0])+o[0],h=u/(l[3]-l[1])*(o[3]-o[1])+o[1];return o[0]=(o[0]-f)*c+f,o[2]=(o[2]-f)*c+f,o[1]=(o[1]-h)*c+h,o[3]=(o[3]-h)*c+h,t.setRanges(o),n.lastInputTime=Date.now(),a(),t.cameraChanged(),t.handleAnnotations(),t.relayoutCallback(),!0},!0),n};var Qg=function(t,e,r){return e<r?t<e?e:t>r?r:t:t<r?r:t>e?e:t};var $g={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Kg=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},tv=Object.prototype.toString,ev=function(t){var e;return"[object Object]"===tv.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))},rv={};(function(t){"use strict";rv=function(r){var n,a,i=[],o=1;if("string"==typeof r)if($g[r])i=$g[r].slice(),a="rgb";else if("transparent"===r)o=0,a="rgb",i=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var l=r.slice(1),s=l.length,u=s<=4;o=1,u?(i=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],4===s&&(o=parseInt(l[3]+l[3],16)/255)):(i=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],8===s&&(o=parseInt(l[6]+l[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),a="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var c=n[1],l=c.replace(/a$/,"");a=l;var s="cmyk"===l?4:"gray"===l?1:3;i=n[2].trim().split(/\s*,\s*/).map(function(t,r){if(/%$/.test(t))return r===s?parseFloat(t)/100:"rgb"===l?255*parseFloat(t)/100:parseFloat(t);if("h"===l[r]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==e[t])return e[t]}return parseFloat(t)}),c===l&&i.push(1),o=void 0===i[s]?1:i[s],i=i.slice(0,s)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(i=r.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),a=r.match(/([a-z])/gi).join("").toLowerCase());else if("number"==typeof r)a="rgb",i=[r>>>16,(65280&r)>>>8,255&r];else if(ev(r)){var f=Kg(r.r,r.red,r.R,null);null!==f?(a="rgb",i=[f,Kg(r.g,r.green,r.G),Kg(r.b,r.blue,r.B)]):(a="hsl",i=[Kg(r.h,r.hue,r.H),Kg(r.s,r.saturation,r.S),Kg(r.l,r.lightness,r.L,r.b,r.brightness)]),o=Kg(r.a,r.alpha,r.opacity,1),null!=r.opacity&&(o/=100)}else(Array.isArray(r)||t.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(r))&&(i=[r[0],r[1],r[2]],a="rgb",o=4===r.length?r[3]:1);return{space:a,values:i,alpha:o}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var nv=function(t){var e,r,n,a,i,o=t[0]/360,l=t[1]/100,s=t[2]/100;if(0===l)return[i=255*s,i,i];e=2*s-(r=s<.5?s*(1+l):s+l-s*l),a=[0,0,0];for(var u=0;u<3;u++)(n=o+1/3*-(u-1))<0?n++:n>1&&n--,i=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,a[u]=255*i;return a},av=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},iv=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var r=av(e),n=new r(4);if(t instanceof r)return Array.isArray(t)?t.slice():(n.set(t),n);var a="uint8"!==e&&"uint8_clamped"!==e;return t instanceof Uint8Array||t instanceof Uint8ClampedArray?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=null!=t[3]?t[3]:255,a&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(t.length&&"string"!=typeof t||((t=function(t){var e;if("string"!=typeof t)throw Error("Argument should be a string");var r=rv(t);return r.space?((e=Array(3))[0]=Qg(r.values[0],0,255),e[1]=Qg(r.values[1],0,255),e[2]=Qg(r.values[2],0,255),"h"===r.space[0]&&(e=nv(e)),e.push(Qg(r.alpha,0,1)),e):[]}(t))[0]/=255,t[1]/=255,t[2]/=255),a?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=null!=t[3]?t[3]:1):(n[0]=Qg(Math.round(255*t[0]),0,255),n[1]=Qg(Math.round(255*t[1]),0,255),n[2]=Qg(Math.round(255*t[2]),0,255),n[3]=null==t[3]?255:Qg(Math.floor(255*t[3]),0,255)),n)};var ov=function(t){return t?iv(t):[0,0,0,1]};function lv(t){this.scene=t,this.gl=t.gl,this.pixelRatio=t.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=!1,this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var sv=lv.prototype,uv=["xaxis","yaxis"];sv.merge=function(t){var e,r,n,a,i,o,l,s,u,c,f;for(this.titleEnable=!1,this.backgroundColor=ov(t.plot_bgcolor),c=0;c<2;++c){var h=(e=uv[c]).charAt(0);for(n=(r=t[this.scene[e]._name]).title===this.scene.fullLayout._dfltTitle[h]?"":r.title,f=0;f<=2;f+=2)this.labelEnable[c+f]=!1,this.labels[c+f]=Og(n),this.labelColor[c+f]=ov(r.titlefont.color),this.labelFont[c+f]=r.titlefont.family,this.labelSize[c+f]=r.titlefont.size,this.labelPad[c+f]=this.getLabelPad(e,r),this.tickEnable[c+f]=!1,this.tickColor[c+f]=ov((r.tickfont||{}).color),this.tickAngle[c+f]="auto"===r.tickangle?0:Math.PI*-r.tickangle/180,this.tickPad[c+f]=this.getTickPad(r),this.tickMarkLength[c+f]=0,this.tickMarkWidth[c+f]=r.tickwidth||0,this.tickMarkColor[c+f]=ov(r.tickcolor),this.borderLineEnable[c+f]=!1,this.borderLineColor[c+f]=ov(r.linecolor),this.borderLineWidth[c+f]=r.linewidth||0;l=this.hasSharedAxis(r),i=this.hasAxisInDfltPos(e,r)&&!l,o=this.hasAxisInAltrPos(e,r)&&!l,a=r.mirror||!1,s=l?-1!==String(a).indexOf("all"):!!a,u=l?"allticks"===a:-1!==String(a).indexOf("ticks"),i?this.labelEnable[c]=!0:o&&(this.labelEnable[c+2]=!0),i?this.tickEnable[c]=r.showticklabels:o&&(this.tickEnable[c+2]=r.showticklabels),(i||s)&&(this.borderLineEnable[c]=r.showline),(o||s)&&(this.borderLineEnable[c+2]=r.showline),(i||u)&&(this.tickMarkLength[c]=this.getTickMarkLength(r)),(o||u)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(r)),this.gridLineEnable[c]=r.showgrid,this.gridLineColor[c]=ov(r.gridcolor),this.gridLineWidth[c]=r.gridwidth,this.zeroLineEnable[c]=r.zeroline,this.zeroLineColor[c]=ov(r.zerolinecolor),this.zeroLineWidth[c]=r.zerolinewidth}},sv.hasSharedAxis=function(t){var e=this.scene,r=e.fullLayout._subplots.gl2d;return 0!==ya.findSubplotsWithAxis(r,t).indexOf(e.id)},sv.hasAxisInDfltPos=function(t,e){var r=e.side;return"xaxis"===t?"bottom"===r:"yaxis"===t?"left"===r:void 0},sv.hasAxisInAltrPos=function(t,e){var r=e.side;return"xaxis"===t?"top"===r:"yaxis"===t?"right"===r:void 0},sv.getLabelPad=function(t,e){var r=e.titlefont.size,n=e.showticklabels;return"xaxis"===t?"top"===e.side?r*(1.5+(n?1:0))-10:r*(1.5+(n?.5:0))-10:"yaxis"===t?"right"===e.side?10+r*(1.5+(n?1:.5)):10+r*(1.5+(n?.5:0)):void 0},sv.getTickPad=function(t){return"outside"===t.ticks?10+t.ticklen:15},sv.getTickMarkLength=function(t){if(!t.ticks)return 0;var e=t.ticklen;return"inside"===t.ticks?-e:e};var cv,fv,hv=function(t){return new lv(t)},dv=Pg.enforce,pv=Pg.clean,gv=fa,vv=["xaxis","yaxis"],mv=Se.SUBPLOT_PATTERN;function yv(t,e){this.container=t.container,this.graphDiv=t.graphDiv,this.pixelRatio=t.plotGlPixelRatio||window.devicePixelRatio,this.id=t.id,this.staticPlot=!!t.staticPlot,this.scrollZoom=this.graphDiv._context.scrollZoom,this.fullData=null,this.updateRefs(e),this.makeFramework(),this.glplotOptions=hv(this),this.glplotOptions.merge(e),this.glplot=kp(this.glplotOptions),this.camera=Jg(this),this.traces={},this.spikes=Pp(this.glplot),this.selectBox=Rp(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw()}var xv=yv,bv=yv.prototype;bv.makeFramework=function(){if(this.staticPlot){if(!(fv||(cv=document.createElement("canvas"),fv=Bp({canvas:cv,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=cv,this.gl=fv}else{var t=this.container.querySelector(".gl-canvas-focus"),e=Bp({canvas:t,preserveDrawingBuffer:!0,premultipliedAlpha:!0});e||function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=Rg);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var r=document.createElement("div");r.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",r.style.cursor="pointer",r.style.fontSize="24px",r.style.color=Pe.defaults[0],t.container.appendChild(r),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("http://get.webgl.org")}}(this),this.canvas=t,this.gl=e}var r=this.canvas;r.style.width="100%",r.style.height="100%",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style["pointer-events"]="none",this.updateSize(r),r.className+=" user-select-none";var n=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",n.style["z-index"]=20,n.style["pointer-events"]="none";var a=this.mouseContainer=document.createElement("div");a.style.position="absolute",a.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var i=this.container;i.appendChild(n),i.appendChild(a);var o=this;a.addEventListener("mouseout",function(){o.isMouseOver=!1,o.unhover()}),a.addEventListener("mouseover",function(){o.isMouseOver=!0})},bv.toImage=function(t){t||(t="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(cv),this.updateSize(this.canvas);var e=this.glplot.gl,r=e.drawingBufferWidth,n=e.drawingBufferHeight;e.clearColor(1,1,1,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),e.bindFramebuffer(e.FRAMEBUFFER,null);var a=new Uint8Array(r*n*4);e.readPixels(0,0,r,n,e.RGBA,e.UNSIGNED_BYTE,a);for(var i=0,o=n-1;i<o;++i,--o)for(var l=0;l<r;++l)for(var s=0;s<4;++s){var u=a[4*(r*i+l)+s];a[4*(r*i+l)+s]=a[4*(r*o+l)+s],a[4*(r*o+l)+s]=u}var c=document.createElement("canvas");c.width=r,c.height=n;var f,h=c.getContext("2d"),d=h.createImageData(r,n);switch(d.data.set(a),h.putImageData(d,0,0),t){case"jpeg":f=c.toDataURL("image/jpeg");break;case"webp":f=c.toDataURL("image/webp");break;default:f=c.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(cv),f},bv.updateSize=function(t){t||(t=this.canvas);var e=this.pixelRatio,r=this.fullLayout,n=r.width,a=r.height,i=0|Math.ceil(e*n),o=0|Math.ceil(e*a);return t.width===i&&t.height===o||(t.width=i,t.height=o),t},bv.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var t=[ya.calcTicks(this.xaxis),ya.calcTicks(this.yaxis)],e=0;e<2;++e)for(var r=0;r<t[e].length;++r)t[e][r].text=Og(t[e][r].text+"");return t},bv.updateRefs=function(t){this.fullLayout=t;var e=this.id.match(mv),r="xaxis"+e[1],n="yaxis"+e[2];this.xaxis=this.fullLayout[r],this.yaxis=this.fullLayout[n]},bv.relayoutCallback=function(){var t=this.graphDiv,e=this.xaxis,r=this.yaxis,n=t.layout;n.xaxis.autorange=e.autorange,n.xaxis.range=e.range.slice(0),n.yaxis.autorange=r.autorange,n.yaxis.range=r.range.slice(0);var a={lastInputTime:this.camera.lastInputTime};a[e._name]=e.range.slice(0),a[r._name]=r.range.slice(0),t.emit("plotly_relayout",a)},bv.cameraChanged=function(){var t=this.camera;this.glplot.setDataBox(this.calcDataBox());var e=this.computeTickMarks();(function(t,e){for(var r=0;r<2;++r){var n=t[r],a=e[r];if(n.length!==a.length)return!0;for(var i=0;i<n.length;++i)if(n[i].x!==a[i].x)return!0}return!1})(e,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=e,this.glplotOptions.dataBox=t.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},bv.handleAnnotations=function(){for(var t=this.graphDiv,e=this.fullLayout.annotations,r=0;r<e.length;r++){var n=e[r];n.xref===this.xaxis._id&&n.yref===this.yaxis._id&&R.getComponentMethod("annotations","drawOne")(t,r)}},bv.destroy=function(){if(this.glplot){var t=this.traces;t&&Object.keys(t).map(function(e){t[e].dispose(),delete t[e]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},bv.plot=function(t,e,r){var n=this.glplot;this.updateRefs(r),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(t,e),this.updateFx(r.dragmode);var a=r.width,i=r.height;this.updateSize(this.canvas);var o=this.glplotOptions;o.merge(r),o.screenBox=[0,0,a,i];var l={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};pv(l,this.xaxis),pv(l,this.yaxis);var s,u,c=r._size,f=this.xaxis.domain,h=this.yaxis.domain;for(o.viewBox=[c.l+f[0]*c.w,c.b+h[0]*c.h,a-c.r-(1-f[1])*c.w,i-c.t-(1-h[1])*c.h],this.mouseContainer.style.width=c.w*(f[1]-f[0])+"px",this.mouseContainer.style.height=c.h*(h[1]-h[0])+"px",this.mouseContainer.height=c.h*(h[1]-h[0]),this.mouseContainer.style.left=c.l+f[0]*c.w+"px",this.mouseContainer.style.top=c.t+(1-h[1])*c.h+"px",u=0;u<2;++u)(s=this[vv[u]])._length=o.viewBox[u+2]-o.viewBox[u],gv(s),s.setScale();dv(l),o.ticks=this.computeTickMarks(),o.dataBox=this.calcDataBox(),o.merge(r),n.update(o),this.glplot.draw()},bv.calcDataBox=function(){var t=this.xaxis,e=this.yaxis,r=t.range,n=e.range,a=t.r2l,i=e.r2l;return[a(r[0]),i(n[0]),a(r[1]),i(n[1])]},bv.setRanges=function(t){var e=this.xaxis,r=this.yaxis,n=e.l2r,a=r.l2r;e.range=[n(t[0]),n(t[2])],r.range=[a(t[1]),a(t[3])]},bv.updateTraces=function(t,e){var r,n,a,i=Object.keys(this.traces);this.fullData=t;t:for(r=0;r<i.length;r++){var o=i[r],l=this.traces[o];for(n=0;n<t.length;n++)if((a=t[n]).uid===o&&a.type===l.type)continue t;l.dispose(),delete this.traces[o]}for(r=0;r<t.length;r++){a=t[r];var s=e[r],u=this.traces[a.uid];u?u.update(a,s):(u=a._module.plot(this,a,s),this.traces[a.uid]=u)}this.glplot.objects.sort(function(t,e){return t._trace.index-e._trace.index})},bv.updateFx=function(t){"lasso"===t||"select"===t?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===t?"move":"zoom"===t?"crosshair":null},bv.emitPointAction=function(t,e){for(var r,n=t.trace.uid,a=t.pointIndex,i=0;i<this.fullData.length;i++)this.fullData[i].uid===n&&(r=this.fullData[i]);var o={x:t.traceCoord[0],y:t.traceCoord[1],curveNumber:r.index,pointNumber:a,data:r._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};Cg.appendArrayPointValue(o,r,a),this.graphDiv.emit(e,{points:[o]})},bv.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var t=this.glplot,e=this.camera,r=e.mouseListener,n=1===this.lastButtonState&&0===r.buttons,a=this.fullLayout;this.lastButtonState=r.buttons,this.cameraChanged();var i,o=r.x*t.pixelRatio,l=this.canvas.height-t.pixelRatio*r.y;if(e.boxEnabled&&"zoom"===a.dragmode){this.selectBox.enabled=!0;for(var s=this.selectBox.selectBox=[Math.min(e.boxStart[0],e.boxEnd[0]),Math.min(e.boxStart[1],e.boxEnd[1]),Math.max(e.boxStart[0],e.boxEnd[0]),Math.max(e.boxStart[1],e.boxEnd[1])],u=0;u<2;u++)e.boxStart[u]===e.boxEnd[u]&&(s[u]=t.dataBox[u],s[u+2]=t.dataBox[u+2]);t.setDirty()}else if(!e.panning&&this.isMouseOver){this.selectBox.enabled=!1;var c=a._size,f=this.xaxis.domain,h=this.yaxis.domain,d=(i=t.pick(o/t.pixelRatio+c.l+f[0]*c.w,l/t.pixelRatio-(c.t+(1-h[1])*c.h)))&&i.object._trace.handlePick(i);if(d&&n&&this.emitPointAction(d,"plotly_click"),i&&"skip"!==i.object._trace.hoverinfo&&a.hovermode&&d&&(!this.lastPickResult||this.lastPickResult.traceUid!==d.trace.uid||this.lastPickResult.dataCoord[0]!==d.dataCoord[0]||this.lastPickResult.dataCoord[1]!==d.dataCoord[1])){var p=d;this.lastPickResult={traceUid:d.trace?d.trace.uid:null,dataCoord:d.dataCoord.slice()},this.spikes.update({center:i.dataCoord}),p.screenCoord=[((t.viewBox[2]-t.viewBox[0])*(i.dataCoord[0]-t.dataBox[0])/(t.dataBox[2]-t.dataBox[0])+t.viewBox[0])/t.pixelRatio,(this.canvas.height-(t.viewBox[3]-t.viewBox[1])*(i.dataCoord[1]-t.dataBox[1])/(t.dataBox[3]-t.dataBox[1])-t.viewBox[1])/t.pixelRatio],this.emitPointAction(d,"plotly_hover");var g=this.fullData[p.trace.index]||{},v=p.pointIndex,m=Cg.castHoverinfo(g,a,v);if(m&&"all"!==m){var y=m.split("+");-1===y.indexOf("x")&&(p.traceCoord[0]=void 0),-1===y.indexOf("y")&&(p.traceCoord[1]=void 0),-1===y.indexOf("z")&&(p.traceCoord[2]=void 0),-1===y.indexOf("text")&&(p.textLabel=void 0),-1===y.indexOf("name")&&(p.name=void 0)}Cg.loneHover({x:p.screenCoord[0],y:p.screenCoord[1],xLabel:this.hoverFormatter("xaxis",p.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",p.traceCoord[1]),zLabel:p.traceCoord[2],text:p.textLabel,name:p.name,color:Cg.castHoverOption(g,v,"bgcolor")||p.color,borderColor:Cg.castHoverOption(g,v,"bordercolor"),fontFamily:Cg.castHoverOption(g,v,"font.family"),fontSize:Cg.castHoverOption(g,v,"font.size"),fontColor:Cg.castHoverOption(g,v,"font.color")},{container:this.svgContainer,gd:this.graphDiv})}}i||this.unhover(),t.draw()}},bv.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),Cg.loneUnhover(this.svgContainer))},bv.hoverFormatter=function(t,e){if(void 0!==e){var r=this[t];return ya.tickText(r,r.c2l(e),"hover").text}};var _v={},wv=xe.overrideAll,Av=Qa.getSubplotData;_v.name="gl2d",_v.attr=["xaxis","yaxis"],_v.idRoot=["x","y"],_v.idRegex=Se.idRegex,_v.attrRegex=Se.attrRegex,_v.attributes=Ee,_v.supplyLayoutDefaults=function(t,e,r){e._has("cartesian")||Ka.supplyLayoutDefaults(t,e,r)},_v.layoutAttrOverrides=wv(Ka.layoutAttributes,"plot","from-root"),_v.baseLayoutAttrOverrides=wv({plot_bgcolor:O.plot_bgcolor,hoverlabel:Te.hoverlabel},"plot","nested"),_v.plot=function(t){for(var e=t._fullLayout,r=t._fullData,n=e._subplots.gl2d,a=0;a<n.length;a++){var i=n[a],o=e._plots[i],l=Av(r,"gl2d",i),s=o._scene2d;void 0===s&&(s=new xv({id:i,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},e),o._scene2d=s),s.plot(l,t.calcdata,e,t.layout)}},_v.clean=function(t,e,r,n){for(var a=n._subplots.gl2d||[],i=0;i<a.length;i++){var o=a[i],l=n._plots[o];if(l._scene2d)0===Av(t,"gl2d",o).length&&(l._scene2d.destroy(),delete n._plots[o])}Ka.clean.apply(this,arguments)},_v.drawFramework=function(t){t._context.staticPlot||Ka.drawFramework(t)},_v.toSVG=function(t){for(var e=t._fullLayout,r=e._subplots.gl2d,n=0;n<r.length;n++){var a=e._plots[r[n]]._scene2d,i=a.toImage("png");e._glimages.append("svg:image").attr({xmlns:ke.svg,"xlink:href":i,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),a.destroy()}},_v.updateFx=function(t){for(var e=t._subplots.gl2d,r=0;r<e.length;r++){t._plots[e[r]]._scene2d.updateFx(t.dragmode)}};var Mv=["=","<",">=",">","<="],Tv=["[]","()","[)","(]","][",")(","](",")["],kv={"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["},Ev=m.extendFlat,Cv=Ev({},{z:{valType:"data_array",editType:"calc"},x:Ev({},An.x,{impliedEdits:{xtype:"array"}}),x0:Ev({},An.x0,{impliedEdits:{xtype:"scaled"}}),dx:Ev({},An.dx,{impliedEdits:{xtype:"scaled"}}),y:Ev({},An.y,{impliedEdits:{ytype:"array"}}),y0:Ev({},An.y0,{impliedEdits:{ytype:"scaled"}}),dy:Ev({},An.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"}},fr,{autocolorscale:Ev({},fr.autocolorscale,{dflt:!1})},{colorbar:gr}),Sv=Oe.dash,Lv=m.extendFlat,Ov=Mv,Rv=Tv,Dv=An.line,Iv=Lv({z:Cv.z,x:Cv.x,x0:Cv.x0,dx:Cv.dx,y:Cv.y,y0:Cv.y0,dy:Cv.dy,text:Cv.text,transpose:Cv.transpose,xtype:Cv.xtype,ytype:Cv.ytype,zhoverformat:Cv.zhoverformat,connectgaps:Cv.connectgaps,fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:k({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(Ov).concat(Rv),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:Lv({},Dv.color,{editType:"style+colorbars"}),width:Lv({},Dv.width,{editType:"style+colorbars"}),dash:Sv,smoothing:Lv({},Dv.smoothing,{}),editType:"plot"}},fr,{autocolorscale:Lv({},fr.autocolorscale,{dflt:!1}),zmin:Lv({},fr.zmin,{editType:"calc"}),zmax:Lv({},fr.zmax,{editType:"calc"})},{colorbar:gr}),Pv=ae.extendFlat;function Fv(t,e,r){var n={type:"linear",range:[t,e]};return ya.autoTicks(n,(e-t)/(r||15)),n}var zv=r.BADNUM,Nv=function(t){for(var e=0,r=0;r<t.length;r++)e=Math.max(e,t[r].length);return e},Bv=ae.isArrayOrTypedArray,jv=function(t){return!Bv(t.z[0])},Uv=[[-1,0],[1,0],[0,-1],[0,1]];function Vv(t){return.5-.25*Math.min(1,.5*t)}function Hv(t,e,r){var n,a,i,o,l,s,u,c,f,h,d,p,g,v=0;for(o=0;o<e.length;o++){for(a=(n=e[o])[0],i=n[1],d=t[a][i],h=0,f=0,l=0;l<4;l++)(u=t[a+(s=Uv[l])[0]])&&void 0!==(c=u[i+s[1]])&&(0===h?p=g=c:(p=Math.min(p,c),g=Math.max(g,c)),f++,h+=c);if(0===f)throw"iterateInterp2d order is wrong: no defined neighbors";t[a][i]=h/f,void 0===d?f<4&&(v=1):(t[a][i]=(1+r)*t[a][i]-r*d,g>p&&(v=Math.max(v,Math.abs(t[a][i]-d)/(g-p))))}return v}var qv=ae.isArrayOrTypedArray,Gv=function(t,e,r,n,a,i){var o,l,s,u=[],c=R.traceIs(t,"contour"),f=R.traceIs(t,"histogram"),h=R.traceIs(t,"gl2d");if(qv(e)&&e.length>1&&!f&&"category"!==i.type){var d=e.length;if(!(d<=a))return c?e.slice(0,a):e.slice(0,a+1);if(c||h)u=e.slice(0,a);else if(1===a)u=[e[0]-.5,e[0]+.5];else{for(u=[1.5*e[0]-.5*e[1]],s=1;s<d;s++)u.push(.5*(e[s-1]+e[s]));u.push(1.5*e[d-1]-.5*e[d-2])}if(d<a){var p=u[u.length-1],g=p-u[u.length-2];for(s=d;s<a;s++)p+=g,u.push(p)}}else{l=n||1;var v=t[i._id.charAt(0)+"calendar"];for(o=f||"category"===i.type?i.r2c(r,0,v)||0:qv(e)&&1===e.length?e[0]:void 0===r?0:i.d2c(r,0,v),s=c||h?0:-.5;s<a;s++)u.push(o+l*s)}return u},Xv=function(t,e){for(var r=t.length,n=0,a=0;a<r;a++)e[a]?(t[a]/=e[a],n+=t[a]):t[a]=null;return n},Wv={count:function(t,e,r){return r[t]++,1},sum:function(t,r,n,a){var i=a[r];return e(i)?(i=Number(i),n[t]+=i,i):0},avg:function(t,r,n,a,i){var o=a[r];return e(o)&&(o=Number(o),n[t]+=o,i[t]++),0},min:function(t,r,n,a){var i=a[r];if(e(i)){if(i=Number(i),!e(n[t]))return n[t]=i,i;if(n[t]>i){var o=i-n[t];return n[t]=i,o}}return 0},max:function(t,r,n,a){var i=a[r];if(e(i)){if(i=Number(i),!e(n[t]))return n[t]=i,i;if(n[t]<i){var o=i-n[t];return n[t]=i,o}}return 0}},Yv=r.ONEAVGYEAR,Zv=r.ONEAVGMONTH,Jv=r.ONEDAY,Qv=r.ONEHOUR,$v=r.ONEMIN,Kv=r.ONESEC,tm=ya.tickIncrement,em=function(t,e,r,n,a){var i,o,l=-1.1*e,s=-.1*e,u=t-s,c=r[0],f=r[1],h=Math.min(rm(c+s,c+u,n,a),rm(f+s,f+u,n,a)),d=Math.min(rm(c+l,c+s,n,a),rm(f+l,f+s,n,a));if(h>d&&d<Math.abs(f-c)/4e3?(i=h,o=!1):(i=Math.min(h,d),o=!0),"date"===n.type&&i>Jv){var p=i===Yv?1:6,g=i===Yv?"M12":"M1";return function(e,r){var i=n.c2d(e,Yv,a),l=i.indexOf("-",p);l>0&&(i=i.substr(0,l));var s=n.d2c(i,0,a);if(s<e){var u=tm(s,g,!1,a);(s+u)/2<e+t&&(s=u)}return r&&o?tm(s,g,!0,a):s}}return function(e,r){var n=i*Math.round(e/i);return n+i/10<e&&n+.9*i<e+t&&(n+=i),r&&o&&(n-=i),n}};function rm(t,e,r,n){if(t*e<=0)return 1/0;for(var a=Math.abs(e-t),i="date"===r.type,o=nm(a,i),l=0;l<10;l++){var s=nm(80*o,i);if(o===s)break;if(!am(s,t,e,i,r,n))break;o=s}return o}function nm(t,e){return e&&t>Kv?t>Jv?t>1.1*Yv?Yv:t>1.1*Zv?Zv:Jv:t>Qv?Qv:t>$v?$v:Kv:Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function am(t,e,r,n,a,i){if(n&&t>Jv){var o=im(e,a,i),l=im(r,a,i),s=t===Yv?0:1;return o[s]!==l[s]}return Math.floor(r/t)-Math.floor(e/t)>.1}function im(t,e,r){var n=e.c2d(t,Yv,r).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}var om=ae.cleanDate,lm=r.ONEDAY,sm=r.BADNUM,um=function(t,r,n){var a=r.type,i=n+"bins",o=t[i];o||(o=t[i]={});var l="date"===a?function(t){return t||0===t?om(t,sm,o.calendar):null}:function(t){return e(t)?Number(t):null};o.start=l(o.start),o.end=l(o.end);var s="date"===a?lm:1,u=o.size;if(e(u))o.size=u>0?Number(u):s;else if("string"!=typeof u)o.size=s;else{var c=u.charAt(0),f=u.substr(1);((f=e(f)?Number(f):0)<=0||"date"!==a||"M"!==c||f!==Math.round(f))&&(o.size=s)}var h="autobin"+n;"boolean"!=typeof t[h]&&(t[h]=t._fullInput[h]=t._input[h]=!((o.start||0===o.start)&&(o.end||0===o.end))),t[h]||(delete t["nbins"+n],delete t._fullInput["nbins"+n])},cm={percent:function(t,e){for(var r=t.length,n=100/e,a=0;a<r;a++)t[a]*=n},probability:function(t,e){for(var r=t.length,n=0;n<r;n++)t[n]/=e},density:function(t,e,r,n){var a=t.length;n=n||1;for(var i=0;i<a;i++)t[i]*=r[i]*n},"probability density":function(t,e,r,n){var a=t.length;n&&(e/=n);for(var i=0;i<a;i++)t[i]*=r[i]/e}};function fm(t,e,r,n,a,i,o){var l=e+"bins",s="autobin"+e,u=t[l];um(t,n,e),!t[s]&&u&&null!==u.start&&null!==u.end||(u=ya.autoBin(r,n,t["nbins"+e],"2d",o),"histogram2dcontour"===t.type&&(u.start=i(ya.tickIncrement(a(u.start),u.size,!0,o)),u.end=i(ya.tickIncrement(a(u.end),u.size,!1,o))),t._input[l]=t[l]=u,t._input[s]=t[s])}function hm(t,e,r,n){var a,i=new Array(t);if(n)for(a=0;a<t;a++)i[a]=1/(e[a+1]-e[a]);else{var o=1/r;for(a=0;a<t;a++)i[a]=o}return i}function dm(t,e){return{start:t(e.start),end:t(e.end),size:e.size}}function pm(t,e,r,n,a,i){var o,l=t.length-1,s=new Array(l);if(e)for(o=0;o<l;o++)s[o]=[e[o],e[o]];else{var u=em(r,n,t,a,i);for(o=0;o<l;o++)s[o]=[u(t[o]),u(t[o+1],!0)]}return s}var gm=function(t,r){var n,a,i,o,l,s,u,c,f,h=ya.getFromId(t,r.xaxis||"x"),d=ya.getFromId(t,r.yaxis||"y"),p=R.traceIs(r,"contour"),g=R.traceIs(r,"histogram"),v=R.traceIs(r,"gl2d"),m=p?"best":r.zsmooth;function y(t){m=r._input.zsmooth=r.zsmooth=!1,ae.warn('cannot use zsmooth: "fast": '+t)}if(h._minDtick=0,d._minDtick=0,g?(n=(f=function(t,e){var r,n,a,i,o=ya.getFromId(t,e.xaxis||"x"),l=e.x?o.makeCalcdata(e,"x"):[],s=ya.getFromId(t,e.yaxis||"y"),u=e.y?s.makeCalcdata(e,"y"):[],c=e.xcalendar,f=e.ycalendar,h=function(t){return o.r2c(t,0,c)},d=function(t){return s.r2c(t,0,f)},p=function(t){return o.c2r(t,0,c)},g=function(t){return s.c2r(t,0,f)},v=Math.min(l.length,u.length);l.length>v&&l.splice(v,l.length-v),u.length>v&&u.splice(v,u.length-v),fm(e,"x",l,o,h,p,c),fm(e,"y",u,s,d,g,f);var m=[],y=[],x=[],b="string"==typeof e.xbins.size,_="string"==typeof e.ybins.size,w=[],A=[],M=b?w:e.xbins,T=_?A:e.ybins,k=0,E=[],C=[],S=e.histnorm,L=e.histfunc,O=-1!==S.indexOf("density"),R="max"===L||"min"===L?null:0,D=Wv.count,I=cm[S],P=!1,F=[],z=[],N="z"in e?e.z:"marker"in e&&Array.isArray(e.marker.color)?e.marker.color:"";N&&"count"!==L&&(P="avg"===L,D=Wv[L]);var B=e.xbins,j=h(B.start),U=h(B.end)+(j-ya.tickIncrement(j,B.size,!1,c))/1e6;for(r=j;r<U;r=ya.tickIncrement(r,B.size,!1,c))y.push(R),w.push(r),P&&x.push(0);w.push(r);var V=y.length,H=h(e.xbins.start),q=(r-H)/V,G=p(H+q/2);for(j=d((B=e.ybins).start),U=d(B.end)+(j-ya.tickIncrement(j,B.size,!1,f))/1e6,r=j;r<U;r=ya.tickIncrement(r,B.size,!1,f)){m.push(y.slice()),A.push(r);var X=new Array(V);for(n=0;n<V;n++)X[n]=[];C.push(X),P&&E.push(x.slice())}A.push(r);var W=m.length,Y=d(e.ybins.start),Z=(r-Y)/W,J=g(Y+Z/2);O&&(F=hm(y.length,M,q,b),z=hm(m.length,T,Z,_)),b||"date"!==o.type||(M=dm(h,M)),_||"date"!==s.type||(T=dm(d,T));var Q=!0,$=!0,K=new Array(V),tt=new Array(W),et=1/0,rt=1/0,nt=1/0,at=1/0;for(r=0;r<v;r++){var it=l[r],ot=u[r];a=ae.findBin(it,M),i=ae.findBin(ot,T),a>=0&&a<V&&i>=0&&i<W&&(k+=D(a,r,m[i],N,E[i]),C[i][a].push(r),Q&&(void 0===K[a]?K[a]=it:K[a]!==it&&(Q=!1)),$&&(void 0===tt[a]?tt[a]=ot:tt[a]!==ot&&($=!1)),et=Math.min(et,it-w[a]),rt=Math.min(rt,w[a+1]-it),nt=Math.min(nt,ot-A[i]),at=Math.min(at,A[i+1]-ot))}if(P)for(i=0;i<W;i++)k+=Xv(m[i],E[i]);if(I)for(i=0;i<W;i++)I(m[i],k,F,z[i]);return{x:l,xRanges:pm(w,Q&&K,et,rt,o,c),x0:G,dx:q,y:u,yRanges:pm(A,$&&tt,nt,at,s,f),y0:J,dy:Z,z:m,pts:C}}(t,r)).x,a=f.x0,i=f.dx,o=f.y,l=f.y0,s=f.dy,u=f.z):(jv(r)?(!function(t,e,r,n,a,i){n=n||"x",a=a||"y",i=i||["z"];var o,l,s,u=t[n].slice(),c=t[a].slice(),f=t.text,h=Math.min(u.length,c.length),d=void 0!==f&&!Array.isArray(f[0]),p=t[n+"calendar"],g=t[a+"calendar"];for(o=0;o<i.length;o++)(s=t[i[o]])&&(h=Math.min(h,s.length));for(h<u.length&&(u=u.slice(0,h)),h<c.length&&(c=c.slice(0,h)),o=0;o<h;o++)u[o]=e.d2c(u[o],0,p),c[o]=r.d2c(c[o],0,g);var v,m,y,x=ae.distinctVals(u),b=x.vals,_=ae.distinctVals(c),w=_.vals,A=[];for(o=0;o<i.length;o++)A[o]=ae.init2dArray(w.length,b.length);for(d&&(y=ae.init2dArray(w.length,b.length)),o=0;o<h;o++)if(u[o]!==zv&&c[o]!==zv){for(v=ae.findBin(u[o]+x.minDiff/2,b),m=ae.findBin(c[o]+_.minDiff/2,w),l=0;l<i.length;l++)s=t[i[l]],A[l][m][v]=s[o];d&&(y[m][v]=f[o])}for(t["_input_"+n]=t[n],t["_input_"+a]=t[a],t[n]=b,t[a]=w,l=0;l<i.length;l++)t["_input_"+i[l]]=t[i[l]],t[i[l]]=A[l];d&&(t.text=y)}(r,h,d,"x","y",["z"]),n=r.x,o=r.y):(n=r.x?h.makeCalcdata(r,"x"):[],o=r.y?d.makeCalcdata(r,"y"):[]),a=r.x0||0,i=r.dx||1,l=r.y0||0,s=r.dy||1,u=function(t,r){var n,a,i,o,l,s;function u(t){if(e(t))return+t}if(r){for(n=0,l=0;l<t.length;l++)n=Math.max(n,t[l].length);if(0===n)return!1;i=function(t){return t.length},o=function(t,e,r){return t[r][e]}}else n=t.length,i=function(t,e){return t[e].length},o=function(t,e,r){return t[e][r]};var c=new Array(n);for(l=0;l<n;l++)for(a=i(t,l),c[l]=new Array(a),s=0;s<a;s++)c[l][s]=u(o(t,l,s));return c}(r.z,r.transpose),(p||r.connectgaps)&&(r._emptypoints=function(t){var e,r,n,a,i,o,l,s,u=[],c={},f=[],h=t[0],d=[],p=[0,0,0],g=Nv(t);for(r=0;r<t.length;r++)for(e=d,d=h,h=t[r+1]||[],n=0;n<g;n++)void 0===d[n]&&((o=(void 0!==d[n-1]?1:0)+(void 0!==d[n+1]?1:0)+(void 0!==e[n]?1:0)+(void 0!==h[n]?1:0))?(0===r&&o++,0===n&&o++,r===t.length-1&&o++,n===d.length-1&&o++,o<4&&(c[[r,n]]=[r,n,o]),u.push([r,n,o])):f.push([r,n]));for(;f.length;){for(l={},s=!1,i=f.length-1;i>=0;i--)(o=((c[[(r=(a=f[i])[0])-1,n=a[1]]]||p)[2]+(c[[r+1,n]]||p)[2]+(c[[r,n-1]]||p)[2]+(c[[r,n+1]]||p)[2])/20)&&(l[a]=[r,n,o],f.splice(i,1),s=!0);if(!s)throw"findEmpties iterated with no new neighbors";for(a in l)c[a]=l[a],u.push(l[a])}return u.sort(function(t,e){return e[2]-t[2]})}(u),r._interpz=function(t,e,r){var n,a,i=1;if(Array.isArray(r))for(n=0;n<e.length;n++)t[(a=e[n])[0]][a[1]]=r[a[0]][a[1]];else Hv(t,e);for(n=0;n<e.length&&!(e[n][2]<4);n++);for(e=e.slice(n),n=0;n<100&&i>.01;n++)i=Hv(t,e,Vv(i));return i>.01&&ae.log("interp2d didn't converge quickly",i),t}(u,r._emptypoints,r._interpz))),"fast"===m)if("log"===h.type||"log"===d.type)y("log axis found");else if(!g){if(n.length){var x=(n[n.length-1]-n[0])/(n.length-1),b=Math.abs(x/100);for(c=0;c<n.length-1;c++)if(Math.abs(n[c+1]-n[c]-x)>b){y("x scale is not linear");break}}if(o.length&&"fast"===m){var _=(o[o.length-1]-o[0])/(o.length-1),w=Math.abs(_/100);for(c=0;c<o.length-1;c++)if(Math.abs(o[c+1]-o[c]-_)>w){y("y scale is not linear");break}}}var A=Nv(u),M="scaled"===r.xtype?"":n,T=Gv(r,M,a,i,A,h),k="scaled"===r.ytype?"":o,E=Gv(r,k,l,s,u.length,d);v||(ya.expand(h,T),ya.expand(d,E));var C={x:T,y:E,z:u,text:r.text};if(M&&M.length===T.length-1&&(C.xCenter=M),k&&k.length===E.length-1&&(C.yCenter=k),g&&(C.xRanges=f.xRanges,C.yRanges=f.yRanges,C.pts=f.pts),p&&"constraint"===r.contours.type||dr(r,u,"","z"),p&&r.contours&&"heatmap"===r.contours.coloring){var S={type:"contour"===r.type?"heatmap":"histogram2d",xcalendar:r.xcalendar,ycalendar:r.ycalendar};C.xfill=Gv(S,M,a,i,A,h),C.yfill=Gv(S,k,l,s,u.length,d)}return[C]},vm=m.extendFlat,mm=wr.LINE_SPACING,ym={colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"},xm=function(e,r){var n={};function a(){var o=e._fullLayout,s=o._size;if("function"==typeof n.fillcolor||"function"==typeof n.line.color){var u,c,f=t.extent(("function"==typeof n.fillcolor?n.fillcolor:n.line.color).domain()),h=[],d=[],p="function"==typeof n.line.color?n.line.color:function(){return n.line.color},g="function"==typeof n.fillcolor?n.fillcolor:function(){return n.fillcolor},v=n.levels.end+n.levels.size/100,m=n.levels.size,y=1.001*f[0]-.001*f[1],x=1.001*f[1]-.001*f[0];for(c=0;c<1e5&&(u=n.levels.start+c*m,!(m>0?u>=v:u<=v));c++)u>y&&u<x&&h.push(u);if("function"==typeof n.fillcolor)if(n.filllevels)for(v=n.filllevels.end+n.filllevels.size/100,m=n.filllevels.size,c=0;c<1e5&&(u=n.filllevels.start+c*m,!(m>0?u>=v:u<=v));c++)u>f[0]&&u<f[1]&&d.push(u);else(d=h.map(function(t){return t-n.levels.size/2})).push(d[d.length-1]+n.levels.size);else n.fillcolor&&"string"==typeof n.fillcolor&&(d=[0]);n.levels.size<0&&(h.reverse(),d.reverse());var b,_=o.height-o.margin.t-o.margin.b,w=o.width-o.margin.l-o.margin.r,A=Math.round(n.thickness*("fraction"===n.thicknessmode?w:1)),M=A/s.w,T=Math.round(n.len*("fraction"===n.lenmode?_:1)),k=T/s.h,E=n.xpad/s.w,C=(n.borderwidth+n.outlinewidth)/2,S=n.ypad/s.h,L=Math.round(n.x*s.w+n.xpad),O=n.x-M*({middle:.5,right:1}[n.xanchor]||0),D=n.y+k*(({top:-.5,bottom:.5}[n.yanchor]||0)-.5),I=Math.round(s.h*(1-D)),P=I-T,F={type:"linear",range:f,tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,exponentformat:n.exponentformat,separatethousands:n.separatethousands,showexponent:n.showexponent,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,title:n.title,titlefont:n.titlefont,showline:!0,anchor:"free",position:1},z={type:"linear",_id:"y"+r},N={letter:"y",font:o.font,noHover:!0,calendar:o.calendar};if(er(F,z,K,N,o),ar(F,z,K,N),z.position=n.x+E+M,a.axis=z,-1!==["top","bottom"].indexOf(n.titleside)&&(z.titleside=n.titleside,z.titlex=n.x+E,z.titley=D+("top"===n.titleside?k-S:S)),n.line.color&&"auto"===n.tickmode){z.tickmode="linear",z.tick0=n.levels.start;var B=n.levels.size,j=ae.constrain((I-P)/50,4,15)+1,U=(f[1]-f[0])/((n.nticks||j)*B);if(U>1){var V=Math.pow(10,Math.floor(Math.log(U)/Math.LN10));B*=V*ae.roundUp(U/V,[2,5,10]),(Math.abs(n.levels.start)/n.levels.size+1e-6)%1<2e-6&&(z.tick0=0)}z.dtick=B}z.domain=[D+S,D+k-S],z.setScale();var H=o._infolayer.selectAll("g."+r).data([0]);H.enter().append("g").classed(r,!0).classed(ym.colorbar,!0).each(function(){var e=t.select(this);e.append("rect").classed(ym.cbbg,!0),e.append("g").classed(ym.cbfills,!0),e.append("g").classed(ym.cblines,!0),e.append("g").classed(ym.cbaxis,!0).classed(ym.crisp,!0),e.append("g").classed(ym.cbtitleunshift,!0).append("g").classed(ym.cbtitle,!0),e.append("rect").classed(ym.cboutline,!0),e.select(".cbtitle").datum(0)}),H.attr("transform","translate("+Math.round(s.l)+","+Math.round(s.t)+")");var q=H.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(s.l)+",-"+Math.round(s.t)+")");z._axislayer=H.select(".cbaxis");var G=0;if(-1!==["top","bottom"].indexOf(n.titleside)){var X,W=s.l+(n.x+E)*s.w,Y=z.titlefont.size;X="top"===n.titleside?(1-(D+k-S))*s.h+s.t+3+.75*Y:(1-(D+S))*s.h+s.t-3-.25*Y,tt(z._id+"title",{attributes:{x:W,y:X,"text-anchor":"start"}})}var Z,J,Q,$=ae.syncOrAsync([Wn.previousPromises,function(){if(-1!==["top","bottom"].indexOf(n.titleside)){var r=H.select(".cbtitle"),a=r.select("text"),i=[-n.outlinewidth/2,n.outlinewidth/2],u=r.select(".h"+z._id+"title-math-group").node(),c=15.6;if(a.node()&&(c=parseInt(a.node().style.fontSize,10)*mm),u?(G=Jr.bBox(u).height)>c&&(i[1]-=(G-c)/2):a.node()&&!a.classed(ym.jsPlaceholder)&&(G=Jr.bBox(a.node()).height),G){if(G+=5,"top"===n.titleside)z.domain[1]-=G/s.h,i[1]*=-1;else{z.domain[0]+=G/s.h;var v=Mr.lineCount(a);i[1]+=(1-v)*c}r.attr("transform","translate("+i+")"),z.setScale()}}H.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(s.h*(1-z.domain[1]))+")"),z._axislayer.attr("transform","translate(0,"+Math.round(-s.t)+")");var m=H.select(".cbfills").selectAll("rect.cbfill").data(d);m.enter().append("rect").classed(ym.cbfill,!0).style("stroke","none"),m.exit().remove(),m.each(function(e,r){var n=[0===r?f[0]:(d[r]+d[r-1])/2,r===d.length-1?f[1]:(d[r]+d[r+1])/2].map(z.c2p).map(Math.round);r!==d.length-1&&(n[1]+=n[1]>n[0]?1:-1);var a=g(e).replace("e-",""),i=l(a).toHexString();t.select(this).attr({x:L,width:Math.max(A,2),y:t.min(n),height:Math.max(t.max(n)-t.min(n),2),fill:i})});var y=H.select(".cblines").selectAll("path.cbline").data(n.line.color&&n.line.width?h:[]);return y.enter().append("path").classed(ym.cbline,!0),y.exit().remove(),y.each(function(e){t.select(this).attr("d","M"+L+","+(Math.round(z.c2p(e))+n.line.width/2%1)+"h"+A).call(Jr.lineGroupStyle,n.line.width,p(e),n.line.dash)}),z._axislayer.selectAll("g."+z._id+"tick,path").remove(),z._pos=L+A+(n.outlinewidth||0)/2-("outside"===n.ticks?1:0),z.side="right",ae.syncOrAsync([function(){return ya.doTicks(e,z,!0)},function(){if(-1===["top","bottom"].indexOf(n.titleside)){var r=z.titlefont.size,a=z._offset+z._length/2,i=s.l+(z.position||0)*s.w+("right"===z.side?10+r*(z.showticklabels?1:.5):-10-r*(z.showticklabels?.5:0));tt("h"+z._id+"title",{avoid:{selection:t.select(e).selectAll("g."+z._id+"tick"),side:n.titleside,offsetLeft:s.l,offsetTop:0,maxShift:o.width},attributes:{x:i,y:a,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])},Wn.previousPromises,function(){var t=A+n.outlinewidth/2+Jr.bBox(z._axislayer.node()).width;if((b=q.select("text")).node()&&!b.classed(ym.jsPlaceholder)){var a,i=q.select(".h"+z._id+"title-math-group").node();a=i&&-1!==["top","bottom"].indexOf(n.titleside)?Jr.bBox(i).width:Jr.bBox(q.node()).right-L-s.l,t=Math.max(t,a)}var o=2*n.xpad+t+n.borderwidth+n.outlinewidth/2,l=I-P;H.select(".cbbg").attr({x:L-n.xpad-(n.borderwidth+n.outlinewidth)/2,y:P-C,width:Math.max(o,2),height:Math.max(l+2*C,2)}).call(Pe.fill,n.bgcolor).call(Pe.stroke,n.bordercolor).style({"stroke-width":n.borderwidth}),H.selectAll(".cboutline").attr({x:L,y:P+n.ypad+("top"===n.titleside?G:0),width:Math.max(A,2),height:Math.max(l-2*n.ypad-G,2)}).call(Pe.stroke,n.outlinecolor).style({fill:"None","stroke-width":n.outlinewidth});var u=({center:.5,right:1}[n.xanchor]||0)*o;H.attr("transform","translate("+(s.l-u)+","+s.t+")"),Wn.autoMargin(e,r,{x:n.x,y:n.y,l:o*({right:1,center:.5}[n.xanchor]||0),r:o*({left:1,center:.5}[n.xanchor]||0),t:l*({bottom:1,middle:.5}[n.yanchor]||0),b:l*({top:1,middle:.5}[n.yanchor]||0)})}],e);if($&&$.then&&(e._promises||[]).push($),e._context.edits.colorbarPosition)tg.init({element:H.node(),gd:e,prepFn:function(){Z=H.attr("transform"),cg(H)},moveFn:function(t,e){H.attr("transform",Z+" translate("+t+","+e+")"),J=tg.align(O+t/s.w,M,0,1,n.xanchor),Q=tg.align(D-e/s.h,k,0,1,n.yanchor);var r=tg.getCursor(J,Q,n.xanchor,n.yanchor);cg(H,r)},doneFn:function(){cg(H),void 0!==J&&void 0!==Q&&R.call("restyle",e,{"colorbar.x":J,"colorbar.y":Q},i().index)}});return $}function K(t,e){return ae.coerce(F,z,Ie,t,e)}function tt(t,r){var n,a=i();n=R.traceIs(a,"markerColorscale")?"marker.colorbar.title":"colorbar.title";var l={propContainer:z,propName:n,traceIndex:a.index,placeholder:o._dfltTitle.colorbar,containerGroup:H.select(".cbtitle")},s="h"===t.charAt(0)?t.substr(1):"h"+t;H.selectAll("."+s+",."+s+"-math-group").remove(),oa.draw(e,t,vm(l,r||{}))}o._infolayer.selectAll("g."+r).remove()}function i(){var t,n,a=r.substr(2);for(t=0;t<e._fullData.length;t++)if((n=e._fullData[t]).uid===a)return n}return Object.keys(gr).forEach(function(t){n[t]=null}),n.fillcolor=null,n.line={color:null,width:null,dash:null},n.levels={start:null,end:null,size:null},n.filllevels=null,Object.keys(n).forEach(function(t){a[t]=function(e){return arguments.length?(n[t]=ae.isPlainObject(n[t])?ae.extendFlat(n[t],e):e,a):n[t]}}),a.options=function(t){return Object.keys(t).forEach(function(e){"function"==typeof a[e]&&a[e](t[e])}),a},a._opts=n,a},bm=function(t){return t.end+t.size/1e6},_m=function(e){var r=e.contours,n=r.start,a=bm(r),i=r.size||1,o=Math.floor((a-n)/i)+1,l="lines"===r.coloring?0:1;isFinite(i)||(i=1,o=1);var s,u,c=e.colorscale,f=c.length,h=new Array(f),d=new Array(f);if("heatmap"===r.coloring){for(e.zauto&&!1===e.autocontour&&(e.zmin=n-i/2,e.zmax=e.zmin+o*i),u=0;u<f;u++)s=c[u],h[u]=s[0]*(e.zmax-e.zmin)+e.zmin,d[u]=s[1];var p=t.extent([e.zmin,e.zmax,r.start,r.start+i*(o-1)]),g=p[e.zmin<e.zmax?0:1],v=p[e.zmin<e.zmax?1:0];g!==e.zmin&&(h.splice(0,0,g),d.splice(0,0,Range[0])),v!==e.zmax&&(h.push(v),d.push(d[d.length-1]))}else for(u=0;u<f;u++)s=c[u],h[u]=(s[0]*(o+l-1)-l/2)*i+n,d[u]=s[1];return br.makeColorScaleFunc({domain:h,range:d},{noNumericCheck:!0})},wm=function(t,e,r,n){if(n||(n={}),t("contours.showlabels")){var a=e.font;ae.coerceFont(t,"contours.labelfont",{family:a.family,size:a.size,color:r}),t("contours.labelformat")}!1!==n.hasHover&&t("zhoverformat")},Am=Pe.addOpacity,Mm=Pe.opacity,Tm=kv,km=Mv,Em=function(t,r,n,a,i,o){var l,s,u,c=r.contours,f=n("contours.operation");(c._operation=Tm[f],function(t,r){var n;-1===km.indexOf(r.operation)?(t("contours.value",[0,1]),Array.isArray(r.value)?r.value.length>2?r.value=r.value.slice(2):0===r.length?r.value=[0,1]:r.length<2?(n=parseFloat(r.value[0]),r.value=[n,n+1]):r.value=[parseFloat(r.value[0]),parseFloat(r.value[1])]:e(r.value)&&(n=parseFloat(r.value),r.value=[n,n+1])):(t("contours.value",0),e(r.value)||(Array.isArray(r.value)?r.value=parseFloat(r.value[0]):r.value=0))}(n,c),"="===f?l=c.showlines=!0:(l=n("contours.showlines"),u=n("fillcolor",Am((t.line||{}).color||i,.5))),l)&&(s=n("line.color",u&&Mm(u)?Am(r.fillcolor,1):i),n("line.width",2),n("line.dash"));n("line.smoothing"),wm(n,a,s,o)};var Cm=ae.isArrayOrTypedArray,Sm=function(t,r,n,a,i,o){var l,s,u=n("z");if(i=i||"x",o=o||"y",void 0===u||!u.length)return 0;if(jv(t)){if(l=n(i),s=n(o),!l||!s)return 0}else{if(l=Lm(i,n),s=Lm(o,n),!function(t){for(var r,n=!0,a=!1,i=!1,o=0;o<t.length;o++){if(r=t[o],!Cm(r)){n=!1;break}r.length>0&&(a=!0);for(var l=0;l<r.length;l++)if(e(r[l])){i=!0;break}}return n&&a&&i}(u))return 0;n("transpose")}return R.getComponentMethod("calendars","handleTraceDefaults")(t,r,[i,o],a),r.z.length};function Lm(t,e){var r=e(t);return"scaled"===(r?e(t+"type","array"):"scaled")&&(e(t+"0"),e("d"+t)),r}var Om={fragment:zo(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec2 tangent;\nattribute vec4 color;\n\nuniform mat3 viewTransform;\nuniform vec2 screenShape;\nuniform float lineWidth;\nuniform float pointSize;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  fragColor = color;\n\n  vec3 vPosition = viewTransform * vec3(position, 1.0);\n  vec2 vTangent = normalize(viewTransform * vec3(tangent, 0)).xy;\n  vec2 offset = vec2(vTangent.y, -vTangent.x) / screenShape;\n\n  gl_Position = vec4(\n    vPosition.xy + offset * lineWidth * vPosition.z,\n    0,\n    vPosition.z);\n\n  gl_PointSize = pointSize;\n}\n"]),fillVertex:zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\n\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  fragColor = color;\n  vec3 vPosition = viewTransform * vec3(position, 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])};function Rm(t,e,r,n,a){var i=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),r?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function Dm(t,e,r,n){return new Function([Rm("A","x"+t+"y",e,["y"],n),Rm("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}var Im={ge:Dm(">=",!1,"GE"),gt:Dm(">",!1,"GT"),lt:Dm("<",!0,"LT"),le:Dm("<=",!0,"LE"),eq:Dm("-",!0,"EQ",!0)},Pm=function(t,e){var r=t.gl,n=Yl(r,Om.vertex,Om.fragment),a=Yl(r,Om.fillVertex,Om.fragment),i=Fo(r),o=Fo(r),l=Fo(r),s=Fo(r),u=Fo(r),c=new Fm(t,n,a,i,o,l,s,u);return c.update(e),t.addObject(c),c};function Fm(t,e,r,n,a,i,o,l){this.plot=t,this.shader=e,this.fillShader=r,this.positionBuffer=n,this.colorBuffer=a,this.idBuffer=i,this.fillPositionBuffer=o,this.fillColorBuffer=l,this.fillVerts=0,this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.numVertices=0,this.lineWidth=1}var zm,Nm,Bm=Fm.prototype,jm=[1,0,0,0,0,1,1,0,1,1,0,1];function Um(t,e){var r=Math.floor(e);if(r<0)return t[0];if(r>=t.length-1)return t[t.length-1];var n=e-r;return(1-n)*t[r]+n*t[r+1]}Bm.draw=(zm=[1,0,0,0,1,0,0,0,1],Nm=[0,0],function(){var t,e,r=this.plot,n=this.shader,a=this.fillShader,i=this.bounds,o=this.numVertices,l=this.fillVerts,s=r.gl,u=r.viewBox,c=r.dataBox,f=i[2]-i[0],h=i[3]-i[1],d=c[2]-c[0],p=c[3]-c[1];if(zm[0]=2*f/d,zm[4]=2*h/p,zm[6]=2*(i[0]-c[0])/d-1,zm[7]=2*(i[1]-c[1])/p-1,Nm[0]=u[2]-u[0],Nm[1]=u[3]-u[1],l>0&&(a.bind(),(t=a.uniforms).viewTransform=zm,t.screenShape=Nm,e=n.attributes,this.fillPositionBuffer.bind(),e.position.pointer(),this.fillColorBuffer.bind(),e.color.pointer(s.UNSIGNED_BYTE,!0),s.drawArrays(s.TRIANGLES,0,l)),o>0){n.bind();var g=this.lineWidth*r.pixelRatio;(t=n.uniforms).viewTransform=zm,t.screenShape=Nm,t.lineWidth=g,t.pointSize=1e3,e=n.attributes,this.positionBuffer.bind(),e.position.pointer(s.FLOAT,!1,16,0),e.tangent.pointer(s.FLOAT,!1,16,8),this.colorBuffer.bind(),e.color.pointer(s.UNSIGNED_BYTE,!0),s.drawArrays(s.TRIANGLES,0,o),t.lineWidth=0,t.pointSize=g,this.positionBuffer.bind(),e.position.pointer(s.FLOAT,!1,48,0),e.tangent.pointer(s.FLOAT,!1,48,8),this.colorBuffer.bind(),e.color.pointer(s.UNSIGNED_BYTE,!0,12,0),s.drawArrays(s.POINTS,0,o/3)}}),Bm.drawPick=function(t){return t},Bm.pick=function(t,e,r){return null},Bm.update=function(t){var e=(t=t||{}).shape||[0,0],r=t.x||wi(e[0]),n=t.y||wi(e[1]),a=t.z||new Float32Array(e[0]*e[1]),i=t.levels||[],o=t.levelColors||[],l=this.bounds,s=l[0]=r[0],u=l[1]=n[0],c=l[2]=r[r.length-1],f=l[3]=n[n.length-1];s===c&&(l[2]+=1,c+=1),u===f&&(l[3]+=1,f+=1);var h=1/(c-s),d=1/(f-u);this.lineWidth=t.lineWidth||1;var p=Li(a,e),g=[],v=[],m=[],y=[],x=[[0,0],[e[0]-1,0],[0,e[1]-1],[e[0]-1,e[1]-1]];function b(t,e,r,n){var a=n-r;return Math.abs(a)<1e-6?e:Math.floor(e)+Math.max(.001,Math.min(.999,(t-r)/a))}for(var _=0;_<i.length;++_){var w=i[_];if(!(_>0&&w===i[_-1])){for(var A=Fd(p,w),M=255*o[4*_]|0,T=255*o[4*_+1]|0,k=255*o[4*_+2]|0,E=255*o[4*_+3]|0,C=A.cells,S=A.positions,L=Array(S.length),O=0;O<L.length;++O)L[O]=0;for(O=0;O<C.length;++O){var R=C[O];L[R[0]]+=1,L[R[1]]+=1}for(O=0;O<L.length;++O){var D=L[O];if(0!==D){var I=S[O];if(L[O]=x.length,x.push(I),!(D>1)){var P,F=I[0],z=I[1],N=p.get(Math.floor(F),Math.floor(z)),B=p.get(Math.floor(F),Math.ceil(z)),j=p.get(Math.ceil(F),Math.floor(z)),U=p.get(Math.ceil(F),Math.ceil(z));0===Math.floor(I[0])&&N<=w!=B<w?P=[0,b(w,I[1],N,B)]:Math.ceil(I[0])===e[0]-1&&j<=w!=U<w?P=[e[0]-1,b(w,I[1],j,U)]:0===Math.floor(I[1])&&N<=w!=j<w?P=[b(w,I[0],N,j),0]:Math.ceil(I[1])===e[1]-1&&B<=w!=U<w&&(P=[b(w,I[0],B,U),e[1]-1]),P&&(C.push([O,S.length]),L.push(x.length),S.push(P))}}}for(O=0;O<C.length;++O){var V=C[O],H=S[V[0]],q=S[V[1]];y.push([L[V[0]],L[V[1]]]);for(var G=Math.round(H[0])+e[0]*Math.round(H[1]),X=Um(r,H[0]),W=Um(n,H[1]),Y=Um(r,q[0]),Z=Um(n,q[1]),J=(X=h*(X-s))-(Y=h*(Y-s)),Q=(W=d*(W-u))-(Z=d*(Z-u)),$=0;$<jm.length;$+=2){var K=jm[$],tt=1-K,et=2*jm[$+1]-1;g.push(tt*X+K*Y,tt*W+K*Z,et*J,et*Q),v.push(M,T,k,E),m.push(G)}}}}this.positionBuffer.update(new Float32Array(g)),this.colorBuffer.update(new Uint8Array(v)),this.idBuffer.update(new Uint32Array(m)),this.numVertices=m.length;var rt=t.fillColors,nt=[],at=[],it=0;if(rt){Of(x,y);var ot=Su(x,y,{delaunay:!1});for(_=0;_<ot.length;++_){var lt=ot[_],st=0,ut=0;for(O=0;O<3;++O){var ct=x[lt[O]],ft=Um(r,ct[0]),ht=Um(n,ct[1]);st+=ct[0],ut+=ct[1],at.push(h*(ft-s),d*(ht-u))}st/=3,ut/=3;var dt=Math.floor(st),pt=Math.floor(ut),gt=st-dt,vt=ut-pt,mt=p.get(dt,pt),yt=p.get(dt,pt+1),xt=(1-vt)*((1-gt)*mt+gt*p.get(dt+1,pt))+vt*((1-gt)*yt+gt*p.get(dt+1,pt+1)),bt=Im.le(i,xt)+1,_t=255*rt[4*bt+0]|0,wt=255*rt[4*bt+1]|0,At=255*rt[4*bt+2]|0,Mt=255*rt[4*bt+3]|0;nt.push(_t,wt,At,Mt,_t,wt,At,Mt,_t,wt,At,Mt),it+=3}this.fillPositionBuffer.update(new Float32Array(at)),this.fillColorBuffer.update(new Uint8Array(nt)),this.fillVerts=it}},Bm.dispose=function(){this.plot.removeObject(this)};var Vm={fragment:zo(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:zo(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])};function Hm(t,e,r,n,a){var i=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),r?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function qm(t,e,r,n){return new Function([Hm("A","x"+t+"y",e,["y"],n),Hm("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}var Gm={ge:qm(">=",!1,"GE"),gt:qm(">",!1,"GT"),lt:qm("<",!0,"LT"),le:qm("<=",!0,"LE"),eq:qm("-",!0,"EQ",!0)},Xm=function(t,e){var r=t.gl,n=Yl(r,Vm.vertex,Vm.fragment),a=Yl(r,Vm.pickVertex,Vm.pickFragment),i=Fo(r),o=Fo(r),l=Fo(r),s=Fo(r),u=new Wm(t,n,a,i,o,l,s);return u.update(e),t.addObject(u),u};function Wm(t,e,r,n,a,i,o){this.plot=t,this.shader=e,this.pickShader=r,this.positionBuffer=n,this.weightBuffer=a,this.colorBuffer=i,this.idBuffer=o,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var Ym=Wm.prototype,Zm=[0,0,1,0,0,1,1,0,1,1,0,1];function Jm(t,e){this.scene=t,this.uid=e,this.type="contourgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.contourOptions={z:new Float32Array(0),x:[],y:[],shape:[0,0],levels:[0],levelColors:[0,0,0,1],lineWidth:1},this.contour=Pm(t.glplot,this.contourOptions),this.contour._trace=this,this.heatmapOptions={z:new Float32Array(0),x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,0]},this.heatmap=Xm(t.glplot,this.heatmapOptions),this.heatmap._trace=this}Ym.draw=function(){var t=[1,0,0,0,1,0,0,0,1];return function(){var e=this.plot,r=this.shader,n=this.bounds,a=this.numVertices;if(!(a<=0)){var i=e.gl,o=e.dataBox,l=n[2]-n[0],s=n[3]-n[1],u=o[2]-o[0],c=o[3]-o[1];t[0]=2*l/u,t[4]=2*s/c,t[6]=2*(n[0]-o[0])/u-1,t[7]=2*(n[1]-o[1])/c-1,r.bind();var f=r.uniforms;f.viewTransform=t,f.shape=this.shape;var h=r.attributes;this.positionBuffer.bind(),h.position.pointer(),this.weightBuffer.bind(),h.weight.pointer(i.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),h.color.pointer(i.UNSIGNED_BYTE,!0),i.drawArrays(i.TRIANGLES,0,a)}}}(),Ym.drawPick=function(){var t=[1,0,0,0,1,0,0,0,1],e=[0,0,0,0];return function(r){var n=this.plot,a=this.pickShader,i=this.bounds,o=this.numVertices;if(!(o<=0)){var l=n.gl,s=n.dataBox,u=i[2]-i[0],c=i[3]-i[1],f=s[2]-s[0],h=s[3]-s[1];t[0]=2*u/f,t[4]=2*c/h,t[6]=2*(i[0]-s[0])/f-1,t[7]=2*(i[1]-s[1])/h-1;for(var d=0;d<4;++d)e[d]=r>>8*d&255;this.pickOffset=r,a.bind();var p=a.uniforms;p.viewTransform=t,p.pickOffset=e,p.shape=this.shape;var g=a.attributes;return this.positionBuffer.bind(),g.position.pointer(),this.weightBuffer.bind(),g.weight.pointer(l.UNSIGNED_BYTE,!1),this.idBuffer.bind(),g.pickId.pointer(l.UNSIGNED_BYTE,!1),l.drawArrays(l.TRIANGLES,0,o),r+this.shape[0]*this.shape[1]}}}(),Ym.pick=function(t,e,r){var n=this.pickOffset,a=this.shape[0]*this.shape[1];if(r<n||r>=n+a)return null;var i=r-n,o=this.xData,l=this.yData;return{object:this,pointId:i,dataCoord:[o[i%this.shape[0]],l[i/this.shape[0]|0]]}},Ym.update=function(t){var e=(t=t||{}).shape||[0,0],r=t.x||wi(e[0]),n=t.y||wi(e[1]),a=t.z||new Float32Array(e[0]*e[1]);this.xData=r,this.yData=n;var i=t.colorLevels||[0],o=t.colorValues||[0,0,0,1],l=i.length,s=this.bounds,u=s[0]=r[0],c=s[1]=n[0],f=1/((s[2]=r[r.length-1])-u),h=1/((s[3]=n[n.length-1])-c),d=e[0],p=e[1];this.shape=[d,p];var g=(d-1)*(p-1)*(Zm.length>>>1);this.numVertices=g;for(var v=Lo.mallocUint8(4*g),m=Lo.mallocFloat32(2*g),y=Lo.mallocUint8(2*g),x=Lo.mallocUint32(g),b=0,_=0;_<p-1;++_)for(var w=h*(n[_]-c),A=h*(n[_+1]-c),M=0;M<d-1;++M)for(var T=f*(r[M]-u),k=f*(r[M+1]-u),E=0;E<Zm.length;E+=2){var C,S,L,O,R=Zm[E],D=Zm[E+1],I=a[(_+D)*d+(M+R)],P=Gm.le(i,I);if(P<0)C=o[0],S=o[1],L=o[2],O=o[3];else if(P===l-1)C=o[4*l-4],S=o[4*l-3],L=o[4*l-2],O=o[4*l-1];else{var F=(I-i[P])/(i[P+1]-i[P]),z=1-F,N=4*P,B=4*(P+1);C=z*o[N]+F*o[B],S=z*o[N+1]+F*o[B+1],L=z*o[N+2]+F*o[B+2],O=z*o[N+3]+F*o[B+3]}v[4*b]=255*C,v[4*b+1]=255*S,v[4*b+2]=255*L,v[4*b+3]=255*O,m[2*b]=.5*T+.5*k,m[2*b+1]=.5*w+.5*A,y[2*b]=R,y[2*b+1]=D,x[b]=_*d+M,b+=1}this.positionBuffer.update(m),this.weightBuffer.update(y),this.colorBuffer.update(v),this.idBuffer.update(x),Lo.free(m),Lo.free(v),Lo.free(y),Lo.free(x)},Ym.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};var Qm=Jm.prototype;function $m(t,e){for(var r=t.contours,n=r.start,a=r.end,i=r.size||1,o=e.fill,l=_m(t),s=Math.floor((a-n)/i)+(o?2:1),u=new Array(s),c=new Array(4*s),f=0;f<s;f++)for(var h=u[f]=n+i*f-(o?i/2:0),d=ov(l(h)),p=0;p<4;p++)c[4*f+p]=d[p];return{levels:u,levelColors:c}}Qm.handlePick=function(t){var e=this.heatmapOptions,r=e.shape,n=t.pointId,a=n%r[0],i=Math.floor(n/r[0]),o=n;return{trace:this,dataCoord:t.dataCoord,traceCoord:[e.x[a],e.y[i],e.z[o]],textLabel:this.textLabels[n],name:this.name,pointIndex:[i,a],hoverinfo:this.hoverinfo}},Qm.update=function(t,e){var r=e[0];this.index=t.index,this.name=t.name,this.hoverinfo=t.hoverinfo;var n,a=r.z,i=a[0].length,o=a.length;this.contourOptions.z=function(t,e,r){for(var n=new Float32Array(e*r),a=0,i=0;i<e;i++)for(var o=0;o<r;o++)n[a++]=t[o][i];return n}(a,i,o),this.heatmapOptions.z=[].concat.apply([],a),this.contourOptions.shape=this.heatmapOptions.shape=[i,o],this.contourOptions.x=this.heatmapOptions.x=r.x,this.contourOptions.y=this.heatmapOptions.y=r.y,"fill"===t.contours.coloring?(n=$m(t,{fill:!0}),this.contourOptions.levels=n.levels.slice(1),this.contourOptions.fillColors=n.levelColors,this.contourOptions.levelColors=[].concat.apply([],this.contourOptions.levels.map(function(){return[.25,.25,.25,1]}))):(n=$m(t,{fill:!1}),this.contourOptions.levels=n.levels,this.contourOptions.levelColors=n.levelColors),this.textLabels=[].concat.apply([],t.text),this.contour.update(this.contourOptions),this.heatmap.update(this.heatmapOptions),ya.expand(this.scene.xaxis,r.x),ya.expand(this.scene.yaxis,r.y)},Qm.dispose=function(){this.contour.dispose(),this.heatmap.dispose()};var Km=function(t,e,r){var n=new Jm(t,e.uid);return n.update(e,r),n},ty=xe.overrideAll,ey={};ey.attributes=ty(Iv,"calc","nested"),ey.supplyDefaults=function(t,e,r,n){function a(r,n){return ae.coerce(t,e,Iv,r,n)}if(Sm(t,e,a,n)){a("text");var i="constraint"===a("contours.type");a("connectgaps",jv(e)),i||delete e.showlegend,i?Em(t,e,a,n,r):(function(t,e,r,n){var a=n("contours.start"),i=n("contours.end"),o=!1===a||!1===i,l=r("contours.size");!(o?e.autocontour=!0:r("autocontour",!1))&&l||r("ncontours")}(0,e,a,function(r){return ae.coerce2(t,e,Iv,r)}),function(t,e,r,n,a){var i,o=r("contours.coloring"),l="";"fill"===o&&(i=r("contours.showlines")),!1!==i&&("lines"!==o&&(l=r("line.color","#000")),r("line.width",.5),r("line.dash")),"none"!==o&&mr(t,e,n,r,{prefix:"",cLetter:"z"}),r("line.smoothing"),wm(r,n,l,a)}(t,e,a,n))}else e.visible=!1},ey.colorbar=function(t,e){var r=e[0].trace,n="cb"+r.uid;if(t._fullLayout._infolayer.selectAll("."+n).remove(),r.showscale){var a=xm(t,n);e[0].t.cb=a;var i=r.contours,o=r.line,l=i.size||1,s=i.coloring,u=_m(r,{isColorbar:!0});"heatmap"===s&&a.filllevels({start:r.zmin,end:r.zmax,size:(r.zmax-r.zmin)/254}),a.fillcolor("fill"===s||"heatmap"===s?u:"").line({color:"lines"===s?u:o.color,width:!1!==i.showlines?o.width:0,dash:o.dash}).levels({start:i.start,end:bm(i),size:l}).options(r.colorbar)()}else Wn.autoMargin(t,n)},ey.calc=function(t,e){var r=gm(t,e);return function(t){var e=t.contours;if(t.autocontour){var r=Fv(t.zmin,t.zmax,t.ncontours);e.size=r.dtick,e.start=ya.tickFirst(r),r.range.reverse(),e.end=ya.tickFirst(r),e.start===t.zmin&&(e.start+=e.size),e.end===t.zmax&&(e.end-=e.size),e.start>e.end&&(e.start=e.end=(e.start+e.end)/2),t._input.contours||(t._input.contours={}),Pv(t._input.contours,{start:e.start,end:e.end,size:e.size}),t._input.autocontour=!0}else if("constraint"!==e.type){var n,a=e.start,i=e.end,o=t._input.contours;a>i&&(e.start=o.start=i,i=e.end=o.end=a,a=e.start),e.size>0||(n=a===i?1:Fv(a,i,t.ncontours).dtick,o.size=e.size=n)}}(e),r},ey.plot=Km,ey.moduleType="trace",ey.name="contourgl",ey.basePlotModule=_v,ey.categories=["gl","gl2d","2dMap"],ey.meta={};var ry=ey,ny={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var ay in ny){var iy=ay.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");ae.addStyleRule(iy,ny[ay])}var oy={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150},spikeline:{width:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",ascent:850,descent:-150}},ly={exports:{}};(function(t,e){!function(t,e){"object"==typeof ly.exports?ly.exports=e():t.ES6Promise=e()}(this,function(){"use strict";function r(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=0,i=void 0,o=void 0,l=function(t,e){p[a]=t,p[a+1]=e,2===(a+=2)&&(o?o(g):b())};var s="undefined"!=typeof window?window:void 0,u=s||{},c=u.MutationObserver||u.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(g,1)}}var p=new Array(1e3);function g(){for(var t=0;t<a;t+=2){(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0}a=0}var v,m,y,x,b=void 0;function _(t,e){var r=arguments,n=this,a=new this.constructor(M);void 0===a[A]&&U(a);var i,o=n._state;return o?(i=r[o-1],l(function(){return B(o,a,i,n._result)})):P(n,a,t,e),a}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(M);return O(e,t),e}f?b=function(){return t.nextTick(g)}:c?(m=0,y=new c(g),x=document.createTextNode(""),y.observe(x,{characterData:!0}),b=function(){x.data=m=++m%2}):h?((v=new MessageChannel).port1.onmessage=g,b=function(){return v.port2.postMessage(0)}):b=void 0===s&&"function"==typeof require?function(){try{var t=require("vertx");return i=t.runOnLoop||t.runOnContext,function(){i(g)}}catch(t){return d()}}():d();var A=Math.random().toString(36).substring(16);function M(){}var T=void 0,k=1,E=2,C=new z;function S(t){try{return t.then}catch(t){return C.error=t,C}}function L(t,e,n){e.constructor===t.constructor&&n===_&&e.constructor.resolve===w?function(t,e){e._state===k?D(t,e._result):e._state===E?I(t,e._result):P(e,void 0,function(e){return O(t,e)},function(e){return I(t,e)})}(t,e):n===C?I(t,C.error):void 0===n?D(t,e):r(n)?function(t,e,r){l(function(t){var n=!1,a=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?O(t,r):D(t,r))},function(e){n||(n=!0,I(t,e))},t._label);!n&&a&&(n=!0,I(t,a))},t)}(t,e,n):D(t,e)}function O(t,e){var r;t===e?I(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(r=e)||"object"==typeof r&&null!==r?L(t,e,S(e)):D(t,e)}function R(t){t._onerror&&t._onerror(t._result),F(t)}function D(t,e){t._state===T&&(t._result=e,t._state=k,0!==t._subscribers.length&&l(F,t))}function I(t,e){t._state===T&&(t._state=E,t._result=e,l(R,t))}function P(t,e,r,n){var a=t._subscribers,i=a.length;t._onerror=null,a[i]=e,a[i+k]=r,a[i+E]=n,0===i&&t._state&&l(F,t)}function F(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,a=void 0,i=t._result,o=0;o<e.length;o+=3)n=e[o],a=e[o+r],n?B(r,n,a,i):a(i);t._subscribers.length=0}}function z(){this.error=null}var N=new z;function B(t,e,n,a){var i=r(n),o=void 0,l=void 0,s=void 0,u=void 0;if(i){if((o=function(t,e){try{return t(e)}catch(t){return N.error=t,N}}(n,a))===N?(u=!0,l=o.error,o=null):s=!0,e===o)return void I(e,new TypeError("A promises callback cannot return that same promise."))}else o=a,s=!0;e._state!==T||(i&&s?O(e,o):u?I(e,l):t===k?D(e,o):t===E&&I(e,o))}var j=0;function U(t){t[A]=j++,t._state=void 0,t._result=void 0,t._subscribers=[]}function V(t,e){this._instanceConstructor=t,this.promise=new t(M),this.promise[A]||U(this.promise),n(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&D(this.promise,this._result))):I(this.promise,new Error("Array Methods must be provided an Array"))}function H(t){this[A]=j++,this._result=this._state=void 0,this._subscribers=[],M!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof H?function(t,e){try{e(function(e){O(t,e)},function(e){I(t,e)})}catch(e){I(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function q(){var t=void 0;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var n=null;try{n=Object.prototype.toString.call(r.resolve())}catch(t){}if("[object Promise]"===n&&!r.cast)return}t.Promise=H}return V.prototype._enumerate=function(){for(var t=this.length,e=this._input,r=0;this._state===T&&r<t;r++)this._eachEntry(e[r],r)},V.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===w){var a=S(t);if(a===_&&t._state!==T)this._settledAt(t._state,e,t._result);else if("function"!=typeof a)this._remaining--,this._result[e]=t;else if(r===H){var i=new r(M);L(i,t,a),this._willSettleAt(i,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},V.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===T&&(this._remaining--,t===E?I(n,r):this._result[e]=r),0===this._remaining&&D(n,this._result)},V.prototype._willSettleAt=function(t,e){var r=this;P(t,void 0,function(t){return r._settledAt(k,e,t)},function(t){return r._settledAt(E,e,t)})},H.all=function(t){return new V(this,t).promise},H.race=function(t){var e=this;return n(t)?new e(function(r,n){for(var a=t.length,i=0;i<a;i++)e.resolve(t[i]).then(r,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},H.resolve=w,H.reject=function(t){var e=new this(M);return I(e,t),e},H._setScheduler=function(t){o=t},H._setAsap=function(t){l=t},H._asap=l,H.prototype={constructor:H,then:_,catch:function(t){return this.then(null,t)}},q(),H.polyfill=q,H.Promise=H,H})}).call(this,bs,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),ly=ly.exports;var sy=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],uy={_isLinkedToArray:"annotation",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},text:{valType:"string",editType:"calcIfAutorange+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calcIfAutorange+arraydraw"},font:k({editType:"calcIfAutorange+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:sy.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:sy.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calcIfAutorange+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},ax:{valType:"any",editType:"calcIfAutorange+arraydraw"},ay:{valType:"any",editType:"calcIfAutorange+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",Se.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",Se.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",Se.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},yref:{valType:"enumerated",values:["paper",Se.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:k({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}},cy=(0,xe.overrideAll)({_isLinkedToArray:"annotation",visible:uy.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:uy.xanchor,xshift:uy.xshift,yanchor:uy.yanchor,yshift:uy.yshift,text:uy.text,textangle:uy.textangle,font:uy.font,width:uy.width,height:uy.height,opacity:uy.opacity,align:uy.align,valign:uy.valign,bgcolor:uy.bgcolor,bordercolor:uy.bordercolor,borderpad:uy.borderpad,borderwidth:uy.borderwidth,showarrow:uy.showarrow,arrowcolor:uy.arrowcolor,arrowhead:uy.arrowhead,startarrowhead:uy.startarrowhead,arrowside:uy.arrowside,arrowsize:uy.arrowsize,startarrowsize:uy.startarrowsize,arrowwidth:uy.arrowwidth,standoff:uy.standoff,startstandoff:uy.startstandoff,hovertext:uy.hovertext,hoverlabel:uy.hoverlabel,captureevents:uy.captureevents},"calc","from-root");function fy(t,e){var r=e.fullSceneLayout.domain,n=e.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},ae.extendFlat(t._xa,a),ya.setConvert(t._xa),t._xa._offset=n.l+r.x[0]*n.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*n.w*(r.x[1]-r.x[0])},t._ya={},ae.extendFlat(t._ya,a),ya.setConvert(t._ya),t._ya._offset=n.t+(1-r.y[1])*n.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*n.h*(r.y[1]-r.y[0])}}var hy=function(t,e,r,n){n("opacity");var a=n("bgcolor"),i=n("bordercolor"),o=Pe.opacity(i);n("borderpad");var l=n("borderwidth"),s=n("showarrow");if(n("text",s?" ":r._dfltTitle.annotation),n("textangle"),ae.coerceFont(n,"font",r.font),n("width"),n("align"),n("height")&&n("valign"),s){var u,c,f=n("arrowside");-1!==f.indexOf("end")&&(u=n("arrowhead"),c=n("arrowsize")),-1!==f.indexOf("start")&&(n("startarrowhead",u),n("startarrowsize",c)),n("arrowcolor",o?e.bordercolor:Pe.defaultLine),n("arrowwidth",2*(o&&l||1)),n("standoff"),n("startstandoff")}var h=n("hovertext"),d=r.hoverlabel||{};if(h){var p=n("hoverlabel.bgcolor",d.bgcolor||(Pe.opacity(a)?Pe.rgb(a):Pe.defaultLine)),g=n("hoverlabel.bordercolor",d.bordercolor||Pe.contrast(p));ae.coerceFont(n,"hoverlabel.font",{family:d.font.family,size:d.font.size,color:d.font.color||g})}n("captureevents",!!h)},dy=function(t,e,r){var n,a=r.name,i=e[a],o=ae.isArrayOrTypedArray(t[a])?t[a]:[],l=e[a]=[];for(n=0;n<o.length;n++){var s=o[n],u={},c={};ae.isPlainObject(s)||(c.itemIsNotPlainObject=!0,s={}),r.handleItemDefaults(s,u,e,r,c),u._input=s,u._index=n,l.push(u)}if(ae.isArrayOrTypedArray(i)){var f=Math.min(i.length,l.length);for(n=0;n<f;n++)ae.relinkPrivateKeys(l[n],i[n])}};function py(t,e,r,n,a){function i(r,n){return ae.coerce(t,e,cy,r,n)}function o(t){var n=t+"axis",a={_fullLayout:{}};return a._fullLayout[n]=r[n],ya.coercePosition(e,a,i,t,t,.5)}return i("visible",!a.itemIsNotPlainObject)?(hy(t,e,n.fullLayout,i),o("x"),o("y"),o("z"),ae.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",i("ax",-10),i("ay",-30),ae.noneOrAll(t,e,["ax","ay"])),e):e}var gy=function(e,r,n){var a,i,o,l,s=e.node(),u=sy[n.arrowhead||0],c=sy[n.startarrowhead||0],f=(n.arrowwidth||1)*(n.arrowsize||1),h=(n.arrowwidth||1)*(n.startarrowsize||1),d=r.indexOf("start")>=0,p=r.indexOf("end")>=0,g=u.backoff*f+n.standoff,v=c.backoff*h+n.startstandoff;if("line"===s.nodeName){a={x:+e.attr("x1"),y:+e.attr("y1")},i={x:+e.attr("x2"),y:+e.attr("y2")};var m=a.x-i.x,y=a.y-i.y;if(l=(o=Math.atan2(y,m))+Math.PI,g&&v&&g+v>Math.sqrt(m*m+y*y))return void S();if(g){if(g*g>m*m+y*y)return void S();var x=g*Math.cos(o),b=g*Math.sin(o);i.x+=x,i.y+=b,e.attr({x2:i.x,y2:i.y})}if(v){if(v*v>m*m+y*y)return void S();var _=v*Math.cos(o),w=v*Math.sin(o);a.x-=_,a.y-=w,e.attr({x1:a.x,y1:a.y})}}else if("path"===s.nodeName){var A=s.getTotalLength(),M="";if(A<g+v)return void S();var T=s.getPointAtLength(0),k=s.getPointAtLength(.1);o=Math.atan2(T.y-k.y,T.x-k.x),a=s.getPointAtLength(Math.min(v,A)),M="0px,"+v+"px,";var E=s.getPointAtLength(A),C=s.getPointAtLength(A-.1);l=Math.atan2(E.y-C.y,E.x-C.x),i=s.getPointAtLength(Math.max(0,A-g)),M+=A-(M?v+g:g)+"px,"+A+"px",e.style("stroke-dasharray",M)}function S(){e.style("stroke-dasharray","0px,100px")}function L(r,a,i,o){r.path&&(r.noRotate&&(i=0),t.select(s.parentNode).append("path").attr({class:e.attr("class"),d:r.path,transform:"translate("+a.x+","+a.y+")"+(i?"rotate("+180*i/Math.PI+")":"")+"scale("+o+")"}).style({fill:Pe.rgb(n.arrowcolor),"stroke-width":0}))}d&&L(c,a,o,h),p&&L(u,i,l,f)},vy={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var r=0;r<e.annotations.length;r++)e.annotations[r].visible&&my(t,r);return Wn.previousPromises(t)},drawOne:my,drawRaw:yy};function my(t,e){var r=t._fullLayout.annotations[e]||{};yy(t,r,e,!1,ya.getFromId(t,r.xref),ya.getFromId(t,r.yref))}function yy(e,r,n,a,i,o){var l,s,u=e._fullLayout,c=e._fullLayout._size,f=e._context.edits;a?(l="annotation-"+a,s=a+".annotations["+n+"]"):(l="annotation",s="annotations["+n+"]"),u._infolayer.selectAll("."+l+'[data-index="'+n+'"]').remove();var h="clip"+u._uid+"_ann"+n;if(r._input&&!1!==r.visible){var d={x:{},y:{}},p=+r.textangle||0,g=u._infolayer.append("g").classed(l,!0).attr("data-index",String(n)).style("opacity",r.opacity),v=g.append("g").classed("annotation-text-g",!0),m=f[r.showarrow?"annotationTail":"annotationPosition"],y=r.captureevents||f.annotationText||m,x=v.append("g").style("pointer-events",y?"all":null).call(cg,"default").on("click",function(){e._dragging=!1;var i={index:n,annotation:r._input,fullAnnotation:r,event:t.event};a&&(i.subplotId=a),e.emit("plotly_clickannotation",i)});r.hovertext&&x.on("mouseover",function(){var t=r.hoverlabel,n=t.font,a=this.getBoundingClientRect(),i=e.getBoundingClientRect();Cg.loneHover({x0:a.left-i.left,x1:a.right-i.left,y:(a.top+a.bottom)/2-i.top,text:r.hovertext,color:t.bgcolor,borderColor:t.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:e})}).on("mouseout",function(){Cg.loneUnhover(u._hoverlayer.node())});var b=r.borderwidth,_=r.borderpad,w=b+_,A=x.append("rect").attr("class","bg").style("stroke-width",b+"px").call(Pe.stroke,r.bordercolor).call(Pe.fill,r.bgcolor),M=r.width||r.height,T=u._topclips.selectAll("#"+h).data(M?[0]:[]);T.enter().append("clipPath").classed("annclip",!0).attr("id",h).append("rect"),T.exit().remove();var k=r.font,E=x.append("text").classed("annotation-text",!0).text(r.text);f.annotationText?E.call(Mr.makeEditable,{delegate:x,gd:e}).call(C).on("edit",function(t){r.text=t,this.call(C);var n={};n[s+".text"]=r.text,i&&i.autorange&&(n[i._name+".autorange"]=!0),o&&o.autorange&&(n[o._name+".autorange"]=!0),R.call("relayout",e,n)}):E.call(C)}else t.selectAll("#"+h).remove();function C(t){return t.call(Jr.font,k).attr({"text-anchor":{left:"start",right:"end"}[r.align]||"middle"}),Mr.convertToTspans(t,e,S),t}function S(){var t=E.selectAll("a");1===t.size()&&t.text()===E.text()&&x.insert("a",":first-child").attr({"xlink:xlink:href":t.attr("xlink:href"),"xlink:xlink:show":t.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(A.node());var n=x.select(".annotation-text-math-group"),l=!n.empty(),y=Jr.bBox((l?n:E).node()),_=y.width,k=y.height,C=r.width||_,S=r.height||k,L=Math.round(C+2*w),O=Math.round(S+2*w);function D(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}r._w=C,r._h=S;for(var I=!1,P=["x","y"],F=0;F<P.length;F++){var z,N,B,j,U,V=P[F],H=r[V+"ref"]||V,q=r["a"+V+"ref"],G={x:i,y:o}[V],X=(p+("x"===V?0:-90))*Math.PI/180,W=L*Math.cos(X),Y=O*Math.sin(X),Z=Math.abs(W)+Math.abs(Y),J=r[V+"anchor"],Q=r[V+"shift"]*("x"===V?1:-1),$=d[V];if(G){var K=G.r2fraction(r[V]);if((e._dragging||!G.autorange)&&(K<0||K>1)&&(q===H?((K=G.r2fraction(r["a"+V]))<0||K>1)&&(I=!0):I=!0,I))continue;z=G._offset+G.r2p(r[V]),j=.5}else"x"===V?(B=r[V],z=c.l+c.w*B):(B=1-r[V],z=c.t+c.h*B),j=r.showarrow?.5:B;if(r.showarrow){$.head=z;var tt=r["a"+V];U=W*D(.5,r.xanchor)-Y*D(.5,r.yanchor),q===H?($.tail=G._offset+G.r2p(tt),N=U):($.tail=z+tt,N=U+tt),$.text=$.tail+U;var et=u["x"===V?"width":"height"];if("paper"===H&&($.head=ae.constrain($.head,1,et-1)),"pixel"===q){var rt=-Math.max($.tail-3,$.text),nt=Math.min($.tail+3,$.text)-et;rt>0?($.tail+=rt,$.text+=rt):nt>0&&($.tail-=nt,$.text-=nt)}$.tail+=Q,$.head+=Q}else N=U=Z*D(j,J),$.text=z+U;$.text+=Q,U+=Q,N+=Q,r["_"+V+"padplus"]=Z/2+N,r["_"+V+"padminus"]=Z/2-N,r["_"+V+"size"]=Z,r["_"+V+"shift"]=U}if(I)x.remove();else{var at=0,it=0;if("left"!==r.align&&(at=(C-_)*("center"===r.align?.5:1)),"top"!==r.valign&&(it=(S-k)*("middle"===r.valign?.5:1)),l)n.select("svg").attr({x:w+at-1,y:w+it}).call(Jr.setClipUrl,M?h:null);else{var ot=w+it-y.top,lt=w+at-y.left;E.call(Mr.positionText,lt,ot).call(Jr.setClipUrl,M?h:null)}T.select("rect").call(Jr.setRect,w,w,C,S),A.call(Jr.setRect,b/2,b/2,L-b,O-b),x.call(Jr.setTranslate,Math.round(d.x.text-L/2),Math.round(d.y.text-O/2)),v.attr({transform:"rotate("+p+","+d.x.text+","+d.y.text+")"});var st,ut,ct=function(t,n){g.selectAll(".annotation-arrow-g").remove();var l=d.x.head,u=d.y.head,h=d.x.tail+t,m=d.y.tail+n,y=d.x.text+t,b=d.y.text+n,_=ae.rotationXYMatrix(p,y,b),w=ae.apply2DTransform(_),M=ae.apply2DTransform2(_),T=+A.attr("width"),k=+A.attr("height"),E=y-.5*T,C=E+T,S=b-.5*k,L=S+k,O=[[E,S,E,L],[E,L,C,L],[C,L,C,S],[C,S,E,S]].map(M);if(!O.reduce(function(t,e){return t^!!ae.segmentsIntersect(l,u,l+1e6,u+1e6,e[0],e[1],e[2],e[3])},!1)){O.forEach(function(t){var e=ae.segmentsIntersect(h,m,l,u,t[0],t[1],t[2],t[3]);e&&(h=e.x,m=e.y)});var D=r.arrowwidth,I=r.arrowcolor,P=r.arrowside,F=g.append("g").style({opacity:Pe.opacity(I)}).classed("annotation-arrow-g",!0),z=F.append("path").attr("d","M"+h+","+m+"L"+l+","+u).style("stroke-width",D+"px").call(Pe.stroke,Pe.rgb(I));if(gy(z,P,r),f.annotationPosition&&z.node().parentNode&&!a){var N=l,B=u;if(r.standoff){var j=Math.sqrt(Math.pow(l-h,2)+Math.pow(u-m,2));N+=r.standoff*(h-l)/j,B+=r.standoff*(m-u)/j}var U,V,H,q=F.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(h-N)+","+(m-B),transform:"translate("+N+","+B+")"}).style("stroke-width",D+6+"px").call(Pe.stroke,"rgba(0,0,0,0)").call(Pe.fill,"rgba(0,0,0,0)");tg.init({element:q.node(),gd:e,prepFn:function(){var t=Jr.getTranslate(x);V=t.x,H=t.y,U={},i&&i.autorange&&(U[i._name+".autorange"]=!0),o&&o.autorange&&(U[o._name+".autorange"]=!0)},moveFn:function(t,e){var n=w(V,H),a=n[0]+t,l=n[1]+e;x.call(Jr.setTranslate,a,l),U[s+".x"]=i?i.p2r(i.r2p(r.x)+t):r.x+t/c.w,U[s+".y"]=o?o.p2r(o.r2p(r.y)+e):r.y-e/c.h,r.axref===r.xref&&(U[s+".ax"]=i.p2r(i.r2p(r.ax)+t)),r.ayref===r.yref&&(U[s+".ay"]=o.p2r(o.r2p(r.ay)+e)),F.attr("transform","translate("+t+","+e+")"),v.attr({transform:"rotate("+p+","+a+","+l+")"})},doneFn:function(){R.call("relayout",e,U);var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}};if(r.showarrow&&ct(0,0),m)tg.init({element:x.node(),gd:e,prepFn:function(){ut=v.attr("transform"),st={}},moveFn:function(t,e){var n="pointer";if(r.showarrow)r.axref===r.xref?st[s+".ax"]=i.p2r(i.r2p(r.ax)+t):st[s+".ax"]=r.ax+t,r.ayref===r.yref?st[s+".ay"]=o.p2r(o.r2p(r.ay)+e):st[s+".ay"]=r.ay+e,ct(t,e);else{if(a)return;if(i)st[s+".x"]=i.p2r(i.r2p(r.x)+t);else{var l=r._xsize/c.w,u=r.x+(r._xshift-r.xshift)/c.w-l/2;st[s+".x"]=tg.align(u+t/c.w,l,0,1,r.xanchor)}if(o)st[s+".y"]=o.p2r(o.r2p(r.y)+e);else{var f=r._ysize/c.h,h=r.y-(r._yshift+r.yshift)/c.h-f/2;st[s+".y"]=tg.align(h-e/c.h,f,0,1,r.yanchor)}i&&o||(n=tg.getCursor(i?.5:st[s+".x"],o?.5:st[s+".y"],r.xanchor,r.yanchor))}v.attr({transform:"translate("+t+","+e+")"+ut}),cg(x,n)},doneFn:function(){cg(x),R.call("relayout",e,st);var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}}function xy(t,e){var r,n,a=[0,0,0,0];for(r=0;r<4;++r)for(n=0;n<4;++n)a[n]+=t[4*r+n]*e[r];return a}var by=function(t,e){return xy(t.projection,xy(t.view,xy(t.model,[e[0],e[1],e[2],1])))},_y=vy.drawRaw,wy=["x","y","z"],Ay={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:cy}}},layoutAttributes:cy,handleDefaults:function(t,e,r){dy(t,e,{name:"annotations",handleItemDefaults:py,fullLayout:r.fullLayout})},includeBasePlot:function(t,e){var r=R.subplotsRegistry.gl3d;if(!r)return;for(var n=r.attrRegex,a=Object.keys(t),i=0;i<a.length;i++){var o=a[i];n.test(o)&&(t[o].annotations||[]).length&&(ae.pushUnique(e._basePlotModules,r),ae.pushUnique(e._subplots.gl3d,o))}},convert:function(t){for(var e=t.fullSceneLayout.annotations,r=0;r<e.length;r++)fy(e[r],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()},draw:function(t){for(var e=t.fullSceneLayout,r=t.dataScale,n=e.annotations,a=0;a<n.length;a++){for(var i=n[a],o=!1,l=0;l<3;l++){var s=wy[l],u=i[s],c=e[s+"axis"].r2fraction(u);if(c<0||c>1){o=!0;break}}o?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+a+'"]').remove():(i._pdata=by(t.glplot.cameraParams,[e.xaxis.r2l(i.x)*r[0],e.yaxis.r2l(i.y)*r[1],e.zaxis.r2l(i.z)*r[2]]),_y(t.graphDiv,i,a,t.id,i._xa,i._ya))}}};var My=vy.draw;function Ty(t){var e=t._fullLayout;ae.filterVisible(e.annotations).forEach(function(e){var r,n,a,i,o=ya.getFromId(t,e.xref),l=ya.getFromId(t,e.yref),s=3*e.arrowsize*e.arrowwidth||0,u=3*e.startarrowsize*e.arrowwidth||0;o&&o.autorange&&(r=s+e.xshift,n=s-e.xshift,a=u+e.xshift,i=u-e.xshift,e.axref===e.xref?(ya.expand(o,[o.r2c(e.x)],{ppadplus:r,ppadminus:n}),ya.expand(o,[o.r2c(e.ax)],{ppadplus:Math.max(e._xpadplus,a),ppadminus:Math.max(e._xpadminus,i)})):(a=e.ax?a+e.ax:a,i=e.ax?i-e.ax:i,ya.expand(o,[o.r2c(e.x)],{ppadplus:Math.max(e._xpadplus,r,a),ppadminus:Math.max(e._xpadminus,n,i)}))),l&&l.autorange&&(r=s-e.yshift,n=s+e.yshift,a=u-e.yshift,i=u+e.yshift,e.ayref===e.yref?(ya.expand(l,[l.r2c(e.y)],{ppadplus:r,ppadminus:n}),ya.expand(l,[l.r2c(e.ay)],{ppadplus:Math.max(e._ypadplus,a),ppadminus:Math.max(e._ypadminus,i)})):(a=e.ay?a+e.ay:a,i=e.ay?i-e.ay:i,ya.expand(l,[l.r2c(e.y)],{ppadplus:Math.max(e._ypadplus,r,a),ppadminus:Math.max(e._ypadminus,n,i)})))})}var ky={hasClickToShow:function(t,e){var r=Ey(t,e);return r.on.length>0||r.explicitOff.length>0},onClick:function(t,e){var r,n=Ey(t,e),a=n.on,i=n.off.concat(n.explicitOff),o={};if(!a.length&&!i.length)return;for(r=0;r<a.length;r++)o["annotations["+a[r]+"].visible"]=!0;for(r=0;r<i.length;r++)o["annotations["+i[r]+"].visible"]=!1;return R.call("update",t,{},o)}};function Ey(t,e){var r,n,a,i,o,l,s,u=t._fullLayout.annotations,c=[],f=[],h=[],d=(e||[]).length;for(r=0;r<u.length;r++)if(i=(a=u[r]).clicktoshow){for(n=0;n<d;n++)if(l=(o=e[n]).xaxis,s=o.yaxis,l._id===a.xref&&s._id===a.yref&&l.d2r(o.x)===Cy(a._xclick,l)&&s.d2r(o.y)===Cy(a._yclick,s)){(a.visible?"onout"===i?f:h:c).push(r);break}n===d&&a.visible&&"onout"===i&&f.push(r)}return{on:c,off:f,explicitOff:h}}function Cy(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}var Sy=function(t,e,r,n,a){function i(r,n){return ae.coerce(t,e,uy,r,n)}n=n||{};var o=i("visible",!(a=a||{}).itemIsNotPlainObject),l=i("clicktoshow");if(!o&&!l)return e;hy(t,e,r,i);for(var s=e.showarrow,u=["x","y"],c=[-10,-30],f={_fullLayout:r},h=0;h<2;h++){var d=u[h],p=ya.coerceRef(t,e,f,d,"","paper");if(ya.coercePosition(e,f,i,p,d,.5),s){var g="a"+d,v=ya.coerceRef(t,e,f,g,"pixel");"pixel"!==v&&v!==p&&(v=e[g]="pixel");var m="pixel"===v?c[h]:.4;ya.coercePosition(e,f,i,v,g,m)}i(d+"anchor"),i(d+"shift")}if(ae.noneOrAll(t,e,["x","y"]),s&&ae.noneOrAll(t,e,["ax","ay"]),l){var y=i("xclick"),x=i("yclick");e._xclick=void 0===y?e.x:ya.cleanPosition(y,f,e.xref),e._yclick=void 0===x?e.y:ya.cleanPosition(x,f,e.yref)}return e},Ly=function(t){return function(e,r){var n=e[t];if(Array.isArray(n))for(var a=R.subplotsRegistry.cartesian,i=a.idRegex,o=r._subplots,l=o.xaxis,s=o.yaxis,u=o.cartesian,c=r._has("cartesian")||r._has("gl2d"),f=0;f<n.length;f++){var h=n[f];if(ae.isPlainObject(h)){var d=h.xref,p=h.yref,g=i.x.test(d),v=i.y.test(p);if(g||v){c||ae.pushUnique(r._basePlotModules,a);var m=!1;g&&-1===l.indexOf(d)&&(l.push(d),m=!0),v&&-1===s.indexOf(p)&&(s.push(p),m=!0),m&&g&&v&&u.push(d+p)}}}}},Oy={moduleType:"component",name:"annotations",layoutAttributes:uy,supplyLayoutDefaults:function(t,e){dy(t,e,{name:"annotations",handleItemDefaults:Sy})},includeBasePlot:Ly("annotations"),calcAutorange:function(t){var e=t._fullLayout,r=ae.filterVisible(e.annotations);if(r.length&&t._fullData.length){var n={};for(var a in r.forEach(function(t){n[t.xref]=1,n[t.yref]=1}),n){var i=ya.getFromId(t,a);if(i&&i.autorange)return ae.syncOrAsync([My,Ty],t)}}},draw:vy.draw,drawOne:vy.drawOne,drawRaw:vy.drawRaw,hasClickToShow:ky.hasClickToShow,onClick:ky.onClick,convertCoords:function(t,r,n,a){r=r||{};var i="log"===n&&"linear"===r.type,o="linear"===n&&"log"===r.type;if(i||o)for(var l,s,u=t._fullLayout.annotations,c=r._id.charAt(0),f=0;f<u.length;f++)l=u[f],s="annotations["+f+"].",l[c+"ref"]===r._id&&h(c),l["a"+c+"ref"]===r._id&&h("a"+c);function h(t){var n=l[t],o=null;o=i?ne(n,r.range):Math.pow(10,n),e(o)||(o=null),a(s+t,o)}}},Ry={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}},Dy=function(t){var e=t.type,r=t.symmetric;if("data"===e){var n=t.array||[];if(r)return function(t,e){var r=+n[e];return[r,r]};var a=t.arrayminus||[];return function(t,e){var r=+n[e],i=+a[e];return isNaN(r)&&isNaN(i)?[NaN,NaN]:[i||0,r||0]}}var i=Iy(e,t.value),o=Iy(e,t.valueminus);return r||void 0===t.valueminus?function(t){var e=i(t);return[e,e]}:function(t){return[o(t),i(t)]}};function Iy(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}var Py=function(t){for(var e=t.calcdata,r=0;r<e.length;r++){var n=e[r],a=n[0].trace;if(R.traceIs(a,"errorBarsOK")){var i=ya.getFromId(t,a.xaxis),o=ya.getFromId(t,a.yaxis);Fy(n,a,i,"x"),Fy(n,a,o,"y")}}};function Fy(t,r,n,a){var i=r["error_"+a]||{},o=[];if(i.visible&&-1!==["linear","log"].indexOf(n.type)){for(var l=Dy(i),s=0;s<t.length;s++){var u=t[s],c=u[a];if(e(n.c2l(c))){var f=l(c,s);if(e(f[0])&&e(f[1])){var h=u[a+"s"]=c-f[0],d=u[a+"h"]=c+f[1];o.push(h,d)}}}ya.expand(n,o,{padded:!0})}}var zy=xe.overrideAll,Ny={error_x:ae.extendFlat({},Ry),error_y:ae.extendFlat({},Ry)};delete Ny.error_x.copy_zstyle,delete Ny.error_y.copy_zstyle,delete Ny.error_y.copy_ystyle;var By={error_x:ae.extendFlat({},Ry),error_y:ae.extendFlat({},Ry),error_z:ae.extendFlat({},Ry)};delete By.error_x.copy_ystyle,delete By.error_y.copy_ystyle,delete By.error_z.copy_ystyle,delete By.error_z.copy_zstyle;var jy={moduleType:"component",name:"errorbars",schema:{traces:{scatter:Ny,bar:Ny,histogram:Ny,scatter3d:zy(By,"calc","nested"),scattergl:zy(Ny,"calc","nested")}},supplyDefaults:function(t,r,n,a){var i="error_"+a.axis,o=r[i]={},l=t[i]||{};function s(t,e){return ae.coerce(l,o,Ry,t,e)}if(!1!==s("visible",void 0!==l.array||void 0!==l.value||"sqrt"===l.type)){var u=s("type","array"in l?"data":"percent"),c=!0;"sqrt"!==u&&(c=s("symmetric",!(("data"===u?"arrayminus":"valueminus")in l))),"data"===u?(s("array"),s("traceref"),c||(s("arrayminus"),s("tracerefminus"))):"percent"!==u&&"constant"!==u||(s("value"),c||s("valueminus"));var f="copy_"+a.inherit+"style";a.inherit&&(r["error_"+a.inherit]||{}).visible&&s(f,!(l.color||e(l.thickness)||e(l.width))),a.inherit&&o[f]||(s("color",n),s("thickness"),s("width",R.traceIs(r,"gl3d")?0:4))}},calc:Py,calcFromTrace:function(t,e){for(var r=t.x||[],n=t.y||[],a=r.length||n.length,i=new Array(a),o=0;o<a;o++)i[o]={x:r[o],y:n[o]};return i[0].trace=t,Py({calcdata:[i],_fullLayout:e}),i},plot:function(r,n,a){var i=n.xaxis,o=n.yaxis,l=a&&a.duration>0;r.each(function(r){var s,u=r[0].trace,c=u.error_x||{},f=u.error_y||{};u.ids&&(s=function(t){return t.id});var h=Zr.hasMarkers(u)&&u.marker.maxdisplayed>0;f.visible||c.visible||(r=[]);var d=t.select(this).selectAll("g.errorbar").data(r,s);if(d.exit().remove(),r.length){c.visible||d.selectAll("path.xerror").remove(),f.visible||d.selectAll("path.yerror").remove(),d.style("opacity",1);var p=d.enter().append("g").classed("errorbar",!0);l&&p.style("opacity",0).transition().duration(a.duration).style("opacity",1),Jr.setClipUrl(d,n.layerClipId),d.each(function(r){var n=t.select(this),s=function(t,r,n){var a={x:r.c2p(t.x),y:n.c2p(t.y)};return void 0!==t.yh&&(a.yh=n.c2p(t.yh),a.ys=n.c2p(t.ys),e(a.ys)||(a.noYS=!0,a.ys=n.c2p(t.ys,!0))),void 0!==t.xh&&(a.xh=r.c2p(t.xh),a.xs=r.c2p(t.xs),e(a.xs)||(a.noXS=!0,a.xs=r.c2p(t.xs,!0))),a}(r,i,o);if(!h||r.vis){var u,d=n.select("path.yerror");if(f.visible&&e(s.x)&&e(s.yh)&&e(s.ys)){var p=f.width;u="M"+(s.x-p)+","+s.yh+"h"+2*p+"m-"+p+",0V"+s.ys,s.noYS||(u+="m-"+p+",0h"+2*p),d.size()?l&&(d=d.transition().duration(a.duration).ease(a.easing)):d=n.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),d.attr("d",u)}else d.remove();var g=n.select("path.xerror");if(c.visible&&e(s.y)&&e(s.xh)&&e(s.xs)){var v=(c.copy_ystyle?f:c).width;u="M"+s.xh+","+(s.y-v)+"v"+2*v+"m0,-"+v+"H"+s.xs,s.noXS||(u+="m0,-"+v+"v"+2*v),g.size()?l&&(g=g.transition().duration(a.duration).ease(a.easing)):g=n.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),g.attr("d",u)}else g.remove()}})}})},style:function(e){e.each(function(e){var r=e[0].trace,n=r.error_y||{},a=r.error_x||{},i=t.select(this);i.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(Pe.stroke,n.color),a.copy_ystyle&&(a=n),i.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(Pe.stroke,a.color)})},hoverInfo:function(t,e,r){(e.error_y||{}).visible&&(r.yerr=t.yh-t.y,e.error_y.symmetric||(r.yerrneg=t.y-t.ys));(e.error_x||{}).visible&&(r.xerr=t.xh-t.x,e.error_x.symmetric||(r.xerrneg=t.x-t.xs))}};var Uy={},Vy=m.extendFlat;Uy.attributes=function(t,e){t=t||{},e=e||{};var r={valType:"info_array",editType:t.editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},n=(t.name&&t.name,t.trace,e.description&&e.description,{x:Vy({},r,{}),y:Vy({},r,{}),editType:t.editType});return t.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:t.editType},n.column={valType:"integer",min:0,dflt:0,editType:t.editType}),n},Uy.defaults=function(t,e,r,n){var a=n&&n.x||[0,1],i=n&&n.y||[0,1],o=e.grid;if(o){var l=r("domain.column");void 0!==l&&(l<o.columns?a=o._domains.x[l]:delete t.domain.column);var s=r("domain.row");void 0!==s&&(s<o.rows?i=o._domains.y[s]:delete t.domain.row)}r("domain.x",a),r("domain.y",i)};var Hy=et.counter,qy=Uy.attributes,Gy=Se.idRegex,Xy={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[Hy("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[Gy.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[Gy.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:qy({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"ticks"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"ticks"},editType:"plot"};function Wy(t,e,r,n,a){var i=e(t+"gap",r),o=e("domain."+t);e(t+"side");for(var l=new Array(n),s=o[0],u=(o[1]-s)/(n-i),c=u*(1-i),f=0;f<n;f++){var h=s+u*f;l[a?n-1-f:f]=[h,h+c]}return l}function Yy(t,e,r,n,a){var i,o=new Array(r);function l(t,r){-1!==e.indexOf(r)&&void 0===n[r]?(o[t]=r,n[r]=t):o[t]=""}if(Array.isArray(t))for(i=0;i<r;i++)l(i,t[i]);else for(l(0,a),i=1;i<r;i++)l(i,a+(i+1));return o}var Zy={moduleType:"component",name:"grid",schema:{layout:{grid:Xy}},layoutAttributes:Xy,sizeDefaults:function(t,e){var r=t.grid;if(r){var n,a,i=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),o=Array.isArray(r.xaxes),l=Array.isArray(r.yaxes);i?(n=r.subplots.length,a=r.subplots[0].length):(l&&(n=r.yaxes.length),o&&(a=r.xaxes.length));var s=e.grid={},u=h("rows",n),c=h("columns",a);if(u*c>1){i||o||l||"independent"===h("pattern")&&(i=!0),s._hasSubplotGrid=i;var f="top to bottom"===h("roworder");s._domains={x:Wy("x",h,i?.2:.1,c),y:Wy("y",h,i?.3:.1,u,f)}}}function h(t,e){return ae.coerce(r,s,Xy,t,e)}},contentDefaults:function(t,e){var r=e.grid;if(r&&r._domains){var n,a,i,o,l,s,u,c=t.grid,f=e._subplots,h=r._hasSubplotGrid,d=r.rows,p=r.columns,g="independent"===r.pattern,v=r._axisMap={};if(h){var m=c.subplots||[];s=r.subplots=new Array(d);var y=1;for(n=0;n<d;n++){var x=s[n]=new Array(p),b=m[n]||[];for(a=0;a<p;a++)if(g?(l=1===y?"xy":"x"+y+"y"+y,y++):l=b[a],x[a]="",-1!==f.cartesian.indexOf(l)){if(u=l.indexOf("y"),i=l.slice(0,u),o=l.slice(u),void 0!==v[i]&&v[i]!==a||void 0!==v[o]&&v[o]!==n)continue;x[a]=l,v[i]=a,v[o]=n}}}else r.xaxes=Yy(c.xaxes,f.xaxis,p,v,"x"),r.yaxes=Yy(c.yaxes,f.yaxis,d,v,"y");var _=r._anchors={},w="top to bottom"===r.roworder;for(var A in v){var M,T,k,E=A.charAt(0),C=r[E+"side"];if(C.length<8)_[A]="free";else if("x"===E){if("t"===C.charAt(0)===w?(M=0,T=1,k=d):(M=d-1,T=-1,k=-1),h){var S=v[A];for(n=M;n!==k;n+=T)if((l=s[n][S])&&(u=l.indexOf("y"),l.slice(0,u)===A)){_[A]=l.slice(u);break}}else for(n=M;n!==k;n+=T)if(o=r.yaxes[n],-1!==f.cartesian.indexOf(A+o)){_[A]=o;break}}else if("l"===C.charAt(0)?(M=0,T=1,k=p):(M=p-1,T=-1,k=-1),h){var L=v[A];for(n=M;n!==k;n+=T)if((l=s[L][n])&&(u=l.indexOf("y"),l.slice(u)===A)){_[A]=l.slice(0,u);break}}else for(n=M;n!==k;n+=T)if(i=r.xaxes[n],-1!==f.cartesian.indexOf(i+A)){_[A]=i;break}}}}},Jy={_isLinkedToArray:"image",visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",Se.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",Se.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"};function Qy(t,e,r){function n(r,n){return ae.coerce(t,e,Jy,r,n)}if(!n("visible",!!n("source")))return e;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var a={_fullLayout:r},i=["x","y"],o=0;o<2;o++){var l=i[o],s=ya.coerceRef(t,e,a,l,"paper");ya.coercePosition(e,a,n,s,l,0)}return e}var $y={moduleType:"component",name:"images",layoutAttributes:Jy,supplyLayoutDefaults:function(t,e){dy(t,e,{name:"images",handleItemDefaults:Qy})},includeBasePlot:Ly("images"),draw:function(e){var r,n,a=e._fullLayout,i=[],o={},l=[];for(n=0;n<a.images.length;n++){var s=a.images[n];if(s.visible)if("below"===s.layer&&"paper"!==s.xref&&"paper"!==s.yref){r=s.xref+s.yref;var u=a._plots[r];if(!u){l.push(s);continue}u.mainplot&&(r=u.mainplot.id),o[r]||(o[r]=[]),o[r].push(s)}else"above"===s.layer?i.push(s):l.push(s)}var c={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function f(r){var n=t.select(this);if(!this.img||this.img.src!==r.source){n.attr("xmlns",ke.svg);var a=new Promise(function(t){var e=new Image;function a(){n.remove(),t()}this.img=e,e.setAttribute("crossOrigin","anonymous"),e.onerror=a,e.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var r=e.toDataURL("image/png");n.attr("xlink:href",r),t()},n.on("error",a),e.src=r.source}.bind(this));e._promises.push(a)}}function h(r){var n=t.select(this),i=ya.getFromId(e,r.xref),o=ya.getFromId(e,r.yref),l=a._size,s=i?Math.abs(i.l2p(r.sizex)-i.l2p(0)):r.sizex*l.w,u=o?Math.abs(o.l2p(r.sizey)-o.l2p(0)):r.sizey*l.h,f=s*c.x[r.xanchor].offset,h=u*c.y[r.yanchor].offset,d=c.x[r.xanchor].sizing+c.y[r.yanchor].sizing,p=(i?i.r2p(r.x)+i._offset:r.x*l.w+l.l)+f,g=(o?o.r2p(r.y)+o._offset:l.h-r.y*l.h+l.t)+h;switch(r.sizing){case"fill":d+=" slice";break;case"stretch":d="none"}n.attr({x:p,y:g,width:s,height:u,preserveAspectRatio:d,opacity:r.opacity});var v=(i?i._id:"")+(o?o._id:"");n.call(Jr.setClipUrl,v?"clip"+a._uid+v:null)}var d=a._imageLowerLayer.selectAll("image").data(l),p=a._imageUpperLayer.selectAll("image").data(i);d.enter().append("image"),p.enter().append("image"),d.exit().remove(),p.exit().remove(),d.each(function(t){f.bind(this)(t),h.bind(this)(t)}),p.each(function(t){f.bind(this)(t),h.bind(this)(t)});var g=Object.keys(a._plots);for(n=0;n<g.length;n++){r=g[n];var v=a._plots[r];if(v.imagelayer){var m=v.imagelayer.selectAll("image").data(o[r]||[]);m.enter().append("image"),m.exit().remove(),m.each(function(t){f.bind(this)(t),h.bind(this)(t)})}}},convertCoords:function(t,r,n,a){r=r||{};var i="log"===n&&"linear"===r.type,o="linear"===n&&"log"===r.type;if(i||o)for(var l,s,u=t._fullLayout.images,c=r._id.charAt(0),f=0;f<u.length;f++)if(s="images["+f+"].",(l=u[f])[c+"ref"]===r._id){var h=l[c],d=l["size"+c],p=null,g=null;if(i){p=ne(h,r.range);var v=d/Math.pow(10,p)/2;g=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else g=(p=Math.pow(10,h))*(Math.pow(10,d/2)-Math.pow(10,-d/2));e(p)?e(g)||(g=null):(p=null,g=null),a(s+c,p),a(s+"size"+c,g)}}},Ky={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:S.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:k({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"},tx={legendGetsTrace:function(t){return t.visible&&void 0!==t.showlegend},isGrouped:function(t){return-1!==(t.traceorder||"").indexOf("grouped")},isVertical:function(t){return"h"!==t.orientation},isReversed:function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},ex={isRightAnchor:function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},isCenterAnchor:function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},isBottomAnchor:function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3},isMiddleAnchor:function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3}},rx={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4},nx=!0,ax=function(t,e,r){if(!e._dragged&&!e._editing){var n,a,i,o,l,s=e._fullLayout.hiddenlabels?e._fullLayout.hiddenlabels.slice():[],u=t.data()[0][0],c=e._fullData,f=u.trace,h=f.legendgroup,d={},p=[],g=[],v=[];if(1===r&&nx&&e.data&&e._context.showTips?(ae.notifier(ae._(e,"Double-click on legend to isolate one trace"),"long"),nx=!1):nx=!1,R.traceIs(f,"pie")){var m=u.label,y=s.indexOf(m);1===r?-1===y?s.push(m):s.splice(y,1):2===r&&(s=[],e.calcdata[0].forEach(function(t){m!==t.label&&s.push(t.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===s.length&&-1===y&&(s=[])),R.call("relayout",e,"hiddenlabels",s)}else{var x,b=h&&h.length,_=[];if(b)for(n=0;n<c.length;n++)(x=c[n]).visible&&x.legendgroup===h&&_.push(n);if(1===r){var w;switch(f.visible){case!0:w="legendonly";break;case!1:w=!1;break;case"legendonly":w=!0}if(b)for(n=0;n<c.length;n++)!1!==c[n].visible&&c[n].legendgroup===h&&S(c[n],w);else S(f,w)}else if(2===r){var A,M,T=!0;for(n=0;n<c.length;n++)if(!(c[n]===f)&&!(A=b&&c[n].legendgroup===h)&&!0===c[n].visible&&!R.traceIs(c[n],"notLegendIsolatable")){T=!1;break}for(n=0;n<c.length;n++)if(!1!==c[n].visible&&!R.traceIs(c[n],"notLegendIsolatable"))switch(f.visible){case"legendonly":S(c[n],!0);break;case!0:M=!!T||"legendonly",A=c[n]===f||b&&c[n].legendgroup===h,S(c[n],!!A||M)}}for(n=0;n<g.length;n++)if(i=g[n]){var k=i.constructUpdate(),E=Object.keys(k);for(a=0;a<E.length;a++)o=E[a],(d[o]=d[o]||[])[v[n]]=k[o]}for(l=Object.keys(d),n=0;n<l.length;n++)for(o=l[n],a=0;a<p.length;a++)d[o].hasOwnProperty(a)||(d[o][a]=void 0);R.call("restyle",e,d,p)}}function C(t,e,r){var n=p.indexOf(t),a=d[e];return a||(a=d[e]=[]),-1===p.indexOf(t)&&(p.push(t),n=p.length-1),a[n]=r,n}function S(t,e){var r=t._fullInput;if(R.hasTransform(r,"groupby")){var n=g[r.index];if(!n){var a=R.getTransformIndices(r,"groupby"),i=a[a.length-1];n=ae.keyedContainer(r,"transforms["+i+"].styles","target","value.visible"),g[r.index]=n}var o=n.get(t._group);void 0===o&&(o=!0),!1!==o&&n.set(t._group,e),v[r.index]=C(r.index,"visible",!1!==r.visible)}else{var l=!1!==r.visible&&e;C(r.index,"visible",l)}}},ix={formatPiePercent:function(t,e){var r=(100*t).toPrecision(3);return-1!==r.lastIndexOf(".")&&(r=r.replace(/[.]?0+$/,"")),ae.numSeparate(r,e)+"%"},formatPieValue:function(t,e){var r=t.toPrecision(10);return-1!==r.lastIndexOf(".")&&(r=r.replace(/[.]?0+$/,"")),ae.numSeparate(r,e)},getFirstFilled:function(t,e){if(Array.isArray(t))for(var r=0;r<e.length;r++){var n=t[e[r]];if(n||0===n)return n}},castOption:function(t,e){return Array.isArray(t)?ix.getFirstFilled(t,e):t||void 0}},ox=ix.castOption,lx=function(t,e,r){var n=r.marker.line,a=ox(n.color,e.pts)||Pe.defaultLine,i=ox(n.width,e.pts)||0;t.style({"stroke-width":i}).call(Pe.fill,e.color).call(Pe.stroke,a)},sx=function(e,r){e.each(function(e){var r=t.select(this).selectAll("g.layers").data([0]);r.enter().append("g").classed("layers",!0),r.style("opacity",e[0].trace.opacity),r.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),r.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);var n=r.selectAll("g.legendsymbols").data([e]);n.enter().append("g").classed("legendsymbols",!0),n.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(function(e){var r=e[0].trace,n=r.marker||{},a=n.line||{},i=t.select(this).select("g.legendpoints").selectAll("path.legendbar").data(R.traceIs(r,"bar")?[e]:[]);i.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),i.exit().remove(),i.each(function(e){var r=t.select(this),i=e[0],o=(i.mlw+1||a.width+1)-1;r.style("stroke-width",o+"px").call(Pe.fill,i.mc||n.color),o&&r.call(Pe.stroke,i.mlc||a.color)})}).each(function(e){var r=e[0].trace,n=t.select(this).select("g.legendpoints").selectAll("path.legendbox").data(R.traceIs(r,"box-violin")&&r.visible?[e]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(){var e=r.line.width,n=t.select(this);n.style("stroke-width",e+"px").call(Pe.fill,r.fillcolor),e&&n.call(Pe.stroke,r.line.color)})}).each(function(e){var r=e[0].trace,n=t.select(this).select("g.legendpoints").selectAll("path.legendpie").data(R.traceIs(r,"pie")&&r.visible?[e]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(lx,e[0],r)}).each(function(e){var r=e[0].trace,n=r.visible&&r.fill&&"none"!==r.fill,a=Zr.hasLines(r),i=r.contours;i&&"constraint"===i.type&&(a=i.showlines,n="="!==i._operation);var o=t.select(this).select(".legendfill").selectAll("path").data(n?[e]:[]);o.enter().append("path").classed("js-fill",!0),o.exit().remove(),o.attr("d","M5,0h30v6h-30z").call(Jr.fillGroupStyle);var l=t.select(this).select(".legendlines").selectAll("path").data(a?[e]:[]);l.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),l.exit().remove(),l.call(Jr.lineGroupStyle)}).each(function(e){var n,a,i=e[0],o=i.trace,l=Zr.hasMarkers(o),s=Zr.hasText(o),u=Zr.hasLines(o);function c(t,e,r){var n=ae.nestedProperty(o,t).get(),a=Array.isArray(n)&&e?e(n):n;if(r){if(a<r[0])return r[0];if(a>r[1])return r[1]}return a}function f(t){return t[0]}if(l||s||u){var h={},d={};l&&(h.mc=c("marker.color",f),h.mo=c("marker.opacity",ae.mean,[.2,1]),h.ms=c("marker.size",ae.mean,[2,16]),h.mlc=c("marker.line.color",f),h.mlw=c("marker.line.width",ae.mean,[0,5]),d.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),u&&(d.line={width:c("line.width",f,[0,10])}),s&&(h.tx="Aa",h.tp=c("textposition",f),h.ts=10,h.tc=c("textfont.color",f),h.tf=c("textfont.family",f)),n=[ae.minExtend(i,h)],a=ae.minExtend(o,d)}var p=t.select(this).select("g.legendpoints"),g=p.selectAll("path.scatterpts").data(l?n:[]);g.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),g.exit().remove(),g.call(Jr.pointStyle,a,r),l&&(n[0].mrc=3);var v=p.selectAll("g.pointtext").data(s?n:[]);v.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),v.exit().remove(),v.selectAll("text").call(Jr.textPointStyle,a,r)})},ux=wr.LINE_SPACING,cx=wr.FROM_TL,hx=wr.FROM_BR,dx=h.DBLCLICKDELAY;function px(t,e){var r=t.data()[0][0],n=e._fullLayout,a=r.trace,i=R.traceIs(a,"pie"),o=a.index,l=i?r.label:a.name,s=t.selectAll("text.legendtext").data([0]);function u(r){Mr.convertToTspans(r,e,function(){!function(t,e){var r=t.data()[0][0];if(!r.trace.showlegend)return void t.remove();var n,a,i=t.select("g[class*=math-group]"),o=i.node(),l=e._fullLayout.legend.font.size*ux;if(o){var s=Jr.bBox(o);n=s.height,a=s.width,Jr.setTranslate(i,0,n/4)}else{var u=t.select(".legendtext"),c=Mr.lineCount(u),f=u.node();n=l*c,a=f?Jr.bBox(f).width:0;var h=l*(.3+(1-c)/2);Mr.positionText(u,40,h)}n=Math.max(n,16)+3,r.height=n,r.width=a}(t,e)})}s.enter().append("text").classed("legendtext",!0),s.attr("text-anchor","start").classed("user-select-none",!0).call(Jr.font,n.legend.font).text(l),e._context.edits.legendText&&!i?s.call(Mr.makeEditable,{gd:e}).call(u).on("edit",function(t){this.text(t).call(u);var n,a=t;this.text()||(t="    ");var i=r.trace._fullInput||{},l={};if(-1!==["ohlc","candlestick"].indexOf(i.type))l[(n=r.trace.transforms)[n.length-1].direction+".name"]=t;else if(R.hasTransform(i,"groupby")){var s=R.getTransformIndices(i,"groupby"),c=s[s.length-1],f=ae.keyedContainer(i,"transforms["+c+"].styles","target","value.name");""===a?f.remove(r.trace._group):f.set(r.trace._group,t),l=f.constructUpdate()}else l.name=t;return R.call("restyle",e,l,o)}):u(s)}function gx(t,e){var r,n=1,a=t.selectAll("rect").data([0]);a.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(Pe.fill,"rgba(0,0,0,0)"),a.on("mousedown",function(){(r=(new Date).getTime())-e._legendMouseDownTime<dx?n+=1:(n=1,e._legendMouseDownTime=r)}),a.on("mouseup",function(){if(!e._dragged&&!e._editing){var r=e._fullLayout.legend;(new Date).getTime()-e._legendMouseDownTime>dx&&(n=Math.max(n-1,1)),1===n?r._clickTimeout=setTimeout(function(){ax(t,e,n)},dx):2===n&&(r._clickTimeout&&clearTimeout(r._clickTimeout),e._legendMouseDownTime=0,ax(t,e,n))}})}function vx(e,r,n){var a=e._fullLayout,i=a.legend,o=i.borderwidth,l=tx.isGrouped(i),s=0;if(i._width=0,i._height=0,tx.isVertical(i))l&&r.each(function(t,e){Jr.setTranslate(this,0,e*i.tracegroupgap)}),n.each(function(t){var e=t[0],r=e.height,n=e.width;Jr.setTranslate(this,o,5+o+i._height+r/2),i._height+=r,i._width=Math.max(i._width,n)}),i._width+=45+2*o,i._height+=10+2*o,l&&(i._height+=(i._lgroupsLength-1)*i.tracegroupgap),s=40;else if(l){for(var u=[i._width],c=r.data(),f=0,h=c.length;f<h;f++){var d=c[f].map(function(t){return t[0].width}),p=40+Math.max.apply(null,d);i._width+=i.tracegroupgap+p,u.push(i._width)}r.each(function(t,e){Jr.setTranslate(this,u[e],0)}),r.each(function(){var e=0;t.select(this).selectAll("g.traces").each(function(t){var r=t[0].height;Jr.setTranslate(this,0,5+o+e+r/2),e+=r}),i._height=Math.max(i._height,e)}),i._height+=10+2*o,i._width+=2*o}else{var g,v=0,m=0,y=0,x=0,b=0,_=i.tracegroupgap||5;n.each(function(t){y=Math.max(40+t[0].width,y),b+=40+t[0].width+_}),g=a.width-(a.margin.r+a.margin.l)>o+b-_,n.each(function(t){var e=t[0],r=g?40+t[0].width:y;o+x+_+r>a.width-(a.margin.r+a.margin.l)&&(x=0,v+=m,i._height=i._height+m,m=0),Jr.setTranslate(this,o+x,5+o+e.height/2+v),i._width+=_+r,i._height=Math.max(i._height,e.height),x+=_+r,m=Math.max(e.height,m)}),i._width+=2*o,i._height+=10+2*o}i._width=Math.ceil(i._width),i._height=Math.ceil(i._height),n.each(function(r){var n=r[0],a=t.select(this).select(".legendtoggle");Jr.setRect(a,0,-n.height/2,(e._context.edits.legendText?0:i._width)+s,n.height)})}function mx(t){var e=t._fullLayout.legend,r="left";ex.isRightAnchor(e)?r="right":ex.isCenterAnchor(e)&&(r="center");var n="top";ex.isBottomAnchor(e)?n="bottom":ex.isMiddleAnchor(e)&&(n="middle"),Wn.autoMargin(t,"legend",{x:e.x,y:e.y,l:e._width*cx[r],r:e._width*hx[r],b:e._height*hx[n],t:e._height*cx[n]})}var yx={moduleType:"component",name:"legend",layoutAttributes:Ky,supplyLayoutDefaults:function(t,e,r){for(var n,a,i,o,l=t.legend||{},s={},u=0,c="normal",f=0;f<r.length;f++){var h=r[f];tx.legendGetsTrace(h)&&(u++,R.traceIs(h,"pie")&&u++),(R.traceIs(h,"bar")&&"stack"===e.barmode||-1!==["tonextx","tonexty"].indexOf(h.fill))&&(c=tx.isGrouped({traceorder:c})?"grouped+reversed":"reversed"),void 0!==h.legendgroup&&""!==h.legendgroup&&(c=tx.isReversed({traceorder:c})?"reversed+grouped":"grouped")}function d(t,e){return ae.coerce(l,s,Ky,t,e)}if(!1!==ae.coerce(t,e,O,"showlegend",u>1)){if(e.legend=s,d("bgcolor",e.paper_bgcolor),d("bordercolor"),d("borderwidth"),ae.coerceFont(d,"font",e.font),d("orientation"),"h"===s.orientation){var p=t.xaxis;p&&p.rangeslider&&p.rangeslider.visible?(n=0,i="left",a=1.1,o="bottom"):(n=0,i="left",a=-.1,o="top")}d("traceorder",c),tx.isGrouped(e.legend)&&d("tracegroupgap"),d("x",n),d("xanchor",i),d("y",a),d("yanchor",o),ae.noneOrAll(l,s,["x","y"])}},draw:function(e){var r=e._fullLayout,n="legend"+r._uid;if(r._infolayer&&e.calcdata){e._legendMouseDownTime||(e._legendMouseDownTime=0);var a=r.legend,i=r.showlegend&&function(t,e){var r,n,a={},i=[],o=!1,l={},s=0;function u(t,r){if(""!==t&&tx.isGrouped(e))-1===i.indexOf(t)?(i.push(t),o=!0,a[t]=[[r]]):a[t].push([r]);else{var n="~~i"+s;i.push(n),a[n]=[[r]],s++}}for(r=0;r<t.length;r++){var c=t[r],f=c[0],h=f.trace,d=h.legendgroup;if(tx.legendGetsTrace(h)&&h.showlegend)if(R.traceIs(h,"pie"))for(l[d]||(l[d]={}),n=0;n<c.length;n++){var p=c[n].label;l[d][p]||(u(d,{label:p,color:c[n].color,i:c[n].i,trace:h}),l[d][p]=!0)}else u(d,f)}if(!i.length)return[];var g,v,m=i.length;if(o&&tx.isGrouped(e))for(v=new Array(m),r=0;r<m;r++)g=a[i[r]],v[r]=tx.isReversed(e)?g.reverse():g;else{for(v=[new Array(m)],r=0;r<m;r++)g=a[i[r]][0],v[0][tx.isReversed(e)?m-r-1:r]=g;m=1}return e._lgroupsLength=m,v}(e.calcdata,a),o=r.hiddenlabels||[];if(!r.showlegend||!i.length)return r._infolayer.selectAll(".legend").remove(),r._topdefs.select("#"+n).remove(),void Wn.autoMargin(e,"legend");var l=r._infolayer.selectAll("g.legend").data([0]);l.enter().append("g").attr({class:"legend","pointer-events":"all"});var s=r._topdefs.selectAll("#"+n).data([0]);s.enter().append("clipPath").attr("id",n).append("rect");var u=l.selectAll("rect.bg").data([0]);u.enter().append("rect").attr({class:"bg","shape-rendering":"crispEdges"}),u.call(Pe.stroke,a.bordercolor).call(Pe.fill,a.bgcolor).style("stroke-width",a.borderwidth+"px");var c=l.selectAll("g.scrollbox").data([0]);c.enter().append("g").attr("class","scrollbox");var f=l.selectAll("rect.scrollbar").data([0]);f.enter().append("rect").attr({class:"scrollbar",rx:20,ry:3,width:0,height:0}).call(Pe.fill,"#808BA4");var h=c.selectAll("g.groups").data(i);h.enter().append("g").attr("class","groups"),h.exit().remove();var d=h.selectAll("g.traces").data(ae.identity);d.enter().append("g").attr("class","traces"),d.exit().remove(),d.call(sx,e).style("opacity",function(t){var e=t[0].trace;return R.traceIs(e,"pie")?-1!==o.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1}).each(function(){t.select(this).call(px,e).call(gx,e)}),0!==l.enter().size()&&(vx(e,h,d),mx(e));var p=r.width,g=r.height;vx(e,h,d),a._height>g?function(t){var e=t._fullLayout.legend,r="left";ex.isRightAnchor(e)?r="right":ex.isCenterAnchor(e)&&(r="center"),Wn.autoMargin(t,"legend",{x:e.x,y:.5,l:e._width*cx[r],r:e._width*hx[r],b:0,t:0})}(e):mx(e);var v=r._size,m=v.l+v.w*a.x,y=v.t+v.h*(1-a.y);ex.isRightAnchor(a)?m-=a._width:ex.isCenterAnchor(a)&&(m-=a._width/2),ex.isBottomAnchor(a)?y-=a._height:ex.isMiddleAnchor(a)&&(y-=a._height/2);var x=a._width,b=v.w;x>b?(m=v.l,x=b):(m+x>p&&(m=p-x),m<0&&(m=0),x=Math.min(p-m,a._width));var _,w,A,M,T=a._height,k=v.h;if(T>k?(y=v.t,T=k):(y+T>g&&(y=g-T),y<0&&(y=0),T=Math.min(g-y,a._height)),Jr.setTranslate(l,m,y),f.on(".drag",null),l.on("wheel",null),a._height<=T||e._context.staticPlot)u.attr({width:x-a.borderwidth,height:T-a.borderwidth,x:a.borderwidth/2,y:a.borderwidth/2}),Jr.setTranslate(c,0,0),s.select("rect").attr({width:x-2*a.borderwidth,height:T-2*a.borderwidth,x:a.borderwidth,y:a.borderwidth}),Jr.setClipUrl(c,n),Jr.setRect(f,0,0,0,0),delete a._scrollY;else{var E,C,S=Math.max(rx.scrollBarMinHeight,T*T/a._height),L=T-S-2*rx.scrollBarMargin,O=a._height-T,D=L/O,I=Math.min(a._scrollY||0,O);u.attr({width:x-2*a.borderwidth+rx.scrollBarWidth+rx.scrollBarMargin,height:T-a.borderwidth,x:a.borderwidth/2,y:a.borderwidth/2}),s.select("rect").attr({width:x-2*a.borderwidth+rx.scrollBarWidth+rx.scrollBarMargin,height:T-2*a.borderwidth,x:a.borderwidth,y:a.borderwidth+I}),Jr.setClipUrl(c,n),F(I,S,D),l.on("wheel",function(){F(I=ae.constrain(a._scrollY+t.event.deltaY/L*O,0,O),S,D),0!==I&&I!==O&&t.event.preventDefault()});var P=t.behavior.drag().on("dragstart",function(){E=t.event.sourceEvent.clientY,C=I}).on("drag",function(){var e=t.event.sourceEvent;2===e.buttons||e.ctrlKey||F(I=ae.constrain((e.clientY-E)/D+C,0,O),S,D)});f.call(P)}e._context.edits.legendPosition&&(l.classed("cursor-move",!0),tg.init({element:l.node(),gd:e,prepFn:function(){var t=Jr.getTranslate(l);A=t.x,M=t.y},moveFn:function(t,e){var r=A+t,n=M+e;Jr.setTranslate(l,r,n),_=tg.align(r,0,v.l,v.l+v.w,a.xanchor),w=tg.align(n,0,v.t+v.h,v.t,a.yanchor)},doneFn:function(){void 0!==_&&void 0!==w&&R.call("relayout",e,{"legend.x":_,"legend.y":w})},clickFn:function(t,n){var a=r._infolayer.selectAll("g.traces").filter(function(){var t=this.getBoundingClientRect();return n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom});a.size()>0&&(1===t?l._clickTimeout=setTimeout(function(){ax(a,e,t)},dx):2===t&&(l._clickTimeout&&clearTimeout(l._clickTimeout),ax(a,e,t)))}}))}function F(t,r,n){a._scrollY=e._fullLayout.legend._scrollY=t,Jr.setTranslate(c,0,-t),Jr.setRect(f,x,rx.scrollBarMargin+t*n,rx.scrollBarWidth,r),s.select("rect").attr({y:a.borderwidth+t})}},style:sx},xx={step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"},bx=m.extendFlat,_x={visible:{valType:"boolean",editType:"plot"},buttons:xx=bx(xx,{_isLinkedToArray:"button"}),x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:k({editType:"plot"}),bgcolor:{valType:"color",dflt:S.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:S.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},wx={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10};var Ax=function(e,r){var n=e._name,a={};if("all"===r.step)a[n+".autorange"]=!0;else{var i=function(e,r){var n,a=e.range,i=new Date(e.r2l(a[1])),o=r.step,l=r.count;switch(r.stepmode){case"backward":n=e.l2r(+t.time[o].utc.offset(i,-l));break;case"todate":var s=t.time[o].utc.offset(i,-l);n=e.l2r(+t.time[o].utc.ceil(s))}var u=a[1];return[n,u]}(e,r);a[n+".range[0]"]=i[0],a[n+".range[1]"]=i[1]}return a};var Mx=wr.LINE_SPACING,Tx=wr.FROM_TL,kx=wr.FROM_BR;function Ex(t){return t._id}function Cx(t,e,r){var n=t.selectAll("rect").data([0]);n.enter().append("rect").classed("selector-rect",!0),n.attr("shape-rendering","crispEdges"),n.attr({rx:wx.rx,ry:wx.ry}),n.call(Pe.stroke,e.bordercolor).call(Pe.fill,function(t,e){return e._isActive||e._isHovered?t.activecolor:t.bgcolor}(e,r)).style("stroke-width",e.borderwidth+"px")}function Sx(t,e,r,n){var a,i=t.selectAll("text").data([0]);i.enter().append("text").classed("selector-text",!0).classed("user-select-none",!0),i.attr("text-anchor","middle"),i.call(Jr.font,e.font).text((a=r,a.label?a.label:"all"===a.step?"all":a.count+a.step.charAt(0))).call(function(t){Mr.convertToTspans(t,n)})}var Lx={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:_x}}},layoutAttributes:_x,handleDefaults:function(t,e,r,n,a){var i=t.rangeselector||{},o=e.rangeselector={};function l(t,e){return ae.coerce(i,o,_x,t,e)}if(l("visible",function(t,e,r){var n,a,i=t.buttons||[],o=e.buttons=[];function l(t,e){return ae.coerce(n,a,xx,t,e)}for(var s=0;s<i.length;s++)if(n=i[s],a={},ae.isPlainObject(n)){var u=l("step");"all"!==u&&(!r||"gregorian"===r||"month"!==u&&"year"!==u?l("stepmode"):a.stepmode="backward",l("count")),l("label"),a._index=s,o.push(a)}return o}(i,o,a).length>0)){var s=function(t,e,r){for(var n=r.filter(function(r){return e[r].anchor===t._id}),a=0,i=0;i<n.length;i++){var o=e[n[i]].domain;o&&(a=Math.max(o[1],a))}return[t.domain[0],a+wx.yPad]}(e,r,n);l("x",s[0]),l("y",s[1]),ae.noneOrAll(t,e,["x","y"]),l("xanchor"),l("yanchor"),ae.coerceFont(l,"font",r.font);var u=l("bgcolor");l("activecolor",Pe.contrast(u,wx.lightAmount,wx.darkAmount)),l("bordercolor"),l("borderwidth")}},draw:function(e){var r=e._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=Le.list(t,"x",!0),r=[],n=0;n<e.length;n++){var a=e[n];a.rangeselector&&a.rangeselector.visible&&r.push(a)}return r}(e),Ex);r.enter().append("g").classed("rangeselector",!0),r.exit().remove(),r.style({cursor:"pointer","pointer-events":"all"}),r.each(function(r){var n=t.select(this),a=r,i=a.rangeselector,o=n.selectAll("g.button").data(i.buttons);o.enter().append("g").classed("button",!0),o.exit().remove(),o.each(function(r){var n=t.select(this),o=Ax(a,r);r._isActive=function(t,e,r){if("all"===e.step)return!0===t.autorange;var n=Object.keys(r);return t.range[0]===r[n[0]]&&t.range[1]===r[n[1]]}(a,r,o),n.call(Cx,i,r),n.call(Sx,i,r,e),n.on("click",function(){e._dragged||R.call("relayout",e,o)}),n.on("mouseover",function(){r._isHovered=!0,n.call(Cx,i,r)}),n.on("mouseout",function(){r._isHovered=!1,n.call(Cx,i,r)})}),function(e,r,n,a,i){var o=0,l=0,s=n.borderwidth;r.each(function(){var e=t.select(this),r=e.select(".selector-text"),a=n.font.size*Mx,i=Math.max(a*Mr.lineCount(r),16)+3;l=Math.max(l,i)}),r.each(function(){var e=t.select(this),r=e.select(".selector-rect"),a=e.select(".selector-text"),i=a.node()&&Jr.bBox(a.node()).width,u=n.font.size*Mx,c=Mr.lineCount(a),f=Math.max(i+10,wx.minButtonWidth);e.attr("transform","translate("+(s+o)+","+s+")"),r.attr({x:0,y:0,width:f,height:l}),Mr.positionText(a,f/2,l/2-(c-1)*u/2+3),o+=f+5});var u=e._fullLayout._size,c=u.l+u.w*n.x,f=u.t+u.h*(1-n.y),h="left";ex.isRightAnchor(n)&&(c-=o,h="right"),ex.isCenterAnchor(n)&&(c-=o/2,h="center");var d="top";ex.isBottomAnchor(n)&&(f-=l,d="bottom"),ex.isMiddleAnchor(n)&&(f-=l/2,d="middle"),o=Math.ceil(o),l=Math.ceil(l),c=Math.round(c),f=Math.round(f),Wn.autoMargin(e,a+"-range-selector",{x:n.x,y:n.y,l:o*Tx[h],r:o*kx[h],b:l*kx[d],t:l*Tx[d]}),i.attr("transform","translate("+c+","+f+")")}(e,o,i,a._name,n)})}},Ox={bgcolor:{valType:"color",dflt:S.background,editType:"plot"},bordercolor:{valType:"color",dflt:S.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},Rx={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},Dx=Le.list,Ix=ua,Px={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"};function Fx(t,e,r,n){var a=t.selectAll("rect."+Rx.bgClassName).data([0]);a.enter().append("rect").classed(Rx.bgClassName,!0).attr({x:0,y:0,"shape-rendering":"crispEdges"});var i=n.borderwidth%2==0?n.borderwidth:n.borderwidth-1,o=-n._offsetShift,l=Jr.crispRound(e,n.borderwidth);a.attr({width:n._width+i,height:n._height+i,transform:"translate("+o+","+o+")",fill:n.bgcolor,stroke:n.bordercolor,"stroke-width":l})}function zx(t,e,r,n){var a=e._fullLayout._topdefs.selectAll("#"+n._clipId).data([0]);a.enter().append("clipPath").attr("id",n._clipId).append("rect").attr({x:0,y:0}),a.select("rect").attr({width:n._width,height:n._height})}function Nx(e,r,n,a){var i,o=ya.getSubplots(r,n),l=r.calcdata,s=e.selectAll("g."+Rx.rangePlotClassName).data(o,ae.identity);s.enter().append("g").attr("class",function(t){return Rx.rangePlotClassName+" "+t}).call(Jr.setClipUrl,a._clipId),s.order(),s.exit().remove(),s.each(function(e,o){var s=t.select(this),u=0===o,c=ya.getFromId(r,e,"y"),f=c._name,h=a[f],d={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:a.range.slice(),calendar:n.calendar},width:a._width,height:a._height,margin:{t:0,b:0,l:0,r:0}},_context:r._context};d.layout[f]={type:c.type,domain:[0,1],range:"match"!==h.rangemode?h.range.slice():c.range.slice(),calendar:c.calendar},Wn.supplyDefaults(d);var p={id:e,plotgroup:s,xaxis:d._fullLayout.xaxis,yaxis:d._fullLayout[f]};u?i=p:(p.mainplot="xy",p.mainplotinfo=i),Ka.rangePlot(r,p,function(t,e){for(var r=[],n=0;n<t.length;n++){var a=t[n],i=a[0].trace;i.xaxis+i.yaxis===e&&r.push(a)}return r}(l,e))})}function Bx(t,e,r,n,a){var i=t.selectAll("rect."+Rx.maskMinClassName).data([0]);i.enter().append("rect").classed(Rx.maskMinClassName,!0).attr({x:0,y:0}).attr("shape-rendering","crispEdges"),i.attr("height",n._height).call(Pe.fill,Rx.maskColor);var o=t.selectAll("rect."+Rx.maskMaxClassName).data([0]);if(o.enter().append("rect").classed(Rx.maskMaxClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),o.attr("height",n._height).call(Pe.fill,Rx.maskColor),"match"!==a.rangemode){var l=t.selectAll("rect."+Rx.maskMinOppAxisClassName).data([0]);l.enter().append("rect").classed(Rx.maskMinOppAxisClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),l.attr("width",n._width).call(Pe.fill,Rx.maskOppAxisColor);var s=t.selectAll("rect."+Rx.maskMaxOppAxisClassName).data([0]);s.enter().append("rect").classed(Rx.maskMaxOppAxisClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),s.attr("width",n._width).style("border-top",Rx.maskOppBorder).call(Pe.fill,Rx.maskOppAxisColor)}}function jx(t,e,r,n){if(!e._context.staticPlot){var a=t.selectAll("rect."+Rx.slideBoxClassName).data([0]);a.enter().append("rect").classed(Rx.slideBoxClassName,!0).attr("y",0).attr("cursor",Rx.slideBoxCursor).attr("shape-rendering","crispEdges"),a.attr({height:n._height,fill:Rx.slideBoxFill})}}function Ux(t,e,r,n){var a=t.selectAll("g."+Rx.grabberMinClassName).data([0]);a.enter().append("g").classed(Rx.grabberMinClassName,!0);var i=t.selectAll("g."+Rx.grabberMaxClassName).data([0]);i.enter().append("g").classed(Rx.grabberMaxClassName,!0);var o={x:0,width:Rx.handleWidth,rx:Rx.handleRadius,fill:Pe.background,stroke:Pe.defaultLine,"stroke-width":Rx.handleStrokeWidth,"shape-rendering":"crispEdges"},l={y:Math.round(n._height/4),height:Math.round(n._height/2)},s=a.selectAll("rect."+Rx.handleMinClassName).data([0]);s.enter().append("rect").classed(Rx.handleMinClassName,!0).attr(o),s.attr(l);var u=i.selectAll("rect."+Rx.handleMaxClassName).data([0]);if(u.enter().append("rect").classed(Rx.handleMaxClassName,!0).attr(o),u.attr(l),!e._context.staticPlot){var c={width:Rx.grabAreaWidth,x:0,y:0,fill:Rx.grabAreaFill,cursor:Rx.grabAreaCursor},f=a.selectAll("rect."+Rx.grabAreaMinClassName).data([0]);f.enter().append("rect").classed(Rx.grabAreaMinClassName,!0).attr(c),f.attr("height",n._height);var h=i.selectAll("rect."+Rx.grabAreaMaxClassName).data([0]);h.enter().append("rect").classed(Rx.grabAreaMaxClassName,!0).attr(c),h.attr("height",n._height)}}var Vx={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:ae.extendFlat({},Ox,{yaxis:Px})}}},layoutAttributes:Ox,handleDefaults:function(t,e,r){if(t[r].rangeslider){ae.isPlainObject(t[r].rangeslider)||(t[r].rangeslider={});var n=t[r].rangeslider,a=e[r],i=a.rangeslider={};if(v("visible")){v("bgcolor",e.plot_bgcolor),v("bordercolor"),v("borderwidth"),v("thickness"),a._rangesliderAutorange=v("autorange",!a.isValidRange(n.range)),v("range");var o=e._subplots;if(o)for(var l=o.cartesian.filter(function(t){return t.substr(0,t.indexOf("y"))===Le.name2id(r)}).map(function(t){return t.substr(t.indexOf("y"),t.length)}),s=ae.simpleMap(l,Le.id2name),u=0;u<s.length;u++){var c,f=s[u],h=n[f]||{},d=i[f]={},p=e[f];h.range&&p.isValidRange(h.range)&&(c="fixed");var g=m(h,d,"rangemode",c);"match"!==g&&m(h,d,"range",p.range.slice()),p._rangesliderAutorange="auto"===g}i._input=n}}function v(t,e){return ae.coerce(n,i,Ox,t,e)}function m(t,e,r,n){return ae.coerce(t,e,Px,r,n)}},calcAutorange:function(t){for(var e=Dx(t,"x",!0),r=0;r<e.length;r++){var n=e[r],a=n[Rx.name];a&&a.visible&&a.autorange&&n._min.length&&n._max.length&&(a._input.autorange=!0,a._input.range=a.range=Ix(n))}},draw:function(e){var r=e._fullLayout,n=function(t){var e=ya.list({_fullLayout:t},"x",!0),r=Rx.name,n=[];if(t._has("gl2d"))return n;for(var a=0;a<e.length;a++){var i=e[a];i[r]&&i[r].visible&&n.push(i)}return n}(r);var a=r._infolayer.selectAll("g."+Rx.containerClassName).data(n,function(t){return t._name});a.enter().append("g").classed(Rx.containerClassName,!0).attr("pointer-events","all"),a.exit().each(function(e){var n=t.select(this),a=e[Rx.name];n.remove(),r._topdefs.select("#"+a._clipId).remove()}),a.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},r=Object.keys(e),n=0;n<r.length;n++){var a=r[n];-1!==a.indexOf(Rx.name)&&Wn.autoMargin(t,a)}}(e),0!==n.length&&a.each(function(n){var a=t.select(this),i=n[Rx.name],o=r[ya.id2name(n.anchor)],l=i[ya.id2name(n.anchor)];if(i.range){var s=i.range,u=n.range;s[0]=n.l2r(Math.min(n.r2l(s[0]),n.r2l(u[0]))),s[1]=n.l2r(Math.max(n.r2l(s[1]),n.r2l(u[1]))),i._input.range=s.slice()}n.cleanRange("rangeslider.range");for(var c=r.margin,f=r._size,h=n.domain,d=(n._boundingBox||{}).height||0,p=1/0,g=ya.getSubplots(e,n),v=0;v<g.length;v++){var m=ya.getFromId(e,g[v].substr(g[v].indexOf("y")));p=Math.min(p,m.domain[0])}i._id=Rx.name+n._id,i._clipId=i._id+"-"+r._uid,i._width=f.w*(h[1]-h[0]),i._height=(r.height-c.b-c.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2);var y=Math.round(c.l+f.w*h[0]),x=Math.round(f.t+f.h*(1-p)+d+i._offsetShift+Rx.extraPad);a.attr("transform","translate("+y+","+x+")");var b=n.r2l(i.range[0]),_=n.r2l(i.range[1]),w=_-b;if(i.p2d=function(t){return t/i._width*w+b},i.d2p=function(t){return(t-b)/w*i._width},i._rl=[b,_],"match"!==l.rangemode){var A=o.r2l(l.range[0]),M=o.r2l(l.range[1])-A;i.d2pOppAxis=function(t){return(t-A)/M*i._height}}a.call(Fx,e,n,i).call(zx,e,n,i).call(Nx,e,n,i).call(Bx,e,n,i,l).call(jx,e,n,i).call(Ux,e,n,i),function(e,r,n,a){var i=e.select("rect."+Rx.slideBoxClassName).node(),o=e.select("rect."+Rx.grabAreaMinClassName).node(),l=e.select("rect."+Rx.grabAreaMaxClassName).node();e.on("mousedown",function(){var s=t.event,u=s.target,c=s.clientX,f=c-e.node().getBoundingClientRect().left,h=a.d2p(n._rl[0]),d=a.d2p(n._rl[1]),p=tg.coverSlip();function g(e){var s,g,v,m=+e.clientX-c;switch(u){case i:v="ew-resize",s=h+m,g=d+m;break;case o:v="col-resize",s=h+m,g=d;break;case l:v="col-resize",s=h,g=d+m;break;default:v="ew-resize",s=f,g=f+m}if(g<s){var y=g;g=s,s=y}a._pixelMin=s,a._pixelMax=g,cg(t.select(p),v),function(t,e,r,n){function a(t){return r.l2r(ae.constrain(t,n._rl[0],n._rl[1]))}var i=a(n.p2d(n._pixelMin)),o=a(n.p2d(n._pixelMax));window.requestAnimationFrame(function(){R.call("relayout",e,r._name+".range",[i,o])})}(0,r,n,a)}p.addEventListener("mousemove",g),p.addEventListener("mouseup",function t(){p.removeEventListener("mousemove",g),p.removeEventListener("mouseup",t),ae.removeElement(p)})})}(a,e,n,i),function(t,e,r,n,a,i){var o=Rx.handleWidth/2;function l(t){return ae.constrain(t,0,n._width)}function s(t){return ae.constrain(t,0,n._height)}function u(t){return ae.constrain(t,-o,n._width+o)}var c=l(n.d2p(r._rl[0])),f=l(n.d2p(r._rl[1]));if(t.select("rect."+Rx.slideBoxClassName).attr("x",c).attr("width",f-c),t.select("rect."+Rx.maskMinClassName).attr("width",c),t.select("rect."+Rx.maskMaxClassName).attr("x",f).attr("width",n._width-f),"match"!==i.rangemode){var h=n._height-s(n.d2pOppAxis(a._rl[1])),d=n._height-s(n.d2pOppAxis(a._rl[0]));t.select("rect."+Rx.maskMinOppAxisClassName).attr("x",c).attr("height",h).attr("width",f-c),t.select("rect."+Rx.maskMaxOppAxisClassName).attr("x",c).attr("y",d).attr("height",n._height-d).attr("width",f-c),t.select("rect."+Rx.slideBoxClassName).attr("y",h).attr("height",d-h)}var p=Math.round(u(c-o))-.5,g=Math.round(u(f-o))+.5;t.select("g."+Rx.grabberMinClassName).attr("transform","translate("+p+",0.5)"),t.select("g."+Rx.grabberMaxClassName).attr("transform","translate("+g+",0.5)")}(a,0,n,i,o,l),"bottom"===n.side&&oa.draw(e,n._id+"title",{propContainer:n,propName:n._name+".title",placeholder:r._dfltTitle.x,attributes:{x:n._offset+n._length/2,y:x+i._height+i._offsetShift+10+1.5*n.titlefont.size,"text-anchor":"middle"}}),Wn.autoMargin(e,i._id,{x:h[0],y:p,l:0,r:0,t:0,b:i._height+c.b+d,pad:Rx.extraPad+2*i._offsetShift})})}},Hx=An.line,qx=Oe.dash,Gx=m.extendFlat,Xx={_isLinkedToArray:"shape",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calcIfAutorange+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:Gx({},uy.xref,{}),x0:{valType:"any",editType:"calcIfAutorange+arraydraw"},x1:{valType:"any",editType:"calcIfAutorange+arraydraw"},yref:Gx({},uy.yref,{}),y0:{valType:"any",editType:"calcIfAutorange+arraydraw"},y1:{valType:"any",editType:"calcIfAutorange+arraydraw"},path:{valType:"string",editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:Gx({},Hx.color,{editType:"arraydraw"}),width:Gx({},Hx.width,{editType:"calcIfAutorange+arraydraw"}),dash:Gx({},qx,{editType:"arraydraw"}),editType:"calcIfAutorange+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"},Wx={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}},Yx={rangeToShapePosition:function(t){return"log"===t.type?t.r2d:function(t){return t}},shapePositionToRange:function(t){return"log"===t.type?t.d2r:function(t){return t}},decodeDate:function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},encodeDate:function(t){return function(e){return t(e).replace(" ","_")}},getDataToPixel:function(t,e,r){var n,a=t._fullLayout._size;if(e){var i=Yx.shapePositionToRange(e);n=function(t){return e._offset+e.r2p(i(t,!0))},"date"===e.type&&(n=Yx.decodeDate(n))}else n=r?function(t){return a.t+a.h*(1-t)}:function(t){return a.l+a.w*t};return n},getPixelToData:function(t,e,r){var n,a=t._fullLayout._size;if(e){var i=Yx.rangeToShapePosition(e);n=function(t){return i(e.p2r(t-e._offset))}}else n=r?function(t){return 1-(t-a.t)/a.h}:function(t){return(t-a.l)/a.w};return n}};function Zx(t,e,r,n,a){var i="category"===t.type?t.r2c:t.d2c;if(void 0!==e)return[i(e),i(r)];if(n){var o,l,s,u,c=1/0,f=-1/0,h=n.match(Wx.segmentRE);for("date"===t.type&&(i=Yx.decodeDate(i)),o=0;o<h.length;o++)void 0!==(l=a[h[o].charAt(0)].drawn)&&(!(s=h[o].substr(1).match(Wx.paramRE))||s.length<l||((u=i(s[l]))<c&&(c=u),u>f&&(f=u)));return f>=c?[c,f]:void 0}}var Jx=function(t,e,r,n,a){function i(r,n){return ae.coerce(t,e,Xx,r,n)}if(n=n||{},!i("visible",!(a=a||{}).itemIsNotPlainObject))return e;i("layer"),i("opacity"),i("fillcolor"),i("line.color"),i("line.width"),i("line.dash");for(var o=i("type",t.path?"path":"rect"),l=["x","y"],s=0;s<2;s++){var u=l[s],c={_fullLayout:r},f=ya.coerceRef(t,e,c,u,"","paper");if("path"!==o){var h,d,p;"paper"!==f?(h=ya.getFromId(c,f),p=Yx.rangeToShapePosition(h),d=Yx.shapePositionToRange(h)):d=p=ae.identity;var g=u+"0",v=u+"1",m=t[g],y=t[v];t[g]=d(t[g],!0),t[v]=d(t[v],!0),ya.coercePosition(e,c,i,f,g,.25),ya.coercePosition(e,c,i,f,v,.75),e[g]=p(e[g]),e[v]=p(e[v]),t[g]=m,t[v]=y}}return"path"===o?i("path"):ae.noneOrAll(t,e,["x0","x1","y0","y1"]),e},Qx={draw:function(t){var e=t._fullLayout;e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._shapeSubplotLayers.selectAll("path").remove();for(var r=0;r<e.shapes.length;r++)e.shapes[r].visible&&$x(t,r)},drawOne:$x};function $x(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var r=(t.layout.shapes||[])[e],n=t._fullLayout.shapes[e];if(r&&!1!==n.visible)if("below"!==n.layer)i(t._fullLayout._shapeUpperLayer);else if("paper"===n.xref||"paper"===n.yref)i(t._fullLayout._shapeLowerLayer);else{var a=t._fullLayout._plots[n.xref+n.yref];if(a)i((a.mainplotinfo||a).shapelayer);else i(t._fullLayout._shapeLowerLayer)}function i(r){var a={"data-index":e,"fill-rule":"evenodd",d:Kx(t,n)},i=n.line.width?n.line.color:"rgba(0,0,0,0)",o=r.append("path").attr(a).style("opacity",n.opacity).call(Pe.stroke,i).call(Pe.fill,n.fillcolor).call(Jr.dashLine,n.line.dash,n.line.width),l=(n.xref+n.yref).replace(/paper/g,"");o.call(Jr.setClipUrl,l?"clip"+t._fullLayout._uid+l:null),t._context.edits.shapePosition&&function(t,e,r,n){var a,i,o,l,s,u,c,f,h,d,p,g,v,m,y,x,b,_,w,A,M,T,k,E,C,S,L,O,D,I,P=10,F=10,z={element:e.node(),gd:t,prepFn:function(e){E=ya.getFromId(t,r.xref),C=ya.getFromId(t,r.yref),S=Yx.getDataToPixel(t,E),L=Yx.getDataToPixel(t,C,!0),O=Yx.getPixelToData(t,E),D=Yx.getPixelToData(t,C,!0);var R="shapes["+n+"]";"path"===r.type?(T=r.path,k=R+".path"):(i=S(r.x0),o=L(r.y0),l=S(r.x1),s=L(r.y1),u=R+".x0",c=R+".y0",f=R+".x1",h=R+".y1");i<l?(g=i,x=R+".x0",A="x0",v=l,b=R+".x1",M="x1"):(g=l,x=R+".x1",A="x1",v=i,b=R+".x0",M="x0");o<s?(d=o,m=R+".y0",_="y0",p=s,y=R+".y1",w="y1"):(d=s,m=R+".y1",_="y1",p=o,y=R+".y0",w="y0");a={},B(e),z.moveFn="move"===I?j:U},doneFn:function(){cg(e),R.call("relayout",t,a)}},N=z.element.getBoundingClientRect();function B(t){var r=N.right-N.left,n=N.bottom-N.top,a=t.clientX-N.left,i=t.clientY-N.top,o=r>P&&n>F&&!t.shiftKey?tg.getCursor(a/r,1-i/n):"move";cg(e,o),I=o.split("-")[0]}function j(n,d){if("path"===r.type){var p=function(t){return O(S(t)+n)};E&&"date"===E.type&&(p=Yx.encodeDate(p));var g=function(t){return D(L(t)+d)};C&&"date"===C.type&&(g=Yx.encodeDate(g)),r.path=tb(T,p,g),a[k]=r.path}else a[u]=r.x0=O(i+n),a[c]=r.y0=D(o+d),a[f]=r.x1=O(l+n),a[h]=r.y1=D(s+d);e.attr("d",Kx(t,r))}function U(n,i){if("path"===r.type){var o=function(t){return O(S(t)+n)};E&&"date"===E.type&&(o=Yx.encodeDate(o));var l=function(t){return D(L(t)+i)};C&&"date"===C.type&&(l=Yx.encodeDate(l)),r.path=tb(T,o,l),a[k]=r.path}else{var s=~I.indexOf("n")?d+i:d,u=~I.indexOf("s")?p+i:p,c=~I.indexOf("w")?g+n:g,f=~I.indexOf("e")?v+n:v;u-s>F&&(a[m]=r[_]=D(s),a[y]=r[w]=D(u)),f-c>P&&(a[x]=r[A]=O(c),a[b]=r[M]=O(f))}e.attr("d",Kx(t,r))}tg.init(z),e.node().onmousemove=B}(t,o,n,e)}}function Kx(t,e){var r,n,a,i,o=e.type,l=ya.getFromId(t,e.xref),s=ya.getFromId(t,e.yref),u=t._fullLayout._size;if(l?(r=Yx.shapePositionToRange(l),n=function(t){return l._offset+l.r2p(r(t,!0))}):n=function(t){return u.l+u.w*t},s?(a=Yx.shapePositionToRange(s),i=function(t){return s._offset+s.r2p(a(t,!0))}):i=function(t){return u.t+u.h*(1-t)},"path"===o)return l&&"date"===l.type&&(n=Yx.decodeDate(n)),s&&"date"===s.type&&(i=Yx.decodeDate(i)),function(t,e,r){return t.replace(Wx.segmentRE,function(t){var n=0,a=t.charAt(0),i=Wx.paramIsX[a],o=Wx.paramIsY[a],l=Wx.numParams[a],s=t.substr(1).replace(Wx.paramRE,function(t){return i[n]?t=e(t):o[n]&&(t=r(t)),++n>l&&(t="X"),t});return n>l&&(s=s.replace(/[\s,]*X.*/,""),ae.log("Ignoring extra params in segment "+t)),a+s})}(e.path,n,i);var c=n(e.x0),f=n(e.x1),h=i(e.y0),d=i(e.y1);if("line"===o)return"M"+c+","+h+"L"+f+","+d;if("rect"===o)return"M"+c+","+h+"H"+f+"V"+d+"H"+c+"Z";var p=(c+f)/2,g=(h+d)/2,v=Math.abs(p-c),m=Math.abs(g-h),y="A"+v+","+m,x=p+v+","+g;return"M"+x+y+" 0 1,1 "+(p+","+(g-m))+y+" 0 0,1 "+x+"Z"}function tb(t,e,r){return t.replace(Wx.segmentRE,function(t){var n=0,a=t.charAt(0),i=Wx.paramIsX[a],o=Wx.paramIsY[a],l=Wx.numParams[a];return a+t.substr(1).replace(Wx.paramRE,function(t){return n>=l?t:(i[n]?t=e(t):o[n]&&(t=r(t)),n++,t)})})}var eb={moduleType:"component",name:"shapes",layoutAttributes:Xx,supplyLayoutDefaults:function(t,e){dy(t,e,{name:"shapes",handleItemDefaults:Jx})},includeBasePlot:Ly("shapes"),calcAutorange:function(t){var e=t._fullLayout,r=ae.filterVisible(e.shapes);if(r.length&&t._fullData.length)for(var n=0;n<r.length;n++){var a,i,o=r[n],l=o.line.width/2;"paper"!==o.xref&&(i=Zx(a=ya.getFromId(t,o.xref),o.x0,o.x1,o.path,Wx.paramIsX))&&ya.expand(a,i,{ppad:l}),"paper"!==o.yref&&(i=Zx(a=ya.getFromId(t,o.yref),o.y0,o.y1,o.path,Wx.paramIsY))&&ya.expand(a,i,{ppad:l})}},draw:Qx.draw,drawOne:Qx.drawOne},rb={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0},nb={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"},ab=m.extendDeepAll,ib=(0,xe.overrideAll)({_isLinkedToArray:"slider",visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:{_isLinkedToArray:"step",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:ab({},nb,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:vn.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:k({})},font:k({}),activebgcolor:{valType:"color",dflt:rb.gripBgActiveColor},bgcolor:{valType:"color",dflt:rb.railBgColor},bordercolor:{valType:"color",dflt:rb.railBorderColor},borderwidth:{valType:"number",min:0,dflt:rb.railBorderWidth},ticklen:{valType:"number",min:0,dflt:rb.tickLength},tickcolor:{valType:"color",dflt:rb.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:rb.minorTickLength}},"arraydraw","from-root"),ob=rb.name,lb=ib.steps;function sb(t,e,r){function n(r,n){return ae.coerce(t,e,ib,r,n)}n("visible",function(t,e){var r,n,a=t.steps||[],i=e.steps=[];function o(t,e){return ae.coerce(r,n,lb,t,e)}for(var l=0;l<a.length;l++)r=a[l],n={},o("method"),ae.isPlainObject(r)&&("skip"===n.method||Array.isArray(r.args))&&(o("args"),o("label","step-"+l),o("value",n.label),o("execute"),i.push(n));return i}(t,e).length>0)&&(n("active"),n("x"),n("y"),ae.noneOrAll(t,e,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),ae.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),ae.coerceFont(n,"currentvalue.font",e.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen"))}var ub=wr.LINE_SPACING,cb=wr.FROM_TL,fb=wr.FROM_BR;function hb(t){return t._index}function db(e,r){var n=Jr.tester.selectAll("g."+rb.labelGroupClass).data(r.steps);n.enter().append("g").classed(rb.labelGroupClass,!0);var a=0,i=0;n.each(function(e){var n=vb(t.select(this),{step:e},r).node();if(n){var o=Jr.bBox(n);i=Math.max(i,o.height),a=Math.max(a,o.width)}}),n.remove();var o=r._dims={};o.inputAreaWidth=Math.max(rb.railWidth,rb.gripHeight);var l=e._fullLayout._size;o.lx=l.l+l.w*r.x,o.ly=l.t+l.h*(1-r.y),"fraction"===r.lenmode?o.outerLength=Math.round(l.w*r.len):o.outerLength=r.len,o.inputAreaStart=0,o.inputAreaLength=Math.round(o.outerLength-r.pad.l-r.pad.r);var s=(o.inputAreaLength-2*rb.stepInset)/(r.steps.length-1),u=a+rb.labelPadding;if(o.labelStride=Math.max(1,Math.ceil(u/s)),o.labelHeight=i,o.currentValueMaxWidth=0,o.currentValueHeight=0,o.currentValueTotalHeight=0,o.currentValueMaxLines=1,r.currentvalue.visible){var c=Jr.tester.append("g");n.each(function(t){var e=pb(c,r,t.label),n=e.node()&&Jr.bBox(e.node())||{width:0,height:0},a=Mr.lineCount(e);o.currentValueMaxWidth=Math.max(o.currentValueMaxWidth,Math.ceil(n.width)),o.currentValueHeight=Math.max(o.currentValueHeight,Math.ceil(n.height)),o.currentValueMaxLines=Math.max(o.currentValueMaxLines,a)}),o.currentValueTotalHeight=o.currentValueHeight+r.currentvalue.offset,c.remove()}o.height=o.currentValueTotalHeight+rb.tickOffset+r.ticklen+rb.labelOffset+o.labelHeight+r.pad.t+r.pad.b;var f="left";ex.isRightAnchor(r)&&(o.lx-=o.outerLength,f="right"),ex.isCenterAnchor(r)&&(o.lx-=o.outerLength/2,f="center");var h="top";ex.isBottomAnchor(r)&&(o.ly-=o.height,h="bottom"),ex.isMiddleAnchor(r)&&(o.ly-=o.height/2,h="middle"),o.outerLength=Math.ceil(o.outerLength),o.height=Math.ceil(o.height),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly),Wn.autoMargin(e,rb.autoMarginIdRoot+r._index,{x:r.x,y:r.y,l:o.outerLength*cb[f],r:o.outerLength*fb[f],b:o.height*fb[h],t:o.height*cb[h]})}function pb(t,e,r){if(e.currentvalue.visible){var n,a,i=t.selectAll("text").data([0]),o=e._dims;switch(e.currentvalue.xanchor){case"right":n=o.inputAreaLength-rb.currentValueInset-o.currentValueMaxWidth,a="left";break;case"center":n=.5*o.inputAreaLength,a="middle";break;default:n=rb.currentValueInset,a="left"}i.enter().append("text").classed(rb.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":a,"data-notex":1});var l=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof r)l+=r;else l+=e.steps[e.active].label;e.currentvalue.suffix&&(l+=e.currentvalue.suffix),i.call(Jr.font,e.currentvalue.font).text(l).call(Mr.convertToTspans,e._gd);var s=Mr.lineCount(i),u=(o.currentValueMaxLines+1-s)*e.currentvalue.font.size*ub;return Mr.positionText(i,n,u),i}}function gb(t,e,r){var n=t.selectAll("rect."+rb.gripRectClass).data([0]);n.enter().append("rect").classed(rb.gripRectClass,!0).call(bb,e,t,r).style("pointer-events","all"),n.attr({width:rb.gripWidth,height:rb.gripHeight,rx:rb.gripRadius,ry:rb.gripRadius}).call(Pe.stroke,r.bordercolor).call(Pe.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function vb(t,e,r){var n=t.selectAll("text").data([0]);return n.enter().append("text").classed(rb.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1}),n.call(Jr.font,r.font).text(e.step.label).call(Mr.convertToTspans,r._gd),n}function mb(e,r){var n=e.selectAll("g."+rb.labelsClass).data([0]),a=r._dims;n.enter().append("g").classed(rb.labelsClass,!0);var i=n.selectAll("g."+rb.labelGroupClass).data(a.labelSteps);i.enter().append("g").classed(rb.labelGroupClass,!0),i.exit().remove(),i.each(function(e){var n=t.select(this);n.call(vb,e,r),Jr.setTranslate(n,Ab(r,e.fraction),rb.tickOffset+r.ticklen+r.font.size*ub+rb.labelOffset+a.currentValueTotalHeight)})}function yb(t,e,r,n,a){var i=Math.round(n*(r.steps.length-1));i!==r.active&&xb(t,e,r,i,!0,a)}function xb(t,e,r,n,a,i){var o=r.active;r._input.active=r.active=n;var l=r.steps[r.active];e.call(wb,r,r.active/(r.steps.length-1),i),e.call(pb,r),t.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:a,previousActive:o}),l&&l.method&&a&&(e._nextMethod?(e._nextMethod.step=l,e._nextMethod.doCallback=a,e._nextMethod.doTransition=i):(e._nextMethod={step:l,doCallback:a,doTransition:i},e._nextMethodRaf=window.requestAnimationFrame(function(){var r=e._nextMethod.step;r.method&&(r.execute&&Wn.executeAPICommand(t,r.method,r.args),e._nextMethod=null,e._nextMethodRaf=null)})))}function bb(e,r,n){var a=n.node(),i=t.select(r);function o(){return n.data()[0]}e.on("mousedown",function(){var e=o();r.emit("plotly_sliderstart",{slider:e});var l=n.select("."+rb.gripRectClass);t.event.stopPropagation(),t.event.preventDefault(),l.call(Pe.fill,e.activebgcolor);var s=Mb(e,t.mouse(a)[0]);yb(r,n,e,s,!0),e._dragging=!0,i.on("mousemove",function(){var e=o(),i=Mb(e,t.mouse(a)[0]);yb(r,n,e,i,!1)}),i.on("mouseup",function(){var t=o();t._dragging=!1,l.call(Pe.fill,t.bgcolor),i.on("mouseup",null),i.on("mousemove",null),r.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})})})}function _b(e,r){var n=e.selectAll("rect."+rb.tickRectClass).data(r.steps),a=r._dims;n.enter().append("rect").classed(rb.tickRectClass,!0),n.exit().remove(),n.attr({width:r.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(e,n){var i=n%a.labelStride==0,o=t.select(this);o.attr({height:i?r.ticklen:r.minorticklen}).call(Pe.fill,r.tickcolor),Jr.setTranslate(o,Ab(r,n/(r.steps.length-1))-.5*r.tickwidth,(i?rb.tickOffset:rb.minorTickOffset)+a.currentValueTotalHeight)})}function wb(t,e,r,n){var a=t.select("rect."+rb.gripRectClass),i=Ab(e,r);if(!e._invokingCommand){var o=a;n&&e.transition.duration>0&&(o=o.transition().duration(e.transition.duration).ease(e.transition.easing)),o.attr("transform","translate("+(i-.5*rb.gripWidth)+","+e._dims.currentValueTotalHeight+")")}}function Ab(t,e){var r=t._dims;return r.inputAreaStart+rb.stepInset+(r.inputAreaLength-2*rb.stepInset)*Math.min(1,Math.max(0,e))}function Mb(t,e){var r=t._dims;return Math.min(1,Math.max(0,(e-rb.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*rb.stepInset-2*r.inputAreaStart)))}function Tb(t,e,r){var n=t.selectAll("rect."+rb.railTouchRectClass).data([0]),a=r._dims;n.enter().append("rect").classed(rb.railTouchRectClass,!0).call(bb,e,t,r).style("pointer-events","all"),n.attr({width:a.inputAreaLength,height:Math.max(a.inputAreaWidth,rb.tickOffset+r.ticklen+a.labelHeight)}).call(Pe.fill,r.bgcolor).attr("opacity",0),Jr.setTranslate(n,0,a.currentValueTotalHeight)}function kb(t,e){var r=t.selectAll("rect."+rb.railRectClass).data([0]),n=e._dims;r.enter().append("rect").classed(rb.railRectClass,!0);var a=n.inputAreaLength-2*rb.railInset;r.attr({width:a,height:rb.railWidth,rx:rb.railRadius,ry:rb.railRadius,"shape-rendering":"crispEdges"}).call(Pe.stroke,e.bordercolor).call(Pe.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),Jr.setTranslate(r,rb.railInset,.5*(n.inputAreaWidth-rb.railWidth)+n.currentValueTotalHeight)}var Eb={moduleType:"component",name:rb.name,layoutAttributes:ib,supplyLayoutDefaults:function(t,e){dy(t,e,{name:ob,handleItemDefaults:sb})},draw:function(e){var r=e._fullLayout,n=function(t,e){for(var r=t[rb.name],n=[],a=0;a<r.length;a++){var i=r[a];i.visible&&i.steps.length&&(i._gd=e,n.push(i))}return n}(r,e),a=r._infolayer.selectAll("g."+rb.containerClassName).data(n.length>0?[0]:[]);if(a.enter().append("g").classed(rb.containerClassName,!0).style("cursor","ew-resize"),a.exit().remove(),a.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},r=Object.keys(e),n=0;n<r.length;n++){var a=r[n];-1!==a.indexOf(rb.autoMarginIdRoot)&&Wn.autoMargin(t,a)}}(e),0!==n.length){var i=a.selectAll("g."+rb.groupClassName).data(n,hb);i.enter().append("g").classed(rb.groupClassName,!0),i.exit().each(function(r){t.select(this).remove(),r._commandObserver.remove(),delete r._commandObserver,Wn.autoMargin(e,rb.autoMarginIdRoot+r._index)});for(var o=0;o<n.length;o++){var l=n[o];db(e,l)}i.each(function(r){if(!(r.steps.length<2)){var n=t.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var r=t.steps.length,n=0;n<r;n+=e.labelStride)e.labelSteps.push({fraction:n/(r-1),step:t.steps[n]})}(r),Wn.manageCommandObserver(e,r,r.steps,function(t){var r=n.data()[0];r.active!==t.index&&(r._dragging||xb(e,n,r,t.index,!1,!0))}),function(t,e,r){r.active>=r.steps.length&&(r.active=0),e.call(pb,r).call(kb,r).call(mb,r).call(_b,r).call(Tb,t,r).call(gb,t,r);var n=r._dims;Jr.setTranslate(e,n.lx+r.pad.l,n.ly+r.pad.t),e.call(wb,r,r.active/(r.steps.length-1),!1),e.call(pb,r)}(e,t.select(this),r)}})}}},Cb=m.extendFlat,Sb=(0,xe.overrideAll)({_isLinkedToArray:"updatemenu",_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:{_isLinkedToArray:"button",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}},x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:Cb({},nb,{}),font:k({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:S.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}},"arraydraw","from-root"),Lb={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}},Ob=Lb.name,Rb=Sb.buttons;function Db(t,e,r){function n(r,n){return ae.coerce(t,e,Sb,r,n)}n("visible",function(t,e){var r,n,a=t.buttons||[],i=e.buttons=[];function o(t,e){return ae.coerce(r,n,Rb,t,e)}for(var l=0;l<a.length;l++)r=a[l],n={},o("method"),ae.isPlainObject(r)&&("skip"===n.method||Array.isArray(r.args))&&(o("args"),o("label"),o("execute"),n._index=l,i.push(n));return i}(t,e).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),ae.noneOrAll(t,e,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),ae.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}var Ib=Pb;function Pb(t,e,r){this.gd=t,this.container=e,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}Pb.barWidth=2,Pb.barLength=20,Pb.barRadius=2,Pb.barPad=1,Pb.barColor="#808BA4",Pb.prototype.enable=function(e,r,n){var a=this.gd._fullLayout,i=a.width,o=a.height;this.position=e;var l,s,u,c,f=this.position.l,h=this.position.w,d=this.position.t,p=this.position.h,g=this.position.direction,v="down"===g,m="left"===g,y="up"===g,x=h,b=p;v||m||"right"===g||y||(this.position.direction="down",v=!0),v||y?(s=(l=f)+x,v?(u=d,b=(c=Math.min(u+b,o))-u):b=(c=d+b)-(u=Math.max(c-b,0))):(c=(u=d)+b,m?x=(s=f+x)-(l=Math.max(s-x,0)):(l=f,x=(s=Math.min(l+x,i))-l)),this._box={l:l,t:u,w:x,h:b};var _=h>x,w=Pb.barLength+2*Pb.barPad,A=Pb.barWidth+2*Pb.barPad,M=f,T=d+p;T+A>o&&(T=o-A);var k=this.container.selectAll("rect.scrollbar-horizontal").data(_?[0]:[]);k.exit().on(".drag",null).remove(),k.enter().append("rect").classed("scrollbar-horizontal",!0).call(Pe.fill,Pb.barColor),_?(this.hbar=k.attr({rx:Pb.barRadius,ry:Pb.barRadius,x:M,y:T,width:w,height:A}),this._hbarXMin=M+w/2,this._hbarTranslateMax=x-w):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var E=p>b,C=Pb.barWidth+2*Pb.barPad,S=Pb.barLength+2*Pb.barPad,L=f+h,O=d;L+C>i&&(L=i-C);var R=this.container.selectAll("rect.scrollbar-vertical").data(E?[0]:[]);R.exit().on(".drag",null).remove(),R.enter().append("rect").classed("scrollbar-vertical",!0).call(Pe.fill,Pb.barColor),E?(this.vbar=R.attr({rx:Pb.barRadius,ry:Pb.barRadius,x:L,y:O,width:C,height:S}),this._vbarYMin=O+S/2,this._vbarTranslateMax=b-S):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var D=this.id,I=l-.5,P=E?s+C+.5:s+.5,F=u-.5,z=_?c+A+.5:c+.5,N=a._topdefs.selectAll("#"+D).data(_||E?[0]:[]);if(N.exit().remove(),N.enter().append("clipPath").attr("id",D).append("rect"),_||E?(this._clipRect=N.select("rect").attr({x:Math.floor(I),y:Math.floor(F),width:Math.ceil(P)-Math.floor(I),height:Math.ceil(z)-Math.floor(F)}),this.container.call(Jr.setClipUrl,D),this.bg.attr({x:f,y:d,width:h,height:p})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(Jr.setClipUrl,null),delete this._clipRect),_||E){var B=t.behavior.drag().on("dragstart",function(){t.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(B);var j=t.behavior.drag().on("dragstart",function(){t.event.sourceEvent.preventDefault(),t.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));_&&this.hbar.on(".drag",null).call(j),E&&this.vbar.on(".drag",null).call(j)}this.setTranslate(r,n)},Pb.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(Jr.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},Pb.prototype._onBoxDrag=function(){var e=this.translateX,r=this.translateY;this.hbar&&(e-=t.event.dx),this.vbar&&(r-=t.event.dy),this.setTranslate(e,r)},Pb.prototype._onBoxWheel=function(){var e=this.translateX,r=this.translateY;this.hbar&&(e+=t.event.deltaY),this.vbar&&(r+=t.event.deltaY),this.setTranslate(e,r)},Pb.prototype._onBarDrag=function(){var e=this.translateX,r=this.translateY;if(this.hbar){var n=e+this._hbarXMin,a=n+this._hbarTranslateMax;e=(ae.constrain(t.event.x,n,a)-n)/(a-n)*(this.position.w-this._box.w)}if(this.vbar){var i=r+this._vbarYMin,o=i+this._vbarTranslateMax;r=(ae.constrain(t.event.y,i,o)-i)/(o-i)*(this.position.h-this._box.h)}this.setTranslate(e,r)},Pb.prototype.setTranslate=function(t,e){var r=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=ae.constrain(t||0,0,r),e=ae.constrain(e||0,0,n),this.translateX=t,this.translateY=e,this.container.call(Jr.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var a=t/r;this.hbar.call(Jr.setTranslate,t+a*this._hbarTranslateMax,e)}if(this.vbar){var i=e/n;this.vbar.call(Jr.setTranslate,t,e+i*this._vbarTranslateMax)}};var Fb=wr.LINE_SPACING;function zb(t){return t._index}function Nb(t,e){return+t.attr(Lb.menuIndexAttrName)===e._index}function Bb(t,e,r,n,a,i,o,l){e._input.active=e.active=o,"buttons"===e.type?Ub(t,n,null,null,e):"dropdown"===e.type&&(a.attr(Lb.menuIndexAttrName,"-1"),jb(t,n,a,i,e),l||Ub(t,n,a,i,e))}function jb(t,e,r,n,a){var i=e.selectAll("g."+Lb.headerClassName).data([0]),o=a._dims;i.enter().append("g").classed(Lb.headerClassName,!0).style("pointer-events","all");var l=a.active,s=a.buttons[l]||Lb.blankHeaderOpts,u={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0},c={width:o.headerWidth,height:o.headerHeight};i.call(Vb,a,s,t).call(Zb,a,u,c);var f=e.selectAll("text."+Lb.headerArrowClassName).data([0]);f.enter().append("text").classed(Lb.headerArrowClassName,!0).classed("user-select-none",!0).attr("text-anchor","end").call(Jr.font,a.font).text(Lb.arrowSymbol[a.direction]),f.attr({x:o.headerWidth-Lb.arrowOffsetX+a.pad.l,y:o.headerHeight/2+Lb.textOffsetY+a.pad.t}),i.on("click",function(){r.call(Jb),r.attr(Lb.menuIndexAttrName,Nb(r,a)?-1:String(a._index)),Ub(t,e,r,n,a)}),i.on("mouseover",function(){i.call(Xb)}),i.on("mouseout",function(){i.call(Wb,a)}),Jr.setTranslate(e,o.lx,o.ly)}function Ub(e,r,n,a,i){n||(n=r).attr("pointer-events","all");var o=function(t){return-1==+t.attr(Lb.menuIndexAttrName)}(n)&&"buttons"!==i.type?[]:i.buttons,l="dropdown"===i.type?Lb.dropdownButtonClassName:Lb.buttonClassName,s=n.selectAll("g."+l).data(o),u=s.enter().append("g").classed(l,!0),c=s.exit();"dropdown"===i.type?(u.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();var f=0,h=0,d=i._dims,p=-1!==["up","down"].indexOf(i.direction);"dropdown"===i.type&&(p?h=d.headerHeight+Lb.gapButtonHeader:f=d.headerWidth+Lb.gapButtonHeader),"dropdown"===i.type&&"up"===i.direction&&(h=-Lb.gapButtonHeader+Lb.gapButton-d.openHeight),"dropdown"===i.type&&"left"===i.direction&&(f=-Lb.gapButtonHeader+Lb.gapButton-d.openWidth);var g={x:d.lx+f+i.pad.l,y:d.ly+h+i.pad.t,yPad:Lb.gapButton,xPad:Lb.gapButton,index:0},v={l:g.x+i.borderwidth,t:g.y+i.borderwidth};s.each(function(o,l){var u=t.select(this);u.call(Vb,i,o,e).call(Zb,i,g),u.on("click",function(){t.event.defaultPrevented||(Bb(e,i,0,r,n,a,l),o.execute&&Wn.executeAPICommand(e,o.method,o.args),e.emit("plotly_buttonclicked",{menu:i,button:o,active:i.active}))}),u.on("mouseover",function(){u.call(Xb)}),u.on("mouseout",function(){u.call(Wb,i),s.call(Gb,i)})}),s.call(Gb,i),p?(v.w=Math.max(d.openWidth,d.headerWidth),v.h=g.y-v.t):(v.w=g.x-v.l,v.h=Math.max(d.openHeight,d.headerHeight)),v.direction=i.direction,a&&(s.size()?function(t,e,r,n,a,i){var o,l,s,u=a.direction,c="up"===u||"down"===u,f=a._dims,h=a.active;if(c)for(l=0,s=0;s<h;s++)l+=f.heights[s]+Lb.gapButton;else for(o=0,s=0;s<h;s++)o+=f.widths[s]+Lb.gapButton;n.enable(i,o,l),n.hbar&&n.hbar.attr("opacity","0").transition().attr("opacity","1");n.vbar&&n.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,a,i,v):function(t){var e=!!t.hbar,r=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",function(){e=!1,r||t.disable()});r&&t.vbar.transition().attr("opacity","0").each("end",function(){r=!1,e||t.disable()})}(a))}function Vb(t,e,r,n){t.call(Hb,e).call(qb,e,r,n)}function Hb(t,e){var r=t.selectAll("rect").data([0]);r.enter().append("rect").classed(Lb.itemRectClassName,!0).attr({rx:Lb.rx,ry:Lb.ry,"shape-rendering":"crispEdges"}),r.call(Pe.stroke,e.bordercolor).call(Pe.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function qb(t,e,r,n){var a=t.selectAll("text").data([0]);a.enter().append("text").classed(Lb.itemTextClassName,!0).classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1}),a.call(Jr.font,e.font).text(r.label).call(Mr.convertToTspans,n)}function Gb(e,r){var n=r.active;e.each(function(e,a){var i=t.select(this);a===n&&r.showactive&&i.select("rect."+Lb.itemRectClassName).call(Pe.fill,Lb.activeColor)})}function Xb(t){t.select("rect."+Lb.itemRectClassName).call(Pe.fill,Lb.hoverColor)}function Wb(t,e){t.select("rect."+Lb.itemRectClassName).call(Pe.fill,e.bgcolor)}function Yb(e,r){var n=r._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},a=Jr.tester.selectAll("g."+Lb.dropdownButtonClassName).data(r.buttons);a.enter().append("g").classed(Lb.dropdownButtonClassName,!0);var i=-1!==["up","down"].indexOf(r.direction);a.each(function(a,o){var l=t.select(this);l.call(Vb,r,a,e);var s=l.select("."+Lb.itemTextClassName),u=s.node()&&Jr.bBox(s.node()).width,c=Math.max(u+Lb.textPadX,Lb.minWidth),f=r.font.size*Fb,h=Mr.lineCount(s),d=Math.max(f*h,Lb.minHeight)+Lb.textOffsetY;d=Math.ceil(d),c=Math.ceil(c),n.widths[o]=c,n.heights[o]=d,n.height1=Math.max(n.height1,d),n.width1=Math.max(n.width1,c),i?(n.totalWidth=Math.max(n.totalWidth,c),n.openWidth=n.totalWidth,n.totalHeight+=d+Lb.gapButton,n.openHeight+=d+Lb.gapButton):(n.totalWidth+=c+Lb.gapButton,n.openWidth+=c+Lb.gapButton,n.totalHeight=Math.max(n.totalHeight,d),n.openHeight=n.totalHeight)}),i?n.totalHeight-=Lb.gapButton:n.totalWidth-=Lb.gapButton,n.headerWidth=n.width1+Lb.arrowPadX,n.headerHeight=n.height1,"dropdown"===r.type&&(i?(n.width1+=Lb.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=Lb.arrowPadX),a.remove();var o=n.totalWidth+r.pad.l+r.pad.r,l=n.totalHeight+r.pad.t+r.pad.b,s=e._fullLayout._size;n.lx=s.l+s.w*r.x,n.ly=s.t+s.h*(1-r.y);var u="left";ex.isRightAnchor(r)&&(n.lx-=o,u="right"),ex.isCenterAnchor(r)&&(n.lx-=o/2,u="center");var c="top";ex.isBottomAnchor(r)&&(n.ly-=l,c="bottom"),ex.isMiddleAnchor(r)&&(n.ly-=l/2,c="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),Wn.autoMargin(e,Lb.autoMarginIdRoot+r._index,{x:r.x,y:r.y,l:o*({right:1,center:.5}[u]||0),r:o*({left:1,center:.5}[u]||0),b:l*({top:1,middle:.5}[c]||0),t:l*({bottom:1,middle:.5}[c]||0)})}function Zb(t,e,r,n){n=n||{};var a=t.select("."+Lb.itemRectClassName),i=t.select("."+Lb.itemTextClassName),o=e.borderwidth,l=r.index,s=e._dims;Jr.setTranslate(t,o+r.x,o+r.y);var u=-1!==["up","down"].indexOf(e.direction),c=n.height||(u?s.heights[l]:s.height1);a.attr({x:0,y:0,width:n.width||(u?s.width1:s.widths[l]),height:c});var f=e.font.size*Fb,h=(Mr.lineCount(i)-1)*f/2;Mr.positionText(i,Lb.textOffsetX,c/2-h+Lb.textOffsetY),u?r.y+=s.heights[l]+r.yPad:r.x+=s.widths[l]+r.xPad,r.index++}function Jb(t){t.selectAll("g."+Lb.dropdownButtonClassName).remove()}var Qb={moduleType:"component",name:Lb.name,layoutAttributes:Sb,supplyLayoutDefaults:function(t,e){dy(t,e,{name:Ob,handleItemDefaults:Db})},draw:function(e){var r=e._fullLayout,n=function(t){for(var e=t[Lb.name],r=[],n=0;n<e.length;n++){var a=e[n];a.visible&&r.push(a)}return r}(r),a=r._menulayer.selectAll("g."+Lb.containerClassName).data(n.length>0?[0]:[]);if(a.enter().append("g").classed(Lb.containerClassName,!0).style("cursor","pointer"),a.exit().remove(),a.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},r=Object.keys(e),n=0;n<r.length;n++){var a=r[n];-1!==a.indexOf(Lb.autoMarginIdRoot)&&Wn.autoMargin(t,a)}}(e),0!==n.length){var i=a.selectAll("g."+Lb.headerGroupClassName).data(n,zb);i.enter().append("g").classed(Lb.headerGroupClassName,!0);var o=a.selectAll("g."+Lb.dropdownButtonGroupClassName).data([0]);o.enter().append("g").classed(Lb.dropdownButtonGroupClassName,!0).style("pointer-events","all");for(var l=0;l<n.length;l++){var s=n[l];Yb(e,s)}var u="updatemenus"+r._uid,c=new Ib(e,o,u);i.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(Jb).attr(Lb.menuIndexAttrName,"-1")),i.exit().each(function(r){t.select(this).remove(),o.call(Jb).attr(Lb.menuIndexAttrName,"-1"),Wn.autoMargin(e,Lb.autoMarginIdRoot+r._index)}),i.each(function(r){var n=t.select(this),a="dropdown"===r.type?o:null;Wn.manageCommandObserver(e,r,r.buttons,function(t){Bb(e,r,r.buttons[t.index],n,a,c,t.index,!0)}),"dropdown"===r.type?(jb(e,n,o,c,r),Nb(o,r)&&Ub(e,n,o,c,r)):Ub(e,n,null,null,r)})}}},$b={};"undefined"!=typeof MathJax?($b.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):$b.MathJax=!1;var Kb={add:function(t,e,r,n,a){var i,o;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},o=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(o,t.undoQueue.queue.length-o,i),t.undoQueue.index+=1):i=t.undoQueue.queue[o-1],t.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(e),i.undo.args.unshift(r),i.redo.calls.push(n),i.redo.args.push(a)),t.undoQueue.queue.length>b.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,r;if(t.framework&&t.framework.isPolar)t.framework.undo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)Kb.plotDo(t,e.undo.calls[r],e.undo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,r;if(t.framework&&t.framework.isPolar)t.framework.redo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)Kb.plotDo(t,e.redo.calls[r],e.redo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}}};Kb.plotDo=function(t,e,r){t.autoplay=!0,r=function(t,e){for(var r,n=[],a=0;a<e.length;a++)r=e[a],n[a]=r===t?r:"object"==typeof r?Array.isArray(r)?ae.extendDeep([],r):ae.extendDeepAll({},r):r;return n}(t,r),e.apply(null,r)};var t_=Kb,e_=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r+r,l=n+n,s=a+a,u=r*o,c=n*o,f=n*l,h=a*o,d=a*l,p=a*s,g=i*o,v=i*l,m=i*s;return t[0]=1-f-p,t[1]=c+m,t[2]=h-v,t[3]=0,t[4]=c-m,t[5]=1-u-p,t[6]=d+g,t[7]=0,t[8]=h+v,t[9]=d-g,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var r_={},n_=Le.cleanId,a_=Le.getFromTrace;function i_(t,e){var r=t[e],n=e.charAt(0);r&&"paper"!==r&&(t[e]=n_(r,n))}function o_(t){var e="middle",r="center";return-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?r="left":-1!==t.indexOf("right")&&(r="right"),e+" "+r}function l_(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}r_.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&ae.log("Clearing previous rejected promises from queue."),t._promises=[]},r_.cleanLayout=function(t){var e,r;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var n=(Wn.subplotsRegistry.cartesian||{}).attrRegex,a=(Wn.subplotsRegistry.gl3d||{}).attrRegex,i=Object.keys(t);for(e=0;e<i.length;e++){var o=i[e];if(n&&n.test(o)){var l=t[o];l.anchor&&"free"!==l.anchor&&(l.anchor=n_(l.anchor)),l.overlaying&&(l.overlaying=n_(l.overlaying)),l.type||(l.isdate?l.type="date":l.islog?l.type="log":!1===l.isdate&&!1===l.islog&&(l.type="linear")),"withzero"!==l.autorange&&"tozero"!==l.autorange||(l.autorange=!0,l.rangemode="tozero"),delete l.islog,delete l.isdate,delete l.categories,l_(l,"domain")&&delete l.domain,void 0!==l.autotick&&(void 0===l.tickmode&&(l.tickmode=l.autotick?"auto":"linear"),delete l.autotick)}else if(a&&a.test(o)){var s=t[o],u=s.cameraposition;if(Array.isArray(u)&&4===u[0].length){var c=u[0],f=u[1],h=u[2],d=e_([],c),p=[];for(r=0;r<3;++r)p[r]=f[r]+h*d[2+4*r];s.camera={eye:{x:p[0],y:p[1],z:p[2]},center:{x:f[0],y:f[1],z:f[2]},up:{x:d[1],y:d[5],z:d[9]}},delete s.cameraposition}}}var g=Array.isArray(t.annotations)?t.annotations.length:0;for(e=0;e<g;e++){var v=t.annotations[e];ae.isPlainObject(v)&&(v.ref&&("paper"===v.ref?(v.xref="paper",v.yref="paper"):"data"===v.ref&&(v.xref="x",v.yref="y"),delete v.ref),i_(v,"xref"),i_(v,"yref"))}var m=Array.isArray(t.shapes)?t.shapes.length:0;for(e=0;e<m;e++){var y=t.shapes[e];ae.isPlainObject(y)&&(i_(y,"xref"),i_(y,"yref"))}var x=t.legend;return x&&(x.x>3?(x.x=1.02,x.xanchor="left"):x.x<-2&&(x.x=-.02,x.xanchor="right"),x.y>3?(x.y=1.02,x.yanchor="bottom"):x.y<-2&&(x.y=-.02,x.yanchor="top")),"rotate"===t.dragmode&&(t.dragmode="orbit"),Pe.clean(t),t},r_.cleanData=function(t,e){for(var r=[],n=t.concat(Array.isArray(e)?e:[]).filter(function(t){return"uid"in t}).map(function(t){return t.uid}),a=0;a<t.length;a++){var i,o=t[a];if(!("uid"in o)||-1!==r.indexOf(o.uid)){var l;for(i=0;i<100&&(l=ae.randstr(n),-1!==r.indexOf(l));i++);o.uid=ae.randstr(n),n.push(o.uid)}if(r.push(o.uid),"histogramy"===o.type&&"xbins"in o&&!("ybins"in o)&&(o.ybins=o.xbins,delete o.xbins),o.error_y&&"opacity"in o.error_y){var s=Pe.defaults,u=o.error_y.color||(R.traceIs(o,"bar")?Pe.defaultLine:s[a%s.length]);o.error_y.color=Pe.addOpacity(Pe.rgb(u),Pe.opacity(u)*o.error_y.opacity),delete o.error_y.opacity}if("bardir"in o&&("h"!==o.bardir||!R.traceIs(o,"bar")&&"histogram"!==o.type.substr(0,9)||(o.orientation="h",r_.swapXYData(o)),delete o.bardir),"histogramy"===o.type&&r_.swapXYData(o),"histogramx"!==o.type&&"histogramy"!==o.type||(o.type="histogram"),"scl"in o&&(o.colorscale=o.scl,delete o.scl),"reversescl"in o&&(o.reversescale=o.reversescl,delete o.reversescl),o.xaxis&&(o.xaxis=n_(o.xaxis,"x")),o.yaxis&&(o.yaxis=n_(o.yaxis,"y")),R.traceIs(o,"gl3d")&&o.scene&&(o.scene=Wn.subplotsRegistry.gl3d.cleanId(o.scene)),!R.traceIs(o,"pie")&&!R.traceIs(o,"bar"))if(Array.isArray(o.textposition))for(i=0;i<o.textposition.length;i++)o.textposition[i]=o_(o.textposition[i]);else o.textposition&&(o.textposition=o_(o.textposition));if(R.traceIs(o,"2dMap")&&("YIGnBu"===o.colorscale&&(o.colorscale="YlGnBu"),"YIOrRd"===o.colorscale&&(o.colorscale="YlOrRd")),R.traceIs(o,"markerColorscale")&&o.marker){var c=o.marker;"YIGnBu"===c.colorscale&&(c.colorscale="YlGnBu"),"YIOrRd"===c.colorscale&&(c.colorscale="YlOrRd")}if("surface"===o.type&&ae.isPlainObject(o.contours)){var f=["x","y","z"];for(i=0;i<f.length;i++){var h=o.contours[f[i]];ae.isPlainObject(h)&&(h.highlightColor&&(h.highlightcolor=h.highlightColor,delete h.highlightColor),h.highlightWidth&&(h.highlightwidth=h.highlightWidth,delete h.highlightWidth))}}if(Array.isArray(o.transforms)){var d=o.transforms;for(i=0;i<d.length;i++){var p=d[i];if(ae.isPlainObject(p))switch(p.type){case"filter":p.filtersrc&&(p.target=p.filtersrc,delete p.filtersrc),p.calendar&&(p.valuecalendar||(p.valuecalendar=p.calendar),delete p.calendar);break;case"groupby":if(p.styles=p.styles||p.style,p.styles&&!Array.isArray(p.styles)){var g=p.styles,v=Object.keys(g);p.styles=[];for(var m=0;m<v.length;m++)p.styles.push({target:v[m],value:g[v[m]]})}}}}l_(o,"line")&&delete o.line,"marker"in o&&(l_(o.marker,"line")&&delete o.marker.line,l_(o,"marker")&&delete o.marker),Pe.clean(o)}},r_.swapXYData=function(t){var e;if(ae.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var r=t.error_y,n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);ae.swapAttrs(t,["error_?.copy_ystyle"]),n&&ae.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var a=t.hoverinfo.split("+");for(e=0;e<a.length;e++)"x"===a[e]?a[e]="y":"y"===a[e]&&(a[e]="x");t.hoverinfo=a.join("+")}},r_.coerceTraceIndices=function(t,r){return e(r)?[r]:Array.isArray(r)&&r.length?r:t.data.map(function(t,e){return e})},r_.manageArrayContainers=function(t,r,n){var a=t.obj,i=t.parts,o=i.length,l=i[o-1],s=e(l);if(s&&null===r){var u=i.slice(0,o-1).join(".");ae.nestedProperty(a,u).get().splice(l,1)}else s&&void 0===t.get()?(void 0===t.get()&&(n[t.astr]=null),t.set(r)):t.set(r)};var s_=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function u_(t){var e=t.search(s_);if(e>0)return t.substr(0,e)}r_.hasParent=function(t,e){for(var r=u_(e);r;){if(r in t)return!0;r=u_(r)}return!1};var c_=["x","y","z"];r_.clearAxisTypes=function(t,e,r){for(var n=0;n<e.length;n++)for(var a=t._fullData[n],i=0;i<3;i++){var o=a_(t,a,c_[i]);if(o&&"log"!==o.type){var l=o._name,s=o._id.substr(1);if("scene"===s.substr(0,5)){if(void 0!==r[s])continue;l=s+"."+l}var u=l+".type";void 0===r[l]&&void 0===r[u]&&ae.nestedProperty(t.layout,u).set(null)}}},r_.clearAxisAutomargins=function(t){for(var e=Object.keys(t._fullLayout._pushmargin),r=0;r<e.length;r++)-1!==e[r].indexOf("automargin")&&delete t._fullLayout._pushmargin[e[r]]};var f_={},h_=Wt.sorterAsc;f_.containerArrayMatch=q;var d_=f_.isAddVal=function(t){return"add"===t||v(t)},p_=f_.isRemoveVal=function(t){return null===t||"remove"===t};f_.applyContainerArrayChanges=function(t,e,r,n){var a=e.astr,i=R.getComponentMethod(a,"supplyLayoutDefaults"),o=R.getComponentMethod(a,"draw"),l=R.getComponentMethod(a,"drawOne"),s=n.replot||n.recalc||i===M||o===M,u=t.layout,c=t._fullLayout;if(r[""]){Object.keys(r).length>1&&_.warn("Full array edits are incompatible with other edits",a);var f=r[""][""];if(p_(f))e.set(null);else{if(!Array.isArray(f))return _.warn("Unrecognized full array edit value",a,f),!0;e.set(f)}return!s&&(i(u,c),o(t),!0)}var h,d,p,g,v,m,y,x=Object.keys(r).map(Number).sort(h_),b=e.get(),w=b||[],A=X(c,a).get(),T=[],k=-1,E=w.length;for(h=0;h<x.length;h++)if(g=r[p=x[h]],v=Object.keys(g),m=g[""],y=d_(m),p<0||p>w.length-(y?0:1))_.warn("index out of range",a,p);else if(void 0!==m)v.length>1&&_.warn("Insertion & removal are incompatible with edits to the same index.",a,p),p_(m)?T.push(p):y?("add"===m&&(m={}),w.splice(p,0,m),A&&A.splice(p,0,{})):_.warn("Unrecognized full object edit value",a,p,m),-1===k&&(k=p);else for(d=0;d<v.length;d++)X(w[p],v[d]).set(g[v[d]]);for(h=T.length-1;h>=0;h--)w.splice(T[h],1),A&&A.splice(T[h],1);if(w.length?b||e.set(w):e.set(null),s)return!1;if(i(u,c),l!==M){var C;if(-1===k)C=x;else{for(E=Math.max(w.length,E),C=[],h=0;h<x.length&&!((p=x[h])>=k);h++)C.push(p);for(h=k;h<E;h++)C.push(h)}for(h=0;h<C.length;h++)l(t,C[h])}else o(t);return!0};var g_={},v_=ae._,m_=g_={};function y_(t,e){var r,n,a=e.currentTarget,i=a.getAttribute("data-attr"),o=a.getAttribute("data-val")||!0,l=t._fullLayout,s={},u=Le.list(t,null,!0),c="on";if("zoom"===i){var f,h="in"===o?.5:2,d=(1+h)/2,p=(1-h)/2;for(n=0;n<u.length;n++)if(!(r=u[n]).fixedrange)if(f=r._name,"auto"===o)s[f+".autorange"]=!0;else if("reset"===o){if(void 0===r._rangeInitial)s[f+".autorange"]=!0;else{var g=r._rangeInitial.slice();s[f+".range[0]"]=g[0],s[f+".range[1]"]=g[1]}void 0!==r._showSpikeInitial&&(s[f+".showspikes"]=r._showSpikeInitial,"on"!==c||r._showSpikeInitial||(c="off"))}else{var v=[r.r2l(r.range[0]),r.r2l(r.range[1])],m=[d*v[0]+p*v[1],d*v[1]+p*v[0]];s[f+".range[0]"]=r.l2r(m[0]),s[f+".range[1]"]=r.l2r(m[1])}l._cartesianSpikesEnabled=c}else{if("hovermode"!==i||"x"!==o&&"y"!==o){if("hovermode"===i&&"closest"===o){for(n=0;n<u.length;n++)r=u[n],"on"!==c||r.showspikes||(c="off");l._cartesianSpikesEnabled=c}}else o=l._isHoriz?"y":"x",a.setAttribute("data-val",o);s[i]=o}R.call("relayout",t,s)}function x_(t,e){for(var r=e.currentTarget,n=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,i=t._fullLayout._subplots.gl3d,o={},l=n.split("."),s=0;s<i.length;s++)o[i[s]+"."+l[1]]=a;var u="pan"===a?a:"zoom";o.dragmode=u,R.call("relayout",t,o)}function b_(t,e){for(var r=e.currentTarget.getAttribute("data-attr"),n=t._fullLayout,a=n._subplots.gl3d,i={},o=0;o<a.length;o++){var l=a[o],s=l+".camera",u=n[l]._scene;"resetDefault"===r?i[s]=null:"resetLastSave"===r&&(i[s]=ae.extendDeep({},u.cameraInitial))}R.call("relayout",t,i)}function __(t,e){var r=e.currentTarget,n=r._previousVal||!1,a=t.layout,i=t._fullLayout,o=i._subplots.gl3d,l=["xaxis","yaxis","zaxis"],s=["showspikes","spikesides","spikethickness","spikecolor"],u={},c={},f={};if(n)f=ae.extendDeep(a,n),r._previousVal=null;else{f={"allaxes.showspikes":!1};for(var h=0;h<o.length;h++){var d=o[h],p=i[d],g=u[d]={};g.hovermode=p.hovermode,f[d+".hovermode"]=!1;for(var v=0;v<3;v++){var m=l[v];c=g[m]={};for(var y=0;y<s.length;y++){var x=s[y];c[x]=p[m][x]}}}r._previousVal=ae.extendDeep({},u)}R.call("relayout",t,f)}function w_(t,e){for(var r=e.currentTarget,n=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,i=t._fullLayout,o=i._subplots.geo,l=0;l<o.length;l++){var s=o[l],u=i[s];if("zoom"===n){var c=u.projection.scale,f="in"===a?2*c:.5*c;R.call("relayout",t,s+".projection.scale",f)}else"reset"===n&&M_(t,"geo")}}function A_(t){var e,r=t._fullLayout;e=r._has("cartesian")?r._isHoriz?"y":"x":"closest";var n=!t._fullLayout.hovermode&&e;R.call("relayout",t,"hovermode",n)}function M_(t,e){for(var r=t._fullLayout,n=r._subplots[e],a={},i=0;i<n.length;i++)for(var o=n[i],l=r[o]._subplot.viewInitial,s=Object.keys(l),u=0;u<s.length;u++){var c=s[u];a[o+"."+c]=l[c]}R.call("relayout",t,a)}function T_(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}m_.toImage={name:"toImage",title:function(t){return v_(t,"Download plot as a png")},icon:oy.camera,click:function(t){var e="png";ae.notifier(v_(t,"Taking snapshot - this may take a few seconds"),"long"),ae.isIE()&&(ae.notifier(v_(t,"IE only supports svg.  Changing format to svg."),"long"),e="svg"),R.call("downloadImage",t,{format:e}).then(function(e){ae.notifier(v_(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){ae.notifier(v_(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},m_.sendDataToCloud={name:"sendDataToCloud",title:function(t){return v_(t,"Edit in Chart Studio")},icon:oy.disk,click:function(t){Wn.sendDataToCloud(t)}},m_.zoom2d={name:"zoom2d",title:function(t){return v_(t,"Zoom")},attr:"dragmode",val:"zoom",icon:oy.zoombox,click:y_},m_.pan2d={name:"pan2d",title:function(t){return v_(t,"Pan")},attr:"dragmode",val:"pan",icon:oy.pan,click:y_},m_.select2d={name:"select2d",title:function(t){return v_(t,"Box Select")},attr:"dragmode",val:"select",icon:oy.selectbox,click:y_},m_.lasso2d={name:"lasso2d",title:function(t){return v_(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:oy.lasso,click:y_},m_.zoomIn2d={name:"zoomIn2d",title:function(t){return v_(t,"Zoom in")},attr:"zoom",val:"in",icon:oy.zoom_plus,click:y_},m_.zoomOut2d={name:"zoomOut2d",title:function(t){return v_(t,"Zoom out")},attr:"zoom",val:"out",icon:oy.zoom_minus,click:y_},m_.autoScale2d={name:"autoScale2d",title:function(t){return v_(t,"Autoscale")},attr:"zoom",val:"auto",icon:oy.autoscale,click:y_},m_.resetScale2d={name:"resetScale2d",title:function(t){return v_(t,"Reset axes")},attr:"zoom",val:"reset",icon:oy.home,click:y_},m_.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(t){return v_(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:oy.tooltip_basic,gravity:"ne",click:y_},m_.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(t){return v_(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:oy.tooltip_compare,gravity:"ne",click:y_},m_.zoom3d={name:"zoom3d",title:function(t){return v_(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:oy.zoombox,click:x_},m_.pan3d={name:"pan3d",title:function(t){return v_(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:oy.pan,click:x_},m_.orbitRotation={name:"orbitRotation",title:function(t){return v_(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:oy["3d_rotate"],click:x_},m_.tableRotation={name:"tableRotation",title:function(t){return v_(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:oy["z-axis"],click:x_},m_.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(t){return v_(t,"Reset camera to default")},attr:"resetDefault",icon:oy.home,click:b_},m_.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(t){return v_(t,"Reset camera to last save")},attr:"resetLastSave",icon:oy.movie,click:b_},m_.hoverClosest3d={name:"hoverClosest3d",title:function(t){return v_(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:oy.tooltip_basic,gravity:"ne",click:__},m_.zoomInGeo={name:"zoomInGeo",title:function(t){return v_(t,"Zoom in")},attr:"zoom",val:"in",icon:oy.zoom_plus,click:w_},m_.zoomOutGeo={name:"zoomOutGeo",title:function(t){return v_(t,"Zoom out")},attr:"zoom",val:"out",icon:oy.zoom_minus,click:w_},m_.resetGeo={name:"resetGeo",title:function(t){return v_(t,"Reset")},attr:"reset",val:null,icon:oy.autoscale,click:w_},m_.hoverClosestGeo={name:"hoverClosestGeo",title:function(t){return v_(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:oy.tooltip_basic,gravity:"ne",click:A_},m_.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(t){return v_(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:oy.tooltip_basic,gravity:"ne",click:A_},m_.hoverClosestPie={name:"hoverClosestPie",title:function(t){return v_(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:oy.tooltip_basic,gravity:"ne",click:A_},m_.toggleHover={name:"toggleHover",title:function(t){return v_(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:oy.tooltip_basic,gravity:"ne",click:function(t,e){A_(t),__(t,e)}},m_.resetViews={name:"resetViews",title:function(t){return v_(t,"Reset views")},icon:oy.home,click:function(t,e){var r=e.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),y_(t,e),r.setAttribute("data-attr","resetLastSave"),b_(t,e),M_(t,"geo"),M_(t,"mapbox")}},m_.toggleSpikelines={name:"toggleSpikelines",title:function(t){return v_(t,"Toggle Spike Lines")},icon:oy.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout;e._cartesianSpikesEnabled="on"===e._cartesianSpikesEnabled?"off":"on";var r=function(t){for(var e,r,n=t._fullLayout,a=Le.list(t,null,!0),i={},o=0;o<a.length;o++)e=a[o],r=e._name,i[r+".showspikes"]="on"===n._cartesianSpikesEnabled||e._showSpikeInitial;return i}(t);R.call("relayout",t,r)}},m_.resetViewMapbox={name:"resetViewMapbox",title:function(t){return v_(t,"Reset view")},attr:"reset",icon:oy.home,click:function(t){M_(t,"mapbox")}};var k_=T_.prototype;k_.update=function(t,e){this.graphInfo=t;var r=this.graphInfo._context;"hover"===r.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var n=!this.hasButtons(e),a=this.hasLogo!==r.displaylogo;(n||a)&&(this.removeAllButtons(),this.updateButtons(e),r.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},k_.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(t){var r=e.createGroup();t.forEach(function(t){var n=t.name;if(!n)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(n))throw new Error("button name '"+n+"' is taken");e.buttonsNames.push(n);var a=e.createButton(t);e.buttonElements.push(a),r.appendChild(a)}),e.element.appendChild(r)})},k_.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},k_.createButton=function(e){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var a=e.title;void 0===a?a=e.name:"function"==typeof a&&(a=a(this.graphInfo)),(a||0===a)&&n.setAttribute("data-title",a),void 0!==e.attr&&n.setAttribute("data-attr",e.attr);var i=e.val;if(void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),n.setAttribute("data-val",i)),"function"!=typeof e.click)throw new Error("must provide button 'click' function in button config");return n.addEventListener("click",function(t){e.click(r.graphInfo,t),r.updateActiveButton(t.currentTarget)}),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&t.select(n).classed("active",!0),n.appendChild(this.createIcon(e.icon||oy.question,e.name)),n.setAttribute("data-gravity",e.gravity||"n"),n},k_.createIcon=function(t,e){var r=t.ascent-t.descent,n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),i=document.createElementNS(n,"path");a.setAttribute("height","1em"),a.setAttribute("width",t.width/r+"em"),a.setAttribute("viewBox",[0,0,t.width,r].join(" "));var o="toggleSpikelines"===e?"matrix(1.5 0 0 -1.5 0 "+t.ascent+")":"matrix(1 0 0 -1 0 "+t.ascent+")";return i.setAttribute("d",t.path),i.setAttribute("transform",o),a.appendChild(i),a},k_.updateActiveButton=function(e){var r=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var a=e.getAttribute("data-val")||!0,i=e.getAttribute("data-attr"),o="true"===e.getAttribute("data-toggle"),l=t.select(e);if(o)i===n&&l.classed("active",!l.classed("active"));else{var s=null===i?i:ae.nestedProperty(r,i).get();l.classed("active",s===a)}})},k_.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r){if(t[r].length!==e[r].length)return!1;for(var n=0;n<t[r].length;n++)if(t[r][n].name!==e[r][n].name)return!1}return!0},k_.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plot.ly/",e.target="_blank",e.setAttribute("data-title",ae._(this.graphInfo,"Produced with Plotly")),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(oy.plotlylogo)),t.appendChild(e),t},k_.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},k_.destroy=function(){ae.removeElement(this.container.querySelector(".modebar"))};var E_=function(e,r){var n=e._fullLayout,a=new T_({graphInfo:e,container:n._paperdiv.node(),buttons:r});return n._privateplot&&t.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a};var C_={};C_.manage=function(t){var e=t._fullLayout,r=t._context,n=e._modeBar;if(r.displayModeBar){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a,i=r.modeBarButtons;a=Array.isArray(i)&&i.length?function(t){for(var e=0;e<t.length;e++)for(var r=t[e],n=0;n<r.length;n++){var a=r[n];if("string"==typeof a){if(void 0===g_[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[e][n]=g_[a]}}return t}(i):function(t,e,r){var n=t._fullLayout,a=t._fullData,i=n._has("cartesian"),o=n._has("gl3d"),l=n._has("geo"),s=n._has("pie"),u=n._has("gl2d"),c=n._has("ternary"),f=n._has("mapbox"),h=n._has("polar"),d=function(t){for(var e=Le.list({_fullLayout:t},null,!0),r=0;r<e.length;r++)if(!e[r].fixedrange)return!1;return!0}(n),p=[];function g(t){if(t.length){for(var r=[],n=0;n<t.length;n++){var a=t[n];-1===e.indexOf(a)&&r.push(g_[a])}p.push(r)}}g(["toImage","sendDataToCloud"]);var v=[],m=[],y=[],x=[];return(i||u||s||c)+l+o+f+h>1?(m=["toggleHover"],y=["resetViews"]):l?(v=["zoomInGeo","zoomOutGeo"],m=["hoverClosestGeo"],y=["resetGeo"]):o?(m=["hoverClosest3d"],y=["resetCameraDefault3d","resetCameraLastSave3d"]):f?(m=["toggleHover"],y=["resetViewMapbox"]):m=u?["hoverClosestGl2d"]:s?["hoverClosestPie"]:["toggleHover"],i&&(m=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),!i&&!u||d||(v=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==y[0]&&(y=["resetScale2d"])),o?x=["zoom3d","pan3d","orbitRotation","tableRotation"]:(i||u)&&!d||c?x=["zoom2d","pan2d"]:f||l?x=["pan2d"]:h&&(x=["zoom2d"]),function(t){for(var e=!1,r=0;r<t.length&&!e;r++){var n=t[r];n._module&&n._module.selectPoints&&(R.traceIs(n,"scatter-like")?(Zr.hasMarkers(n)||Zr.hasText(n))&&(e=!0):R.traceIs(n,"box-violin")&&"all"!==n.boxpoints&&"all"!==n.points||(e=!0))}return e}(a)&&x.push("select2d","lasso2d"),g(x),g(v.concat(y)),g(m),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var r=0;r<e.length;r++)t.push(e[r]);else t.push(e);return t}(p,r)}(t,r.modeBarButtonsToRemove,r.modeBarButtonsToAdd),n?n.update(t,a):e._modeBar=E_(t,a)}else n&&(n.destroy(),delete e._modeBar)};var S_=function(){var t,e=0,r=!1;function n(e,r){return t.list.push({type:e,data:r?JSON.parse(JSON.stringify(r)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return n("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return n("div_seg",{seg:t,pt:e}),n("chop",{seg:t,pt:e})},statusRemove:function(t){return n("pop_seg",{seg:t})},segmentUpdate:function(t){return n("seg_update",{seg:t})},segmentNew:function(t,e){return n("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return n("rem_seg",{seg:t})},tempStatus:function(t,e,r){return n("temp_status",{seg:t,above:e,below:r})},rewind:function(t){return n("rewind",{seg:t})},status:function(t,e,r){return n("status",{seg:t,above:e,below:r})},vert:function(e){return e===r?t:(r=e,n("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),n("log",{txt:t})},reset:function(){return n("reset")},selected:function(t){return n("selected",{segs:t})},chainStart:function(t){return n("chain_start",{seg:t})},chainRemoveHead:function(t,e){return n("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return n("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return n("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return n("chain_match",{index:t})},chainClose:function(t){return n("chain_close",{index:t})},chainAddHead:function(t,e){return n("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return n("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return n("chain_con",{index1:t,index2:e})},chainReverse:function(t){return n("chain_rev",{index:t})},chainJoin:function(t,e){return n("chain_join",{index1:t,index2:e})},done:function(){return n("done")}}};var L_={toPolygon:function(t,e){function r(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function r(e){var r=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[r]})}for(var n=r(e[0]),a=1;a<e.length;a++)n=t.selectDifference(t.combine(n,r(e[a])));return n}if("Polygon"===e.type)return t.polygon(r(e.coordinates));if("MultiPolygon"===e.type){for(var n=t.segments({inverted:!1,regions:[]}),a=0;a<e.coordinates.length;a++)n=t.selectUnion(t.combine(n,r(e.coordinates[a])));return t.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,r){function n(t,r){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],r)}function a(t){return{region:t,children:[]}}r=t.polygon(t.segments(r));var i=a(null);function o(t,e){for(var r=0;r<t.children.length;r++){if(n(e,(l=t.children[r]).region))return void o(l,e)}var i=a(e);for(r=0;r<t.children.length;r++){var l;n((l=t.children[r]).region,e)&&(i.children.push(l),t.children.splice(r,1),r--)}t.children.push(i)}for(var l=0;l<r.regions.length;l++){var s=r.regions[l];s.length<3||o(i,s)}function u(t,e){for(var r=0,n=t[t.length-1][0],a=t[t.length-1][1],i=[],o=0;o<t.length;o++){var l=t[o][0],s=t[o][1];i.push([l,s]),r+=s*n-l*a,n=l,a=s}return r<0!==e&&i.reverse(),i.push([i[0][0],i[0][1]]),i}var c=[];function f(t){var e=[u(t.region,!1)];c.push(e);for(var r=0;r<t.children.length;r++)e.push(h(t.children[r]))}function h(t){for(var e=0;e<t.children.length;e++)f(t.children[e]);return u(t.region,!0)}for(l=0;l<i.children.length;l++)f(i.children[l]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}},O_={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,r){for(var n=t.root,a=t.root.next;null!==a;){if(r(a))return e.prev=a.prev,e.next=a,a.prev.next=e,void(a.prev=e);n=a,a=a.next}n.next=e,e.prev=n,e.next=null},findTransition:function(e){for(var r=t.root,n=t.root.next;null!==n&&!e(n);)r=n,n=n.next;return{before:r===t.root?null:r,after:n,insert:function(t){return t.prev=r,t.next=n,r.next=t,null!==n&&(n.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}};var R_=function(t,e,r){function n(t,e,n){return{id:r?r.segmentId():-1,start:t,end:e,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var a=O_.create();function i(t,r){a.insertBefore(t,function(n){return function(t,r,n,a,i,o){var l=e.pointsCompare(r,i);return 0!==l?l:e.pointsSame(n,o)?0:t!==a?t?1:-1:e.pointAboveOrOnLine(n,a?i:o,a?o:i)?1:-1}(t.isStart,t.pt,r,n.isStart,n.pt,n.other.pt)<0})}function o(t,e){var r=function(t,e){var r=O_.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return i(r,t.end),r}(t,e);return function(t,e,r){var n=O_.node({isStart:!1,pt:e.end,seg:e,primary:r,other:t,status:null});t.other=n,i(n,t.pt)}(r,t,e),r}function l(t,e){var a=n(e,t.seg.end,t.seg);return function(t,e){r&&r.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,i(t.other,t.pt)}(t,e),o(a,t.primary)}function s(n,i){var o=O_.create();function s(t){return o.findTransition(function(r){var n,a,i,o,l,s;return n=t,a=r.ev,i=n.seg.start,o=n.seg.end,l=a.seg.start,s=a.seg.end,(e.pointsCollinear(i,l,s)?e.pointsCollinear(o,l,s)?1:e.pointAboveOrOnLine(o,l,s)?1:-1:e.pointAboveOrOnLine(i,l,s)?1:-1)>0})}function u(t,n){var a=t.seg,i=n.seg,o=a.start,s=a.end,u=i.start,c=i.end;r&&r.checkIntersection(a,i);var f=e.linesIntersect(o,s,u,c);if(!1===f){if(!e.pointsCollinear(o,s,u))return!1;if(e.pointsSame(o,c)||e.pointsSame(s,u))return!1;var h=e.pointsSame(o,u),d=e.pointsSame(s,c);if(h&&d)return n;var p=!h&&e.pointBetween(o,u,c),g=!d&&e.pointBetween(s,u,c);if(h)return g?l(n,s):l(t,c),n;p&&(d||(g?l(n,s):l(t,c)),l(n,o))}else 0===f.alongA&&(-1===f.alongB?l(t,u):0===f.alongB?l(t,f.pt):1===f.alongB&&l(t,c)),0===f.alongB&&(-1===f.alongA?l(n,o):0===f.alongA?l(n,f.pt):1===f.alongA&&l(n,s));return!1}for(var c=[];!a.isEmpty();){var f=a.getHead();if(r&&r.vert(f.pt[0]),f.isStart){r&&r.segmentNew(f.seg,f.primary);var h=s(f),d=h.before?h.before.ev:null,p=h.after?h.after.ev:null;function g(){if(d){var t=u(f,d);if(t)return t}return!!p&&u(f,p)}r&&r.tempStatus(f.seg,!!d&&d.seg,!!p&&p.seg);var v,m,y=g();if(y)t?(m=null===f.seg.myFill.below||f.seg.myFill.above!==f.seg.myFill.below)&&(y.seg.myFill.above=!y.seg.myFill.above):y.seg.otherFill=f.seg.myFill,r&&r.segmentUpdate(y.seg),f.other.remove(),f.remove();if(a.getHead()!==f){r&&r.rewind(f.seg);continue}t?(m=null===f.seg.myFill.below||f.seg.myFill.above!==f.seg.myFill.below,f.seg.myFill.below=p?p.seg.myFill.above:n,f.seg.myFill.above=m?!f.seg.myFill.below:f.seg.myFill.below):null===f.seg.otherFill&&(v=p?f.primary===p.primary?p.seg.otherFill.above:p.seg.myFill.above:f.primary?i:n,f.seg.otherFill={above:v,below:v}),r&&r.status(f.seg,!!d&&d.seg,!!p&&p.seg),f.other.status=h.insert(O_.node({ev:f}))}else{var x=f.status;if(null===x)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(o.exists(x.prev)&&o.exists(x.next)&&u(x.prev.ev,x.next.ev),r&&r.statusRemove(x.ev.seg),x.remove(),!f.primary){var b=f.seg.myFill;f.seg.myFill=f.seg.otherFill,f.seg.otherFill=b}c.push(f.seg)}a.getHead().remove()}return r&&r.done(),c}return t?{addRegion:function(t){for(var n,a,i,l=t[t.length-1],s=0;s<t.length;s++){n=l,l=t[s];var u=e.pointsCompare(n,l);0!==u&&o((a=u<0?n:l,i=u<0?l:n,{id:r?r.segmentId():-1,start:a,end:i,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(t){return s(t,!1)}}:{calculate:function(t,e,r,a){return t.forEach(function(t){o(n(t.start,t.end,t),!0)}),r.forEach(function(t){o(n(t.start,t.end,t),!1)}),s(e,a)}}};var D_=function(t,e,r){var n=[],a=[];return t.forEach(function(t){var i=t.start,o=t.end;if(e.pointsSame(i,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{r&&r.chainStart(t);for(var l={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},u=l,c=0;c<n.length;c++){var f=(v=n[c])[0],h=(v[1],v[v.length-1]);if(v[v.length-2],e.pointsSame(f,i)){if(M(c,!0,!0))break}else if(e.pointsSame(f,o)){if(M(c,!0,!1))break}else if(e.pointsSame(h,i)){if(M(c,!1,!0))break}else if(e.pointsSame(h,o)&&M(c,!1,!1))break}if(u===l)return n.push([i,o]),void(r&&r.chainNew(i,o));if(u===s){r&&r.chainMatch(l.index);var d=l.index,p=l.matches_pt1?o:i,g=l.matches_head,v=n[d],m=g?v[0]:v[v.length-1],y=g?v[1]:v[v.length-2],x=g?v[v.length-1]:v[0],b=g?v[v.length-2]:v[1];return e.pointsCollinear(y,m,p)&&(g?(r&&r.chainRemoveHead(l.index,p),v.shift()):(r&&r.chainRemoveTail(l.index,p),v.pop()),m=y),e.pointsSame(x,p)?(n.splice(d,1),e.pointsCollinear(b,x,m)&&(g?(r&&r.chainRemoveTail(l.index,m),v.pop()):(r&&r.chainRemoveHead(l.index,m),v.shift())),r&&r.chainClose(l.index),void a.push(v)):void(g?(r&&r.chainAddHead(l.index,p),v.unshift(p)):(r&&r.chainAddTail(l.index,p),v.push(p)))}var _=l.index,w=s.index;r&&r.chainConnect(_,w);var A=n[_].length<n[w].length;l.matches_head?s.matches_head?A?(T(_),k(_,w)):(T(w),k(w,_)):k(w,_):s.matches_head?k(_,w):A?(T(_),k(w,_)):(T(w),k(_,w))}function M(t,e,r){return u.index=t,u.matches_head=e,u.matches_pt1=r,u===l?(u=s,!1):(u=null,!0)}function T(t){r&&r.chainReverse(t),n[t].reverse()}function k(t,a){var i=n[t],o=n[a],l=i[i.length-1],s=i[i.length-2],u=o[0],c=o[1];e.pointsCollinear(s,l,u)&&(r&&r.chainRemoveTail(t,l),i.pop(),l=s),e.pointsCollinear(l,u,c)&&(r&&r.chainRemoveHead(a,u),o.shift()),r&&r.chainJoin(t,a),n[t]=i.concat(o),n.splice(a,1)}}),a};function I_(t,e,r){var n=[];return t.forEach(function(t){var a=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[a]&&n.push({id:r?r.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[a],below:2===e[a]},otherFill:null})}),r&&r.selected(n),n}var P_,F_={union:function(t,e){return I_(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return I_(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return I_(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return I_(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return I_(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}},z_=!1,N_=function(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,r,n){var a=r[0],i=r[1],o=n[0],l=n[1],s=e[0];return(o-a)*(e[1]-i)-(l-i)*(s-a)>=-t},pointBetween:function(e,r,n){var a=e[1]-r[1],i=n[0]-r[0],o=e[0]-r[0],l=n[1]-r[1],s=o*i+a*l;return!(s<t||s-(i*i+l*l)>-t)},pointsSameX:function(e,r){return Math.abs(e[0]-r[0])<t},pointsSameY:function(e,r){return Math.abs(e[1]-r[1])<t},pointsSame:function(t,r){return e.pointsSameX(t,r)&&e.pointsSameY(t,r)},pointsCompare:function(t,r){return e.pointsSameX(t,r)?e.pointsSameY(t,r)?0:t[1]<r[1]?-1:1:t[0]<r[0]?-1:1},pointsCollinear:function(e,r,n){var a=e[0]-r[0],i=e[1]-r[1],o=r[0]-n[0],l=r[1]-n[1];return Math.abs(a*l-o*i)<t},linesIntersect:function(e,r,n,a){var i=r[0]-e[0],o=r[1]-e[1],l=a[0]-n[0],s=a[1]-n[1],u=i*s-o*l;if(Math.abs(u)<t)return!1;var c=e[0]-n[0],f=e[1]-n[1],h=(l*f-s*c)/u,d=(i*f-o*c)/u,p={alongA:0,alongB:0,pt:[e[0]+h*i,e[1]+h*o]};return p.alongA=h<=-t?-2:h<t?-1:h-1<=-t?0:h-1<t?1:2,p.alongB=d<=-t?-2:d<t?-1:d-1<=-t?0:d-1<t?1:2,p},pointInsideRegion:function(e,r){for(var n=e[0],a=e[1],i=r[r.length-1][0],o=r[r.length-1][1],l=!1,s=0;s<r.length;s++){var u=r[s][0],c=r[s][1];c-a>t!=o-a>t&&(i-u)*(a-c)/(o-c)+u-n>t&&(l=!l),i=u,o=c}return l}};return e}();function B_(t,e,r){var n=P_.segments(t),a=P_.segments(e),i=r(P_.combine(n,a));return P_.polygon(i)}P_={buildLog:function(t){return!0===t?z_=S_():!1===t&&(z_=!1),!1!==z_&&z_.list},epsilon:function(t){return N_.epsilon(t)},segments:function(t){var e=R_(!0,N_,z_);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:R_(!1,N_,z_).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:F_.union(t.combined,z_),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:F_.intersect(t.combined,z_),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:F_.difference(t.combined,z_),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:F_.differenceRev(t.combined,z_),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:F_.xor(t.combined,z_),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:D_(t.segments,N_,z_),inverted:t.inverted}},polygonFromGeoJSON:function(t){return L_.toPolygon(P_,t)},polygonToGeoJSON:function(t){return L_.fromPolygon(P_,N_,t)},union:function(t,e){return B_(t,e,P_.selectUnion)},intersect:function(t,e){return B_(t,e,P_.selectIntersect)},difference:function(t,e){return B_(t,e,P_.selectDifference)},differenceRev:function(t,e){return B_(t,e,P_.selectDifferenceRev)},xor:function(t,e){return B_(t,e,P_.selectXor)}},"object"==typeof window&&(window.PolyBool=P_);var j_,U_=P_,V_=Vt.dot,H_=r.BADNUM,q_=j_={};q_.tester=function(t){if(Array.isArray(t[0][0]))return q_.multitester(t);var e,r=t.slice(),n=r[0][0],a=n,i=r[0][1],o=i;for(r.push(r[0]),e=1;e<r.length;e++)n=Math.min(n,r[e][0]),a=Math.max(a,r[e][0]),i=Math.min(i,r[e][1]),o=Math.max(o,r[e][1]);var l,s=!1;5===r.length&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(s=!0,l=function(t){return t[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(s=!0,l=function(t){return t[1]===r[0][1]}));var u=!0,c=r[0];for(e=1;e<r.length;e++)if(c[0]!==r[e][0]||c[1]!==r[e][1]){u=!1;break}return{xmin:n,xmax:a,ymin:i,ymax:o,pts:r,contains:s?function(t,e){var r=t[0],s=t[1];return!(r===H_||r<n||r>a||s===H_||s<i||s>o||e&&l(t))}:function(t,e){var l=t[0],s=t[1];if(l===H_||l<n||l>a||s===H_||s<i||s>o)return!1;var u,c,f,h,d,p=r.length,g=r[0][0],v=r[0][1],m=0;for(u=1;u<p;u++)if(c=g,f=v,g=r[u][0],v=r[u][1],!(l<(h=Math.min(c,g))||l>Math.max(c,g)||s>Math.max(f,v)))if(s<Math.min(f,v))l!==h&&m++;else{if(s===(d=g===c?s:f+(l-c)*(v-f)/(g-c)))return 1!==u||!e;s<=d&&l!==h&&m++}return m%2==1},isRect:s,degenerate:u}},q_.multitester=function(t){for(var e=[],r=t[0][0][0],n=r,a=t[0][0][1],i=a,o=0;o<t.length;o++){var l=q_.tester(t[o]);l.subtract=t[o].subtract,e.push(l),r=Math.min(r,l.xmin),n=Math.max(n,l.xmax),a=Math.min(a,l.ymin),i=Math.max(i,l.ymax)}return{xmin:r,xmax:n,ymin:a,ymax:i,pts:[],contains:function(t,r){for(var n=!1,a=0;a<e.length;a++)e[a].contains(t,r)&&(n=!1===e[a].subtract);return n},isRect:!1,degenerate:!1}};var G_=q_.isSegmentBent=function(t,e,r,n){var a,i,o,l=t[e],s=[t[r][0]-l[0],t[r][1]-l[1]],u=V_(s,s),c=Math.sqrt(u),f=[-s[1]/c,s[0]/c];for(a=e+1;a<r;a++)if(i=[t[a][0]-l[0],t[a][1]-l[1]],(o=V_(i,s))<0||o>u||Math.abs(V_(i,f))>n)return!0;return!1};q_.filter=function(t,e){var r=[t[0]],n=0,a=0;function i(i){t.push(i);var o=r.length,l=n;r.splice(a+1);for(var s=l+1;s<t.length;s++)(s===t.length-1||G_(t,l,s+1,e))&&(r.push(t[s]),r.length<o-2&&(n=s,a=r.length-1),l=s)}t.length>1&&i(t.pop());return{addPt:i,raw:t,filtered:r}};var X_=og.makeEventData,W_=j_.filter,Y_=j_.tester,Z_=j_.multitester,J_=Se.MINSELECT;function Q_(t){return t._id}var $_=function(t,e,r,n,a){var i,o,l,s,u=n.gd,c=u._fullLayout,f=c._zoomlayer,h=n.element.getBoundingClientRect(),d=n.plotinfo,p=d.xaxis._offset,g=d.yaxis._offset,v=e-h.left,m=r-h.top,y=v,x=m,b="M"+v+","+m,_=n.xaxes[0]._length,w=n.yaxes[0]._length,A=n.xaxes.map(Q_),M=n.yaxes.map(Q_),T=n.xaxes.concat(n.yaxes),k=t.altKey;(t.shiftKey||t.altKey)&&d.selection&&d.selection.polygons&&!n.polygons?(n.polygons=d.selection.polygons,n.mergedPolygons=d.selection.mergedPolygons):(!t.shiftKey&&!t.altKey||(t.shiftKey||t.altKey)&&!d.selection)&&(d.selection={},d.selection.polygons=n.polygons=[],d.selection.mergedPolygons=n.mergedPolygons=[]),"lasso"===a&&(i=W_([[v,m]],Se.BENDPX));var E=f.selectAll("path.select-outline-"+d.id).data([1,2]);E.enter().append("path").attr("class",function(t){return"select-outline select-outline-"+t+" select-outline-"+d.id}).attr("transform","translate("+p+", "+g+")").attr("d",b+"Z");var C,S,L,O,R,D,I=f.append("path").attr("class","zoombox-corners").style({fill:Pe.background,stroke:Pe.defaultLine,"stroke-width":1}).attr("transform","translate("+p+", "+g+")").attr("d","M0,0Z"),P=[],F=c._uid+Se.SELECTID,z=[];for(C=0;C<u.calcdata.length;C++)if(!0===(L=(S=u.calcdata[C])[0].trace).visible&&L._module&&L._module.selectPoints)if(n.subplot)L.subplot!==n.subplot&&L.geo!==n.subplot||P.push({selectPoints:L._module.selectPoints,style:L._module.style,cd:S,xaxis:n.xaxes[0],yaxis:n.yaxes[0]});else{if(-1===A.indexOf(L.xaxis))continue;if(-1===M.indexOf(L.yaxis))continue;P.push({selectPoints:L._module.selectPoints,style:L._module.style,cd:S,xaxis:ya.getFromId(u,L.xaxis),yaxis:ya.getFromId(u,L.yaxis)})}function N(t){var e="y"===t._id.charAt(0)?1:0;return function(r){return t.p2d(r[e])}}function B(t,e){return t-e}D=d.fillRangeItems?d.fillRangeItems:"select"===a?function(t,e){var r=t.range={};for(C=0;C<T.length;C++){var n=T[C],a=n._id.charAt(0);r[n._id]=[n.p2d(e[a+"min"]),n.p2d(e[a+"max"])].sort(B)}}:function(t,e,r){var n=t.lassoPoints={};for(C=0;C<T.length;C++){var a=T[C];n[a._id]=r.filtered.map(N(a))}},n.moveFn=function(t,e){y=Math.max(0,Math.min(_,t+v)),x=Math.max(0,Math.min(w,e+m));var r=Math.abs(y-v),c=Math.abs(x-m);"select"===a?c<Math.min(.6*r,J_)?((s=[[v,0],[v,w],[y,w],[y,0]]).xmin=Math.min(v,y),s.xmax=Math.max(v,y),s.ymin=Math.min(0,w),s.ymax=Math.max(0,w),I.attr("d","M"+s.xmin+","+(m-J_)+"h-4v"+2*J_+"h4ZM"+(s.xmax-1)+","+(m-J_)+"h4v"+2*J_+"h-4Z")):r<Math.min(.6*c,J_)?((s=[[0,m],[0,x],[_,x],[_,m]]).xmin=Math.min(0,_),s.xmax=Math.max(0,_),s.ymin=Math.min(m,x),s.ymax=Math.max(m,x),I.attr("d","M"+(v-J_)+","+s.ymin+"v-4h"+2*J_+"v4ZM"+(v-J_)+","+(s.ymax-1)+"v4h"+2*J_+"v-4Z")):((s=[[v,m],[v,x],[y,x],[y,m]]).xmin=Math.min(v,y),s.xmax=Math.max(v,y),s.ymin=Math.min(m,x),s.ymax=Math.max(m,x),I.attr("d","M0,0Z")):"lasso"===a&&(i.addPt([y,x]),s=i.filtered),n.polygons&&n.polygons.length?(l=function(t,e,r){if(r)return U_.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions;return U_.union({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions}(n.mergedPolygons,s,k),s.subtract=k,o=Z_(n.polygons.concat([s]))):(l=[s],o=Y_(s));var f=[];for(C=0;C<l.length;C++){var h=l[C];f.push(h.join("L")+"L"+h[0])}E.attr("d","M"+f.join("M")+"Z"),te.throttle(F,Se.SELECTDELAY,function(){z=[];var t,e,r=[];for(C=0;C<P.length;C++)if(e=(O=P[C]).selectPoints(O,o),r.push(e),t=tw(e,O),z.length)for(var a=0;a<t.length;a++)z.push(t[a]);else z=t;K_(u,P,R={points:z}),D(R,s,i),n.gd.emit("plotly_selecting",R)})},n.clickFn=function(t,e){I.remove(),te.done(F).then(function(){if(te.clear(F),2===t){for(E.remove(),C=0;C<P.length;C++)(O=P[C]).selectPoints(O,!1);K_(u,P),u.emit("plotly_deselect",null)}else u.emit("plotly_selected",void 0);Cg.click(u,e)})},n.doneFn=function(){I.remove(),te.done(F).then(function(){te.clear(F),n.gd.emit("plotly_selected",R),s&&n.polygons&&(s.subtract=k,n.polygons.push(s),n.mergedPolygons.length=0,[].push.apply(n.mergedPolygons,l))})}};function K_(t,e,r){var n,a,i;if(r){var o=r.points||[];for(n=0;n<e.length;n++)(i=e[n].cd[0].trace).selectedpoints=[],i._input.selectedpoints=[];for(n=0;n<o.length;n++){var l=o[n],s=l.data,u=l.fullData;l.pointIndices?([].push.apply(s.selectedpoints,l.pointIndices),[].push.apply(u.selectedpoints,l.pointIndices)):(s.selectedpoints.push(l.pointIndex),u.selectedpoints.push(l.pointIndex))}}else for(n=0;n<e.length;n++)delete(i=e[n].cd[0].trace).selectedpoints,delete i._input.selectedpoints,e[n].cd[0].t&&e[n].cd[0].t.scene&&e[n].cd[0].t.scene.clearSelect();for(n=0;n<e.length;n++)(a=e[n]).style&&a.style(t,a.cd)}function tw(t,e){if(Array.isArray(t))for(var r=e.cd,n=e.cd[0].trace,a=0;a<t.length;a++)t[a]=X_(t[a],n,r);return t}var ew,rw,nw,aw=wr.FROM_TL,iw=ya.doTicks,ow=Le.getFromId,lw=Se.MINDRAG,sw=Se.MINZOOM,uw=0,cw=!0,fw=!0;function hw(t,e,r,n){var a=t.draglayer.selectAll("."+r).data([0]);return a.enter().append(e).classed("drag",!0).classed(r,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id),a.call(cg,n),a.node()}function dw(e,r,n,a,i,o,l){var s=hw(e,"rect",r,n);return t.select(s).call(Jr.setRect,a,i,o,l),s}function pw(t,e){for(var r=0;r<t.length;r++)if(!t[r].fixedrange)return e;return""}function gw(t,e,r,n,a){var i,o,l,s;for(i=0;i<t.length;i++)(o=t[i]).fixedrange||(l=o._rl[0],s=o._rl[1]-l,o.range=[o.l2r(l+s*e),o.l2r(l+s*r)],n[o._name+".range[0]"]=o.range[0],n[o._name+".range[1]"]=o.range[1]);if(a&&a.length){var u=(e+(1-r))/2;gw(a,u,1-u,n)}}function vw(t,e){for(var r=0;r<t.length;r++){var n=t[r];n.fixedrange||(n.range=[n.l2r(n._rl[0]-e/n._m),n.l2r(n._rl[1]-e/n._m)])}}function mw(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function yw(t,e,r,n,a){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+r+", "+n+")").attr("d",a+"Z")}function xw(t,e,r){return t.append("path").attr("class","zoombox-corners").style({fill:Pe.background,stroke:Pe.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+e+", "+r+")").attr("d","M0,0Z")}function bw(t){t.selectAll(".select-outline").remove()}function _w(t,e,r,n,a,i){t.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),ww(t,e,a,i)}function ww(t,e,r,n){r||(t.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function Aw(e){t.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Mw(t){fw&&t.data&&t._context.showTips&&(ae.notifier(ae._(t,"Double-click to zoom back out"),"long"),fw=!1)}function Tw(t){return"lasso"===t||"select"===t}function kw(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,sw)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function Ew(t,e){if(Up){var r=void 0!==t.onwheel?"wheel":"mousewheel";t._onwheel&&t.removeEventListener(r,t._onwheel),t._onwheel=e,t.addEventListener(r,e,{passive:!1})}else void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel&&(t.onmousewheel=e)}var Cw=function(e,r,n,a,i,o,s,u){var c,f,h,d,p,g,v,m,y,x,b,_,w,A=e._fullLayout,M=e._fullLayout._zoomlayer,T=s+u==="nsew",k=1===(s+u).length;function E(){f=[r.xaxis],h=[r.yaxis];var t=f[0],n=h[0];g=t._length,v=n._length;var a,i,o=A._axisConstraintGroups,l=[t._id],M=[n._id];c=[r].concat(s&&u?r.overlays:[]);for(var T=1;T<c.length;T++){var k=c[T].xaxis,E=c[T].yaxis;-1===f.indexOf(k)&&(f.push(k),l.push(k._id)),-1===h.indexOf(E)&&(h.push(E),M.push(E._id))}m=pw(f,u),y=pw(h,s),a=y+m,i=A.dragmode,x=a?"nsew"===a?"pan"===i?"move":"crosshair":a.toLowerCase()+"-resize":"pointer",d=t._offset,p=n._offset;var C=function(t,e,r){var n,a,i,o,l,s,u=!1,c={},f={};for(n=0;n<t.length;n++){for(o=t[n],a=0;a<e.length;a++)if(o[e[a]]){for(l in o)-1===("x"===l.charAt(0)?e:r).indexOf(l)&&(c[l]=1);for(i=0;i<r.length;i++)o[r[i]]&&(u=!0)}for(a=0;a<r.length;a++)if(o[r[a]])for(s in o)-1===("x"===s.charAt(0)?e:r).indexOf(s)&&(f[s]=1)}return u&&(ae.extendFlat(c,f),f={}),{x:c,y:f,xy:u}}(o,l,M);for(var S in b=C.xy,_=[],C.x)_.push(ow(e,S));for(var L in w=[],C.y)w.push(ow(e,L))}E();var C=dw(r,s+u+"drag",x,n,a,i,o),S=!y&&!m;if(S&&!T)return C.onmousedown=null,C.style.pointerEvents="none",C;var L,O,D,I,P,F,z,N,B,j={element:C,gd:e,plotinfo:r,prepFn:function(t,r,n){var a=e._fullLayout.dragmode;S||(T?t.shiftKey?"pan"===a?a="zoom":Tw(a)||(a="pan"):t.ctrlKey&&(a="pan"):a="pan"),j.minDrag="lasso"===a?1:void 0,Tw(a)?(j.xaxes=f,j.yaxes=h,$_(t,r,n,j,a)):S?bw(M):"zoom"===a?(j.moveFn=V,j.doneFn=H,j.minDrag=1,function(t,r,n){var a=C.getBoundingClientRect();L=r-a.left,O=n-a.top,D={l:L,r:L,w:0,t:O,b:O,h:0},I=e._hmpixcount?e._hmlumcount/e._hmpixcount:l(e._fullLayout.plot_bgcolor).getLuminance(),F=!1,z="xy",N=yw(M,I,d,p,P="M0,0H"+g+"V"+v+"H0V0"),B=xw(M,d,p),bw(M)}(0,r,n)):"pan"===a&&(j.moveFn=tt,j.doneFn=rt,bw(M))},clickFn:function(n,a){if(Aw(e),2!==n||k||function(){if(!e._transitioningWithDuration){var t,r,n,a=e._context.doubleClick,i=(m?f:[]).concat(y?h:[]),o={};if("reset+autosize"===a)for(a="autosize",r=0;r<i.length;r++)if((t=i[r])._rangeInitial&&(t.range[0]!==t._rangeInitial[0]||t.range[1]!==t._rangeInitial[1])||!t._rangeInitial&&!t.autorange){a="reset";break}if("autosize"===a)for(r=0;r<i.length;r++)(t=i[r]).fixedrange||(o[t._name+".autorange"]=!0);else if("reset"===a)for((m||b)&&(i=i.concat(_)),y&&!b&&(i=i.concat(w)),b&&(m?y||(i=i.concat(h)):i=i.concat(f)),r=0;r<i.length;r++)(t=i[r])._rangeInitial?(n=t._rangeInitial,o[t._name+".range[0]"]=n[0],o[t._name+".range[1]"]=n[1]):o[t._name+".autorange"]=!0;e.emit("plotly_doubleclick",i),R.call("relayout",e,o)}}(),T)Cg.click(e,a,r.id);else if(1===n&&k){var i=s?h[0]:f[0],o="s"===s||"w"===u?0:1,l=i._name+".range["+o+"]",c=function(e,r){var n,a=e.range[r],i=Math.abs(a-e.range[1-r]);return"date"===e.type?a:"log"===e.type?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,t.format("."+n+"g")(Math.pow(10,a))):(n=Math.floor(Math.log(Math.abs(a))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,t.format("."+String(n)+"g")(a))}(i,o),d="left",p="middle";if(i.fixedrange)return;s?(p="n"===s?"top":"bottom","right"===i.side&&(d="right")):"e"===u&&(d="right"),e._context.showAxisRangeEntryBoxes&&t.select(C).call(Mr.makeEditable,{gd:e,immediate:!0,background:A.paper_bgcolor,text:String(c),fill:i.tickfont?i.tickfont.color:"#444",horizontalAlign:d,verticalAlign:p}).on("edit",function(t){var r=i.d2r(t);void 0!==r&&R.call("relayout",e,l,r)})}}};tg.init(j);var U={};function V(t,r){if(e._transitioningWithDuration)return!1;var n=Math.max(0,Math.min(g,t+L)),a=Math.max(0,Math.min(v,r+O)),i=Math.abs(n-L),o=Math.abs(a-O);function l(){z="",D.r=D.l,D.t=D.b,B.attr("d","M0,0Z")}D.l=Math.min(L,n),D.r=Math.max(L,n),D.t=Math.min(O,a),D.b=Math.max(O,a),b?i>sw||o>sw?(z="xy",i/g>o/v?(o=i*v/g,O>a?D.t=O-o:D.b=O+o):(i=o*g/v,L>n?D.l=L-i:D.r=L+i),B.attr("d",kw(D))):l():!y||o<Math.min(Math.max(.6*i,lw),sw)?i<lw?l():(D.t=0,D.b=v,z="x",B.attr("d",function(t,e){return"M"+(t.l-.5)+","+(e-sw-.5)+"h-3v"+(2*sw+1)+"h3ZM"+(t.r+.5)+","+(e-sw-.5)+"h3v"+(2*sw+1)+"h-3Z"}(D,O))):!m||i<Math.min(.6*o,sw)?(D.l=0,D.r=g,z="y",B.attr("d",function(t,e){return"M"+(e-sw-.5)+","+(t.t-.5)+"v-3h"+(2*sw+1)+"v3ZM"+(e-sw-.5)+","+(t.b+.5)+"v3h"+(2*sw+1)+"v-3Z"}(D,L))):(z="xy",B.attr("d",kw(D))),D.w=D.r-D.l,D.h=D.b-D.t,_w(N,B,D,P,F,I),F=!0}function H(){if(Math.min(D.h,D.w)<2*lw)return Aw(e);"xy"!==z&&"x"!==z||gw(f,D.l/g,D.r/g,U,_),"xy"!==z&&"y"!==z||gw(h,(v-D.b)/v,(v-D.t)/v,U,w),Aw(e),rt(),Mw(e)}var q=[0,0,g,v],G=null,X=Se.REDRAWDELAY,W=r.mainplot?A._plots[r.mainplot]:r;function Y(t){if("touch"!=t){if(!e._context.scrollZoom&&!A._enablescrollzoom)return;if(null===G&&bw(M),e._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();var r=e.querySelector(".plotly");if(E(),r.scrollHeight-r.clientHeight>10||r.scrollWidth-r.clientWidth>10)return;clearTimeout(G);var n,a=-t.deltaY;if(isFinite(a)||(a=t.wheelDelta/10),!isFinite(a))return void ae.log("Did not find wheel motion attributes: ",t);if(t.touches)var i=Math.exp(-Math.min(Math.max(a,-20),20)/100),o=W.draglayer.select(".nsewdrag").node().getBoundingClientRect(),l=((rw[0]+ew[0])/2-o.left)/o.width,c=(o.bottom-(rw[1]+ew[1])/2)/o.height;else i=Math.exp(-Math.min(Math.max(a,-20),20)/100),o=W.draglayer.select(".nsewdrag").node().getBoundingClientRect(),l=(t.clientX-o.left)/o.width,c=(o.bottom-t.clientY)/o.height;function d(t,e,r){if(!t.fixedrange){var n=ae.simpleMap(t.range,t.r2l),a=n[0]+(n[1]-n[0])*e;t.range=n.map(function(e){return t.l2r(a+(e-a)*r)})}}if(u||b){for(u||(l=.5),n=0;n<f.length;n++)d(f[n],l,i);q[2]*=i,q[0]+=q[2]*l*(1/i-1)}if(s||b){for(s||(c=.5),n=0;n<h.length;n++)d(h[n],c,i);q[3]*=i,q[1]+=q[3]*(1-c)*(1/i-1)}return nt(q),et(s,u),t.touches||(G=setTimeout(function(){q=[0,0,g,v],rt()},X)),void t.preventDefault()}cw&&(G=setTimeout(function(){q=[0,0,g,v],rt()},X))}for(var Z=document.getElementsByClassName("nsewdrag"),J=0;J<Z.length;J++)Z[J].onpinchstart||(C.addEventListener("touchstart",Q),C.addEventListener("touchmove",$),C.addEventListener("touchend",K),C.onpinchstart=Q);function Q(t){cw=!1}function $(t){if(2==t.touches.length&&!nw){nw=!0,ew=[t.touches[0].clientX,t.touches[0].clientY],rw=[t.touches[1].clientX,t.touches[1].clientY];var e=Math.pow(ew[0]-rw[0],2),r=Math.pow(rw[1]-ew[1],2);uw=Math.sqrt(e+r)}if(2==t.touches.length){rw=[t.touches[1].clientX,t.touches[1].clientY],e=Math.pow(ew[0]-rw[0],2),r=Math.pow(rw[1]-ew[1],2);var n=Math.sqrt(e+r);n-uw>=30?(uw=n,t.deltaY=-100,t.wheelDelta=12,Y(t)):n-uw<=-30&&(uw=n,t.deltaY=100,t.wheelDelta=-12,Y(t))}}function K(t){nw&&(nw=!1,cw=!0,Y("touch"))}function tt(t,r){if(!e._transitioningWithDuration){if(E(),"ew"===m||"ns"===y)return m&&vw(f,t),y&&vw(h,r),nt([m?-t:0,y?-r:0,g,v]),void et(y,m);if(b&&m&&y){var n="w"===m==("n"===y)?1:-1,a=(t/g+n*r/v)/2;t=a*g,r=n*a*v}"w"===m?t=s(f,0,t):"e"===m?t=s(f,1,-t):m||(t=0),"n"===y?r=s(h,1,r):"s"===y?r=s(h,0,-r):y||(r=0);var i="w"===m?t:0,o="n"===y?r:0;if(b){var l;if(!m&&1===y.length){for(l=0;l<f.length;l++)f[l].range=f[l]._r.slice(),Ig(f[l],1-r/v);i=(t=r*g/v)/2}if(!y&&1===m.length){for(l=0;l<h.length;l++)h[l].range=h[l]._r.slice(),Ig(h[l],1-t/g);o=(r=t*v/g)/2}}nt([i,o,g-t,v-r]),et(y,m)}function s(t,e,r){for(var n,a,i=1-e,o=0;o<t.length;o++){var l=t[o];if(!l.fixedrange){n=l,a=l._rl[i]+(l._rl[e]-l._rl[i])/mw(r/l._length);var s=l.l2r(a);!1!==s&&void 0!==s&&(l.range[e]=s)}}return n._length*(n._rl[e]-a)/(n._rl[e]-n._rl[i])}}function et(t,r){var n,a=[];function i(t){for(n=0;n<t.length;n++)t[n].fixedrange||a.push(t[n]._id)}for((r||b)&&(i(f),i(_)),(t||b)&&(i(h),i(w)),U={},n=0;n<a.length;n++){var o=a[n];iw(e,o,!0);var l=ow(e,o);U[l._name+".range[0]"]=l.range[0],U[l._name+".range[1]"]=l.range[1]}function s(i,o,l){for(n=0;n<i.length;n++){var s=i[n];if((r&&-1!==a.indexOf(s.xref)||t&&-1!==a.indexOf(s.yref))&&(o(e,n),l))return}}s(A.annotations||[],R.getComponentMethod("annotations","drawOne")),s(A.shapes||[],R.getComponentMethod("shapes","drawOne")),s(A.images||[],R.getComponentMethod("images","draw"),!0)}function rt(){g=f[0]._length,v=h[0]._length,nt([0,0,g,v]),ae.syncOrAsync([Wn.previousPromises,function(){R.call("relayout",e,U)}],e)}function nt(t){var e,r,n,a,i,o=A._plots,l=Object.keys(o),c=t[2]/f[0]._length,d=t[3]/h[0]._length,p=u||b,g=s||b;function v(t){return t.fixedrange?0:p&&-1!==_.indexOf(t)?c:g&&-1!==(b?_:w).indexOf(t)?d:0}function m(t,e){return e?(t.range=t._r.slice(),Ig(t,e),y(t,e)):0}function y(t,e){return t._length*(1-e)*aw[t.constraintoward||"middle"]}for(A._glcanvas&&A._glcanvas.size()&&A._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0})}),e=0;e<l.length;e++){var x=o[l[e]],M=x.xaxis,T=x.yaxis,k=p&&!M.fixedrange&&-1!==f.indexOf(M),E=g&&!T.fixedrange&&-1!==h.indexOf(T);if(x._scene&&x._scene.update){var C=ae.simpleMap(M.range,M.r2l),S=ae.simpleMap(T.range,T.r2l);x._scene.update({range:[C[0],S[0],C[1],S[1]]})}if(k?(r=c,a=u?t[0]:y(M,r)):a=m(M,r=v(M)),E?(n=d,i=s?t[1]:y(T,n)):i=m(T,n=v(T)),r||n){r||(r=1),n||(n=1);var L=M._offset-a/r,O=T._offset-i/n;A._defs.select("#"+x.clipId+"> rect").call(Jr.setTranslate,a,i).call(Jr.setScale,r,n);var R=x.plot.selectAll(".scatterlayer .trace, .boxlayer .trace, .violinlayer .trace");x.plot.call(Jr.setTranslate,L,O).call(Jr.setScale,1/r,1/n),R.selectAll(".point").call(Jr.setPointGroupScale,r,n),R.selectAll(".textpoint").call(Jr.setTextPointsScale,r,n),R.call(Jr.hideOutsideRangePoints,x),x.plot.selectAll(".barlayer .trace").call(Jr.hideOutsideRangePoints,x,".bartext")}}}return s.length*u.length!=1&&Ew(C,Y),C},Sw=function(e){var r=e._fullLayout;if(e._context.staticPlot)t.select(e).selectAll(".drag").remove();else if(r._has("cartesian")||r._has("gl2d")){Object.keys(r._plots||{}).sort(function(t,e){if((r._plots[t].mainplot&&!0)===(r._plots[e].mainplot&&!0)){var n=t.split("y"),a=e.split("y");return n[0]===a[0]?Number(n[1]||1)-Number(a[1]||1):Number(n[0]||1)-Number(a[0]||1)}return r._plots[t].mainplot?1:-1}).forEach(function(t){var n=r._plots[t],a=n.xaxis,i=n.yaxis,o=Se.DRAGGERSIZE;if(!n.mainplot){var l=!0,s=Cw(e,n,a._offset,i._offset,a._length,i._length,"ns","ew"),u=!1;s.onmousemove=function(r){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===t&&Cg.hover(e,r,t)},Cg.hover(e,r,t),e._fullLayout._lasthover=s,e._fullLayout._hoversubplot=t};for(var c=document.getElementsByClassName("nsewdrag"),f=0;f<c.length;f++)c[f].ontouchselect||(s.addEventListener("touchstart",function(r){u?(clearTimeout(u),u=null,tg.unhover(e,r)):u=setTimeout(function(){u=null,l&&fx.hover(e,r,t)},200)}),s.addEventListener("touchmove",function(t){l=!1,tg.unhover(e,t)}),s.addEventListener("touchend",function(t){l=!0}),s.ontouchselect=!0);s.onmouseout=function(t){e._dragging||(e._fullLayout._hoversubplot=null,tg.unhover(e,t))},e._context.showAxisDragHandles&&(Cw(e,n,a._offset-o,i._offset-o,o,o,"n","w"),Cw(e,n,a._offset+a._length,i._offset-o,o,o,"n","e"),Cw(e,n,a._offset-o,i._offset+i._length,o,o,"s","w"),Cw(e,n,a._offset+a._length,i._offset+i._length,o,o,"s","e"))}if(e._context.showAxisDragHandles){if(t===a._mainSubplot){var h=a._mainLinePosition;"top"===a.side&&(h-=o),Cw(e,n,a._offset+.1*a._length,h,.8*a._length,o,"","ew"),Cw(e,n,a._offset,h,.1*a._length,o,"","w"),Cw(e,n,a._offset+.9*a._length,h,.1*a._length,o,"","e")}if(t===i._mainSubplot){var d=i._mainLinePosition;"right"!==i.side&&(d-=o),Cw(e,n,d,i._offset+.1*i._length,o,.8*i._length,"ns",""),Cw(e,n,d,i._offset+.9*i._length,o,.1*i._length,"s",""),Cw(e,n,d,i._offset,o,.1*i._length,"n","")}}});var n=r._hoverlayer.node();n.onmousemove=function(t){t.target=r._lasthover,Cg.hover(e,t,r._hoversubplot)},n.onclick=function(t){t.target=r._lasthover,Cg.click(e,t)},n.onmousedown=function(t){r._lasthover.onmousedown(t)}}},Lw={};function Ow(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function Rw(t,e,r){if(!r.showline||!r._lw)return!1;if("all"===r.mirror||"allticks"===r.mirror)return!0;var n=r._anchorAxis;if(!n)return!1;var a=wr.FROM_BL[e];return r.side===e?n.domain[a]===t.domain[a]:r.mirror&&n.domain[1-a]===t.domain[1-a]}function Dw(t,e,r,n){if(Rw(t,e,r))return r._lw;for(var a=0;a<n.length;a++){var i=n[a];if(i._mainAxis===r._mainAxis&&Rw(t,e,i))return i._lw}return 0}Lw.layoutStyles=function(t){return ae.syncOrAsync([Wn.doAutoMargin,Lw.lsInner],t)},Lw.lsInner=function(e){var r,n=e._fullLayout,a=n._size,i=a.p,o=ya.list(e),l=n._has("cartesian");function s(t,e,r){var n=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===r?e._offset-i-n:e._offset+e._length+i+n:a.t+a.h*(1-(t.position||0))+n%1:e?"right"===r?e._offset+e._length+i+n:e._offset-i-n:a.l+a.w*(t.position||0)+n%1}for(r=0;r<o.length;r++){var u=o[r];u.setScale();var c=u._anchorAxis;u._linepositions={},u._lw=Jr.crispRound(e,u.linewidth,1),u._mainLinePosition=s(u,c,u.side),u._mainMirrorPosition=u.mirror&&c?s(u,c,wr.OPPOSITE_SIDE[u.side]):null}n._paperdiv.style({width:n.width+"px",height:n.height+"px"}).selectAll(".main-svg").call(Jr.setSize,n.width,n.height),e._context.setBackground(e,n.paper_bgcolor);var f=n._paper.selectAll("g.subplot"),h=[],d=[];f.each(function(t){var e=n._plots[t];if(e.mainplot)return e.bg&&e.bg.remove(),void(e.bg=void 0);var r=e.xaxis.domain,a=e.yaxis.domain,i=[];!function(t,e,r){for(var n=0;n<r.length;n++){var a=r[n][0],i=r[n][1];if(!(a[0]>=t[1]||a[1]<=t[0])&&i[0]<e[1]&&i[1]>e[0])return!0}return!1}(r,a,d)?(h.push(t),d.push([r,a])):i=[0];var o=e.plotgroup.selectAll(".bg").data(i);o.enter().append("rect").classed("bg",!0),o.exit().remove(),o.each(function(){e.bg=o;var t=e.plotgroup.node();t.insertBefore(this,t.childNodes[0])})});var p=n._bgLayer.selectAll(".bg").data(h);return p.enter().append("rect").classed("bg",!0),p.exit().remove(),p.each(function(e){n._plots[e].bg=t.select(this)}),f.each(function(t){var e=n._plots[t],a=e.xaxis,u=e.yaxis;e.bg&&l&&e.bg.call(Jr.setRect,a._offset-i,u._offset-i,a._length+2*i,u._length+2*i).call(Pe.fill,n.plot_bgcolor).style("stroke-width",0),e.clipId="clip"+n._uid+t+"plot";var c,f,h=n._clips.selectAll("#"+e.clipId).data([0]);for(h.enter().append("clipPath").attr({class:"plotclip",id:e.clipId}).append("rect"),h.selectAll("rect").attr({width:a._length,height:u._length}),Jr.setTranslate(e.plot,a._offset,u._offset),e._hasClipOnAxisFalse?(c=null,f=e.clipId):(c=e.clipId,f=null),Jr.setClipUrl(e.plot,c),r=0;r<Se.traceLayerClasses.length;r++){var d=Se.traceLayerClasses[r];"scatterlayer"!==d&&"barlayer"!==d&&e.plot.selectAll("g."+d).call(Jr.setClipUrl,f)}if(e.layerClipId=f,l){var p,g,v,m,y,x,b,_,w,A,M,T,k,E="M0,0";Ow(a,t)&&(y=Dw(a,"left",u,o),p=a._offset-(y?i+y:0),x=Dw(a,"right",u,o),g=a._offset+a._length+(x?i+x:0),v=s(a,u,"bottom"),m=s(a,u,"top"),(k=!a._anchorAxis||t!==a._mainSubplot)&&a.ticks&&"allticks"===a.mirror&&(a._linepositions[t]=[v,m]),E=O(a,S,function(t){return"M"+a._offset+","+t+"h"+a._length}),k&&a.showline&&("all"===a.mirror||"allticks"===a.mirror)&&(E+=S(v)+S(m)),e.xlines.style("stroke-width",a._lw+"px").call(Pe.stroke,a.showline?a.linecolor:"rgba(0,0,0,0)")),e.xlines.attr("d",E);var C="M0,0";Ow(u,t)&&(M=Dw(u,"bottom",a,o),b=u._offset+u._length+(M?i:0),T=Dw(u,"top",a,o),_=u._offset-(T?i:0),w=s(u,a,"left"),A=s(u,a,"right"),(k=!u._anchorAxis||t!==a._mainSubplot)&&u.ticks&&"allticks"===u.mirror&&(u._linepositions[t]=[w,A]),C=O(u,L,function(t){return"M"+t+","+u._offset+"v"+u._length}),k&&u.showline&&("all"===u.mirror||"allticks"===u.mirror)&&(C+=L(w)+L(A)),e.ylines.style("stroke-width",u._lw+"px").call(Pe.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")),e.ylines.attr("d",C)}function S(t){return"M"+p+","+t+"H"+g}function L(t){return"M"+t+","+_+"V"+b}function O(e,r,n){if(!e.showline||t!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);var a=r(e._mainLinePosition);return e.mirror&&(a+=r(e._mainMirrorPosition)),a}}),ya.makeClipPaths(e),Lw.drawMainTitle(e),C_.manage(e),e._promises.length&&Promise.all(e._promises)},Lw.drawMainTitle=function(t){var e=t._fullLayout;oa.draw(t,"gtitle",{propContainer:e,propName:"title",placeholder:e._dfltTitle.plot,attributes:{x:e.width/2,y:e._size.t/2,"text-anchor":"middle"}})},Lw.doTraceStyle=function(t){for(var e=0;e<t.calcdata.length;e++){var r=t.calcdata[e],n=(((r[0]||{}).trace||{})._module||{}).arraysToCalcdata;n&&n(r,r[0].trace)}return Wn.style(t),R.getComponentMethod("legend","draw")(t),Wn.previousPromises(t)},Lw.doColorBars=function(t){for(var e=0;e<t.calcdata.length;e++){var r=t.calcdata[e][0];if((r.t||{}).cb){var n=r.trace,a=r.t.cb;R.traceIs(n,"contour")&&a.line({width:!1!==n.contours.showlines?n.line.width:0,dash:n.line.dash,color:"line"===n.contours.coloring?a._opts.line.color:n.line.color}),R.traceIs(n,"markerColorscale")?a.options(n.marker.colorbar)():a.options(n.colorbar)()}}return Wn.previousPromises(t)},Lw.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,R.call("plot",t,"",e)},Lw.doLegend=function(t){return R.getComponentMethod("legend","draw")(t),Wn.previousPromises(t)},Lw.doTicksRelayout=function(t){return ya.doTicks(t,"redraw"),Lw.drawMainTitle(t),Wn.previousPromises(t)},Lw.doModeBar=function(t){var e=t._fullLayout;C_.manage(t),Sw(t);for(var r=0;r<e._basePlotModules.length;r++){var n=e._basePlotModules[r].updateFx;n&&n(e)}return Wn.previousPromises(t)},Lw.doCamera=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,n=0;n<r.length;n++){var a=e[r[n]];a._scene.setCamera(a.camera)}};var Iw={},Pw=ae.extendDeepAll,Fw=wr.MID_SHIFT,zw=Iw={version:"0.2.2"};zw.Axis=function(){var e,r,n,a,i={data:[],layout:{}},o={},l={},s=t.dispatch("hover"),u={};return u.render=function(o){return function(o){r=o||r;var s=i.data,u=i.layout;("string"==typeof r||r.nodeName)&&(r=t.select(r)),r.datum(s).each(function(r,i){var o=r.slice();l={data:zw.util.cloneJson(o),layout:zw.util.cloneJson(u)};var s=0;o.forEach(function(e,r){e.color||(e.color=u.defaultColorRange[s],s=(s+1)%u.defaultColorRange.length),e.strokeColor||(e.strokeColor="LinePlot"===e.geometry?e.color:t.rgb(e.color).darker().toString()),l.data[r].color=e.color,l.data[r].strokeColor=e.strokeColor,l.data[r].strokeDash=e.strokeDash,l.data[r].strokeSize=e.strokeSize});var c=o.filter(function(t,e){var r=t.visible;return void 0===r||!0===r}),f=!1,h=c.map(function(t,e){return f=f||void 0!==t.groupId,t});if(f){var d=[],p=t.nest().key(function(t,e){return void 0!==t.groupId?t.groupId:"unstacked"}).entries(h).map(function(t,e){if("unstacked"===t.key)return t.values;var r=t.values[0].r.map(function(t,e){return 0});return t.values.forEach(function(t,e,n){t.yStack=[r],d.push(r),r=zw.util.sumArrays(t.r,r)}),t.values});c=t.merge(p)}c.forEach(function(t,e){t.t=Array.isArray(t.t[0])?t.t:[t.t],t.r=Array.isArray(t.r[0])?t.r:[t.r]});var g=Math.min(u.width-u.margin.left-u.margin.right,u.height-u.margin.top-u.margin.bottom)/2;g=Math.max(10,g);var v,m=[u.margin.left+g,u.margin.top+g];v=f?[0,t.max(zw.util.sumArrays(zw.util.arrayLast(c).r[0],zw.util.arrayLast(d)))]:t.extent(zw.util.flattenArray(c.map(function(t,e){return t.r}))),u.radialAxis.domain!=zw.DATAEXTENT&&(v[0]=0),n=t.scale.linear().domain(u.radialAxis.domain!=zw.DATAEXTENT&&u.radialAxis.domain?u.radialAxis.domain:v).range([0,g]),l.layout.radialAxis.domain=n.domain();var y,x=zw.util.flattenArray(c.map(function(t,e){return t.t})),b="string"==typeof x[0];b&&(x=zw.util.deduplicate(x),y=x.slice(),x=t.range(x.length),c=c.map(function(t,e){var r=t;return t.t=[x],f&&(r.yStack=t.yStack),r}));var _=c.filter(function(t,e){return"LinePlot"===t.geometry||"DotPlot"===t.geometry}).length===c.length,w=null===u.needsEndSpacing?b||!_:u.needsEndSpacing,A=u.angularAxis.domain&&u.angularAxis.domain!=zw.DATAEXTENT&&!b&&u.angularAxis.domain[0]>=0?u.angularAxis.domain:t.extent(x),M=Math.abs(x[1]-x[0]);_&&!b&&(M=0);var T=A.slice();w&&b&&(T[1]+=M);var k=u.angularAxis.ticksCount||4;k>8&&(k=k/(k/8)+k%8),u.angularAxis.ticksStep&&(k=(T[1]-T[0])/k);var E=u.angularAxis.ticksStep||(T[1]-T[0])/(k*(u.minorTicks+1));y&&(E=Math.max(Math.round(E),1)),T[2]||(T[2]=E);var C=t.range.apply(this,T);if(C=C.map(function(t,e){return parseFloat(t.toPrecision(12))}),a=t.scale.linear().domain(T.slice(0,2)).range("clockwise"===u.direction?[0,360]:[360,0]),l.layout.angularAxis.domain=a.domain(),l.layout.angularAxis.endPadding=w?M:0,void 0===(e=t.select(this).select("svg.chart-root"))||e.empty()){var S=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),L=this.appendChild(this.ownerDocument.importNode(S.documentElement,!0));e=t.select(L)}e.select(".guides-group").style({"pointer-events":"none"}),e.select(".angular.axis-group").style({"pointer-events":"none"}),e.select(".radial.axis-group").style({"pointer-events":"none"});var O,R=e.select(".chart-group"),D={fill:"none",stroke:u.tickColor},I={"font-size":u.font.size,"font-family":u.font.family,fill:u.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(t,e){return" "+t+" 0 "+u.font.outlineColor}).join(",")};if(u.showLegend){O=e.select(".legend-group").attr({transform:"translate("+[g,u.margin.top]+")"}).style({display:"block"});var P=c.map(function(t,e){var r=zw.util.cloneJson(t);return r.symbol="DotPlot"===t.geometry?t.dotType||"circle":"LinePlot"!=t.geometry?"square":"line",r.visibleInLegend=void 0===t.visibleInLegend||t.visibleInLegend,r.color="LinePlot"===t.geometry?t.strokeColor:t.color,r});zw.Legend().config({data:c.map(function(t,e){return t.name||"Element"+e}),legendConfig:Pw({},zw.Legend.defaultConfig().legendConfig,{container:O,elements:P,reverseOrder:u.legend.reverseOrder})})();var F=O.node().getBBox();g=Math.min(u.width-F.width-u.margin.left-u.margin.right,u.height-u.margin.top-u.margin.bottom)/2,g=Math.max(10,g),m=[u.margin.left+g,u.margin.top+g],n.range([0,g]),l.layout.radialAxis.domain=n.domain(),O.attr("transform","translate("+[m[0]+g,m[1]-g]+")")}else O=e.select(".legend-group").style({display:"none"});e.attr({width:u.width,height:u.height}).style({opacity:u.opacity}),R.attr("transform","translate("+m+")").style({cursor:"crosshair"});var z=[(u.width-(u.margin.left+u.margin.right+2*g+(F?F.width:0)))/2,(u.height-(u.margin.top+u.margin.bottom+2*g))/2];if(z[0]=Math.max(0,z[0]),z[1]=Math.max(0,z[1]),e.select(".outer-group").attr("transform","translate("+z+")"),u.title){var N=e.select("g.title-group text").style(I).text(u.title),B=N.node().getBBox();N.attr({x:m[0]-B.width/2,y:m[1]-g-20})}var j=e.select(".radial.axis-group");if(u.radialAxis.gridLinesVisible){var U=j.selectAll("circle.grid-circle").data(n.ticks(5));U.enter().append("circle").attr({class:"grid-circle"}).style(D),U.attr("r",n),U.exit().remove()}j.select("circle.outside-circle").attr({r:g}).style(D);var V=e.select("circle.background-circle").attr({r:g}).style({fill:u.backgroundColor,stroke:u.stroke});function H(t,e){return a(t)%360+u.orientation}if(u.radialAxis.visible){var q=t.svg.axis().scale(n).ticks(5).tickSize(5);j.call(q).attr({transform:"rotate("+u.radialAxis.orientation+")"}),j.selectAll(".domain").style(D),j.selectAll("g>text").text(function(t,e){return this.textContent+u.radialAxis.ticksSuffix}).style(I).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(t,e){return"horizontal"===u.radialAxis.tickOrientation?"rotate("+-u.radialAxis.orientation+") translate("+[0,I["font-size"]]+")":"translate("+[0,I["font-size"]]+")"}}),j.selectAll("g>line").style({stroke:"black"})}var G=e.select(".angular.axis-group").selectAll("g.angular-tick").data(C),X=G.enter().append("g").classed("angular-tick",!0);G.attr({transform:function(t,e){return"rotate("+H(t)+")"}}).style({display:u.angularAxis.visible?"block":"none"}),G.exit().remove(),X.append("line").classed("grid-line",!0).classed("major",function(t,e){return e%(u.minorTicks+1)==0}).classed("minor",function(t,e){return!(e%(u.minorTicks+1)==0)}).style(D),X.selectAll(".minor").style({stroke:u.minorTickColor}),G.select("line.grid-line").attr({x1:u.tickLength?g-u.tickLength:0,x2:g}).style({display:u.angularAxis.gridLinesVisible?"block":"none"}),X.append("text").classed("axis-text",!0).style(I);var W=G.select("text.axis-text").attr({x:g+u.labelOffset,dy:Fw+"em",transform:function(t,e){var r=H(t),n=g+u.labelOffset,a=u.angularAxis.tickOrientation;return"horizontal"==a?"rotate("+-r+" "+n+" 0)":"radial"==a?r<270&&r>90?"rotate(180 "+n+" 0)":null:"rotate("+(r<=180&&r>0?-90:90)+" "+n+" 0)"}}).style({"text-anchor":"middle",display:u.angularAxis.labelsVisible?"block":"none"}).text(function(t,e){return e%(u.minorTicks+1)!=0?"":y?y[t]+u.angularAxis.ticksSuffix:t+u.angularAxis.ticksSuffix}).style(I);u.angularAxis.rewriteTicks&&W.text(function(t,e){return e%(u.minorTicks+1)!=0?"":u.angularAxis.rewriteTicks(this.textContent,e)});var Y=t.max(R.selectAll(".angular-tick text")[0].map(function(t,e){return t.getCTM().e+t.getBBox().width}));O.attr({transform:"translate("+[g+Y,u.margin.top]+")"});var Z=e.select("g.geometry-group").selectAll("g").size()>0,J=e.select("g.geometry-group").selectAll("g.geometry").data(c);if(J.enter().append("g").attr({class:function(t,e){return"geometry geometry"+e}}),J.exit().remove(),c[0]||Z){var Q=[];c.forEach(function(t,e){var r={};r.radialScale=n,r.angularScale=a,r.container=J.filter(function(t,r){return r==e}),r.geometry=t.geometry,r.orientation=u.orientation,r.direction=u.direction,r.index=e,Q.push({data:t,geometryConfig:r})});var $=[];t.nest().key(function(t,e){return void 0!==t.data.groupId||"unstacked"}).entries(Q).forEach(function(t,e){"unstacked"===t.key?$=$.concat(t.values.map(function(t,e){return[t]})):$.push(t.values)}),$.forEach(function(t,e){var r;r=Array.isArray(t)?t[0].geometryConfig.geometry:t.geometryConfig.geometry;var n=t.map(function(t,e){return Pw(zw[r].defaultConfig(),t)});zw[r]().config(n)()})}var K,tt,et=e.select(".guides-group"),rt=e.select(".tooltips-group"),nt=zw.tooltipPanel().config({container:rt,fontSize:8})(),at=zw.tooltipPanel().config({container:rt,fontSize:8})(),it=zw.tooltipPanel().config({container:rt,hasTick:!0})();if(!b){var ot=et.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});R.on("mousemove.angular-guide",function(t,e){var r=zw.util.getMousePos(V).angle;ot.attr({x2:-g,transform:"rotate("+r+")"}).style({opacity:.5});var n=(r+180+360-u.orientation)%360;K=a.invert(n);var i=zw.util.convertToCartesian(g+12,r+180);nt.text(zw.util.round(K)).move([i[0]+m[0],i[1]+m[1]])}).on("mouseout.angular-guide",function(t,e){et.select("line").style({opacity:0})})}var lt=et.select("circle").style({stroke:"grey",fill:"none"});R.on("mousemove.radial-guide",function(t,e){var r=zw.util.getMousePos(V).radius;lt.attr({r:r}).style({opacity:.5}),tt=n.invert(zw.util.getMousePos(V).radius);var a=zw.util.convertToCartesian(r,u.radialAxis.orientation);at.text(zw.util.round(tt)).move([a[0]+m[0],a[1]+m[1]])}).on("mouseout.radial-guide",function(t,e){lt.style({opacity:0}),it.hide(),nt.hide(),at.hide()}),e.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(r,n){var a=t.select(this),i=this.style.fill,o="black",l=this.style.opacity||1;if(a.attr({"data-opacity":l}),i&&"none"!==i){a.attr({"data-fill":i}),o=t.hsl(i).darker().toString(),a.style({fill:o,opacity:1});var s={t:zw.util.round(r[0]),r:zw.util.round(r[1])};b&&(s.t=y[r[0]]);var u="t: "+s.t+", r: "+s.r,c=this.getBoundingClientRect(),f=e.node().getBoundingClientRect(),h=[c.left+c.width/2-z[0]-f.left,c.top+c.height/2-z[1]-f.top];it.config({color:o}).text(u),it.move(h)}else i=this.style.stroke||"black",a.attr({"data-stroke":i}),o=t.hsl(i).darker().toString(),a.style({stroke:o,opacity:1})}).on("mousemove.tooltip",function(e,r){if(0!=t.event.which)return!1;t.select(this).attr("data-fill")&&it.show()}).on("mouseout.tooltip",function(e,r){it.hide();var n=t.select(this),a=n.attr("data-fill");a?n.style({fill:a,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})})}(o),this},u.config=function(t){if(!arguments.length)return i;var e=zw.util.cloneJson(t);return e.data.forEach(function(t,e){i.data[e]||(i.data[e]={}),Pw(i.data[e],zw.Axis.defaultConfig().data[0]),Pw(i.data[e],t)}),Pw(i.layout,zw.Axis.defaultConfig().layout),Pw(i.layout,e.layout),this},u.getLiveConfig=function(){return l},u.getinputConfig=function(){return o},u.radialScale=function(t){return n},u.angularScale=function(t){return a},u.svg=function(){return e},t.rebind(u,s,"on"),u},zw.Axis.defaultConfig=function(e,r){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:t.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},zw.util={},zw.DATAEXTENT="dataExtent",zw.AREA="AreaChart",zw.LINE="LinePlot",zw.DOT="DotPlot",zw.BAR="BarChart",zw.util._override=function(t,e){for(var r in t)r in e&&(e[r]=t[r])},zw.util._extend=function(t,e){for(var r in t)e[r]=t[r]},zw.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},zw.util.dataFromEquation2=function(e,r){var n=r||6;return t.range(0,360+n,n).map(function(t,r){var n=t*Math.PI/180;return[t,e(n)]})},zw.util.dataFromEquation=function(e,r,n){var a=r||6,i=[],o=[];t.range(0,360+a,a).forEach(function(t,r){var n=t*Math.PI/180,a=e(n);i.push(t),o.push(a)});var l={t:i,r:o};return n&&(l.name=n),l},zw.util.ensureArray=function(e,r){if(void 0===e)return null;var n=[].concat(e);return t.range(r).map(function(t,e){return n[e]||n[0]})},zw.util.fillArrays=function(t,e,r){return e.forEach(function(e,n){t[e]=zw.util.ensureArray(t[e],r)}),t},zw.util.cloneJson=function(t){return JSON.parse(JSON.stringify(t))},zw.util.validateKeys=function(t,e){"string"==typeof e&&(e=e.split("."));var r=e.shift();return t[r]&&(!e.length||objHasKeys(t[r],e))},zw.util.sumArrays=function(e,r){return t.zip(e,r).map(function(e,r){return t.sum(e)})},zw.util.arrayLast=function(t){return t[t.length-1]},zw.util.arrayEqual=function(t,e){for(var r=Math.max(t.length,e.length,1);r-- >=0&&t[r]===e[r];);return-2===r},zw.util.flattenArray=function(t){for(var e=[];!zw.util.arrayEqual(e,t);)e=t,t=[].concat.apply([],t);return t},zw.util.deduplicate=function(t){return t.filter(function(t,e,r){return r.indexOf(t)==e})},zw.util.convertToCartesian=function(t,e){var r=e*Math.PI/180;return[t*Math.cos(r),t*Math.sin(r)]},zw.util.round=function(t,e){var r=e||2,n=Math.pow(10,r);return Math.round(t*n)/n},zw.util.getMousePos=function(e){var r=t.mouse(e.node()),n=r[0],a=r[1],i={};return i.x=n,i.y=a,i.pos=r,i.angle=180*(Math.atan2(a,n)+Math.PI)/Math.PI,i.radius=Math.sqrt(n*n+a*a),i},zw.util.duplicatesCount=function(t){for(var e,r={},n={},a=0,i=t.length;a<i;a++)(e=t[a])in r?(r[e]++,n[e]=r[e]):r[e]=1;return n},zw.util.duplicates=function(t){return Object.keys(zw.util.duplicatesCount(t))},zw.util.translator=function(t,e,r,n){if(n){var a=r.slice();r=e,e=a}var i=e.reduce(function(t,e){if(void 0!==t)return t[e]},t);void 0!==i&&(e.reduce(function(t,r,n){if(void 0!==t)return n===e.length-1&&delete t[r],t[r]},t),r.reduce(function(t,e,n){return void 0===t[e]&&(t[e]={}),n===r.length-1&&(t[e]=i),t[e]},t))},zw.PolyChart=function(){var e=[zw.PolyChart.defaultConfig()],r=t.dispatch("hover"),n={solid:"none",dash:[5,2],dot:[2,5]};function a(){var r=e[0].geometryConfig,a=r.container;"string"==typeof a&&(a=t.select(a)),a.datum(e).each(function(e,a){var i=!!e[0].data.yStack,o=e.map(function(e,r){return i?t.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]):t.zip(e.data.t[0],e.data.r[0])}),l=r.angularScale,s=r.radialScale.domain()[0],u={bar:function(n,a,i){var o=e[i].data,s=r.radialScale(n[1])-r.radialScale(0),u=r.radialScale(n[2]||0),c=o.barWidth;t.select(this).attr({class:"mark bar",d:"M"+[[s+u,-c/2],[s+u,c/2],[u,c/2],[u,-c/2]].join("L")+"Z",transform:function(t,e){return"rotate("+(r.orientation+l(t[0]))+")"}})}};u.dot=function(n,a,i){var o=n[2]?[n[0],n[1]+n[2]]:n,l=t.svg.symbol().size(e[i].data.dotSize).type(e[i].data.dotType)(n,a);t.select(this).attr({class:"mark dot",d:l,transform:function(t,e){var n,a,i,l=(n=function(t,e){var n=r.radialScale(t[1]),a=(r.angularScale(t[0])+r.orientation)*Math.PI/180;return{r:n,t:a}}(o),a=n.r*Math.cos(n.t),i=n.r*Math.sin(n.t),{x:a,y:i});return"translate("+[l.x,l.y]+")"}})};var c=t.svg.line.radial().interpolate(e[0].data.lineInterpolation).radius(function(t){return r.radialScale(t[1])}).angle(function(t){return r.angularScale(t[0])*Math.PI/180});u.line=function(n,a,i){var l=n[2]?o[i].map(function(t,e){return[t[0],t[1]+t[2]]}):o[i];if(t.select(this).each(u.dot).style({opacity:function(t,r){return+e[i].data.dotVisible},fill:p.stroke(n,a,i)}).attr({class:"mark dot"}),!(a>0)){var s=t.select(this.parentNode).selectAll("path.line").data([0]);s.enter().insert("path"),s.attr({class:"line",d:c(l),transform:function(t,e){return"rotate("+(r.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(t,e){return p.fill(n,a,i)},"fill-opacity":0,stroke:function(t,e){return p.stroke(n,a,i)},"stroke-width":function(t,e){return p["stroke-width"](n,a,i)},"stroke-dasharray":function(t,e){return p["stroke-dasharray"](n,a,i)},opacity:function(t,e){return p.opacity(n,a,i)},display:function(t,e){return p.display(n,a,i)}})}};var f=r.angularScale.range(),h=Math.abs(f[1]-f[0])/o[0].length*Math.PI/180,d=t.svg.arc().startAngle(function(t){return-h/2}).endAngle(function(t){return h/2}).innerRadius(function(t){return r.radialScale(s+(t[2]||0))}).outerRadius(function(t){return r.radialScale(s+(t[2]||0))+r.radialScale(t[1])});u.arc=function(e,n,a){t.select(this).attr({class:"mark arc",d:d,transform:function(t,e){return"rotate("+(r.orientation+l(t[0])+90)+")"}})};var p={fill:function(t,r,n){return e[n].data.color},stroke:function(t,r,n){return e[n].data.strokeColor},"stroke-width":function(t,r,n){return e[n].data.strokeSize+"px"},"stroke-dasharray":function(t,r,a){return n[e[a].data.strokeDash]},opacity:function(t,r,n){return e[n].data.opacity},display:function(t,r,n){return void 0===e[n].data.visible||e[n].data.visible?"block":"none"}},g=t.select(this).selectAll("g.layer").data(o);g.enter().append("g").attr({class:"layer"});var v=g.selectAll("path.mark").data(function(t,e){return t});v.enter().append("path").attr({class:"mark"}),v.style(p).each(u[r.geometryType]),v.exit().remove(),g.exit().remove()})}return a.config=function(t){return arguments.length?(t.forEach(function(t,r){e[r]||(e[r]={}),Pw(e[r],zw.PolyChart.defaultConfig()),Pw(e[r],t)}),this):e},a.getColorScale=function(){},t.rebind(a,r,"on"),a},zw.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:t.scale.category20()}}},zw.BarChart=function(){return zw.PolyChart()},zw.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},zw.AreaChart=function(){return zw.PolyChart()},zw.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},zw.DotPlot=function(){return zw.PolyChart()},zw.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},zw.LinePlot=function(){return zw.PolyChart()},zw.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},zw.Legend=function(){var e=zw.Legend.defaultConfig(),r=t.dispatch("hover");function n(){var r=e.legendConfig,a=e.data.map(function(t,e){return[].concat(t).map(function(t,n){var a=Pw({},r.elements[e]);return a.name=t,a.color=[].concat(r.elements[e].color)[n],a})}),i=t.merge(a);i=i.filter(function(t,e){return r.elements[e]&&(r.elements[e].visibleInLegend||void 0===r.elements[e].visibleInLegend)}),r.reverseOrder&&(i=i.reverse());var o=r.container;("string"==typeof o||o.nodeName)&&(o=t.select(o));var l=i.map(function(t,e){return t.color}),s=r.fontSize,u=null==r.isContinuous?"number"==typeof i[0]:r.isContinuous,c=u?r.height:s*i.length,f=o.classed("legend-group",!0).selectAll("svg").data([0]),h=f.enter().append("svg").attr({width:300,height:c+s,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});h.append("g").classed("legend-axis",!0),h.append("g").classed("legend-marks",!0);var d=t.range(i.length),p=t.scale[u?"linear":"ordinal"]().domain(d).range(l),g=t.scale[u?"linear":"ordinal"]().domain(d)[u?"range":"rangePoints"]([0,c]);if(u){var v=f.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(l);v.enter().append("stop"),v.attr({offset:function(t,e){return e/(l.length-1)*100+"%"}}).style({"stop-color":function(t,e){return t}}),f.append("rect").classed("legend-mark",!0).attr({height:r.height,width:r.colorBandWidth,fill:"url(#grad1)"})}else{var m=f.select(".legend-marks").selectAll("path.legend-mark").data(i);m.enter().append("path").classed("legend-mark",!0),m.attr({transform:function(t,e){return"translate("+[s/2,g(e)+s/2]+")"},d:function(e,r){var n,a,i,o=e.symbol;return i=3*(a=s),"line"===(n=o)?"M"+[[-a/2,-a/12],[a/2,-a/12],[a/2,a/12],[-a/2,a/12]]+"Z":-1!=t.svg.symbolTypes.indexOf(n)?t.svg.symbol().type(n).size(i)():t.svg.symbol().type("square").size(i)()},fill:function(t,e){return p(e)}}),m.exit().remove()}var y=t.svg.axis().scale(g).orient("right"),x=f.select("g.legend-axis").attr({transform:"translate("+[u?r.colorBandWidth:s,s/2]+")"}).call(y);return x.selectAll(".domain").style({fill:"none",stroke:"none"}),x.selectAll("line").style({fill:"none",stroke:u?r.textColor:"none"}),x.selectAll("text").style({fill:r.textColor,"font-size":r.fontSize}).text(function(t,e){return i[e].name}),n}return n.config=function(t){return arguments.length?(Pw(e,t),this):e},t.rebind(n,r,"on"),n},zw.Legend.defaultConfig=function(t,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},zw.tooltipPanel=function(){var e,r,n,a={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},i="tooltip-"+zw.tooltipPanel.uid++,o=10,l=function(){var t=(e=a.container.selectAll("g."+i).data([0])).enter().append("g").classed(i,!0).style({"pointer-events":"none",display:"none"});return n=t.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),r=t.append("text").attr({dx:a.padding+o,dy:.3*+a.fontSize}),l};return l.text=function(i){var s=t.hsl(a.color).l,u=s>=.5?"#aaa":"white",c=s>=.5?"black":"white",f=i||"";r.style({fill:c,"font-size":a.fontSize+"px"}).text(f);var h=a.padding,d=r.node().getBBox(),p={fill:a.color,stroke:u,"stroke-width":"2px"},g=d.width+2*h+o,v=d.height+2*h;return n.attr({d:"M"+[[o,-v/2],[o,-v/4],[a.hasTick?0:o,0],[o,v/4],[o,v/2],[g,v/2],[g,-v/2]].join("L")+"Z"}).style(p),e.attr({transform:"translate("+[o,-v/2+2*h]+")"}),e.style({display:"block"}),l},l.move=function(t){if(e)return e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"}),l},l.hide=function(){if(e)return e.style({display:"none"}),l},l.show=function(){if(e)return e.style({display:"block"}),l},l.config=function(t){return Pw(a,t),l},l},zw.tooltipPanel.uid=1,zw.adapter={},zw.adapter.plotly=function(){var e={convert:function(e,r){var n={};if(e.data&&(n.data=e.data.map(function(t,e){var n=Pw({},t);return[[n,["marker","color"],["color"]],[n,["marker","opacity"],["opacity"]],[n,["marker","line","color"],["strokeColor"]],[n,["marker","line","dash"],["strokeDash"]],[n,["marker","line","width"],["strokeSize"]],[n,["marker","symbol"],["dotType"]],[n,["marker","size"],["dotSize"]],[n,["marker","barWidth"],["barWidth"]],[n,["line","interpolation"],["lineInterpolation"]],[n,["showlegend"],["visibleInLegend"]]].forEach(function(t,e){zw.util.translator.apply(null,t.concat(r))}),r||delete n.marker,r&&delete n.groupId,r?("LinePlot"===n.geometry?(n.type="scatter",!0===n.dotVisible?(delete n.dotVisible,n.mode="lines+markers"):n.mode="lines"):"DotPlot"===n.geometry?(n.type="scatter",n.mode="markers"):"AreaChart"===n.geometry?n.type="area":"BarChart"===n.geometry&&(n.type="bar"),delete n.geometry):("scatter"===n.type?"lines"===n.mode?n.geometry="LinePlot":"markers"===n.mode?n.geometry="DotPlot":"lines+markers"===n.mode&&(n.geometry="LinePlot",n.dotVisible=!0):"area"===n.type?n.geometry="AreaChart":"bar"===n.type&&(n.geometry="BarChart"),delete n.mode,delete n.type),n}),!r&&e.layout&&"stack"===e.layout.barmode)){var a=zw.util.duplicates(n.data.map(function(t,e){return t.geometry}));n.data.forEach(function(t,e){var r=a.indexOf(t.geometry);-1!=r&&(n.data[e].groupId=r)})}if(e.layout){var i=Pw({},e.layout);if([[i,["plot_bgcolor"],["backgroundColor"]],[i,["showlegend"],["showLegend"]],[i,["radialaxis"],["radialAxis"]],[i,["angularaxis"],["angularAxis"]],[i.angularaxis,["showline"],["gridLinesVisible"]],[i.angularaxis,["showticklabels"],["labelsVisible"]],[i.angularaxis,["nticks"],["ticksCount"]],[i.angularaxis,["tickorientation"],["tickOrientation"]],[i.angularaxis,["ticksuffix"],["ticksSuffix"]],[i.angularaxis,["range"],["domain"]],[i.angularaxis,["endpadding"],["endPadding"]],[i.radialaxis,["showline"],["gridLinesVisible"]],[i.radialaxis,["tickorientation"],["tickOrientation"]],[i.radialaxis,["ticksuffix"],["ticksSuffix"]],[i.radialaxis,["range"],["domain"]],[i.angularAxis,["showline"],["gridLinesVisible"]],[i.angularAxis,["showticklabels"],["labelsVisible"]],[i.angularAxis,["nticks"],["ticksCount"]],[i.angularAxis,["tickorientation"],["tickOrientation"]],[i.angularAxis,["ticksuffix"],["ticksSuffix"]],[i.angularAxis,["range"],["domain"]],[i.angularAxis,["endpadding"],["endPadding"]],[i.radialAxis,["showline"],["gridLinesVisible"]],[i.radialAxis,["tickorientation"],["tickOrientation"]],[i.radialAxis,["ticksuffix"],["ticksSuffix"]],[i.radialAxis,["range"],["domain"]],[i.font,["outlinecolor"],["outlineColor"]],[i.legend,["traceorder"],["reverseOrder"]],[i,["labeloffset"],["labelOffset"]],[i,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(t,e){zw.util.translator.apply(null,t.concat(r))}),r?(void 0!==i.tickLength&&(i.angularaxis.ticklen=i.tickLength,delete i.tickLength),i.tickColor&&(i.angularaxis.tickcolor=i.tickColor,delete i.tickColor)):(i.angularAxis&&void 0!==i.angularAxis.ticklen&&(i.tickLength=i.angularAxis.ticklen),i.angularAxis&&void 0!==i.angularAxis.tickcolor&&(i.tickColor=i.angularAxis.tickcolor)),i.legend&&"boolean"!=typeof i.legend.reverseOrder&&(i.legend.reverseOrder="normal"!=i.legend.reverseOrder),i.legend&&"boolean"==typeof i.legend.traceorder&&(i.legend.traceorder=i.legend.traceorder?"reversed":"normal",delete i.legend.reverseOrder),i.margin&&void 0!==i.margin.t){var o=["t","r","b","l","pad"],l=["top","right","bottom","left","pad"],s={};t.entries(i.margin).forEach(function(t,e){s[l[o.indexOf(t.key)]]=t.value}),i.margin=s}r&&(delete i.needsEndSpacing,delete i.minorTickColor,delete i.minorTicks,delete i.angularaxis.ticksCount,delete i.angularaxis.ticksCount,delete i.angularaxis.ticksStep,delete i.angularaxis.rewriteTicks,delete i.angularaxis.nticks,delete i.radialaxis.ticksCount,delete i.radialaxis.ticksCount,delete i.radialaxis.ticksStep,delete i.radialaxis.rewriteTicks,delete i.radialaxis.nticks),n.layout=i}return n}};return e};var Nw,Bw=ae.extendDeepAll,jw=Nw={};jw.framework=function(e){var r,n,a,i,o,l=new function(){var t,e=[],r=-1,n=!1;function a(t,e){return t?(n=!0,t[e](),n=!1,this):this}return{add:function(t){return n?this:(e.splice(r+1,e.length-r),e.push(t),r=e.length-1,this)},setCallback:function(e){t=e},undo:function(){var n=e[r];return n?(a(n,"undo"),r-=1,t&&t(n.undo),this):this},redo:function(){var n=e[r+1];return n?(a(n,"redo"),r+=1,t&&t(n.redo),this):this},clear:function(){e=[],r=-1},hasUndo:function(){return-1!==r},hasRedo:function(){return r<e.length-1},getCommands:function(){return e},getPreviousCommand:function(){return e[r-1]},getIndex:function(){return r}}};function s(n,l){return l&&(o=l),t.select(t.select(o).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),r=r?Bw(r,n):n,a||(a=Iw.Axis()),i=Iw.adapter.plotly().convert(r),a.config(i).render(o),e.data=r.data,e.layout=r.layout,jw.fillLayout(e),r}return s.isPolar=!0,s.svg=function(){return a.svg()},s.getConfig=function(){return r},s.getLiveConfig=function(){return Iw.adapter.plotly().convert(a.getLiveConfig(),!0)},s.getLiveScales=function(){return{t:a.angularScale(),r:a.radialScale()}},s.setUndoPoint=function(){var t,e,a=this,i=Iw.util.cloneJson(r);t=i,e=n,l.add({undo:function(){e&&a(e)},redo:function(){a(t)}}),n=Iw.util.cloneJson(i)},s.undo=function(){l.undo()},s.redo=function(){l.redo()},s},jw.fillLayout=function(e){var r=t.select(e).selectAll(".plot-container"),n=r.selectAll(".svg-container"),a=e.framework&&e.framework.svg&&e.framework.svg(),i={width:800,height:600,paper_bgcolor:Pe.background,_container:r,_paperdiv:n,_paper:a};e._fullLayout=Bw(i,e.layout)};var Uw={};(Uw=Iw).manager=Nw;var Vw={},Hw=Pg.enforce,qw=Pg.clean,Gw=fa,Xw=0;function Ww(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){ae.error(t)}}function Yw(t,e){Ww(t,Pe.combine(e,"white"))}function Zw(t,e){t._context||(t._context=ae.extendDeep({},b));var r,n,a,i=t._context;if(e){for(n=Object.keys(e),r=0;r<n.length;r++)"editable"!==(a=n[r])&&"edits"!==a&&a in i&&("setBackground"===a&&"opaque"===e[a]?i[a]=Yw:i[a]=e[a]);e.plot3dPixelRatio&&!i.plotGlPixelRatio&&(i.plotGlPixelRatio=i.plot3dPixelRatio);var o=e.editable;if(void 0!==o)for(i.editable=o,n=Object.keys(i.edits),r=0;r<n.length;r++)i.edits[n[r]]=o;if(e.edits)for(n=Object.keys(e.edits),r=0;r<n.length;r++)(a=n[r])in i.edits&&(i.edits[a]=e.edits[a])}i.staticPlot&&(i.editable=!1,i.edits={},i.autosizable=!1,i.scrollZoom=!1,i.doubleClick=!1,i.showTips=!1,i.showLink=!1,i.displayModeBar=!1),"hover"!==i.displayModeBar||jp||(i.displayModeBar=!0),"transparent"!==i.setBackground&&"function"==typeof i.setBackground||(i.setBackground=Ww)}function Jw(t,e){var r,n,a=e+1,i=[];for(r=0;r<t.length;r++)(n=t[r])<0?i.push(a+n):i.push(n);return i}function Qw(t,e,r){var n,a;for(n=0;n<e.length;n++){if((a=e[n])!==parseInt(a,10))throw new Error("all values in "+r+" must be integers");if(a>=t.data.length||a<-t.data.length)throw new Error(r+" must be valid indices for gd.data.");if(e.indexOf(a,n+1)>-1||a>=0&&e.indexOf(-t.data.length+a)>-1||a<0&&e.indexOf(t.data.length+a)>-1)throw new Error("each index in "+r+" must be unique.")}}function $w(t,e,r){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),Qw(t,e,"currentIndices"),void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&Qw(t,r,"newIndices"),void 0!==r&&e.length!==r.length)throw new Error("current and new indices must be of equal length.")}function Kw(t,r,n,a,i){!function(t,e,r,n){var a=ae.isPlainObject(n);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!ae.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===r)throw new Error("indices must be an integer or array of integers");for(var i in Qw(t,r,"indices"),e){if(!Array.isArray(e[i])||e[i].length!==r.length)throw new Error("attribute "+i+" must be an array of length equal to indices array length");if(a&&(!(i in n)||!Array.isArray(n[i])||n[i].length!==e[i].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,r,n,a);for(var o=function(t,r,n,a){var i,o,l,s,u,c=ae.isPlainObject(a),f=[];for(var h in Array.isArray(n)||(n=[n]),n=Jw(n,t.data.length-1),r)for(var d=0;d<n.length;d++){if(i=t.data[n[d]],o=(l=ae.nestedProperty(i,h)).get(),s=r[h][d],!ae.isArrayOrTypedArray(s))throw new Error("attribute: "+h+" index: "+d+" must be an array");if(!ae.isArrayOrTypedArray(o))throw new Error("cannot extend missing or non-array attribute: "+h);if(o.constructor!==s.constructor)throw new Error("cannot extend array with an array of a different type: "+h);u=c?a[h][d]:a,e(u)||(u=-1),f.push({prop:l,target:o,insert:s,maxp:Math.floor(u)})}return f}(t,r,n,a),l={},s={},u=0;u<o.length;u++){var c=o[u].prop,f=o[u].maxp,h=i(o[u].target,o[u].insert,f);c.set(h[0]),Array.isArray(l[c.astr])||(l[c.astr]=[]),l[c.astr].push(h[1]),Array.isArray(s[c.astr])||(s[c.astr]=[]),s[c.astr].push(o[u].target.length)}return{update:l,maxPoints:s}}function tA(t,e){var r=new t.constructor(t.length+e.length);return r.set(t),r.set(e,t.length),r}function eA(t){return void 0===t?null:t}function rA(t,e,r){var n,a,i=t._fullLayout,o=t._fullData,l=t.data,s=xe.traceFlags(),u={},c={};function f(){return r.map(function(){})}function h(t){var e=ya.id2name(t);-1===a.indexOf(e)&&a.push(e)}function d(t){return"LAYOUT"+t+".autorange"}function p(t){return"LAYOUT"+t+".range"}function g(n,a,i){var o;Array.isArray(n)?n.forEach(function(t){g(t,a,i)}):n in e||r_.hasParent(e,n)||(o="LAYOUT"===n.substr(0,6)?ae.nestedProperty(t.layout,n.replace("LAYOUT","")):ae.nestedProperty(l[r[i]],n),n in c||(c[n]=f()),void 0===c[n][i]&&(c[n][i]=eA(o.get())),void 0!==a&&o.set(a))}for(var v in e){if(r_.hasParent(e,v))throw new Error("cannot set "+v+"and a parent attribute simultaneously");var m,y,x,b,_,w,A=e[v];if(u[v]=A,"LAYOUT"!==v.substr(0,6)){for(c[v]=f(),n=0;n<r.length;n++)if(m=l[r[n]],y=o[r[n]],b=(x=ae.nestedProperty(m,v)).get(),void 0!==(_=Array.isArray(A)?A[n%A.length]:A)){if((w=On.getTraceValObject(y,x.parts))&&w.impliedEdits&&null!==_)for(var M in w.impliedEdits)g(ae.relativeAttr(v,M),w.impliedEdits[M],n);else if("colorbar.thicknessmode"===v&&x.get()!==_&&-1!==["fraction","pixels"].indexOf(_)&&y.colorbar){var T=-1!==["top","bottom"].indexOf(y.colorbar.orient)?i.height-i.margin.t-i.margin.b:i.width-i.margin.l-i.margin.r;g("colorbar.thickness",y.colorbar.thickness*("fraction"===_?1/T:T),n)}else if("colorbar.lenmode"===v&&x.get()!==_&&-1!==["fraction","pixels"].indexOf(_)&&y.colorbar){var k=-1!==["top","bottom"].indexOf(y.colorbar.orient)?i.width-i.margin.l-i.margin.r:i.height-i.margin.t-i.margin.b;g("colorbar.len",y.colorbar.len*("fraction"===_?1/k:k),n)}else"colorbar.tick0"!==v&&"colorbar.dtick"!==v||g("colorbar.tickmode","linear",n);if("type"===v&&"pie"===_!=("pie"===b)){var E="x",C="y";"bar"!==_&&"bar"!==b||"h"!==m.orientation||(E="y",C="x"),ae.swapAttrs(m,["?","?src"],"labels",E),ae.swapAttrs(m,["d?","?0"],"label",E),ae.swapAttrs(m,["?","?src"],"values",C),"pie"===b?(ae.nestedProperty(m,"marker.color").set(ae.nestedProperty(m,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):R.traceIs(m,"cartesian")&&ae.nestedProperty(m,"marker.colors").set(ae.nestedProperty(m,"marker.color").get())}c[v][n]=eA(b);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(v)){if("orientation"===v){x.set(_);var S=m.x&&!m.y?"h":"v";if((x.get()||S)===y.orientation)continue}else"orientationaxes"===v&&(m.orientation={v:"h",h:"v"}[y.orientation]);r_.swapXYData(m),s.calc=s.clearAxisTypes=!0}else-1!==Wn.dataArrayContainers.indexOf(x.parts[0])?(r_.manageArrayContainers(x,_,c),s.calc=!0):(w?w.arrayOk&&(ae.isArrayOrTypedArray(_)||ae.isArrayOrTypedArray(b))?s.calc=!0:xe.update(s,w):s.calc=!0,x.set(_))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(v)&&ya.swap(t,r),"orientationaxes"===v){var L=ae.nestedProperty(t.layout,"hovermode");"x"===L.get()?L.set("y"):"y"===L.get()&&L.set("x")}if(-1!==["orientation","type"].indexOf(v)){for(a=[],n=0;n<r.length;n++){var O=l[r[n]];R.traceIs(O,"cartesian")&&(h(O.xaxis||"x"),h(O.yaxis||"y"),"type"===v&&g(["autobinx","autobiny"],!0,n))}g(a.map(d),!0,0),g(a.map(p),[0,1],0)}}else x=ae.nestedProperty(t.layout,v.replace("LAYOUT","")),c[v]=[eA(x.get())],x.set(Array.isArray(A)?A[0]:A),s.calc=!0}var D=!1,I=ya.list(t);for(n=0;n<I.length;n++)if(I[n].autorange){D=!0;break}return(s.calc||s.calcIfAutorange&&D)&&(s.clearCalc=!0),(s.calc||s.plot||s.calcIfAutorange)&&(s.fullReplot=!0),{flags:s,undoit:c,redoit:u,traces:r,eventData:ae.extendDeepNoArrays([],[u,r])}}function nA(t,e){var r,n,a,i=t.layout,o=t._fullLayout,l=Object.keys(e),s=ya.list(t),u={};for(n=0;n<l.length;n++)if(0===l[n].indexOf("allaxes")){for(a=0;a<s.length;a++){var c=s[a]._id.substr(1),f=-1!==c.indexOf("scene")?c+".":"",h=l[n].replace("allaxes",f+s[a]._name);e[h]||(e[h]=e[l[n]])}delete e[l[n]]}var d=xe.layoutFlags(),p={},g={};function v(t,r){if(Array.isArray(t))t.forEach(function(t){v(t,r)});else if(!(t in e||r_.hasParent(e,t))){var n=ae.nestedProperty(i,t);t in g||(g[t]=eA(n.get())),void 0!==r&&n.set(r)}}var m,y={};function x(t){var e=ya.name2id(t.split(".")[0]);return y[e]=1,e}for(var b in e){if(r_.hasParent(e,b))throw new Error("cannot set "+b+"and a parent attribute simultaneously");for(var _=ae.nestedProperty(i,b),w=e[b],A=_.parts.length,M=A-1;M>0&&"string"!=typeof _.parts[A-1];)M--;var T=_.parts[M],k=_.parts[M-1]+"."+T,E=_.parts.slice(0,M).join("."),C=ae.nestedProperty(t.layout,E).get(),S=ae.nestedProperty(o,E).get(),L=_.get();if(void 0!==w){p[b]=w,g[b]="reverse"===T?w:eA(L);var O=On.getLayoutValObject(o,_.parts);if(O&&O.impliedEdits&&null!==w)for(var D in O.impliedEdits)v(ae.relativeAttr(b,D),O.impliedEdits[D]);if(-1!==["width","height"].indexOf(b)&&null===w)o[b]=t._initialAutoSize[b];else if(k.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/))x(k),ae.nestedProperty(o,E+"._inputRange").set(null);else if(k.match(/^[xyz]axis[0-9]*\.autorange$/)){x(k),ae.nestedProperty(o,E+"._inputRange").set(null);var I=ae.nestedProperty(o,E).get();I._inputDomain&&(I._input.domain=I._inputDomain.slice())}else k.match(/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/)&&ae.nestedProperty(o,E+"._inputDomain").set(null);if("type"===T){var P=C,F="linear"===S.type&&"log"===w,z="log"===S.type&&"linear"===w;if(F||z){if(P&&P.range)if(S.autorange)F&&(P.range=P.range[1]>P.range[0]?[1,2]:[2,1]);else{var N=P.range[0],B=P.range[1];F?(N<=0&&B<=0&&v(E+".autorange",!0),N<=0?N=B/1e6:B<=0&&(B=N/1e6),v(E+".range[0]",Math.log(N)/Math.LN10),v(E+".range[1]",Math.log(B)/Math.LN10)):(v(E+".range[0]",Math.pow(10,N)),v(E+".range[1]",Math.pow(10,B)))}else v(E+".autorange",!0);Array.isArray(o._subplots.polar)&&o._subplots.polar.length&&o[_.parts[0]]&&"radialaxis"===_.parts[1]&&delete o[_.parts[0]]._subplot.viewInitial["radialaxis.range"],R.getComponentMethod("annotations","convertCoords")(t,S,w,v),R.getComponentMethod("images","convertCoords")(t,S,w,v)}else v(E+".autorange",!0),v(E+".range",null);ae.nestedProperty(o,E+"._inputRange").set(null)}else if(T.match(Se.AX_NAME_PATTERN)){var j=ae.nestedProperty(o,b).get(),U=(w||{}).type;U&&"-"!==U||(U="linear"),R.getComponentMethod("annotations","convertCoords")(t,j,U,v),R.getComponentMethod("images","convertCoords")(t,j,U,v)}var V=f_.containerArrayMatch(b);if(V){r=V.array,n=V.index;var H=V.property,q=(ae.nestedProperty(i,r)||[])[n]||{},G=q,X=O||{editType:"calc"},W=-1!==X.editType.indexOf("calcIfAutorange");""===n?(W?d.calc=!0:xe.update(d,X),W=!1):""===H&&(G=w,f_.isAddVal(w)?g[b]=null:f_.isRemoveVal(w)?(g[b]=q,G=q):ae.warn("unrecognized full object value",e)),W&&(iA(t,G,"x")||iA(t,G,"y"))?d.calc=!0:xe.update(d,X),u[r]||(u[r]={});var Y=u[r][n];Y||(Y=u[r][n]={}),Y[H]=w,delete e[b]}else"reverse"===T?(C.range?C.range.reverse():(v(E+".autorange",!0),C.range=[1,0]),S.autorange?d.calc=!0:d.plot=!0):(o._has("scatter-like")&&o._has("regl")&&"dragmode"===b&&("lasso"===w||"select"===w)&&"lasso"!==L&&"select"!==L?d.plot=!0:O?xe.update(d,O):d.calc=!0,_.set(w))}}for(r in u){f_.applyContainerArrayChanges(t,ae.nestedProperty(i,r),u[r],d)||(d.plot=!0)}var Z=o._axisConstraintGroups||[];for(m in y)for(n=0;n<Z.length;n++){var J=Z[n];if(J[m])for(var Q in d.calc=!0,J)y[Q]||(ya.getFromId(t,Q)._constraintShrinkable=!0)}return(aA(t)||e.height||e.width)&&(d.plot=!0),(d.plot||d.calc)&&(d.layoutReplot=!0),{flags:d,undoit:g,redoit:p,eventData:ae.extendDeep({},p)}}function aA(t){var e=t._fullLayout,r=e.width,n=e.height;return t.layout.autosize&&Wn.plotAutoSize(t,t.layout,e),e.width!==r||e.height!==n}function iA(t,e,r){if(!ae.isPlainObject(e))return!1;var n=e[r+"ref"]||r,a=ya.getFromId(t,n);return a||n.charAt(0)!==r||(a=ya.getFromId(t,r)),(a||{}).autorange}function oA(t,e,r,n){var a,i,o=n.getValObject,l=n.flags,s=n.immutable,u=n.inArray,c=n.arrayIndex,f=n.gd,h=n.autoranged;function d(){var t=a.editType;-1!==t.indexOf("calcIfAutorange")&&(h||void 0===h&&(iA(f,e,"x")||iA(f,e,"y")))?l.calc=!0:u&&-1!==t.indexOf("arraydraw")?ae.pushUnique(l.arrays[u],c):xe.update(l,a)}function p(t){return"data_array"===t.valType||t.arrayOk}var g=e._fullInput,v=t._fullInput;for(i in g&&g!==e&&(e=g),v&&v!==t&&(t=v),t){if(l.calc)return;var m=t[i],y=e[i];if("_"!==i.charAt(0)&&"function"!=typeof m&&m!==y){if("tick0"===i||"dtick"===i){var x=e.tickmode;if("auto"===x||"array"===x||!x)continue}if(("range"!==i||!e.autorange)&&("zmin"!==i&&"zmax"!==i||"contourcarpet"!==e.type)){var b=r.concat(i);if(a=o(b)){var _,w=a.valType,A=p(a),M=Array.isArray(m),T=Array.isArray(y);if(M&&T){var k="_input_"+i,E=t[k],C=e[k];if(Array.isArray(E)&&E===C)continue}if(void 0===y)A&&M?l.calc=!0:d();else if(a._isLinkedToArray){var S=[],L=!1;u||(l.arrays[i]=S);var O=Math.min(m.length,y.length),R=Math.max(m.length,y.length);if(O!==R){if("arraydraw"!==a.editType){d();continue}L=!0}for(_=0;_<O;_++)oA(m[_],y[_],b.concat(_),ae.extendFlat({inArray:i,arrayIndex:_},n));if(L)for(_=O;_<R;_++)S.push(_)}else!w&&ae.isPlainObject(m)?oA(m,y,b,n):A?M&&T?s&&(l.calc=!0):M!==T?l.calc=!0:d():M&&T&&m.length===y.length&&String(m)===String(y)||d()}}}}for(i in e)if(!(i in t||"_"===i.charAt(0)||"function"==typeof e[i])){if(p(a=o(r.concat(i)))&&Array.isArray(e[i]))return void(l.calc=!0);d()}}function lA(e){var r=t.select(e),n=e._fullLayout;if(n._container=r.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._glcanvas=null,n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var a=[];t.selectAll("defs").each(function(){this.id&&a.push(this.id.split("-")[1])}),n._uid=ae.randstr(a)}n._paperdiv.selectAll(".main-svg").attr(ke.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var i=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=i.append("g").classed("imagelayer",!0),n._shapeLowerLayer=i.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var o=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=o.append("g").classed("imagelayer",!0),n._shapeUpperLayer=o.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),e.emit("plotly_framework")}Vw.plot=function(e,r,n,a){var i;if(e=ae.getGraphDiv(e),$p.init(e),ae.isPlainObject(r)){var o=r;r=o.data,n=o.layout,a=o.config,i=o.frames}if(!1===$p.triggerHandler(e,"plotly_beforeplot",[r,n,a]))return Promise.reject();r||n||ae.isPlotDiv(e)||ae.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",e),Zw(e,a),n||(n={}),t.select(e).classed("js-plotly-plot",!0),Jr.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var l=0===(e.data||[]).length&&Array.isArray(r);Array.isArray(r)&&(r_.cleanData(r,e.data),l?e.data=r:e.data.push.apply(e.data,r),e.empty=!1),e.layout&&!l||(e.layout=r_.cleanLayout(n)),e._dragging&&!e._transitioning?e._replotPending=!0:e._replotPending=!1,Wn.supplyDefaults(e);var s=e._fullLayout,u=s._has("cartesian");if(!s._has("polar")&&r&&r[0]&&r[0].r)return ae.log("Legacy polar charts are deprecated!"),function(e,r,n){var a=t.select(e).selectAll(".plot-container").data([0]);a.enter().insert("div",":first-child").classed("plot-container plotly",!0);var i=a.selectAll(".svg-container").data([0]);i.enter().append("div").classed("svg-container",!0).style("position","relative"),i.html(""),r&&(e.data=r);n&&(e.layout=n);Uw.manager.fillLayout(e),i.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"}),e.framework=Uw.manager.framework(e),e.framework({data:e.data,layout:e.layout},i.node()),e.framework.setUndoPoint();var o=e.framework.svg(),l=1,s=e._fullLayout.title;""!==s&&s||(l=0);var u=function(){this.call(Mr.convertToTspans,e)},c=o.select(".title-group text").call(u);if(e._context.edits.titleText){var f=ae._(e,"Click to enter Plot title");s&&s!==f||(l=.2,c.attr({"data-unformatted":f}).text(f).style({opacity:l}).on("mouseover.opacity",function(){t.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){t.select(this).transition().duration(1e3).style("opacity",0)}));var h=function(){this.call(Mr.makeEditable,{gd:e}).on("edit",function(t){e.framework({layout:{title:t}}),this.text(t).call(u),this.call(h)}).on("cancel",function(){var t=this.attr("data-unformatted");this.text(t).call(u)})};c.call(h)}return e._context.setBackground(e,e._fullLayout.paper_bgcolor),Wn.addLinks(e),Promise.resolve()}(e,r,n);s._replotting=!0,l&&lA(e),e.framework!==lA&&(e.framework=lA,lA(e)),Jr.initGradients(e),l&&ya.saveShowSpikeInitial(e);var c=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;c&&Wn.doCalcdata(e);for(var f=0;f<e.calcdata.length;f++)e.calcdata[f][0].trace=e._fullData[f];var h=JSON.stringify(s._size);function d(){var t,r,n,a=e.calcdata;for(R.getComponentMethod("legend","draw")(e),R.getComponentMethod("rangeselector","draw")(e),R.getComponentMethod("sliders","draw")(e),R.getComponentMethod("updatemenus","draw")(e),t=0;t<a.length;t++)!0===(n=(r=a[t])[0].trace).visible&&n._module.colorbar?n._module.colorbar(e,r):Wn.autoMargin(e,"cb"+n.uid);return Wn.doAutoMargin(e),Wn.previousPromises(e)}function p(){if(!e._transitioning){for(var t=ya.list(e,"",!0),r=0;r<t.length;r++){var n=t[r];qw(e,n),Gw(n)}Hw(e),l&&ya.saveRangeInitial(e)}}var g=[Wn.previousPromises,function(){if(i)return Vw.addFrames(e,i)},function(){for(var t=s._basePlotModules,r=0;r<t.length;r++)t[r].drawFramework&&t[r].drawFramework(e);return!s._glcanvas&&s._has("gl")&&(s._glcanvas=s._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(t){return t.key}),s._glcanvas.enter().append("canvas").attr("class",function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})),s._glcanvas&&s._glcanvas.attr("width",s.width).attr("height",s.height),ae.syncOrAsync([Lw.layoutStyles],e)},d,function(){if(JSON.stringify(s._size)!==h)return ae.syncOrAsync([d,Lw.layoutStyles],e)}];u&&g.push(function(){if(c){var t,r,n,a=s._subplots.cartesian,i=s._modules,o=[];for(n=0;n<i.length;n++)ae.pushUnique(o,i[n].setPositions);if(o.length)for(r=0;r<a.length;r++)for(t=s._plots[a[r]],n=0;n<o.length;n++)o[n](e,t);return R.getComponentMethod("errorbars","calc")(e),ae.syncOrAsync([R.getComponentMethod("shapes","calcAutorange"),R.getComponentMethod("annotations","calcAutorange"),p,R.getComponentMethod("rangeslider","calcAutorange")],e)}p()}),g.push(Lw.layoutStyles),u&&g.push(function(){return ya.doTicks(e,"redraw")}),g.push(function(){var t,r=e.calcdata,n=s._infolayer.selectAll("g.rangeslider-container");for(t=0;t<r.length;t++){var a=r[t][0].trace,i=!0===a.visible,o=a.uid;if(!i||!R.traceIs(a,"2dMap")){var l=".hm"+o+",.contour"+o+",#clip"+o;s._paper.selectAll(l).remove(),n.selectAll(l).remove()}i&&a._module.colorbar||s._infolayer.selectAll(".cb"+o).remove()}var u=s._basePlotModules;for(t=0;t<u.length;t++)u[t].plot(e);var c=s._paper.selectAll(".layer-subplot");return s._shapeSubplotLayers=c.selectAll(".shapelayer"),Wn.style(e),R.getComponentMethod("shapes","draw")(e),R.getComponentMethod("annotations","draw")(e),Wn.addLinks(e),s._replotting=!1,Wn.previousPromises(e)},function(){R.getComponentMethod("shapes","draw")(e),R.getComponentMethod("images","draw")(e),R.getComponentMethod("annotations","draw")(e),R.getComponentMethod("legend","draw")(e),R.getComponentMethod("rangeslider","draw")(e),R.getComponentMethod("rangeselector","draw")(e),R.getComponentMethod("sliders","draw")(e),R.getComponentMethod("updatemenus","draw")(e)},Sw,Wn.rehover,Wn.previousPromises);var v=ae.syncOrAsync(g,e);return v&&v.then||(v=Promise.resolve()),v.then(function(){return e.emit("plotly_afterplot"),e})},Vw.setPlotConfig=function(t){return ae.extendFlat(b,t)},Vw.redraw=function(t){if(t=ae.getGraphDiv(t),!ae.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return r_.cleanData(t.data,t.data),r_.cleanLayout(t.layout),t.calcdata=void 0,Vw.plot(t).then(function(){return t.emit("plotly_redraw"),t})},Vw.newPlot=function(t,e,r,n){return t=ae.getGraphDiv(t),Wn.cleanPlot([],{},t._fullData||{},t._fullLayout||{}),Wn.purge(t),Vw.plot(t,e,r,n)},Vw.extendTraces=function t(e,r,n,a){var i=Kw(e=ae.getGraphDiv(e),r,n,a,function(t,e,r){var n,a;if(ae.isTypedArray(t))if(r<0){var i=new t.constructor(0),o=tA(t,e);r<0?(n=o,a=i):(n=i,a=o)}else if(n=new t.constructor(r),a=new t.constructor(t.length+e.length-r),r===e.length)n.set(e),a.set(t);else if(r<e.length){var l=e.length-r;n.set(e.subarray(l)),a.set(t),a.set(e.subarray(0,l),t.length)}else{var s=r-e.length,u=t.length-s;n.set(t.subarray(u)),n.set(e,s),a.set(t.subarray(0,u))}else n=t.concat(e),a=r>=0&&r<n.length?n.splice(0,n.length-r):[];return[n,a]}),o=Vw.redraw(e),l=[e,i.update,n,i.maxPoints];return t_.add(e,Vw.prependTraces,l,t,arguments),o},Vw.prependTraces=function t(e,r,n,a){var i=Kw(e=ae.getGraphDiv(e),r,n,a,function(t,e,r){var n,a;if(ae.isTypedArray(t))if(r<=0){var i=new t.constructor(0),o=tA(e,t);r<0?(n=o,a=i):(n=i,a=o)}else if(n=new t.constructor(r),a=new t.constructor(t.length+e.length-r),r===e.length)n.set(e),a.set(t);else if(r<e.length){var l=e.length-r;n.set(e.subarray(0,l)),a.set(e.subarray(l)),a.set(t,l)}else{var s=r-e.length;n.set(e),n.set(t.subarray(0,s),e.length),a.set(t.subarray(s))}else n=e.concat(t),a=r>=0&&r<n.length?n.splice(r,n.length):[];return[n,a]}),o=Vw.redraw(e),l=[e,i.update,n,i.maxPoints];return t_.add(e,Vw.extendTraces,l,t,arguments),o},Vw.addTraces=function t(e,r,n){e=ae.getGraphDiv(e);var a,i,o=[],l=Vw.deleteTraces,s=t,u=[e,o],c=[e,r];for(function(t,e,r){var n,a;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),n=0;n<e.length;n++)if("object"!=typeof(a=e[n])||Array.isArray(a)||null===a)throw new Error("all values in traces array must be non-array objects");if(void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&r.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(e,r,n),Array.isArray(r)||(r=[r]),r=r.map(function(t){return ae.extendFlat({},t)}),r_.cleanData(r,e.data),a=0;a<r.length;a++)e.data.push(r[a]);for(a=0;a<r.length;a++)o.push(-r.length+a);if(void 0===n)return i=Vw.redraw(e),t_.add(e,l,u,s,c),i;Array.isArray(n)||(n=[n]);try{$w(e,o,n)}catch(t){throw e.data.splice(e.data.length-r.length,r.length),t}return t_.startSequence(e),t_.add(e,l,u,s,c),i=Vw.moveTraces(e,o,n),t_.stopSequence(e),i},Vw.deleteTraces=function t(e,r){e=ae.getGraphDiv(e);var n,a,i=[],o=Vw.addTraces,l=t,s=[e,i,r],u=[e,r];if(void 0===r)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(r)||(r=[r]),Qw(e,r,"indices"),(r=Jw(r,e.data.length-1)).sort(ae.sorterDes),n=0;n<r.length;n+=1)a=e.data.splice(r[n],1)[0],i.push(a);var c=Vw.redraw(e);return t_.add(e,o,s,l,u),c},Vw.moveTraces=function t(e,r,n){var a,i=[],o=[],l=t,s=t,u=[e=ae.getGraphDiv(e),n,r],c=[e,r,n];if($w(e,r,n),r=Array.isArray(r)?r:[r],void 0===n)for(n=[],a=0;a<r.length;a++)n.push(-r.length+a);for(n=Array.isArray(n)?n:[n],r=Jw(r,e.data.length-1),n=Jw(n,e.data.length-1),a=0;a<e.data.length;a++)-1===r.indexOf(a)&&i.push(e.data[a]);for(a=0;a<r.length;a++)o.push({newIndex:n[a],trace:e.data[r[a]]});for(o.sort(function(t,e){return t.newIndex-e.newIndex}),a=0;a<o.length;a+=1)i.splice(o[a].newIndex,0,o[a].trace);e.data=i;var f=Vw.redraw(e);return t_.add(e,l,u,s,c),f},Vw.restyle=function t(e,r,n,a){e=ae.getGraphDiv(e),r_.clearPromiseQueue(e);var i={};if("string"==typeof r)i[r]=n;else{if(!ae.isPlainObject(r))return ae.warn("Restyle fail.",r,n,a),Promise.reject();i=ae.extendFlat({},r),void 0===a&&(a=n)}Object.keys(i).length&&(e.changed=!0);var o=r_.coerceTraceIndices(e,a),l=rA(e,i,o),s=l.flags;s.clearCalc&&(e.calcdata=void 0),s.clearAxisTypes&&r_.clearAxisTypes(e,o,{});var u=[];s.fullReplot?u.push(Vw.plot):(u.push(Wn.previousPromises),Wn.supplyDefaults(e),s.style&&u.push(Lw.doTraceStyle),s.colorbars&&u.push(Lw.doColorBars)),u.push(Wn.rehover),t_.add(e,t,[e,l.undoit,l.traces],t,[e,l.redoit,l.traces]);var c=ae.syncOrAsync(u,e);return c&&c.then||(c=Promise.resolve()),c.then(function(){return e.emit("plotly_restyle",l.eventData),e})},Vw.relayout=function t(e,r,n){if(e=ae.getGraphDiv(e),r_.clearPromiseQueue(e),e.framework&&e.framework.isPolar)return Promise.resolve(e);var a={};if("string"==typeof r)a[r]=n;else{if(!ae.isPlainObject(r))return ae.warn("Relayout fail.",r,n),Promise.reject();a=ae.extendFlat({},r)}Object.keys(a).length&&(e.changed=!0);var i=nA(e,a),o=i.flags;o.calc&&(e.calcdata=void 0),o.margins&&r_.clearAxisAutomargins(e);var l=[Wn.previousPromises];o.layoutReplot?l.push(Lw.layoutReplot):Object.keys(a).length&&(Wn.supplyDefaults(e),o.legend&&l.push(Lw.doLegend),o.layoutstyle&&l.push(Lw.layoutStyles),o.ticks&&l.push(Lw.doTicksRelayout),o.modebar&&l.push(Lw.doModeBar),o.camera&&l.push(Lw.doCamera)),l.push(Wn.rehover),t_.add(e,t,[e,i.undoit],t,[e,i.redoit]);var s=ae.syncOrAsync(l,e);return s&&s.then||(s=Promise.resolve(e)),s.then(function(){return e.emit("plotly_relayout",i.eventData),e})},Vw.update=function t(e,r,n,a){if(e=ae.getGraphDiv(e),r_.clearPromiseQueue(e),e.framework&&e.framework.isPolar)return Promise.resolve(e);ae.isPlainObject(r)||(r={}),ae.isPlainObject(n)||(n={}),Object.keys(r).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var i=r_.coerceTraceIndices(e,a),o=rA(e,ae.extendFlat({},r),i),l=o.flags,s=nA(e,ae.extendFlat({},n)),u=s.flags;(l.clearCalc||u.calc)&&(e.calcdata=void 0),l.clearAxisTypes&&r_.clearAxisTypes(e,i,n),u.margins&&r_.clearAxisAutomargins(e);var c=[];if(l.fullReplot&&u.layoutReplot){var f=e.data,h=e.layout;e.data=void 0,e.layout=void 0,c.push(function(){return Vw.plot(e,f,h)})}else l.fullReplot?c.push(Vw.plot):u.layoutReplot?c.push(Lw.layoutReplot):(c.push(Wn.previousPromises),Wn.supplyDefaults(e),l.style&&c.push(Lw.doTraceStyle),l.colorbars&&c.push(Lw.doColorBars),u.legend&&c.push(Lw.doLegend),u.layoutstyle&&c.push(Lw.layoutStyles),u.ticks&&c.push(Lw.doTicksRelayout),u.modebar&&c.push(Lw.doModeBar),u.camera&&c.push(Lw.doCamera));c.push(Wn.rehover),t_.add(e,t,[e,o.undoit,s.undoit,o.traces],t,[e,o.redoit,s.redoit,o.traces]);var d=ae.syncOrAsync(c,e);return d&&d.then||(d=Promise.resolve(e)),d.then(function(){return e.emit("plotly_update",{data:o.eventData,layout:s.eventData}),e})},Vw.react=function(t,e,r,n){var a,i;var o=(t=ae.getGraphDiv(t))._fullData,l=t._fullLayout;if(ae.isPlotDiv(t)&&o&&l){if(ae.isPlainObject(e)){var s=e;e=s.data,r=s.layout,n=s.config,a=s.frames}var u=!1;if(n){var c=ae.extendDeep({},t._context);t._context=void 0,Zw(t,n),u=function t(e,r){var n;for(n in e){var a=e[n],i=r[n];if(a!==i)if(ae.isPlainObject(a)&&ae.isPlainObject(i)){if(t(a,i))return!0}else{if(!Array.isArray(a)||!Array.isArray(i))return!0;if(a.length!==i.length)return!0;for(var o=0;o<a.length;o++)if(a[o]!==i[o]){if(!ae.isPlainObject(a[o])||!ae.isPlainObject(i[o]))return!0;if(t(a[o],i[o]))return!0}}}}(c,t._context)}t.data=e||[],r_.cleanData(t.data,[]),t.layout=r||{},r_.cleanLayout(t.layout),Wn.supplyDefaults(t);var f=t._fullData,h=t._fullLayout,d=void 0===h.datarevision,p=function(t,e,r,n){if(e.length!==r.length)return{fullReplot:!0,clearCalc:!0};var a,i,o=xe.traceFlags();o.arrays={};var l={getValObject:function(t){return On.getTraceValObject(i,t)},flags:o,immutable:n,gd:t};for(a=0;a<e.length;a++)i=r[a],l.autoranged=!!i.xaxis&&(ya.getFromId(t,i.xaxis).autorange||ya.getFromId(t,i.yaxis).autorange),oA(e[a],i,[],l);(o.calc||o.plot||o.calcIfAutorange)&&(o.fullReplot=!0);return o}(t,o,f,d),g=function(t,e,r,n){var a=xe.layoutFlags();a.arrays={},oA(e,r,[],{getValObject:function(t){return On.getLayoutValObject(r,t)},flags:a,immutable:n,gd:t}),(a.plot||a.calc)&&(a.layoutReplot=!0);return a}(t,l,h,d);aA(t)&&(g.layoutReplot=!0),(p.calc||g.calc)&&(t.calcdata=void 0),g.margins&&r_.clearAxisAutomargins(t);var v=[];if(a&&(t._transitionData={},Wn.createTransitionData(t),v.push(function(){return Vw.addFrames(t,a)})),p.fullReplot||g.layoutReplot||u)t._fullLayout._skipDefaults=!0,v.push(Vw.plot);else{for(var m in g.arrays){var y=g.arrays[m];if(y.length){var x=R.getComponentMethod(m,"drawOne");if(x!==ae.noop)for(var b=0;b<y.length;b++)x(t,y[b]);else{var _=R.getComponentMethod(m,"draw");if(_===ae.noop)throw new Error("cannot draw components: "+m);_(t)}}}v.push(Wn.previousPromises),p.style&&v.push(Lw.doTraceStyle),p.colorbars&&v.push(Lw.doColorBars),g.legend&&v.push(Lw.doLegend),g.layoutstyle&&v.push(Lw.layoutStyles),g.ticks&&v.push(Lw.doTicksRelayout),g.modebar&&v.push(Lw.doModeBar),g.camera&&v.push(Lw.doCamera)}v.push(Wn.rehover),(i=ae.syncOrAsync(v,t))&&i.then||(i=Promise.resolve(t))}else i=Vw.newPlot(t,e,r,n);return i.then(function(){return t.emit("plotly_react",{data:e,layout:r}),t})},Vw.animate=function(t,e,r){if(t=ae.getGraphDiv(t),!ae.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var n=t._transitionData;n._frameQueue||(n._frameQueue=[]);var a=(r=Wn.supplyAnimationDefaults(r)).transition,i=r.frame;function o(t){return Array.isArray(a)?t>=a.length?a[0]:a[t]:a}function l(t){return Array.isArray(i)?t>=i.length?i[0]:i[t]:i}function s(t,e){var r=0;return function(){if(t&&++r===e)return t()}}return void 0===n._frameWaitingCnt&&(n._frameWaitingCnt=0),new Promise(function(i,u){function c(){n._currentFrame&&n._currentFrame.onComplete&&n._currentFrame.onComplete();var e=n._currentFrame=n._frameQueue.shift();if(e){var r=e.name?e.name.toString():null;t._fullLayout._currentFrame=r,n._lastFrameAt=Date.now(),n._timeToNext=e.frameOpts.duration,Wn.transition(t,e.frame.data,e.frame.layout,r_.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),t.emit("plotly_animatingframe",{name:r,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(n._animationRaf),n._animationRaf=null}function f(){t.emit("plotly_animating"),n._lastFrameAt=-1/0,n._timeToNext=0,n._runningTransitions=0,n._currentFrame=null;var e=function(){n._animationRaf=window.requestAnimationFrame(e),Date.now()-n._lastFrameAt>n._timeToNext&&c()};e()}var h,d,p=0;function g(t){return Array.isArray(a)?p>=a.length?t.transitionOpts=a[p]:t.transitionOpts=a[0]:t.transitionOpts=a,p++,t}var v=[],m=void 0===e||null===e,y=Array.isArray(e);if(!m&&!y&&ae.isPlainObject(e))v.push({type:"object",data:g(ae.extendFlat({},e))});else if(m||-1!==["string","number"].indexOf(typeof e))for(h=0;h<n._frames.length;h++)(d=n._frames[h])&&(m||String(d.group)===String(e))&&v.push({type:"byname",name:String(d.name),data:g({name:d.name})});else if(y)for(h=0;h<e.length;h++){var x=e[h];-1!==["number","string"].indexOf(typeof x)?(x=String(x),v.push({type:"byname",name:x,data:g({name:x})})):ae.isPlainObject(x)&&v.push({type:"object",data:g(ae.extendFlat({},x))})}for(h=0;h<v.length;h++)if("byname"===(d=v[h]).type&&!n._frameHash[d.data.name])return ae.warn('animate failure: frame not found: "'+d.data.name+'"'),void u();-1!==["next","immediate"].indexOf(r.mode)&&function(){if(0!==n._frameQueue.length){for(;n._frameQueue.length;){var e=n._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===r.direction&&v.reverse();var b=t._fullLayout._currentFrame;if(b&&r.fromcurrent){var _=-1;for(h=0;h<v.length;h++)if("byname"===(d=v[h]).type&&d.name===b){_=h;break}if(_>0&&_<v.length-1){var w=[];for(h=0;h<v.length;h++)d=v[h],("byname"!==v[h].type||h>_)&&w.push(d);v=w}}v.length>0?function(e){if(0!==e.length){for(var a=0;a<e.length;a++){var c;c="byname"===e[a].type?Wn.computeFrame(t,e[a].name):e[a].data;var h=l(a),d=o(a);d.duration=Math.min(d.duration,h.duration);var p={frame:c,name:e[a].name,frameOpts:h,transitionOpts:d};a===e.length-1&&(p.onComplete=s(i,2),p.onInterrupt=u),n._frameQueue.push(p)}"immediate"===r.mode&&(n._lastFrameAt=-1/0),n._animationRaf||f()}}(v):(t.emit("plotly_animated"),i())})},Vw.addFrames=function(t,e,r){if(t=ae.getGraphDiv(t),null===e||void 0===e)return Promise.resolve();if(!ae.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var n,a,i,o,l=t._transitionData._frames,s=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var u=l.length+2*e.length,c=[],f={};for(n=e.length-1;n>=0;n--)if(ae.isPlainObject(e[n])){var h=e[n].name,d=(s[h]||f[h]||{}).name,p=e[n].name,g=s[d]||f[d];d&&p&&"number"==typeof p&&g&&Xw<5&&(Xw++,ae.warn('addFrames: overwriting frame "'+(s[d]||f[d]).name+'" with a frame whose name of type "number" also equates to "'+d+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===Xw&&ae.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),f[h]={name:h},c.push({frame:Wn.supplyFrameDefaults(e[n]),index:r&&void 0!==r[n]&&null!==r[n]?r[n]:u+n})}c.sort(function(t,e){return t.index>e.index?-1:t.index<e.index?1:0});var v=[],m=[],y=l.length;for(n=c.length-1;n>=0;n--){if("number"==typeof(a=c[n].frame).name&&ae.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;s[a.name="frame "+t._transitionData._counter++];);if(s[a.name]){for(i=0;i<l.length&&(l[i]||{}).name!==a.name;i++);v.push({type:"replace",index:i,value:a}),m.unshift({type:"replace",index:i,value:l[i]})}else o=Math.max(0,Math.min(c[n].index,y)),v.push({type:"insert",index:o,value:a}),m.unshift({type:"delete",index:o}),y++}var x=Wn.modifyFrames,b=Wn.modifyFrames,_=[t,m],w=[t,v];return t_&&t_.add(t,x,_,b,w),Wn.modifyFrames(t,v)},Vw.deleteFrames=function(t,e){if(t=ae.getGraphDiv(t),!ae.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var r,n,a=t._transitionData._frames,i=[],o=[];if(!e)for(e=[],r=0;r<a.length;r++)e.push(r);for((e=e.slice(0)).sort(),r=e.length-1;r>=0;r--)n=e[r],i.push({type:"delete",index:n}),o.unshift({type:"insert",index:n,value:a[n]});var l=Wn.modifyFrames,s=Wn.modifyFrames,u=[t,o],c=[t,i];return t_&&t_.add(t,l,u,s,c),Wn.modifyFrames(t,i)},Vw.purge=function(t){var e=(t=ae.getGraphDiv(t))._fullLayout||{},r=t._fullData||[];return Wn.cleanPlot([],{},r,e),Wn.purge(t),$p.purge(t),e._container&&e._container.remove(),delete t._context,t};var sA={getDelay:function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},getRedrawFunc:function(t){var e=t._fullLayout||{};if(!(!(e._has&&e._has("polar"))&&t.data&&t.data[0]&&t.data[0].r))return function(){(t.calcdata||[]).forEach(function(t){t[0]&&t[0].t&&t[0].t.cb&&t[0].t.cb()})}}},uA=Xp.EventEmitter;var cA=function(t){var e=t.emitter||new uA,r=new Promise(function(n,a){var i=window.Image,o=t.svg,l=t.format||"png";if(ae.isIE()&&"svg"!==l){var s=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return a(s),t.promise?r:e.emit("error",s)}var u=t.canvas,c=t.scale||1,f=c*(t.width||300),h=c*(t.height||150),d=u.getContext("2d"),p=new i,g="data:image/svg+xml,"+encodeURIComponent(o);u.width=f,u.height=h,p.onload=function(){var r;switch("svg"!==l&&d.drawImage(p,0,0,f,h),l){case"jpeg":r=u.toDataURL("image/jpeg");break;case"png":r=u.toDataURL("image/png");break;case"webp":r=u.toDataURL("image/webp");break;case"svg":r=g;break;default:var i="Image format is not jpeg, png, svg or webp.";if(a(new Error(i)),!t.promise)return e.emit("error",i)}n(r),t.promise||e.emit("success",r)},p.onerror=function(r){if(a(r),!t.promise)return e.emit("error",r)},p.src=g});return t.promise?r:e},fA=/"/g,hA=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");var dA=function(e,r,n){var a,i=e._fullLayout,o=i._paper,l=i._toppaper,s=i.width,u=i.height;o.insert("rect",":first-child").call(Jr.setRect,0,0,s,u).call(Pe.fill,i.paper_bgcolor);var c=i._basePlotModules||[];for(a=0;a<c.length;a++){var f=c[a];f.toSVG&&f.toSVG(e)}if(l){var h=l.node().childNodes,d=Array.prototype.slice.call(h);for(a=0;a<d.length;a++){var p=d[a];p.childNodes.length&&o.node().appendChild(p)}}i._draggers&&i._draggers.remove(),o.node().style.background="",o.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=t.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){e.style({visibility:null,display:null});var r=this.style.fontFamily;r&&-1!==r.indexOf('"')&&e.style("font-family",r.replace(fA,"TOBESTRIPPED"))}else e.remove()}),o.selectAll(".point,.scatterpts").each(function(){var e=t.select(this),r=this.style.fill;r&&-1!==r.indexOf("url(")&&e.style("fill",r.replace(fA,"TOBESTRIPPED"))}),"pdf"!==r&&"eps"!==r||o.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),o.node().setAttributeNS(ke.xmlns,"xmlns",ke.svg),o.node().setAttributeNS(ke.xmlns,"xmlns:xlink",ke.xlink),"svg"===r&&n&&(o.attr("width",n*s),o.attr("height",n*u),o.attr("viewBox","0 0 "+s+" "+u));var g=(new window.XMLSerializer).serializeToString(o.node());return g=function(e){var r=t.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":r.html(t).text()});return r.remove(),n}(g),g=(g=g.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(hA,"'"),ae.isIE()&&(g=(g=(g=g.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),g},pA={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},gA=/^data:image\/\w+;base64,/;var vA=function(t,e){var r,n,a;function i(t){return!(t in e)||ae.validate(e[t],pA[t])}if(e=e||{},ae.isPlainObject(t)?(r=t.data||[],n=t.layout||{},a=t.config||{}):(t=ae.getGraphDiv(t),r=ae.extendDeep([],t.data),n=ae.extendDeep({},t.layout),a=t._context),!i("width")||!i("height"))throw new Error("Height and width should be pixel values.");if(!i("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var o={};function l(t,r){return ae.coerce(e,o,pA,t,r)}var s=l("format"),u=l("width"),c=l("height"),f=l("scale"),h=l("setBackground"),d=l("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var g=ae.extendFlat({},n);u&&(g.width=u),c&&(g.height=c);var v=ae.extendFlat({},a,{staticPlot:!0,setBackground:h}),m=sA.getRedrawFunc(p);function y(){return new Promise(function(t){setTimeout(t,sA.getDelay(p._fullLayout))})}function x(){return new Promise(function(t,e){var r=dA(p,s,f),n=p._fullLayout.width,a=p._fullLayout.height;if(Vw.purge(p),document.body.removeChild(p),"svg"===s)return t(d?r:"data:image/svg+xml,"+encodeURIComponent(r));var i=document.createElement("canvas");i.id=ae.randstr(),cA({format:s,width:n,height:a,scale:f,canvas:i,svg:r,promise:!0}).then(t).catch(e)})}return new Promise(function(t,e){Vw.plot(p,r,g,v).then(m).then(y).then(x).then(function(e){t(function(t){return d?t.replace(gA,""):t}(e))}).catch(function(t){e(t)})})},mA=ae.isPlainObject,yA=Array.isArray,xA=ae.isArrayOrTypedArray;function bA(t,e,r,n,a,i){i=i||[];for(var o=Object.keys(t),l=0;l<o.length;l++){var s=o[l];if("transforms"!==s){var u=i.slice();u.push(s);var c=t[s],f=e[s],h=TA(r,s),d="info_array"===(h||{}).valType,p="colorscale"===(h||{}).valType,g=(h||{}).items;if(MA(r,s))if(mA(c)&&mA(f))bA(c,f,h,n,a,u);else if(d&&yA(c)){c.length>f.length&&n.push(AA("unused",a,u.concat(f.length)));var v,m,y,x,b,_=f.length,w=Array.isArray(g);if(w&&(_=Math.min(_,g.length)),2===h.dimensions)for(m=0;m<_;m++)if(yA(c[m])){c[m].length>f[m].length&&n.push(AA("unused",a,u.concat(m,f[m].length)));var A=f[m].length;for(v=0;v<(w?Math.min(A,g[m].length):A);v++)y=w?g[m][v]:g,x=c[m][v],b=f[m][v],ae.validate(x,y)?b!==x&&b!==+x&&n.push(AA("dynamic",a,u.concat(m,v),x,b)):n.push(AA("value",a,u.concat(m,v),x))}else n.push(AA("array",a,u.concat(m),c[m]));else for(m=0;m<_;m++)y=w?g[m]:g,x=c[m],b=f[m],ae.validate(x,y)?b!==x&&b!==+x&&n.push(AA("dynamic",a,u.concat(m),x,b)):n.push(AA("value",a,u.concat(m),x))}else if(h.items&&!d&&yA(c)){var M,T,k=g[Object.keys(g)[0]],E=[];for(M=0;M<f.length;M++){var C=f[M]._index||M;(T=u.slice()).push(C),mA(c[C])&&mA(f[M])&&(E.push(C),bA(c[C],f[M],k,n,a,T))}for(M=0;M<c.length;M++)(T=u.slice()).push(M),mA(c[M])?-1===E.indexOf(M)&&n.push(AA("unused",a,T)):n.push(AA("object",a,T,c[M]))}else!mA(c)&&mA(f)?n.push(AA("object",a,u,c)):xA(c)||!xA(f)||d||p?s in e?ae.validate(c,h)?"enumerated"===h.valType&&(h.coerceNumber&&c!==+f||c!==f)&&n.push(AA("dynamic",a,u,c,f)):n.push(AA("value",a,u,c)):n.push(AA("unused",a,u,c)):n.push(AA("array",a,u,c));else n.push(AA("schema",a,u))}}return n}var _A={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":wA(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":wA(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return wA(t)+"key "+e+" is not part of the schema"},unused:function(t,e,r){var n=mA(r)?"container":"key";return wA(t)+n+" "+e+" did not get coerced"},dynamic:function(t,e,r,n){return[wA(t)+"key",e,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(t){return"Trace "+t[1]+" got defaulted to be not visible"},value:function(t,e,r){return[wA(t)+"key "+e,"is set to an invalid value ("+r+")"].join(" ")}};function wA(t){return yA(t)?"In data trace "+t[1]+", ":"In "+t+", "}function AA(t,e,r,n,a){var i,o;r=r||"",yA(e)?(i=e[0],o=e[1]):(i=e,o=null);var l=function(t){if(!yA(t))return String(t);for(var e="",r=0;r<t.length;r++){var n=t[r];"number"==typeof n?e=e.substr(0,e.length-1)+"["+n+"]":e+=n,r<t.length-1&&(e+=".")}return e}(r),s=_A[t](e,l,n,a);return ae.log(s),{code:t,container:i,trace:o,path:r,astr:l,msg:s}}function MA(t,e){var r=EA(e),n=r.keyMinusId,a=r.id;return!!(n in t&&t[n]._isSubplotObj&&a)||e in t}function TA(t,e){return t[EA(e).keyMinusId]}var kA=ae.counterRegex("([a-z]+)");function EA(t){var e=t.match(kA);return{keyMinusId:e&&e[1],id:e&&e[2]}}var CA=function(t,e){var r=document.createElement("a"),n="download"in r,a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(i,o){if("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&o(new Error("IE < 10 unsupported")),a&&(document.location.href="data:application/octet-stream"+t.slice(t.search(/[,;]/)),i(e)),e||(e="download"),n&&(r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),i(e)),"undefined"!=typeof navigator&&navigator.msSaveBlob){var l=t.split(/^data:image\/svg\+xml,/)[1],s=decodeURIComponent(l);navigator.msSaveBlob(new Blob([s]),e),i(e)}o(new Error("download error"))})};var SA=function(t,e){return(e=e||{}).format=e.format||"png",new Promise(function(r,n){t._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),ae.isIE()&&"svg"!==e.format&&n(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),t._snapshotInProgress=!0;var a=vA(t,e),i=e.filename||t.fn||"newplot";i+="."+e.format,a.then(function(e){return t._snapshotInProgress=!1,CA(e,i)}).then(function(t){r(t)}).catch(function(e){t._snapshotInProgress=!1,n(e)})})},LA={};LA.plot=Vw.plot,LA.newPlot=Vw.newPlot,LA.restyle=Vw.restyle,LA.relayout=Vw.relayout,LA.redraw=Vw.redraw,LA.update=Vw.update,LA.react=Vw.react,LA.extendTraces=Vw.extendTraces,LA.prependTraces=Vw.prependTraces,LA.addTraces=Vw.addTraces,LA.deleteTraces=Vw.deleteTraces,LA.moveTraces=Vw.moveTraces,LA.purge=Vw.purge,LA.addFrames=Vw.addFrames,LA.deleteFrames=Vw.deleteFrames,LA.animate=Vw.animate,LA.setPlotConfig=Vw.setPlotConfig,LA.toImage=vA,LA.validate=function(t,e){var r,n,a=On.get(),i=[],o={_context:ae.extendFlat({},b)};yA(t)?(o.data=ae.extendDeep([],t),r=t):(o.data=[],r=[],i.push(AA("array","data"))),mA(e)?(o.layout=ae.extendDeep({},e),n=e):(o.layout={},n={},arguments.length>1&&i.push(AA("object","layout"))),Wn.supplyDefaults(o);for(var l=o._fullData,s=r.length,u=0;u<s;u++){var c=r[u],f=["data",u];if(mA(c)){var h=l[u],d=h.type,p=a.traces[d].attributes;p.type={valType:"enumerated",values:[d]},!1===h.visible&&!1!==c.visible&&i.push(AA("invisible",f)),bA(c,h,p,i,f);var g=c.transforms,v=h.transforms;if(g){yA(g)||i.push(AA("array",f,["transforms"])),f.push("transforms");for(var m=0;m<g.length;m++){var y=["transforms",m],x=g[m].type;if(mA(g[m])){var _=a.transforms[x]?a.transforms[x].attributes:{};_.type={valType:"enumerated",values:Object.keys(a.transforms)},bA(g[m],v[m],_,i,f,y)}else i.push(AA("object",f,y))}}}else i.push(AA("object",f))}return bA(n,o._fullLayout,function(t,e){for(var r=0;r<e.length;r++){var n=e[r].type,a=t.traces[n].layoutAttributes;a&&ae.extendFlat(t.layout.layoutAttributes,a)}return t.layout.layoutAttributes}(a,l),i,"layout"),0===i.length?void 0:i},LA.downloadImage=SA;var OA=ae.extendFlat,RA=ae.extendDeep;function DA(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}var IA=function(t,e){var r;t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var n,a=t.data,i=t.layout,o=RA([],a),l=RA({},i,DA(e.tileClass)),s=t._context||{};if(e.width&&(l.width=e.width),e.height&&(l.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){l.annotations=[];var u=Object.keys(l);for(r=0;r<u.length;r++)n=u[r],["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))>-1&&(l[u[r]].title="");for(r=0;r<o.length;r++){var c=o[r];c.showscale=!1,c.marker&&(c.marker.showscale=!1),"pie"===c.type&&(c.textposition="none")}}if(Array.isArray(e.annotations))for(r=0;r<e.annotations.length;r++)l.annotations.push(e.annotations[r]);var f=Object.keys(l).filter(function(t){return t.match(/^scene\d*$/)});if(f.length){var h={};for("thumbnail"===e.tileClass&&(h={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),r=0;r<f.length;r++){var d=l[f[r]];d.xaxis||(d.xaxis={}),d.yaxis||(d.yaxis={}),d.zaxis||(d.zaxis={}),OA(d.xaxis,h),OA(d.yaxis,h),OA(d.zaxis,h),d._scene=null}}var p=document.createElement("div");e.tileClass&&(p.className=e.tileClass);var g={gd:p,td:p,layout:l,data:o,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:s.mapboxAccessToken}};return"transparent"!==e.setBackground&&(g.config.setBackground=e.setBackground||"opaque"),g.gd.defaultLayout=DA(e.tileClass),g},PA=Xp.EventEmitter;var FA=function(t,e){var r=new PA,n=IA(t,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var i=sA.getRedrawFunc(a);return R.call("plot",a,n.data,n.layout,n.config).then(i).then(function(){var t=sA.getDelay(a._fullLayout);setTimeout(function(){var t=dA(a),n=document.createElement("canvas");n.id=ae.randstr(),(r=cA({format:e.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:n,emitter:r,svg:t})).clean=function(){a&&document.body.removeChild(a)}},t)}).catch(function(t){r.emit("error",t)}),r},zA={getDelay:sA.getDelay,getRedrawFunc:sA.getRedrawFunc,clone:IA,toSVG:dA,svgToImg:cA,toImage:FA,downloadImage:SA},NA=function(t,e){for(var r=0;r<t.length;r++)t[r].i=r;ae.mergeArray(e.text,t,"tx"),ae.mergeArray(e.hovertext,t,"htx"),ae.mergeArray(e.customdata,t,"data"),ae.mergeArray(e.textposition,t,"tp"),e.textfont&&(ae.mergeArray(e.textfont.size,t,"ts"),ae.mergeArray(e.textfont.color,t,"tc"),ae.mergeArray(e.textfont.family,t,"tf"));var n=e.marker;if(n){ae.mergeArray(n.size,t,"ms"),ae.mergeArray(n.opacity,t,"mo"),ae.mergeArray(n.symbol,t,"mx"),ae.mergeArray(n.color,t,"mc");var a=n.line;n.line&&(ae.mergeArray(a.color,t,"mlc"),ae.mergeArray(a.width,t,"mlw"));var i=n.gradient;i&&"none"!==i.type&&(ae.mergeArray(i.type,t,"mgt"),ae.mergeArray(i.color,t,"mgc"))}},BA=function(t,e){ae.isArrayOrTypedArray(e.selectedpoints)&&ae.tagSelected(t,e)},jA=function(t){Zr.hasLines(t)&&yr(t,"line")&&dr(t,t.line.color,"line","c"),Zr.hasMarkers(t)&&(yr(t,"marker")&&dr(t,t.marker.color,"marker","c"),yr(t,"marker.line")&&dr(t,t.marker.line.color,"marker.line","c"))},UA=ae.isArrayOrTypedArray,VA=r.BADNUM;function HA(t,e,r,n,a,i,o){var l=e._length;r._minDtick=0,n._minDtick=0;var s={padded:!0},u={padded:!0};o&&(s.ppad=u.ppad=o),!("tozerox"===e.fill||"tonextx"===e.fill&&t.firstscatter)||a[0]===a[l-1]&&i[0]===i[l-1]?e.error_y.visible||-1===["tonexty","tozeroy"].indexOf(e.fill)&&(Zr.hasMarkers(e)||Zr.hasText(e))||(s.padded=!1,s.ppad=0):s.tozero=!0,!("tozeroy"===e.fill||"tonexty"===e.fill&&t.firstscatter)||a[0]===a[l-1]&&i[0]===i[l-1]?-1!==["tonextx","tozerox"].indexOf(e.fill)&&(u.padded=!1):u.tozero=!0,ya.expand(r,a,s),ya.expand(n,i,u)}function qA(t,e){if(Zr.hasMarkers(t)){var r,n=t.marker,a=1.6*(t.marker.sizeref||1);if(r="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/a),3)}:function(t){return Math.max((t||0)/a,3)},UA(n.size)){var i={type:"linear"};ya.setConvert(i);for(var o=i.makeCalcdata(t.marker,"size"),l=new Array(e),s=0;s<e;s++)l[s]=r(o[s]);return l}return r(n.size)}}var GA=function(t,r){var n=ya.getFromId(t,r.xaxis||"x"),a=ya.getFromId(t,r.yaxis||"y"),i=n.makeCalcdata(r,"x"),o=a.makeCalcdata(r,"y"),l=r._length,s=new Array(l);HA(t,r,n,a,i,o,qA(r,l));for(var u=0;u<l;u++)s[u]=e(i[u])&&e(o[u])?{x:i[u],y:o[u]}:{x:VA,y:VA},r.ids&&(s[u].id=String(r.ids[u]));return NA(s,r),jA(r),BA(s,r),t.firstscatter=!1,s},XA=qA,WA=HA,YA=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("scatter"===r.type){var n=r.fill;if("none"!==n&&"toself"!==n&&(r.opacity=void 0,"tonexty"===n||"tonextx"===n))for(var a=e-1;a>=0;a--){var i=t[a];if("scatter"===i.type&&i.xaxis===r.xaxis&&i.yaxis===r.yaxis){i.opacity=void 0;break}}}}},ZA=function(t,r){var n=r[0].trace,a=n.marker,i="cb"+n.uid;if(t._fullLayout._infolayer.selectAll("."+i).remove(),void 0!==a&&a.showscale){var o=a.color,l=a.cmin,s=a.cmax;e(l)||(l=ae.aggNums(Math.min,null,o)),e(s)||(s=ae.aggNums(Math.max,null,o));var u=r[0].t.cb=xm(t,i),c=br.makeColorScaleFunc(br.extractScale(a.colorscale,l,s),{noNumericCheck:!0});u.fillcolor(c).filllevels({start:l,end:s,size:(s-l)/254}).options(a.colorbar)()}else Wn.autoMargin(t,i)},JA=ae.isArrayOrTypedArray,QA=function(t,e,r,n){var a=!1;if(e.marker){var i=e.marker.color,o=(e.marker.line||{}).color;i&&!JA(i)?a=i:o&&!JA(o)&&(a=o)}n("fillcolor",Pe.addOpacity((e.line||{}).color||a||r,.5))},$A=ae.isArrayOrTypedArray,KA=function(t,e,r,n,a,i){var o=(t.marker||{}).color;(a("line.color",r),yr(t,"line"))?mr(t,e,n,a,{prefix:"line.",cLetter:"c"}):a("line.color",!$A(o)&&o||r);a("line.width"),(i||{}).noDash||a("line.dash")},tM=function(t,e,r){"spline"===r("line.shape")&&r("line.smoothing")},eM=function(t,e,r,n,a,i){var o=Zr.isBubble(t),l=(t.line||{}).color;(i=i||{},l&&(r=l),a("marker.symbol"),a("marker.opacity",o?.7:1),a("marker.size"),a("marker.color",r),yr(t,"marker")&&mr(t,e,n,a,{prefix:"marker.",cLetter:"c"}),i.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),i.noLine||(a("marker.line.color",l&&!Array.isArray(l)&&e.marker.color!==l?l:o?Pe.background:Pe.defaultLine),yr(t,"marker.line")&&mr(t,e,n,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",o?1:0)),o&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),i.gradient)&&("none"!==a("marker.gradient.type")&&a("marker.gradient.color"))},rM=function(t,e,r,n){var a,i=n("x"),o=n("y");if(R.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],r),i)o?a=Math.min(i.length,o.length):(a=i.length,n("y0"),n("dy"));else{if(!o)return 0;a=e.y.length,n("x0"),n("dx")}return e._length=a,a},nM=function(t,e,r){var n=Array.isArray(r)?function(t){r.push(t)}:function(t){r.text=t},a=ae.extractOption(t,e,"htx","hovertext");if(aM(a))return n(a);var i=ae.extractOption(t,e,"tx","text");return aM(i)?n(i):void 0};function aM(t){return t||0===t}var iM=function(t,e){var r,n;if("lines"===t.mode)return(r=t.line.color)&&Pe.opacity(r)?r:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var a=e.mcc||(t.marker||{}).color,i=e.mlcc||((t.marker||{}).line||{}).color;return(n=a&&Pe.opacity(a)?a:i&&Pe.opacity(i)&&(e.mlw||((t.marker||{}).line||{}).width)?i:"")?Pe.opacity(n)<.3?Pe.addOpacity(n,.3):n:(r=(t.line||{}).color)&&Pe.opacity(r)&&Zr.hasLines(t)&&t.line.width?r:t.fillcolor},oM=r.BADNUM,lM=ae.segmentsIntersect,sM=ae.constrain,uM=function(t,e){var r,n,a,i,o,l,s,u,c,f,h,d,p,g,v,m,y=e.xaxis,x=e.yaxis,b=e.simplify,_=e.connectGaps,w=e.baseTolerance,A=e.shape,M="linear"===A,T=[],k=bn.minTolerance,E=new Array(t.length),C=0;function S(e){var r=t[e],n=y.c2p(r.x),a=x.c2p(r.y);return n===oM||a===oM?r.intoCenter||!1:[n,a]}function L(t){var e=t[0]/y._length,r=t[1]/x._length;return(1+bn.toleranceGrowth*Math.max(0,-e,e-1,-r,r-1))*w}function O(t,e){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}b||(w=k=-1);var R,D,I,P,F,z,N,B=bn.maxScreensAway,j=-y._length*B,U=y._length*(1+B),V=-x._length*B,H=x._length*(1+B),q=[[j,V,U,V],[U,V,U,H],[U,H,j,H],[j,H,j,V]];function G(t){if(t[0]<j||t[0]>U||t[1]<V||t[1]>H)return[sM(t[0],j,U),sM(t[1],V,H)]}function X(t,e){return t[0]===e[0]&&(t[0]===j||t[0]===U)||(t[1]===e[1]&&(t[1]===V||t[1]===H)||void 0)}function W(t,e,r){return function(n,a){var i=G(n),o=G(a),l=[];if(i&&o&&X(i,o))return l;i&&l.push(i),o&&l.push(o);var s=2*ae.constrain((n[t]+a[t])/2,e,r)-((i||n)[t]+(o||a)[t]);s&&((i&&o?s>0==i[t]>o[t]?i:o:i||o)[t]+=s);return l}}function Y(t){var e=t[0],r=t[1],n=e===E[C-1][0],a=r===E[C-1][1];if(!n||!a)if(C>1){var i=e===E[C-2][0],o=r===E[C-2][1];n&&(e===j||e===U)&&i?o?C--:E[C-1]=t:a&&(r===V||r===H)&&o?i?C--:E[C-1]=t:E[C++]=t}else E[C++]=t}function Z(t){E[C-1][0]!==t[0]&&E[C-1][1]!==t[1]&&Y([I,P]),Y(t),F=null,I=P=0}function J(t){if(R=t[0]<j?j:t[0]>U?U:0,D=t[1]<V?V:t[1]>H?H:0,R||D){if(C)if(F){var e=N(F,t);e.length>1&&(Z(e[0]),E[C++]=e[1])}else z=N(E[C-1],t)[0],E[C++]=z;else E[C++]=[R||t[0],D||t[1]];var r=E[C-1];R&&D&&(r[0]!==R||r[1]!==D)?(F&&(I!==R&&P!==D?Y(I&&P?(n=F,i=(a=t)[0]-n[0],o=(a[1]-n[1])/i,(n[1]*a[0]-a[1]*n[0])/i>0?[o>0?j:U,H]:[o>0?U:j,V]):[I||R,P||D]):I&&P&&Y([I,P])),Y([R,D])):I-R&&P-D&&Y([R||I,D||P]),F=t,I=R,P=D}else F&&Z(N(F,t)[0]),E[C++]=t;var n,a,i,o}for("linear"===A||"spline"===A?N=function(t,e){for(var r=[],n=0,a=0;a<4;a++){var i=q[a],o=lM(t[0],t[1],e[0],e[1],i[0],i[1],i[2],i[3]);o&&(!n||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)&&(o=[o.x,o.y],n&&O(o,t)<O(r[0],t)?r.unshift(o):r.push(o),n++)}return r}:"hv"===A||"vh"===A?N=function(t,e){var r=[],n=G(t),a=G(e);return n&&a&&X(n,a)?r:(n&&r.push(n),a&&r.push(a),r)}:"hvh"===A?N=W(0,j,U):"vhv"===A&&(N=W(1,V,H)),r=0;r<t.length;r++)if(n=S(r)){for(C=0,F=null,J(n),r++;r<t.length;r++){if(!(i=S(r))){if(_)continue;break}if(M){if(!((f=O(i,n))<L(i)*k)){for(u=[(i[0]-n[0])/f,(i[1]-n[1])/f],o=n,h=f,d=g=v=0,s=!1,a=i,r++;r<t.length;r++){if(!(l=S(r))){if(_)continue;break}if(m=(c=[l[0]-n[0],l[1]-n[1]])[0]*u[1]-c[1]*u[0],g=Math.min(g,m),(v=Math.max(v,m))-g>L(l))break;a=l,(p=c[0]*u[0]+c[1]*u[1])>h?(h=p,i=l,s=!1):p<d&&(d=p,o=l,s=!0)}if(s?(J(i),a!==o&&J(o)):(o!==n&&J(o),a!==i&&J(i)),J(a),r>=t.length||!l)break;J(l),n=l}}else J(i)}F&&Y([I||F[0],P||F[1]]),T.push(E.slice(0,C))}return T},cM=function(t,e,r){var n,a,i=null;for(a=0;a<r.length;++a)!0===(n=r[a][0].trace).visible?(n._nexttrace=null,-1!==["tonextx","tonexty","tonext"].indexOf(n.fill)&&(n._prevtrace=i,i&&(i._nexttrace=n)),i=n):n._prevtrace=n._nexttrace=null},fM=j_.tester;function hM(e,r,n,a,i,o,l){var s,u;!function(e,r,n,a,i){var o=n.xaxis,l=n.yaxis,s=t.extent(ae.simpleMap(o.range,o.r2c)),u=t.extent(ae.simpleMap(l.range,l.r2c)),c=a[0].trace;if(!Zr.hasMarkers(c))return;var f=c.marker.maxdisplayed;if(0===f)return;var h=a.filter(function(t){return t.x>=s[0]&&t.x<=s[1]&&t.y>=u[0]&&t.y<=u[1]}),d=Math.ceil(h.length/f),p=0;i.forEach(function(t,e){var n=t[0].trace;Zr.hasMarkers(n)&&n.marker.maxdisplayed>0&&e<r&&p++});var g=Math.round(p*d/3+Math.floor(p/3)*d/7.1);a.forEach(function(t){delete t.vis}),h.forEach(function(t,e){0===Math.round((e+g)%d)&&(t.vis=!0)})}(0,r,n,a,i);var c=!!l&&l.duration>0;function f(t){return c?t.transition():t}var h=n.xaxis,d=n.yaxis,p=a[0].trace,g=p.line,v=t.select(o);if(R.getComponentMethod("errorbars","plot")(v,n,l),!0===p.visible){var m,y;f(v).style("opacity",p.opacity);var x=p.fill.charAt(p.fill.length-1);"x"!==x&&"y"!==x&&(x=""),a[0].node3=v;var b="",_=[],w=p._prevtrace;w&&(b=w._prevRevpath||"",y=w._nextFill,_=w._polygons);var A,M,T,k,E,C,S,L,O,D="",I="",P=[],F=ae.noop;if(m=p._ownFill,Zr.hasLines(p)||"none"!==p.fill){for(y&&y.datum(a),-1!==["hv","vh","hvh","vhv"].indexOf(g.shape)?(T=Jr.steps(g.shape),k=Jr.steps(g.shape.split("").reverse().join(""))):T=k="spline"===g.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?Jr.smoothclosed(t.slice(1),g.smoothing):Jr.smoothopen(t,g.smoothing)}:function(t){return"M"+t.join("L")},E=function(t){return k(t.reverse())},P=uM(a,{xaxis:h,yaxis:d,connectGaps:p.connectgaps,baseTolerance:Math.max(g.width||1,3)/4,shape:g.shape,simplify:g.simplify}),O=p._polygons=new Array(P.length),u=0;u<P.length;u++)p._polygons[u]=fM(P[u]);P.length&&(C=P[0][0],L=(S=P[P.length-1])[S.length-1]),F=function(e){return function(r){if(A=T(r),M=E(r),D?x?(D+="L"+A.substr(1),I=M+"L"+I.substr(1)):(D+="Z"+A,I=M+"Z"+I):(D=A,I=M),Zr.hasLines(p)&&r.length>1){var n=t.select(this);if(n.datum(a),e)f(n.style("opacity",0).attr("d",A).call(Jr.lineGroupStyle)).style("opacity",1);else{var i=f(n);i.attr("d",A),Jr.singleLineStyle(a,i)}}}}}var z=v.selectAll(".js-line").data(P);f(z.exit()).style("opacity",0).remove(),z.each(F(!1)),z.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(Jr.lineGroupStyle).each(F(!0)),Jr.setClipUrl(z,n.layerClipId),P.length?(m?C&&L&&(x?("y"===x?C[1]=L[1]=d.c2p(0,!0):"x"===x&&(C[0]=L[0]=h.c2p(0,!0)),f(m).attr("d","M"+L+"L"+C+"L"+D.substr(1)).call(Jr.singleFillStyle)):f(m).attr("d",D+"Z").call(Jr.singleFillStyle)):y&&("tonext"===p.fill.substr(0,6)&&D&&b?("tonext"===p.fill?f(y).attr("d",D+"Z"+b+"Z").call(Jr.singleFillStyle):f(y).attr("d",D+"L"+b.substr(1)+"Z").call(Jr.singleFillStyle),p._polygons=p._polygons.concat(_)):(B(y),p._polygons=null)),p._prevRevpath=I,p._prevPolygons=O):(m?B(m):y&&B(y),p._polygons=p._prevRevpath=p._prevPolygons=null);var N=v.selectAll(".points");s=N.data([a]),N.each(q),s.enter().append("g").classed("points",!0).each(q),s.exit().remove(),s.each(function(e){var r=!1===e[0].trace.cliponaxis;Jr.setClipUrl(t.select(this),r?null:n.layerClipId)})}function B(t){f(t).attr("d","M0,0Z")}function j(t){return t.filter(function(t){return t.vis})}function U(t){return t.id}function V(t){if(t.ids)return U}function H(){return!1}function q(r){var a,i=r[0].trace,o=t.select(this),l=Zr.hasMarkers(i),s=Zr.hasText(i),u=V(i),p=H,g=H;l&&(p=i.marker.maxdisplayed||i._needsCull?j:ae.identity),s&&(g=i.marker.maxdisplayed||i._needsCull?j:ae.identity);var v=(a=o.selectAll("path.point").data(p,u)).enter().append("path").classed("point",!0);c&&v.call(Jr.pointStyle,i,e).call(Jr.translatePoints,h,d).style("opacity",0).transition().style("opacity",1);var m=l&&Jr.tryColorscale(i.marker,""),y=l&&Jr.tryColorscale(i.marker,"line");a.order(),a.each(function(r){var a=t.select(this),o=f(a);Jr.translatePoint(r,o,h,d)?(Jr.singlePointStyle(r,o,i,m,y,e),n.layerClipId&&Jr.hideOutsideRangePoint(r,o,h,d,i.xcalendar,i.ycalendar),i.customdata&&a.classed("plotly-customdata",null!==r.data&&void 0!==r.data)):o.remove()}),c?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=o.selectAll("g").data(g,u)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each(function(e){var r=t.select(this),a=f(r.select("text"));Jr.translatePoint(e,a,h,d)?n.layerClipId&&Jr.hideOutsideRangePoint(e,r,h,d,i.xcalendar,i.ycalendar):r.remove()}),a.selectAll("text").call(Jr.textPointStyle,i,e).each(function(e){var r=h.c2p(e.x),n=d.c2p(e.y);t.select(this).selectAll("tspan.line").each(function(){f(t.select(this)).attr({x:r,y:n})})}),a.exit().remove()}}function dM(t,e,r){var n=t.selectAll("path.point"),a=t.selectAll("text");Jr.pointStyle(n,e,r),Jr.textPointStyle(a,e,r),Jr.selectedPointStyle(n,e),Jr.selectedTextStyle(a,e)}var pM=function(e,r){var n=r?r[0].node3:t.select(e).selectAll("g.trace.scatter");n.style("opacity",function(t){return t[0].trace.opacity}),n.selectAll("g.points").each(function(r){dM(t.select(this),r.trace||r[0].trace,e)}),n.selectAll("g.trace path.js-line").call(Jr.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(Jr.fillGroupStyle),R.getComponentMethod("errorbars","style")(n)},gM={};gM.hasLines=Zr.hasLines,gM.hasMarkers=Zr.hasMarkers,gM.hasText=Zr.hasText,gM.isBubble=Zr.isBubble,gM.attributes=An,gM.supplyDefaults=function(t,e,r,n){function a(r,n){return ae.coerce(t,e,An,r,n)}var i=rM(t,e,n,a),o=i<bn.PTS_LINESONLY?"lines+markers":"lines";if(i){a("text"),a("hovertext"),a("mode",o),Zr.hasLines(e)&&(KA(t,e,r,n,a),tM(0,0,a),a("connectgaps"),a("line.simplify")),Zr.hasMarkers(e)&&eM(t,e,r,n,a,{gradient:!0}),Zr.hasText(e)&&function(t,e,r,n,a){a=a||{},n("textposition"),ae.coerceFont(n,"textfont",r.font),a.noSelect||(n("selected.textfont.color"),n("unselected.textfont.color"))}(0,0,n,a);var l=[];(Zr.hasMarkers(e)||Zr.hasText(e))&&(a("cliponaxis"),a("marker.maxdisplayed"),l.push("points")),a("fill"),"none"!==e.fill&&(QA(0,e,r,a),Zr.hasLines(e)||tM(0,0,a)),"tonext"!==e.fill&&"toself"!==e.fill||l.push("fills"),a("hoveron",l.join("+")||"points");var s=R.getComponentMethod("errorbars","supplyDefaults");s(t,e,r,{axis:"y"}),s(t,e,r,{axis:"x",inherit:"y"}),ae.coerceSelectionMarkerOpacity(e,a)}else e.visible=!1},gM.cleanData=YA,gM.calc=GA,gM.arraysToCalcdata=NA,gM.plot=function(e,r,n,a,i){var o,l,s,u,c=r.plot.select("g.scatterlayer"),f=!a,h=!!a&&a.duration>0;for((s=c.selectAll("g.trace").data(n,function(t){return t[0].trace.uid})).enter().append("g").attr("class",function(t){return"trace scatter trace"+t[0].trace.uid}).style("stroke-miterlimit",2),cM(e,r,n),function(e,r,n){var a;r.selectAll("g.trace").each(function(e){var r=t.select(this);if((a=e[0].trace)._nexttrace){if(a._nextFill=r.select(".js-fill.js-tonext"),!a._nextFill.size()){var i=":first-child";r.select(".js-fill.js-tozero").size()&&(i+=" + *"),a._nextFill=r.insert("path",i).attr("class","js-fill js-tonext")}}else r.selectAll(".js-fill.js-tonext").remove(),a._nextFill=null;a.fill&&("tozero"===a.fill.substr(0,6)||"toself"===a.fill||"to"===a.fill.substr(0,2)&&!a._prevtrace)?(a._ownFill=r.select(".js-fill.js-tozero"),a._ownFill.size()||(a._ownFill=r.insert("path",":first-child").attr("class","js-fill js-tozero"))):(r.selectAll(".js-fill.js-tozero").remove(),a._ownFill=null),r.selectAll(".js-fill").call(Jr.setClipUrl,n.layerClipId)})}(0,c,r),o=0,l={};o<n.length;o++)l[n[o][0].trace.uid]=o;c.selectAll("g.trace").sort(function(t,e){return l[t[0].trace.uid]>l[e[0].trace.uid]?1:-1}),h?(i&&(u=i()),t.transition().duration(a.duration).ease(a.easing).each("end",function(){u&&u()}).each("interrupt",function(){u&&u()}).each(function(){c.selectAll("g.trace").each(function(t,i){hM(e,i,r,t,n,this,a)})})):c.selectAll("g.trace").each(function(t,i){hM(e,i,r,t,n,this,a)});f&&s.exit().remove(),c.selectAll("path:not([d])").remove()},gM.colorbar=ZA,gM.style=pM,gM.hoverPoints=function(t,e,r,n){var a=t.cd,i=a[0].trace,o=t.xa,l=t.ya,s=o.c2p(e),u=l.c2p(r),c=[s,u],f=i.hoveron||"",h=-1!==i.mode.indexOf("markers")?3:.5;if(-1!==f.indexOf("points")){var d=function(t){var e=Math.max(h,t.mrc||0),r=o.c2p(t.x)-s,n=l.c2p(t.y)-u;return Math.max(Math.sqrt(r*r+n*n)-e,1-h/e)},p=Cg.getDistanceFunction(n,function(t){var e=Math.max(3,t.mrc||0),r=1-1/e,n=Math.abs(o.c2p(t.x)-s);return n<e?r*n/e:n-e+r},function(t){var e=Math.max(3,t.mrc||0),r=1-1/e,n=Math.abs(l.c2p(t.y)-u);return n<e?r*n/e:n-e+r},d);if(Cg.getClosest(a,p,t),!1!==t.index){var g=a[t.index],v=o.c2p(g.x,!0),m=l.c2p(g.y,!0),y=g.mrc||1;return ae.extendFlat(t,{color:iM(i,g),x0:v-y,x1:v+y,xLabelVal:g.x,y0:m-y,y1:m+y,yLabelVal:g.y,spikeDistance:d(g)}),nM(g,i,t),R.getComponentMethod("errorbars","hoverInfo")(g,i,t),[t]}}if(-1!==f.indexOf("fills")&&i._polygons){var x,b,_,w,A,M,T,k,E,C=i._polygons,S=[],L=!1,O=1/0,D=-1/0,I=1/0,P=-1/0;for(x=0;x<C.length;x++)(_=C[x]).contains(c)&&(L=!L,S.push(_),I=Math.min(I,_.ymin),P=Math.max(P,_.ymax));if(L){var F=((I=Math.max(I,0))+(P=Math.min(P,l._length)))/2;for(x=0;x<S.length;x++)for(w=S[x].pts,b=1;b<w.length;b++)(k=w[b-1][1])>F!=(E=w[b][1])>=F&&(M=w[b-1][0],T=w[b][0],E-k&&(A=M+(T-M)*(F-k)/(E-k),O=Math.min(O,A),D=Math.max(D,A)));O=Math.max(O,0),D=Math.min(D,o._length);var z=Pe.defaultLine;return Pe.opacity(i.fillcolor)?z=i.fillcolor:Pe.opacity((i.line||{}).color)&&(z=i.line.color),ae.extendFlat(t,{distance:t.maxHoverDistance,x0:O,x1:D,y0:F,y1:F,color:z}),delete t.index,i.text&&!Array.isArray(i.text)?t.text=String(i.text):t.text=i.name,[t]}}},gM.selectPoints=function(t,e){var r,n,a,i,o=t.cd,l=t.xaxis,s=t.yaxis,u=[],c=o[0].trace;if(!Zr.hasMarkers(c)&&!Zr.hasText(c))return[];if(!1===e)for(r=0;r<o.length;r++)o[r].selected=0;else for(r=0;r<o.length;r++)n=o[r],a=l.c2p(n.x),i=s.c2p(n.y),e.contains([a,i])?(u.push({pointNumber:r,x:l.c2d(n.x),y:s.c2d(n.y)}),n.selected=1):n.selected=0;return u},gM.animatable=!0,gM.moduleType="trace",gM.name="scatter",gM.basePlotModule=Ka,gM.categories=["cartesian","symbols","markerColorscale","errorBarsOK","showLegend","scatter-like"],gM.meta={};var vM=gM,mM={version:"1.35.2"};ly.polyfill();for(var yM=mM.register=R.register,xM=Object.keys(LA),bM=0;bM<xM.length;bM++){var _M=xM[bM];mM[_M]=LA[_M],yM({moduleType:"apiMethod",name:_M,fn:LA[_M]})}yM(vM),yM([Cg,yx,Oy,Ay,eb,$y,Qb,Eb,Vx,Lx,Zy,jy]),yM([{moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},{moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}]),mM.Icons=oy,mM.Plots=Wn,mM.Fx=Cg,mM.Snapshot=zA,mM.PlotSchema=On,mM.Queue=t_,mM.d3=t;for(var wM=mM,AM=m.extendFlat,MM=xe.overrideAll,TM=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],kM={},EM=0;EM<TM.length;EM++){var CM=TM[EM];kM[CM]=Cv[CM]}AM(kM,fr,{autocolorscale:AM({},fr.autocolorscale,{dflt:!1})},{colorbar:gr});var SM=MM(kM,"calc","nested");function LM(t,e){this.scene=t,this.uid=e,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=Xm(t.glplot,this.options),this.heatmap._trace=this}var OM=LM.prototype;OM.handlePick=function(t){var e=this.options,r=e.shape,n=t.pointId,a=n%r[0],i=Math.floor(n/r[0]),o=n;return{trace:this,dataCoord:t.dataCoord,traceCoord:[e.x[a],e.y[i],e.z[o]],textLabel:this.textLabels[n],name:this.name,pointIndex:[i,a],hoverinfo:this.hoverinfo}},OM.update=function(t,e){var r=e[0];this.index=t.index,this.name=t.name,this.hoverinfo=t.hoverinfo;var n=r.z;this.options.z=[].concat.apply([],n);var a=n[0].length,i=n.length;this.options.shape=[a,i],this.options.x=r.x,this.options.y=r.y;var o=function(t){for(var e=t.colorscale,r=t.zmin,n=t.zmax,a=e.length,i=new Array(a),o=new Array(4*a),l=0;l<a;l++){var s=e[l],u=ov(s[1]);i[l]=r+s[0]*(n-r);for(var c=0;c<4;c++)o[4*l+c]=u[c]}return{colorLevels:i,colorValues:o}}(t);this.options.colorLevels=o.colorLevels,this.options.colorValues=o.colorValues,this.textLabels=[].concat.apply([],t.text),this.heatmap.update(this.options),ya.expand(this.scene.xaxis,r.x),ya.expand(this.scene.yaxis,r.y)},OM.dispose=function(){this.heatmap.dispose()};var RM=function(t,e,r){var n=new LM(t,e.uid);return n.update(e,r),n},DM={};DM.attributes=SM,DM.supplyDefaults=function(t,e,r,n){function a(r,n){return ae.coerce(t,e,Cv,r,n)}Sm(t,e,a,n)?(a("text"),function(t,e,r){!1===r("zsmooth")&&(r("xgap"),r("ygap")),r("zhoverformat")}(0,0,a),a("connectgaps",jv(e)&&!1!==e.zsmooth),mr(t,e,n,a,{prefix:"",cLetter:"z"})):e.visible=!1},DM.colorbar=function(t,r){var n=r[0].trace,a="cb"+n.uid,i=n.zmin,o=n.zmax;if(e(i)||(i=ae.aggNums(Math.min,null,n.z)),e(o)||(o=ae.aggNums(Math.max,null,n.z)),t._fullLayout._infolayer.selectAll("."+a).remove(),n.showscale){var l=r[0].t.cb=xm(t,a),s=br.makeColorScaleFunc(br.extractScale(n.colorscale,i,o),{noNumericCheck:!0});l.fillcolor(s).filllevels({start:i,end:o,size:(o-i)/254}).options(n.colorbar)()}else Wn.autoMargin(t,a)},DM.calc=gm,DM.plot=RM,DM.moduleType="trace",DM.name="heatmapgl",DM.basePlotModule=_v,DM.categories=["gl","gl2d","2dMap"],DM.meta={};var IM,PM,FM=DM,zM=Uy.attributes,NM=m.extendDeepAll,BM=m.extendFlat,jM={domain:zM({name:"parcoords",trace:!0,editType:"calc"}),labelfont:k({editType:"calc"}),tickfont:k({editType:"calc"}),rangefont:k({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},tickvals:BM({},Ie.tickvals,{editType:"calc"}),ticktext:BM({},Ie.ticktext,{editType:"calc"}),tickformat:{valType:"string",dflt:"3s",editType:"calc"},visible:{valType:"boolean",dflt:!0,editType:"calc"},range:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},constraintrange:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},values:{valType:"data_array",editType:"calc"},editType:"calc"},line:BM(NM(xn(0,"calc"),{colorscale:{dflt:s.Viridis},autocolorscale:{dflt:!1}}),{showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:gr,editType:"calc"})},UM={exports:{}};function VM(t){return[t]}IM=this,PM=function(){function t(t,e){this.id=U++,this.type=t,this.data=e}function e(t){return"["+function t(e){if(0===e.length)return[];var r=e.charAt(0),n=e.charAt(e.length-1);if(1<e.length&&r===n&&('"'===r||"'"===r))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return t(e.substr(0,r.index)).concat(t(r[1])).concat(t(e.substr(r.index+r[0].length)));if(1===(r=e.split(".")).length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(e=[],n=0;n<r.length;++n)e=e.concat(t(r[n]));return e}(t).join("][")+"]"}function r(t){return"string"==typeof t?t.split():t}function n(t){return"string"==typeof t?document.querySelector(t):t}function a(t){var e,a,i,o,l=t||{};t={};var s=[],u=[],c="undefined"==typeof window?1:window.devicePixelRatio,f=!1,h=function(t){},d=function(){};if("string"==typeof l?e=document.querySelector(l):"object"==typeof l&&("string"==typeof l.nodeName&&"function"==typeof l.appendChild&&"function"==typeof l.getBoundingClientRect?e=l:"function"==typeof l.drawArrays||"function"==typeof l.drawElements?i=(o=l).canvas:("gl"in l?o=l.gl:"canvas"in l?i=n(l.canvas):"container"in l&&(a=n(l.container)),"attributes"in l&&(t=l.attributes),"extensions"in l&&(s=r(l.extensions)),"optionalExtensions"in l&&(u=r(l.optionalExtensions)),"onDone"in l&&(h=l.onDone),"profile"in l&&(f=!!l.profile),"pixelRatio"in l&&(c=+l.pixelRatio))),e&&("canvas"===e.nodeName.toLowerCase()?i=e:a=e),!o){if(!i){if(!(e=function(t,e,r){function n(){var e=window.innerWidth,n=window.innerHeight;t!==document.body&&(e=(n=t.getBoundingClientRect()).right-n.left,n=n.bottom-n.top),a.width=r*e,a.height=r*n,j(a.style,{width:e+"px",height:n+"px"})}var a=document.createElement("canvas");return j(a.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(a),t===document.body&&(a.style.position="absolute",j(t.style,{margin:0,padding:0})),window.addEventListener("resize",n,!1),n(),{canvas:a,onDestroy:function(){window.removeEventListener("resize",n),t.removeChild(a)}}}(a||document.body,0,c)))return null;i=e.canvas,d=e.onDestroy}o=function(t,e){function r(r){try{return t.getContext(r,e)}catch(t){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}(i,t)}return o?{gl:o,canvas:i,container:a,extensions:s,optionalExtensions:u,pixelRatio:c,profile:f,onDone:h,onDestroy:d}:(d(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function i(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||G(t.data))}function o(t,e){for(var r=Array(t),n=0;n<t;++n)r[n]=e(n);return r}function l(t){var e,r;return e=(65535<t)<<4,e|=r=(255<(t>>>=e))<<3,(e|=r=(15<(t>>>=r))<<2)|(r=(3<(t>>>=r))<<1)|t>>>r>>1}function s(t){t:{for(var e=16;268435456>=e;e*=16)if(t<=e){t=e;break t}t=0}return 0<(e=W[l(t)>>2]).length?e.pop():new ArrayBuffer(t)}function u(t){W[l(t.byteLength)>>2].push(t)}function c(t,e,r,n,a,i){for(var o=0;o<e;++o)for(var l=t[o],s=0;s<r;++s)for(var u=l[s],c=0;c<n;++c)a[i++]=u[c]}function f(t){return 0|J[Object.prototype.toString.call(t)]}function h(t,e){for(var r=0;r<e.length;++r)t[r]=e[r]}function d(t,e,r,n,a,i,o){for(var l=0,s=0;s<r;++s)for(var u=0;u<n;++u)t[l++]=e[a*s+i*u+o]}function p(t,e,r){function n(e){this.id=s++,this.buffer=t.createBuffer(),this.type=e,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}function a(e,r,n){e.byteLength=r.byteLength,t.bufferData(e.type,r,n)}function o(t,e,r,n,o,l){if(t.usage=r,Array.isArray(e)){if(t.dtype=n||5126,0<e.length)if(Array.isArray(e[0])){o=tt(e);for(var s=n=1;s<o.length;++s)n*=o[s];t.dimension=n,a(t,e=K(e,o,t.dtype),r),l?t.persistentData=e:Y.freeType(e)}else"number"==typeof e[0]?(t.dimension=o,h(o=Y.allocType(t.dtype,e.length),e),a(t,o,r),l?t.persistentData=o:Y.freeType(o)):G(e[0])&&(t.dimension=e[0].length,t.dtype=n||f(e[0])||5126,a(t,e=K(e,[e.length,e[0].length],t.dtype),r),l?t.persistentData=e:Y.freeType(e))}else if(G(e))t.dtype=n||f(e),t.dimension=o,a(t,e,r),l&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(i(e)){o=e.shape;var u=e.stride,c=(s=e.offset,0),p=0,g=0,v=0;1===o.length?(c=o[0],p=1,g=u[0],v=0):2===o.length&&(c=o[0],p=o[1],g=u[0],v=u[1]),t.dtype=n||f(e.data)||5126,t.dimension=p,d(o=Y.allocType(t.dtype,c*p),e.data,c,p,g,v,s),a(t,o,r),l?t.persistentData=o:Y.freeType(o)}}function l(r){e.bufferCount--,t.deleteBuffer(r.buffer),r.buffer=null,delete u[r.id]}var s=0,u={};n.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},n.prototype.destroy=function(){l(this)};var c=[];return r.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(u).forEach(function(e){t+=u[e].stats.size}),t}),{create:function(a,s,c,p){function g(e){var n=35044,a=null,l=0,s=0,u=1;return Array.isArray(e)||G(e)||i(e)?a=e:"number"==typeof e?l=0|e:e&&("data"in e&&(a=e.data),"usage"in e&&(n=$[e.usage]),"type"in e&&(s=Q[e.type]),"dimension"in e&&(u=0|e.dimension),"length"in e&&(l=0|e.length)),v.bind(),a?o(v,a,n,s,u,p):(t.bufferData(v.type,l,n),v.dtype=s||5121,v.usage=n,v.dimension=u,v.byteLength=l),r.profile&&(v.stats.size=v.byteLength*et[v.dtype]),g}e.bufferCount++;var v=new n(s);return u[v.id]=v,c||g(a),g._reglType="buffer",g._buffer=v,g.subdata=function(e,r){var n,a=0|(r||0);if(v.bind(),G(e))t.bufferSubData(v.type,a,e);else if(Array.isArray(e)){if(0<e.length)if("number"==typeof e[0]){var o=Y.allocType(v.dtype,e.length);h(o,e),t.bufferSubData(v.type,a,o),Y.freeType(o)}else(Array.isArray(e[0])||G(e[0]))&&(n=tt(e),o=K(e,n,v.dtype),t.bufferSubData(v.type,a,o),Y.freeType(o))}else if(i(e)){n=e.shape;var l=e.stride,s=o=0,u=0,c=0;1===n.length?(o=n[0],s=1,u=l[0],c=0):2===n.length&&(o=n[0],s=n[1],u=l[0],c=l[1]),n=Array.isArray(e.data)?v.dtype:f(e.data),d(n=Y.allocType(n,o*s),e.data,o,s,u,c,e.offset),t.bufferSubData(v.type,a,n),Y.freeType(n)}return g},r.profile&&(g.stats=v.stats),g.destroy=function(){l(v)},g},createStream:function(t,e){var r=c.pop();return r||(r=new n(t)),r.bind(),o(r,e,35040,0,1,!1),r},destroyStream:function(t){c.push(t)},clear:function(){X(u).forEach(l),c.forEach(l)},getBuffer:function(t){return t&&t._buffer instanceof n?t._buffer:null},restore:function(){X(u).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:o}}function g(t,e,r,n){function a(t){this.id=u++,s[this.id]=this,this.buffer=t,this.primType=4,this.type=this.vertCount=0}function o(n,a,o,l,s,u,c){if(n.buffer.bind(),a){var f=c;c||G(a)&&(!i(a)||G(a.data))||(f=e.oes_element_index_uint?5125:5123),r._initBuffer(n.buffer,a,o,f,3)}else t.bufferData(34963,u,o),n.buffer.dtype=f||5121,n.buffer.usage=o,n.buffer.dimension=3,n.buffer.byteLength=u;if(f=c,!c){switch(n.buffer.dtype){case 5121:case 5120:f=5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125}n.buffer.dtype=f}n.type=f,0>(a=s)&&(a=n.buffer.byteLength,5123===f?a>>=1:5125===f&&(a>>=2)),n.vertCount=a,a=l,0>l&&(a=4,1===(l=n.buffer.dimension)&&(a=0),2===l&&(a=1),3===l&&(a=4)),n.primType=a}function l(t){n.elementsCount--,delete s[t.id],t.buffer.destroy(),t.buffer=null}var s={},u=0,c={uint8:5121,uint16:5123};e.oes_element_index_uint&&(c.uint32=5125),a.prototype.bind=function(){this.buffer.bind()};var f=[];return{create:function(t,e){function s(t){if(t)if("number"==typeof t)u(t),f.primType=4,f.vertCount=0|t,f.type=5121;else{var e=null,r=35044,n=-1,a=-1,l=0,h=0;Array.isArray(t)||G(t)||i(t)?e=t:("data"in t&&(e=t.data),"usage"in t&&(r=$[t.usage]),"primitive"in t&&(n=rt[t.primitive]),"count"in t&&(a=0|t.count),"type"in t&&(h=c[t.type]),"length"in t?l=0|t.length:(l=a,5123===h||5122===h?l*=2:5125!==h&&5124!==h||(l*=4))),o(f,e,r,n,a,l,h)}else u(),f.primType=4,f.vertCount=0,f.type=5121;return s}var u=r.create(null,34963,!0),f=new a(u._buffer);return n.elementsCount++,s(t),s._reglType="elements",s._elements=f,s.subdata=function(t,e){return u.subdata(t,e),s},s.destroy=function(){l(f)},s},createStream:function(t){var e=f.pop();return e||(e=new a(r.create(null,34963,!0,!1)._buffer)),o(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){f.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof a?t._elements:null},clear:function(){X(s).forEach(l)}}}function v(t){for(var e=Y.allocType(5123,t.length),r=0;r<t.length;++r)if(isNaN(t[r]))e[r]=65535;else if(1/0===t[r])e[r]=31744;else if(-1/0===t[r])e[r]=64512;else{nt[0]=t[r];var n=(i=at[0])>>>31<<15,a=(i<<1>>>24)-127,i=i>>13&1023;e[r]=-24>a?n:-14>a?n+(i+1024>>-14-a):15<a?n+31744:n+(a+15<<10)+i}return e}function m(t){return Array.isArray(t)||G(t)}function y(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function x(t){return!(!Array.isArray(t)||0===t.length||!m(t[0]))}function b(t){return Object.prototype.toString.call(t)}function _(t){if(!t)return!1;var e=b(t);return 0<=st.indexOf(e)||(y(t)||x(t)||i(t))}function w(t,e){36193===t.type?(t.data=v(e),Y.freeType(e)):t.data=e}function A(t,e,r,n,a,i){if(t=void 0!==ct[t]?ct[t]:lt[t]*ut[e],i&&(t*=6),a){for(n=0;1<=r;)n+=t*r*r,r/=2;return n}return t*r*n}function M(t,e,r,n,a,o,l){function s(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function u(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function c(t,e){if("object"==typeof e&&e){"premultiplyAlpha"in e&&(t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(t.flipY=e.flipY),"alignment"in e&&(t.unpackAlignment=e.alignment),"colorSpace"in e&&(t.colorSpace=V[e.colorSpace]),"type"in e&&(t.type=H[e.type]);var r=t.width,n=t.height,a=t.channels,i=!1;"shape"in e?(r=e.shape[0],n=e.shape[1],3===e.shape.length&&(a=e.shape[2],i=!0)):("radius"in e&&(r=n=e.radius),"width"in e&&(r=e.width),"height"in e&&(n=e.height),"channels"in e&&(a=e.channels,i=!0)),t.width=0|r,t.height=0|n,t.channels=0|a,r=!1,"format"in e&&(r=e.format,n=t.internalformat=q[r],t.format=at[n],r in H&&!("type"in e)&&(t.type=H[r]),r in W&&(t.compressed=!0),r=!0),!i&&r?t.channels=lt[t.format]:i&&!r&&t.channels!==ot[t.format]&&(t.format=t.internalformat=ot[t.channels])}}function f(e){t.pixelStorei(37440,e.flipY),t.pixelStorei(37441,e.premultiplyAlpha),t.pixelStorei(37443,e.colorSpace),t.pixelStorei(3317,e.unpackAlignment)}function h(){s.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function d(t,e){var r=null;if(_(e)?r=e:e&&(c(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),_(e.data)&&(r=e.data)),e.copy){var n=a.viewportWidth,o=a.viewportHeight;t.width=t.width||n-t.xOffset,t.height=t.height||o-t.yOffset,t.needsCopy=!0}else if(r){if(G(r))t.channels=t.channels||4,t.data=r,"type"in e||5121!==t.type||(t.type=0|J[Object.prototype.toString.call(r)]);else if(y(r)){switch(t.channels=t.channels||4,o=(n=r).length,t.type){case 5121:case 5123:case 5125:case 5126:(o=Y.allocType(t.type,o)).set(n),t.data=o;break;case 36193:t.data=v(n)}t.alignment=1,t.needsFree=!0}else if(i(r)){n=r.data,Array.isArray(n)||5121!==t.type||(t.type=0|J[Object.prototype.toString.call(n)]);o=r.shape;var l,s,u,f,h=r.stride;3===o.length?(u=o[2],f=h[2]):f=u=1,l=o[0],s=o[1],o=h[0],h=h[1],t.alignment=1,t.width=l,t.height=s,t.channels=u,t.format=t.internalformat=ot[u],t.needsFree=!0,l=f,r=r.offset,u=t.width,f=t.height,s=t.channels;for(var d=Y.allocType(36193===t.type?5126:t.type,u*f*s),p=0,g=0;g<f;++g)for(var A=0;A<u;++A)for(var M=0;M<s;++M)d[p++]=n[o*A+h*g+l*M+r];w(t,d)}else if("[object HTMLCanvasElement]"===b(r)||"[object CanvasRenderingContext2D]"===b(r))"[object HTMLCanvasElement]"===b(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if("[object HTMLImageElement]"===b(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if("[object HTMLVideoElement]"===b(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(x(r)){for(n=t.width||r[0].length,o=t.height||r.length,h=t.channels,h=m(r[0][0])?h||r[0][0].length:h||1,l=Z.shape(r),u=1,f=0;f<l.length;++f)u*=l[f];u=Y.allocType(36193===t.type?5126:t.type,u),Z.flatten(r,l,"",u),w(t,u),t.alignment=1,t.width=n,t.height=o,t.channels=h,t.format=t.internalformat=ot[h],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4}function p(e,r,a,i,o){var l=e.element,s=e.data,u=e.internalformat,c=e.format,h=e.type,d=e.width,p=e.height;f(e),l?t.texSubImage2D(r,o,a,i,c,h,l):e.compressed?t.compressedTexSubImage2D(r,o,a,i,u,d,p,s):e.needsCopy?(n(),t.copyTexSubImage2D(r,o,a,i,e.xOffset,e.yOffset,d,p)):t.texSubImage2D(r,o,a,i,d,p,c,h,s)}function g(){return st.pop()||new h}function M(t){t.needsFree&&Y.freeType(t.data),h.call(t),st.push(t)}function T(t,e,r){var n=t.images[0]=g();t.mipmask=1,n.width=t.width=e,n.height=t.height=r,n.channels=t.channels=4}function k(t,e){var r=null;if(_(e))u(r=t.images[0]=g(),t),d(r,e),t.mipmask=1;else if(c(t,e),Array.isArray(e.mipmap))for(var n=e.mipmap,a=0;a<n.length;++a)u(r=t.images[a]=g(),t),r.width>>=a,r.height>>=a,d(r,n[a]),t.mipmask|=1<<a;else u(r=t.images[0]=g(),t),d(r,e),t.mipmask=1;u(t,t.images[0])}function E(e,r){for(var a=e.images,i=0;i<a.length&&a[i];++i){var o=a[i],l=r,s=i,u=o.element,c=o.data,h=o.internalformat,d=o.format,p=o.type,g=o.width,v=o.height;f(o),u?t.texImage2D(l,s,d,d,p,u):o.compressed?t.compressedTexImage2D(l,s,h,g,v,0,c):o.needsCopy?(n(),t.copyTexImage2D(l,s,d,o.xOffset,o.yOffset,g,v,0)):t.texImage2D(l,s,d,g,v,0,d,p,c)}}function C(){var t=ut.pop()||new function(){s.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)};s.call(t);for(var e=t.mipmask=0;16>e;++e)t.images[e]=null;return t}function S(t){for(var e=t.images,r=0;r<e.length;++r)e[r]&&M(e[r]),e[r]=null;ut.push(t)}function L(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function O(t,e){"min"in e&&(t.minFilter=U[e.min],0<=it.indexOf(t.minFilter)&&(t.genMipmaps=!0)),"mag"in e&&(t.magFilter=B[e.mag]);var r=t.wrapS,n=t.wrapT;if("wrap"in e){var a=e.wrap;"string"==typeof a?r=n=N[a]:Array.isArray(a)&&(r=N[a[0]],n=N[a[1]])}else"wrapS"in e&&(r=N[e.wrapS]),"wrapT"in e&&(n=N[e.wrapT]);if(t.wrapS=r,t.wrapT=n,"anisotropic"in e&&(t.anisotropic=e.anisotropic),"mipmap"in e){switch(r=!1,typeof e.mipmap){case"string":t.mipmapHint=z[e.mipmap],r=t.genMipmaps=!0;break;case"boolean":r=t.genMipmaps=e.mipmap;break;case"object":t.genMipmaps=!1,r=!0}!r||"min"in e||(t.minFilter=9984)}}function R(r,n){t.texParameteri(n,10241,r.minFilter),t.texParameteri(n,10240,r.magFilter),t.texParameteri(n,10242,r.wrapS),t.texParameteri(n,10243,r.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(n,34046,r.anisotropic),r.genMipmaps&&(t.hint(33170,r.mipmapHint),t.generateMipmap(n))}function D(e){s.call(this),this.mipmask=0,this.internalformat=6408,this.id=ct++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new L,l.profile&&(this.stats={size:0})}function I(e){t.activeTexture(33984),t.bindTexture(e.target,e.texture)}function P(){var e=dt[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(3553,null)}function F(e){var r=e.texture,n=e.unit,a=e.target;0<=n&&(t.activeTexture(33984+n),t.bindTexture(a,null),dt[n]=null),t.deleteTexture(r),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete ft[e.id],o.textureCount--}var z={"don't care":4352,"dont care":4352,nice:4354,fast:4353},N={repeat:10497,clamp:33071,mirror:33648},B={nearest:9728,linear:9729},U=j({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},B),V={none:0,browser:37444},H={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},q={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},W={};e.ext_srgb&&(q.srgb=35904,q.srgba=35906),e.oes_texture_float&&(H.float32=H.float=5126),e.oes_texture_half_float&&(H.float16=H["half float"]=36193),e.webgl_depth_texture&&(j(q,{depth:6402,"depth stencil":34041}),j(H,{uint16:5123,uint32:5125,"depth stencil":34042})),e.webgl_compressed_texture_s3tc&&j(W,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),e.webgl_compressed_texture_atc&&j(W,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),e.webgl_compressed_texture_pvrtc&&j(W,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),e.webgl_compressed_texture_etc1&&(W["rgb etc1"]=36196);var Q=Array.prototype.slice.call(t.getParameter(34467));Object.keys(W).forEach(function(t){var e=W[t];0<=Q.indexOf(e)&&(q[t]=e)});var $=Object.keys(q);r.textureFormats=$;var K=[];Object.keys(q).forEach(function(t){K[q[t]]=t});var tt=[];Object.keys(H).forEach(function(t){tt[H[t]]=t});var et=[];Object.keys(B).forEach(function(t){et[B[t]]=t});var rt=[];Object.keys(U).forEach(function(t){rt[U[t]]=t});var nt=[];Object.keys(N).forEach(function(t){nt[N[t]]=t});var at=$.reduce(function(t,e){var r=q[e];return 6409===r||6406===r||6409===r||6410===r||6402===r||34041===r?t[r]=r:32855===r||0<=e.indexOf("rgba")?t[r]=6408:t[r]=6407,t},{}),st=[],ut=[],ct=0,ft={},ht=r.maxTextureUnits,dt=Array(ht).map(function(){return null});return j(D.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var r=0;r<ht;++r){var n=dt[r];if(n){if(0<n.bindCount)continue;n.unit=-1}dt[r]=this,e=r;break}l.profile&&o.maxTextureUnits<e+1&&(o.maxTextureUnits=e+1),this.unit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.texture)}return e},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&F(this)}}),l.profile&&(o.getTotalTextureSize=function(){var t=0;return Object.keys(ft).forEach(function(e){t+=ft[e].stats.size}),t}),{create2D:function(e,r){function n(t,e){var r=a.texInfo;L.call(r);var i=C();return"number"==typeof t?T(i,0|t,"number"==typeof e?0|e:0|t):t?(O(r,t),k(i,t)):T(i,1,1),r.genMipmaps&&(i.mipmask=(i.width<<1)-1),a.mipmask=i.mipmask,u(a,i),a.internalformat=i.internalformat,n.width=i.width,n.height=i.height,I(a),E(i,3553),R(r,3553),P(),S(i),l.profile&&(a.stats.size=A(a.internalformat,a.type,i.width,i.height,r.genMipmaps,!1)),n.format=K[a.internalformat],n.type=tt[a.type],n.mag=et[r.magFilter],n.min=rt[r.minFilter],n.wrapS=nt[r.wrapS],n.wrapT=nt[r.wrapT],n}var a=new D(3553);return ft[a.id]=a,o.textureCount++,n(e,r),n.subimage=function(t,e,r,i){e|=0,r|=0,i|=0;var o=g();return u(o,a),o.width=0,o.height=0,d(o,t),o.width=o.width||(a.width>>i)-e,o.height=o.height||(a.height>>i)-r,I(a),p(o,3553,e,r,i),P(),M(o),n},n.resize=function(e,r){var i=0|e,o=0|r||i;if(i===a.width&&o===a.height)return n;n.width=a.width=i,n.height=a.height=o,I(a);for(var s=0;a.mipmask>>s;++s)t.texImage2D(3553,s,a.format,i>>s,o>>s,0,a.format,a.type,null);return P(),l.profile&&(a.stats.size=A(a.internalformat,a.type,i,o,!1,!1)),n},n._reglType="texture2d",n._texture=a,l.profile&&(n.stats=a.stats),n.destroy=function(){a.decRef()},n},createCube:function(e,r,n,a,i,s){function f(t,e,r,n,a,i){var o,s=h.texInfo;for(L.call(s),o=0;6>o;++o)v[o]=C();if("number"!=typeof t&&t){if("object"==typeof t)if(e)k(v[0],t),k(v[1],e),k(v[2],r),k(v[3],n),k(v[4],a),k(v[5],i);else if(O(s,t),c(h,t),"faces"in t)for(t=t.faces,o=0;6>o;++o)u(v[o],h),k(v[o],t[o]);else for(o=0;6>o;++o)k(v[o],t)}else for(t=0|t||1,o=0;6>o;++o)T(v[o],t,t);for(u(h,v[0]),h.mipmask=s.genMipmaps?(v[0].width<<1)-1:v[0].mipmask,h.internalformat=v[0].internalformat,f.width=v[0].width,f.height=v[0].height,I(h),o=0;6>o;++o)E(v[o],34069+o);for(R(s,34067),P(),l.profile&&(h.stats.size=A(h.internalformat,h.type,f.width,f.height,s.genMipmaps,!0)),f.format=K[h.internalformat],f.type=tt[h.type],f.mag=et[s.magFilter],f.min=rt[s.minFilter],f.wrapS=nt[s.wrapS],f.wrapT=nt[s.wrapT],o=0;6>o;++o)S(v[o]);return f}var h=new D(34067);ft[h.id]=h,o.cubeCount++;var v=Array(6);return f(e,r,n,a,i,s),f.subimage=function(t,e,r,n,a){r|=0,n|=0,a|=0;var i=g();return u(i,h),i.width=0,i.height=0,d(i,e),i.width=i.width||(h.width>>a)-r,i.height=i.height||(h.height>>a)-n,I(h),p(i,34069+t,r,n,a),P(),M(i),f},f.resize=function(e){if((e|=0)!==h.width){f.width=h.width=e,f.height=h.height=e,I(h);for(var r=0;6>r;++r)for(var n=0;h.mipmask>>n;++n)t.texImage2D(34069+r,n,h.format,e>>n,e>>n,0,h.format,h.type,null);return P(),l.profile&&(h.stats.size=A(h.internalformat,h.type,f.width,f.height,!1,!0)),f}},f._reglType="textureCube",f._texture=h,l.profile&&(f.stats=h.stats),f.destroy=function(){h.decRef()},f},clear:function(){for(var e=0;e<ht;++e)t.activeTexture(33984+e),t.bindTexture(3553,null),dt[e]=null;X(ft).forEach(F),o.cubeCount=0,o.textureCount=0},getTexture:function(t){return null},restore:function(){X(ft).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var r=0;32>r;++r)if(0!=(e.mipmask&1<<r))if(3553===e.target)t.texImage2D(3553,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);else for(var n=0;6>n;++n)t.texImage2D(34069+n,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);R(e.texInfo,e.target)})}}}function T(t,e,r,n,a,i){function o(t,e,r){this.target=t,this.texture=e,this.renderbuffer=r;var n=t=0;e?(t=e.width,n=e.height):r&&(t=r.width,n=r.height),this.width=t,this.height=n}function l(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function s(t,e,r){t&&(t.texture?t.texture._texture.refCount+=1:t.renderbuffer._renderbuffer.refCount+=1)}function u(e,r){r&&(r.texture?t.framebufferTexture2D(36160,e,r.target,r.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,r.renderbuffer._renderbuffer.renderbuffer))}function c(t){var e=3553,r=null,n=null,a=t;return"object"==typeof t&&(a=t.data,"target"in t&&(e=0|t.target)),"texture2d"===(t=a._reglType)?r=a:"textureCube"===t?r=a:"renderbuffer"===t&&(n=a,e=36161),new o(e,r,n)}function f(t,e,r,i,l){return r?((t=n.create2D({width:t,height:e,format:i,type:l}))._texture.refCount=0,new o(3553,t,null)):((t=a.create({width:t,height:e,format:i}))._renderbuffer.refCount=0,new o(36161,null,t))}function h(t){return t&&(t.texture||t.renderbuffer)}function d(t,e,r){t&&(t.texture?t.texture.resize(e,r):t.renderbuffer&&t.renderbuffer.resize(e,r))}function p(){this.id=A++,M[this.id]=this,this.framebuffer=t.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function g(t){t.colorAttachments.forEach(l),l(t.depthAttachment),l(t.stencilAttachment),l(t.depthStencilAttachment)}function v(e){t.deleteFramebuffer(e.framebuffer),e.framebuffer=null,i.framebufferCount--,delete M[e.id]}function m(e){var n;t.bindFramebuffer(36160,e.framebuffer);var a=e.colorAttachments;for(n=0;n<a.length;++n)u(36064+n,a[n]);for(n=a.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),u(36096,e.depthAttachment),u(36128,e.stencilAttachment),u(33306,e.depthStencilAttachment),t.checkFramebufferStatus(36160),t.bindFramebuffer(36160,x.next),x.cur=x.next,t.getError()}function y(t,e){function r(t,e){var a,i=0,o=0,l=!0,u=!0;a=null;var d=!0,p="rgba",v="uint8",y=1,x=null,w=null,A=null,M=!1;"number"==typeof t?(i=0|t,o=0|e||i):t?("shape"in t?(i=(o=t.shape)[0],o=o[1]):("radius"in t&&(i=o=t.radius),"width"in t&&(i=t.width),"height"in t&&(o=t.height)),("color"in t||"colors"in t)&&(a=t.color||t.colors,Array.isArray(a)),a||("colorCount"in t&&(y=0|t.colorCount),"colorTexture"in t&&(d=!!t.colorTexture,p="rgba4"),"colorType"in t&&(v=t.colorType,!d)&&("half float"===v||"float16"===v?p="rgba16f":"float"!==v&&"float32"!==v||(p="rgba32f")),"colorFormat"in t&&(p=t.colorFormat,0<=b.indexOf(p)?d=!0:0<=_.indexOf(p)&&(d=!1))),("depthTexture"in t||"depthStencilTexture"in t)&&(M=!(!t.depthTexture&&!t.depthStencilTexture)),"depth"in t&&("boolean"==typeof t.depth?l=t.depth:(x=t.depth,u=!1)),"stencil"in t&&("boolean"==typeof t.stencil?u=t.stencil:(w=t.stencil,l=!1)),"depthStencil"in t&&("boolean"==typeof t.depthStencil?l=u=t.depthStencil:(A=t.depthStencil,u=l=!1))):i=o=1;var T=null,k=null,E=null,C=null;if(Array.isArray(a))T=a.map(c);else if(a)T=[c(a)];else for(T=Array(y),a=0;a<y;++a)T[a]=f(i,o,d,p,v);for(i=i||T[0].width,o=o||T[0].height,x?k=c(x):l&&!u&&(k=f(i,o,M,"depth","uint32")),w?E=c(w):u&&!l&&(E=f(i,o,!1,"stencil","uint8")),A?C=c(A):!x&&!w&&u&&l&&(C=f(i,o,M,"depth stencil","depth stencil")),l=null,a=0;a<T.length;++a)s(T[a]),T[a]&&T[a].texture&&(u=dt[T[a].texture._texture.format]*pt[T[a].texture._texture.type],null===l&&(l=u));return s(k),s(E),s(C),g(n),n.width=i,n.height=o,n.colorAttachments=T,n.depthAttachment=k,n.stencilAttachment=E,n.depthStencilAttachment=C,r.color=T.map(h),r.depth=h(k),r.stencil=h(E),r.depthStencil=h(C),r.width=n.width,r.height=n.height,m(n),r}var n=new p;return i.framebufferCount++,r(t,e),j(r,{resize:function(t,e){var a=0|t,i=0|e||a;if(a===n.width&&i===n.height)return r;for(var o=n.colorAttachments,l=0;l<o.length;++l)d(o[l],a,i);return d(n.depthAttachment,a,i),d(n.stencilAttachment,a,i),d(n.depthStencilAttachment,a,i),n.width=r.width=a,n.height=r.height=i,m(n),r},_reglType:"framebuffer",_framebuffer:n,destroy:function(){v(n),g(n)},use:function(t){x.setFBO({framebuffer:r},t)}})}var x={cur:null,next:null,dirty:!1,setFBO:null},b=["rgba"],_=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&_.push("srgba"),e.ext_color_buffer_half_float&&_.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&_.push("rgba32f");var w=["uint8"];e.oes_texture_half_float&&w.push("half float","float16"),e.oes_texture_float&&w.push("float","float32");var A=0,M={};return j(x,{getFramebuffer:function(t){return"function"==typeof t&&"framebuffer"===t._reglType&&(t=t._framebuffer)instanceof p?t:null},create:y,createCube:function(t){function e(t){var a,i={color:null},o=0,l=null;a="rgba";var s="uint8",u=1;if("number"==typeof t?o=0|t:t?("shape"in t?o=t.shape[0]:("radius"in t&&(o=0|t.radius),"width"in t?o=0|t.width:"height"in t&&(o=0|t.height)),("color"in t||"colors"in t)&&(l=t.color||t.colors,Array.isArray(l)),l||("colorCount"in t&&(u=0|t.colorCount),"colorType"in t&&(s=t.colorType),"colorFormat"in t&&(a=t.colorFormat)),"depth"in t&&(i.depth=t.depth),"stencil"in t&&(i.stencil=t.stencil),"depthStencil"in t&&(i.depthStencil=t.depthStencil)):o=1,l)if(Array.isArray(l))for(t=[],a=0;a<l.length;++a)t[a]=l[a];else t=[l];else for(t=Array(u),l={radius:o,format:a,type:s},a=0;a<u;++a)t[a]=n.createCube(l);for(i.color=Array(t.length),a=0;a<t.length;++a)u=t[a],o=o||u.width,i.color[a]={target:34069,data:t[a]};for(a=0;6>a;++a){for(u=0;u<t.length;++u)i.color[u].target=34069+a;0<a&&(i.depth=r[0].depth,i.stencil=r[0].stencil,i.depthStencil=r[0].depthStencil),r[a]?r[a](i):r[a]=y(i)}return j(e,{width:o,height:o,color:t})}var r=Array(6);return e(t),j(e,{faces:r,resize:function(t){var n=0|t;if(n===e.width)return e;var a=e.color;for(t=0;t<a.length;++t)a[t].resize(n);for(t=0;6>t;++t)r[t].resize(n);return e.width=e.height=n,e},_reglType:"framebufferCube",destroy:function(){r.forEach(function(t){t.destroy()})}})},clear:function(){X(M).forEach(v)},restore:function(){X(M).forEach(function(e){e.framebuffer=t.createFramebuffer(),m(e)})}})}function k(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function E(t,e,r,n){function a(t,e,r,n){this.name=t,this.id=e,this.location=r,this.info=n}function i(t,e){for(var r=0;r<t.length;++r)if(t[r].id===e.id)return void(t[r].location=e.location);t.push(e)}function o(r,n,a){if(!(o=(a=35632===r?u:c)[n])){var i=e.str(n),o=t.createShader(r);t.shaderSource(o,i),t.compileShader(o),a[n]=o}return o}function l(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function s(r,l){var s,u;s=o(35632,r.fragId),u=o(35633,r.vertId);var c=r.program=t.createProgram();t.attachShader(c,s),t.attachShader(c,u),t.linkProgram(c);var f=t.getProgramParameter(c,35718);n.profile&&(r.stats.uniformsCount=f);var h=r.uniforms;for(s=0;s<f;++s)if(u=t.getActiveUniform(c,s))if(1<u.size)for(var d=0;d<u.size;++d){var p=u.name.replace("[0]","["+d+"]");i(h,new a(p,e.id(p),t.getUniformLocation(c,p),u))}else i(h,new a(u.name,e.id(u.name),t.getUniformLocation(c,u.name),u));for(f=t.getProgramParameter(c,35721),n.profile&&(r.stats.attributesCount=f),h=r.attributes,s=0;s<f;++s)(u=t.getActiveAttrib(c,s))&&i(h,new a(u.name,e.id(u.name),t.getAttribLocation(c,u.name),u))}var u={},c={},f={},h=[],d=0;return n.profile&&(r.getMaxUniformsCount=function(){var t=0;return h.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},r.getMaxAttributesCount=function(){var t=0;return h.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);X(u).forEach(e),u={},X(c).forEach(e),c={},h.forEach(function(e){t.deleteProgram(e.program)}),h.length=0,f={},r.shaderCount=0},program:function(t,e,n){var a=f[e];a||(a=f[e]={});var i=a[t];return i||(i=new l(e,t),r.shaderCount++,s(i),a[t]=i,h.push(i)),i},restore:function(){u={},c={};for(var t=0;t<h.length;++t)s(h[t])},shader:o,frag:-1,vert:-1}}function C(t,e,r,n,a,i){function o(a){var i;i=null===e.next?5121:e.next.colorAttachments[0].texture._texture.type;var o=0,l=0,s=n.framebufferWidth,u=n.framebufferHeight,c=null;return G(a)?c=a:a&&(o=0|a.x,l=0|a.y,s=0|(a.width||n.framebufferWidth-o),u=0|(a.height||n.framebufferHeight-l),c=a.data||null),r(),a=s*u*4,c||(5121===i?c=new Uint8Array(a):5126===i&&(c=c||new Float32Array(a))),t.pixelStorei(3333,4),t.readPixels(o,l,s,u,6408,i,c),c}return function(t){return t&&"framebuffer"in t?function(t){var r;return e.setFBO({framebuffer:t.framebuffer},function(){r=o(t)}),r}(t):o(t)}}function S(t){return Array.prototype.slice.call(t)}function L(t){return S(t).join("")}function O(){function t(){var t=[],e=[];return j(function(){t.push.apply(t,S(arguments))},{def:function(){var n="v"+r++;return e.push(n),0<arguments.length&&(t.push(n,"="),t.push.apply(t,S(arguments)),t.push(";")),n},toString:function(){return L([0<e.length?"var "+e+";":"",L(t)])}})}function e(){function e(t,e){n(t,e,"=",r.def(t,e),";")}var r=t(),n=t(),a=r.toString,i=n.toString;return j(function(){r.apply(r,S(arguments))},{def:r.def,entry:r,exit:n,save:e,set:function(t,n,a){e(t,n),r(t,n,"=",a,";")},toString:function(){return a()+i()}})}var r=0,n=[],a=[],i=t(),o={};return{global:i,link:function(t){for(var e=0;e<a.length;++e)if(a[e]===t)return n[e];return e="g"+r++,n.push(e),a.push(t),e},block:t,proc:function(t,r){function n(){var t="a"+a.length;return a.push(t),t}var a=[];r=r||0;for(var i=0;i<r;++i)n();var l=(i=e()).toString;return o[t]=j(i,{arg:n,toString:function(){return L(["function(",a.join(),"){",l(),"}"])}})},scope:e,cond:function(){var t=L(arguments),r=e(),n=e(),a=r.toString,i=n.toString;return j(r,{then:function(){return r.apply(r,S(arguments)),this},else:function(){return n.apply(n,S(arguments)),this},toString:function(){var e=i();return e&&(e="else{"+e+"}"),L(["if(",t,"){",a(),"}",e])}})},compile:function(){var t=['"use strict";',i,"return {"];Object.keys(o).forEach(function(e){t.push('"',e,'":',o[e].toString(),",")}),t.push("}");var e=L(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,a)}}}function R(t){return Array.isArray(t)||G(t)||i(t)}function D(t){return t.sort(function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1})}function I(t,e,r,n){this.thisDep=t,this.contextDep=e,this.propDep=r,this.append=n}function P(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function F(t){return new I(!1,!1,!1,t)}function z(t,e){var r=t.type;return 0===r?new I(!0,1<=(r=t.data.length),2<=r,e):4===r?new I((r=t.data).thisDep,r.contextDep,r.propDep,e):new I(3===r,2===r,1===r,e)}function N(t,e,r,n,a,i,l,s,u,c,f,h,d,p,g){function v(t){return t.replace(".","_")}function y(t,e,r){var n=v(t);nt.push(t),et[n]=tt[n]=!!r,at[n]=e}function x(t,e,r){var n=v(t);nt.push(t),Array.isArray(r)?(tt[n]=r.slice(),et[n]=r.slice()):tt[n]=et[n]=r,it[n]=e}function b(){var t=O(),r=t.link,n=t.global;t.id=st++,t.batchId="0";var a=r(ot),i=t.shared={props:"a0"};Object.keys(ot).forEach(function(t){i[t]=n.def(a,".",t)});var o=t.next={},l=t.current={};Object.keys(it).forEach(function(t){Array.isArray(tt[t])&&(o[t]=n.def(i.next,".",t),l[t]=n.def(i.current,".",t))});var s=t.constants={};Object.keys(lt).forEach(function(t){s[t]=n.def(JSON.stringify(lt[t]))}),t.invoke=function(e,n){switch(n.type){case 0:var a=["this",i.context,i.props,t.batchId];return e.def(r(n.data),".call(",a.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(i.props,n.data);case 2:return e.def(i.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref}},t.attribCache={};var u={};return t.scopeAttrib=function(t){if((t=e.id(t))in u)return u[t];var n=c.scope[t];return n||(n=c.scope[t]=new Z),u[t]=r(n)},t}function _(t,e){var r=t.static,n=t.dynamic;if("framebuffer"in r){var a=r.framebuffer;return a?(a=s.getFramebuffer(a),F(function(t,e){var r=t.link(a),n=t.shared;return e.set(n.framebuffer,".next",r),n=n.context,e.set(n,".framebufferWidth",r+".width"),e.set(n,".framebufferHeight",r+".height"),r})):F(function(t,e){var r=t.shared;return e.set(r.framebuffer,".next","null"),r=r.context,e.set(r,".framebufferWidth",r+".drawingBufferWidth"),e.set(r,".framebufferHeight",r+".drawingBufferHeight"),"null"})}if("framebuffer"in n){var i=n.framebuffer;return z(i,function(t,e){var r=t.invoke(e,i),n=t.shared,a=n.framebuffer;r=e.def(a,".getFramebuffer(",r,")");return e.set(a,".next",r),n=n.context,e.set(n,".framebufferWidth",r+"?"+r+".width:"+n+".drawingBufferWidth"),e.set(n,".framebufferHeight",r+"?"+r+".height:"+n+".drawingBufferHeight"),r})}return null}function w(t){function r(t){if(t in n){var r=e.id(n[t]);return(t=F(function(){return r})).id=r,t}if(t in a){var i=a[t];return z(i,function(t,e){var r=t.invoke(e,i);return e.def(t.shared.strings,".id(",r,")")})}return null}var n=t.static,a=t.dynamic,i=r("frag"),o=r("vert"),l=null;return P(i)&&P(o)?(l=f.program(o.id,i.id),t=F(function(t,e){return t.link(l)})):t=new I(i&&i.thisDep||o&&o.thisDep,i&&i.contextDep||o&&o.contextDep,i&&i.propDep||o&&o.propDep,function(t,e){var r,n,a=t.shared.shader;return r=i?i.append(t,e):e.def(a,".","frag"),n=o?o.append(t,e):e.def(a,".","vert"),e.def(a+".program("+n+","+r+")")}),{frag:i,vert:o,progVar:t,program:l}}function A(t,e){function r(t,e){if(t in n){var r=0|n[t];return F(function(t,n){return e&&(t.OFFSET=r),r})}if(t in a){var i=a[t];return z(i,function(t,r){var n=t.invoke(r,i);return e&&(t.OFFSET=n),n})}return e&&o?F(function(t,e){return t.OFFSET="0",0}):null}var n=t.static,a=t.dynamic,o=function(){if("elements"in n){var t=n.elements;R(t)?t=i.getElements(i.create(t,!0)):t&&(t=i.getElements(t));var e=F(function(e,r){if(t){var n=e.link(t);return e.ELEMENTS=n}return e.ELEMENTS=null});return e.value=t,e}if("elements"in a){var r=a.elements;return z(r,function(t,e){var n=(a=t.shared).isBufferArgs,a=a.elements,i=t.invoke(e,r),o=e.def("null");n=e.def(n,"(",i,")"),i=t.cond(n).then(o,"=",a,".createStream(",i,");").else(o,"=",a,".getElements(",i,");");return e.entry(i),e.exit(t.cond(n).then(a,".destroyStream(",o,");")),t.ELEMENTS=o})}return null}(),l=r("offset",!0);return{elements:o,primitive:function(){if("primitive"in n){var t=n.primitive;return F(function(e,r){return rt[t]})}if("primitive"in a){var e=a.primitive;return z(e,function(t,r){var n=t.constants.primTypes,a=t.invoke(r,e);return r.def(n,"[",a,"]")})}return o?P(o)?o.value?F(function(t,e){return e.def(t.ELEMENTS,".primType")}):F(function(){return 4}):new I(o.thisDep,o.contextDep,o.propDep,function(t,e){var r=t.ELEMENTS;return e.def(r,"?",r,".primType:",4)}):null}(),count:function(){if("count"in n){var t=0|n.count;return F(function(){return t})}if("count"in a){var e=a.count;return z(e,function(t,r){return t.invoke(r,e)})}return o?P(o)?o?l?new I(l.thisDep,l.contextDep,l.propDep,function(t,e){return e.def(t.ELEMENTS,".vertCount-",t.OFFSET)}):F(function(t,e){return e.def(t.ELEMENTS,".vertCount")}):F(function(){return-1}):new I(o.thisDep||l.thisDep,o.contextDep||l.contextDep,o.propDep||l.propDep,function(t,e){var r=t.ELEMENTS;return t.OFFSET?e.def(r,"?",r,".vertCount-",t.OFFSET,":-1"):e.def(r,"?",r,".vertCount:-1")}):null}(),instances:r("instances",!1),offset:l}}function M(t,r){var n=t.static,i=t.dynamic,o={};return Object.keys(n).forEach(function(t){var r=n[t],i=e.id(t),l=new Z;if(R(r))l.state=1,l.buffer=a.getBuffer(a.create(r,34962,!1,!0)),l.type=0;else if(u=a.getBuffer(r))l.state=1,l.buffer=u,l.type=0;else if(r.constant){var s=r.constant;l.buffer="null",l.state=2,"number"==typeof s?l.x=s:gt.forEach(function(t,e){e<s.length&&(l[t]=s[e])})}else{var u=R(r.buffer)?a.getBuffer(a.create(r.buffer,34962,!1,!0)):a.getBuffer(r.buffer),c=0|r.offset,f=0|r.stride,h=0|r.size,d=!!r.normalized,p=0;"type"in r&&(p=Q[r.type]),r=0|r.divisor,l.buffer=u,l.state=1,l.size=h,l.normalized=d,l.type=p||u.dtype,l.offset=c,l.stride=f,l.divisor=r}o[t]=F(function(t,e){var r=t.attribCache;if(i in r)return r[i];var n={isStream:!1};return Object.keys(l).forEach(function(t){n[t]=l[t]}),l.buffer&&(n.buffer=t.link(l.buffer),n.type=n.type||n.buffer+".dtype"),r[i]=n})}),Object.keys(i).forEach(function(t){var e=i[t];o[t]=z(e,function(t,r){function n(t){r(s[t],"=",a,".",t,"|0;")}var a=t.invoke(r,e),i=t.shared,o=i.isBufferArgs,l=i.buffer,s={isStream:r.def(!1)},u=new Z;u.state=1,Object.keys(u).forEach(function(t){s[t]=r.def(""+u[t])});var c=s.buffer,f=s.type;return r("if(",o,"(",a,")){",s.isStream,"=true;",c,"=",l,".createStream(",34962,",",a,");",f,"=",c,".dtype;","}else{",c,"=",l,".getBuffer(",a,");","if(",c,"){",f,"=",c,".dtype;",'}else if("constant" in ',a,"){",s.state,"=",2,";","if(typeof "+a+'.constant === "number"){',s[gt[0]],"=",a,".constant;",gt.slice(1).map(function(t){return s[t]}).join("="),"=0;","}else{",gt.map(function(t,e){return s[t]+"="+a+".constant.length>="+e+"?"+a+".constant["+e+"]:0;"}).join(""),"}}else{","if(",o,"(",a,".buffer)){",c,"=",l,".createStream(",34962,",",a,".buffer);","}else{",c,"=",l,".getBuffer(",a,".buffer);","}",f,'="type" in ',a,"?",i.glTypes,"[",a,".type]:",c,".dtype;",s.normalized,"=!!",a,".normalized;"),n("size"),n("offset"),n("stride"),n("divisor"),r("}}"),r.exit("if(",s.isStream,"){",l,".destroyStream(",c,");","}"),s})}),o}function T(t,e,r,n,a){var i=_(t),l=function(t,e,r){function n(t){if(t in a){var r=a[t];t=!0;var n,o,l=0|r.x,s=0|r.y;return"width"in r?n=0|r.width:t=!1,"height"in r?o=0|r.height:t=!1,new I(!t&&e&&e.thisDep,!t&&e&&e.contextDep,!t&&e&&e.propDep,function(t,e){var a=t.shared.context,i=n;"width"in r||(i=e.def(a,".","framebufferWidth","-",l));var u=o;return"height"in r||(u=e.def(a,".","framebufferHeight","-",s)),[l,s,i,u]})}if(t in i){var u=i[t];return t=z(u,function(t,e){var r=t.invoke(e,u),n=t.shared.context,a=e.def(r,".x|0"),i=e.def(r,".y|0");return[a,i,e.def('"width" in ',r,"?",r,".width|0:","(",n,".","framebufferWidth","-",a,")"),r=e.def('"height" in ',r,"?",r,".height|0:","(",n,".","framebufferHeight","-",i,")")]}),e&&(t.thisDep=t.thisDep||e.thisDep,t.contextDep=t.contextDep||e.contextDep,t.propDep=t.propDep||e.propDep),t}return e?new I(e.thisDep,e.contextDep,e.propDep,function(t,e){var r=t.shared.context;return[0,0,e.def(r,".","framebufferWidth"),e.def(r,".","framebufferHeight")]}):null}var a=t.static,i=t.dynamic;if(t=n("viewport")){var o=t;t=new I(t.thisDep,t.contextDep,t.propDep,function(t,e){var r=o.append(t,e),n=t.shared.context;return e.set(n,".viewportWidth",r[2]),e.set(n,".viewportHeight",r[3]),r})}return{viewport:t,scissor_box:n("scissor.box")}}(t,i),s=A(t),u=function(t,e){var r=t.static,n=t.dynamic,a={};return nt.forEach(function(t){function e(e,o){if(t in r){var l=e(r[t]);a[i]=F(function(){return l})}else if(t in n){var s=n[t];a[i]=z(s,function(t,e){return o(t,e,t.invoke(e,s))})}}var i=v(t);switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return e(function(t){return t},function(t,e,r){return r});case"depth.func":return e(function(t){return yt[t]},function(t,e,r){return e.def(t.constants.compareFuncs,"[",r,"]")});case"depth.range":return e(function(t){return t},function(t,e,r){return[e.def("+",r,"[0]"),e=e.def("+",r,"[1]")]});case"blend.func":return e(function(t){return[mt["srcRGB"in t?t.srcRGB:t.src],mt["dstRGB"in t?t.dstRGB:t.dst],mt["srcAlpha"in t?t.srcAlpha:t.src],mt["dstAlpha"in t?t.dstAlpha:t.dst]]},function(t,e,r){function n(t,n){return e.def('"',t,n,'" in ',r,"?",r,".",t,n,":",r,".",t)}t=t.constants.blendFuncs;var a=n("src","RGB"),i=n("dst","RGB"),o=(a=e.def(t,"[",a,"]"),e.def(t,"[",n("src","Alpha"),"]"));return[a,i=e.def(t,"[",i,"]"),o,t=e.def(t,"[",n("dst","Alpha"),"]")]});case"blend.equation":return e(function(t){return"string"==typeof t?[J[t],J[t]]:"object"==typeof t?[J[t.rgb],J[t.alpha]]:void 0},function(t,e,r){var n=t.constants.blendEquations,a=e.def(),i=e.def();return(t=t.cond("typeof ",r,'==="string"')).then(a,"=",i,"=",n,"[",r,"];"),t.else(a,"=",n,"[",r,".rgb];",i,"=",n,"[",r,".alpha];"),e(t),[a,i]});case"blend.color":return e(function(t){return o(4,function(e){return+t[e]})},function(t,e,r){return o(4,function(t){return e.def("+",r,"[",t,"]")})});case"stencil.mask":return e(function(t){return 0|t},function(t,e,r){return e.def(r,"|0")});case"stencil.func":return e(function(t){return[yt[t.cmp||"keep"],t.ref||0,"mask"in t?t.mask:-1]},function(t,e,r){return[t=e.def('"cmp" in ',r,"?",t.constants.compareFuncs,"[",r,".cmp]",":",7680),e.def(r,".ref|0"),e=e.def('"mask" in ',r,"?",r,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return e(function(e){return["stencil.opBack"===t?1029:1028,xt[e.fail||"keep"],xt[e.zfail||"keep"],xt[e.zpass||"keep"]]},function(e,r,n){function a(t){return r.def('"',t,'" in ',n,"?",i,"[",n,".",t,"]:",7680)}var i=e.constants.stencilOps;return["stencil.opBack"===t?1029:1028,a("fail"),a("zfail"),a("zpass")]});case"polygonOffset.offset":return e(function(t){return[0|t.factor,0|t.units]},function(t,e,r){return[e.def(r,".factor|0"),e=e.def(r,".units|0")]});case"cull.face":return e(function(t){var e=0;return"front"===t?e=1028:"back"===t&&(e=1029),e},function(t,e,r){return e.def(r,'==="front"?',1028,":",1029)});case"lineWidth":return e(function(t){return t},function(t,e,r){return r});case"frontFace":return e(function(t){return bt[t]},function(t,e,r){return e.def(r+'==="cw"?2304:2305')});case"colorMask":return e(function(t){return t.map(function(t){return!!t})},function(t,e,r){return o(4,function(t){return"!!"+r+"["+t+"]"})});case"sample.coverage":return e(function(t){return["value"in t?t.value:1,!!t.invert]},function(t,e,r){return[e.def('"value" in ',r,"?+",r,".value:1"),e=e.def("!!",r,".invert")]})}}),a}(t),c=w(t),f=l.viewport;return f&&(u.viewport=f),(l=l[f=v("scissor.box")])&&(u[f]=l),(i={framebuffer:i,draw:s,shader:c,state:u,dirty:l=0<Object.keys(u).length}).profile=function(t){var e,r=t.static;if(t=t.dynamic,"profile"in r){var n=!!r.profile;(e=F(function(t,e){return n})).enable=n}else if("profile"in t){var a=t.profile;e=z(a,function(t,e){return t.invoke(e,a)})}return e}(t),i.uniforms=function(t,e){var r=t.static,n=t.dynamic,a={};return Object.keys(r).forEach(function(t){var e,n=r[t];if("number"==typeof n||"boolean"==typeof n)e=F(function(){return n});else if("function"==typeof n){var i=n._reglType;"texture2d"===i||"textureCube"===i?e=F(function(t){return t.link(n)}):"framebuffer"!==i&&"framebufferCube"!==i||(e=F(function(t){return t.link(n.color[0])}))}else m(n)&&(e=F(function(t){return t.global.def("[",o(n.length,function(t){return n[t]}),"]")}));e.value=n,a[t]=e}),Object.keys(n).forEach(function(t){var e=n[t];a[t]=z(e,function(t,r){return t.invoke(r,e)})}),a}(r),i.attributes=M(e),i.context=function(t){var e=t.static,r=t.dynamic,n={};return Object.keys(e).forEach(function(t){var r=e[t];n[t]=F(function(t,e){return"number"==typeof r||"boolean"==typeof r?""+r:t.link(r)})}),Object.keys(r).forEach(function(t){var e=r[t];n[t]=z(e,function(t,r){return t.invoke(r,e)})}),n}(n),i}function k(t,e,r){var n=t.shared.context,a=t.scope();Object.keys(r).forEach(function(i){e.save(n,"."+i),a(n,".",i,"=",r[i].append(t,e),";")}),e(a)}function E(t,e,r,n){var a,i=(l=t.shared).gl,o=l.framebuffer;K&&(a=e.def(l.extensions,".webgl_draw_buffers"));var l=(s=t.constants).drawBuffer,s=s.backBuffer;t=r?r.append(t,e):e.def(o,".next"),n||e("if(",t,"!==",o,".cur){"),e("if(",t,"){",i,".bindFramebuffer(",36160,",",t,".framebuffer);"),K&&e(a,".drawBuffersWEBGL(",l,"[",t,".colorAttachments.length]);"),e("}else{",i,".bindFramebuffer(",36160,",null);"),K&&e(a,".drawBuffersWEBGL(",s,");"),e("}",o,".cur=",t,";"),n||e("}")}function C(t,e,r){var n=t.shared,a=n.gl,i=t.current,l=t.next,s=n.current,u=n.next,c=t.cond(s,".dirty");nt.forEach(function(e){var n,f;if(!((e=v(e))in r.state))if(e in l){n=l[e],f=i[e];var h=o(tt[e].length,function(t){return c.def(n,"[",t,"]")});c(t.cond(h.map(function(t,e){return t+"!=="+f+"["+e+"]"}).join("||")).then(a,".",it[e],"(",h,");",h.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";"))}else n=c.def(u,".",e),h=t.cond(n,"!==",s,".",e),c(h),e in at?h(t.cond(n).then(a,".enable(",at[e],");").else(a,".disable(",at[e],");"),s,".",e,"=",n,";"):h(a,".",it[e],"(",n,");",s,".",e,"=",n,";")}),0===Object.keys(r.state).length&&c(s,".dirty=false;"),e(c)}function S(t,e,r,n){var a=t.shared,i=t.current,o=a.current,l=a.gl;D(Object.keys(r)).forEach(function(a){var s=r[a];if(!n||n(s)){var u=s.append(t,e);if(at[a]){var c=at[a];P(s)?e(l,u?".enable(":".disable(",c,");"):e(t.cond(u).then(l,".enable(",c,");").else(l,".disable(",c,");")),e(o,".",a,"=",u,";")}else if(m(u)){var f=i[a];e(l,".",it[a],"(",u,");",u.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";")}else e(l,".",it[a],"(",u,");",o,".",a,"=",u,";")}})}function L(t,e){$&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function N(t,e,r,n,a){function i(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function o(t){t(u=e.def(),"=",i(),";"),"string"==typeof a?t(h,".count+=",a,";"):t(h,".count++;"),p&&(n?t(c=e.def(),"=",g,".getNumPendingQueries();"):t(g,".beginQuery(",h,");"))}function l(t){t(h,".cpuTime+=",i(),"-",u,";"),p&&(n?t(g,".pushScopeStats(",c,",",g,".getNumPendingQueries(),",h,");"):t(g,".endQuery();"))}function s(t){var r=e.def(d,".profile");e(d,".profile=",t,";"),e.exit(d,".profile=",r,";")}var u,c,f=t.shared,h=t.stats,d=f.current,g=f.timer;if(r=r.profile){if(P(r))return void(r.enable?(o(e),l(e.exit),s("true")):s("false"));s(r=r.append(t,e))}else r=e.def(d,".profile");o(f=t.block()),e("if(",r,"){",f,"}"),l(t=t.block()),e.exit("if(",r,"){",t,"}")}function B(t,e,r,n,a){function i(r,n,a){function i(){e("if(!",c,".buffer){",s,".enableVertexAttribArray(",u,");}");var r,i=a.type;r=a.size?e.def(a.size,"||",n):n,e("if(",c,".type!==",i,"||",c,".size!==",r,"||",d.map(function(t){return c+"."+t+"!=="+a[t]}).join("||"),"){",s,".bindBuffer(",34962,",",f,".buffer);",s,".vertexAttribPointer(",[u,r,i,a.normalized,a.stride,a.offset],");",c,".type=",i,";",c,".size=",r,";",d.map(function(t){return c+"."+t+"="+a[t]+";"}).join(""),"}"),$&&(i=a.divisor,e("if(",c,".divisor!==",i,"){",t.instancing,".vertexAttribDivisorANGLE(",[u,i],");",c,".divisor=",i,";}"))}function l(){e("if(",c,".buffer){",s,".disableVertexAttribArray(",u,");","}if(",gt.map(function(t,e){return c+"."+t+"!=="+h[e]}).join("||"),"){",s,".vertexAttrib4f(",u,",",h,");",gt.map(function(t,e){return c+"."+t+"="+h[e]+";"}).join(""),"}")}var s=o.gl,u=e.def(r,".location"),c=e.def(o.attributes,"[",u,"]");r=a.state;var f=a.buffer,h=[a.x,a.y,a.z,a.w],d=["buffer","normalized","offset","stride"];1===r?i():2===r?l():(e("if(",r,"===",1,"){"),i(),e("}else{"),l(),e("}"))}var o=t.shared;n.forEach(function(n){var o,l=n.name,s=r.attributes[l];if(s){if(!a(s))return;o=s.append(t,e)}else{if(!a(_t))return;var u=t.scopeAttrib(l);o={},Object.keys(new Z).forEach(function(t){o[t]=e.def(u,".",t)})}i(t.link(n),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(n.info.type),o)})}function j(t,r,n,a,i){for(var l,s=t.shared,u=s.gl,c=0;c<a.length;++c){var f,h=(g=a[c]).name,d=g.info.type,p=n.uniforms[h],g=t.link(g)+".location";if(p){if(!i(p))continue;if(P(p)){if(h=p.value,35678===d||35680===d)r(u,".uniform1i(",g,",",(d=t.link(h._texture||h.color[0]._texture))+".bind());"),r.exit(d,".unbind();");else if(35674===d||35675===d||35676===d)h=t.global.def("new Float32Array(["+Array.prototype.slice.call(h)+"])"),p=2,35675===d?p=3:35676===d&&(p=4),r(u,".uniformMatrix",p,"fv(",g,",false,",h,");");else{switch(d){case 5126:l="1f";break;case 35664:l="2f";break;case 35665:l="3f";break;case 35666:l="4f";break;case 35670:case 5124:l="1i";break;case 35671:case 35667:l="2i";break;case 35672:case 35668:l="3i";break;case 35673:l="4i";break;case 35669:l="4i"}r(u,".uniform",l,"(",g,",",m(h)?Array.prototype.slice.call(h):h,");")}continue}f=p.append(t,r)}else{if(!i(_t))continue;f=r.def(s.uniforms,"[",e.id(h),"]")}switch(35678===d?r("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}"):35680===d&&r("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}"),h=1,d){case 35678:case 35680:r(u,".uniform1i(",g,",",d=r.def(f,"._texture"),".bind());"),r.exit(d,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i",h=2;break;case 35668:case 35672:l="3i",h=3;break;case 35669:case 35673:l="4i",h=4;break;case 5126:l="1f";break;case 35664:l="2f",h=2;break;case 35665:l="3f",h=3;break;case 35666:l="4f",h=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";break;case 35676:l="Matrix4fv"}if(r(u,".uniform",l,"(",g,","),"M"===l.charAt(0)){g=Math.pow(d-35674+2,2);var v=t.global.def("new Float32Array(",g,")");r("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",o(g,function(t){return v+"["+t+"]="+f+"["+t+"]"}),",",v,")")}else r(1<h?o(h,function(t){return f+"["+t+"]"}):f);r(");")}}function U(t,e,r,n){function a(a){var i=h[a];return i?i.contextDep&&n.contextDynamic||i.propDep?i.append(t,r):i.append(t,e):e.def(f,".",a)}function i(){function t(){r(s,".drawElementsInstancedANGLE(",[p,v,m,g+"<<(("+m+"-5121)>>1)",l],");")}function e(){r(s,".drawArraysInstancedANGLE(",[p,g,v,l],");")}d?y?t():(r("if(",d,"){"),t(),r("}else{"),e(),r("}")):e()}function o(){function t(){r(c+".drawElements("+[p,v,m,g+"<<(("+m+"-5121)>>1)"]+");")}function e(){r(c+".drawArrays("+[p,g,v]+");")}d?y?t():(r("if(",d,"){"),t(),r("}else{"),e(),r("}")):e()}var l,s,u=t.shared,c=u.gl,f=u.draw,h=n.draw,d=function(){var a=h.elements,i=e;return a?((a.contextDep&&n.contextDynamic||a.propDep)&&(i=r),a=a.append(t,i)):a=i.def(f,".","elements"),a&&i("if("+a+")"+c+".bindBuffer(34963,"+a+".buffer.buffer);"),a}(),p=a("primitive"),g=a("offset"),v=function(){var a=h.count,i=e;return a?((a.contextDep&&n.contextDynamic||a.propDep)&&(i=r),a=a.append(t,i)):a=i.def(f,".","count"),a}();if("number"==typeof v){if(0===v)return}else r("if(",v,"){"),r.exit("}");$&&(l=a("instances"),s=t.instancing);var m=d+".type",y=h.elements&&P(h.elements);$&&("number"!=typeof l||0<=l)?"string"==typeof l?(r("if(",l,">0){"),i(),r("}else if(",l,"<0){"),o(),r("}")):i():o()}function H(t,e,r,n,a){return a=(e=b()).proc("body",a),$&&(e.instancing=a.def(e.shared.extensions,".angle_instanced_arrays")),t(e,a,r,n),e.compile().body}function q(t,e,r,n){L(t,e),B(t,e,r,n.attributes,function(){return!0}),j(t,e,r,n.uniforms,function(){return!0}),U(t,e,e,r)}function G(t,e,r,n){function a(){return!0}t.batchId="a1",L(t,e),B(t,e,r,n.attributes,a),j(t,e,r,n.uniforms,a),U(t,e,e,r)}function X(t,e,r,n){function a(t){return t.contextDep&&o||t.propDep}function i(t){return!a(t)}L(t,e);var o=r.contextDep,l=e.def(),s=e.def();t.shared.props=s,t.batchId=l;var u=t.scope(),c=t.scope();e(u.entry,"for(",l,"=0;",l,"<","a1",";++",l,"){",s,"=","a0","[",l,"];",c,"}",u.exit),r.needsContext&&k(t,c,r.context),r.needsFramebuffer&&E(t,c,r.framebuffer),S(t,c,r.state,a),r.profile&&a(r.profile)&&N(t,c,r,!1,!0),n?(B(t,u,r,n.attributes,i),B(t,c,r,n.attributes,a),j(t,u,r,n.uniforms,i),j(t,c,r,n.uniforms,a),U(t,u,c,r)):(e=t.global.def("{}"),n=r.shader.progVar.append(t,c),s=c.def(n,".id"),u=c.def(e,"[",s,"]"),c(t.shared.gl,".useProgram(",n,".program);","if(!",u,"){",u,"=",e,"[",s,"]=",t.link(function(e){return H(G,t,r,e,2)}),"(",n,");}",u,".call(this,a0[",l,"],",l,");"))}function W(t,r){function n(e){var n=r.shader[e];n&&a.set(i.shader,"."+e,n.append(t,a))}var a=t.proc("scope",3);t.batchId="a2";var i=t.shared,o=i.current;k(t,a,r.context),r.framebuffer&&r.framebuffer.append(t,a),D(Object.keys(r.state)).forEach(function(e){var n=r.state[e].append(t,a);m(n)?n.forEach(function(r,n){a.set(t.next[e],"["+n+"]",r)}):a.set(i.next,"."+e,n)}),N(t,a,r,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(e){var n=r.draw[e];n&&a.set(i.draw,"."+e,""+n.append(t,a))}),Object.keys(r.uniforms).forEach(function(n){a.set(i.uniforms,"["+e.id(n)+"]",r.uniforms[n].append(t,a))}),Object.keys(r.attributes).forEach(function(e){var n=r.attributes[e].append(t,a),i=t.scopeAttrib(e);Object.keys(new Z).forEach(function(t){a.set(i,"."+t,n[t])})}),n("vert"),n("frag"),0<Object.keys(r.state).length&&(a(o,".dirty=true;"),a.exit(o,".dirty=true;")),a("a1(",t.shared.context,",a0,",t.batchId,");")}function Y(t,e,r){var n=e.static[r];if(n&&function(t){if("object"==typeof t&&!m(t)){for(var e=Object.keys(t),r=0;r<e.length;++r)if(V.isDynamic(t[e[r]]))return!0;return!1}}(n)){var a=t.global,i=Object.keys(n),o=!1,l=!1,s=!1,u=t.global.def("{}");i.forEach(function(e){var r=n[e];if(V.isDynamic(r))"function"==typeof r&&(r=n[e]=V.unbox(r)),e=z(r,null),o=o||e.thisDep,s=s||e.propDep,l=l||e.contextDep;else{switch(a(u,".",e,"="),typeof r){case"number":a(r);break;case"string":a('"',r,'"');break;case"object":Array.isArray(r)&&a("[",r.join(),"]");break;default:a(t.link(r))}a(";")}}),e.dynamic[r]=new V.DynamicVariable(4,{thisDep:o,contextDep:l,propDep:s,ref:u,append:function(t,e){i.forEach(function(r){var a=n[r];V.isDynamic(a)&&(a=t.invoke(e,a),e(u,".",r,"=",a,";"))})}}),delete e.static[r]}}var Z=c.Record,J={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(J.min=32775,J.max=32776);var $=r.angle_instanced_arrays,K=r.webgl_draw_buffers,tt={dirty:!0,profile:g.profile},et={},nt=[],at={},it={};y("dither",3024),y("blend.enable",3042),x("blend.color","blendColor",[0,0,0,0]),x("blend.equation","blendEquationSeparate",[32774,32774]),x("blend.func","blendFuncSeparate",[1,0,1,0]),y("depth.enable",2929,!0),x("depth.func","depthFunc",513),x("depth.range","depthRange",[0,1]),x("depth.mask","depthMask",!0),x("colorMask","colorMask",[!0,!0,!0,!0]),y("cull.enable",2884),x("cull.face","cullFace",1029),x("frontFace","frontFace",2305),x("lineWidth","lineWidth",1),y("polygonOffset.enable",32823),x("polygonOffset.offset","polygonOffset",[0,0]),y("sample.alpha",32926),y("sample.enable",32928),x("sample.coverage","sampleCoverage",[1,!1]),y("stencil.enable",2960),x("stencil.mask","stencilMask",-1),x("stencil.func","stencilFunc",[519,0,-1]),x("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),x("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),y("scissor.enable",3089),x("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),x("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var ot={gl:t,context:d,strings:e,next:et,current:tt,draw:h,elements:i,buffer:a,shader:f,attributes:c.state,uniforms:u,framebuffer:s,extensions:r,timer:p,isBufferArgs:R},lt={primTypes:rt,compareFuncs:yt,blendFuncs:mt,blendEquations:J,stencilOps:xt,glTypes:Q,orientationType:bt};K&&(lt.backBuffer=[1029],lt.drawBuffer=o(n.maxDrawbuffers,function(t){return 0===t?[0]:o(t,function(t){return 36064+t})}));var st=0;return{next:et,current:tt,procs:function(){var e=b(),r=e.proc("poll"),a=e.proc("refresh"),i=e.block();r(i),a(i);var l=e.shared,s=l.gl,u=l.next,c=l.current;i(c,".dirty=false;"),E(e,r),E(e,a,null,!0);var f,h=t.getExtension("angle_instanced_arrays");h&&(f=e.link(h));for(var d=0;d<n.maxAttributes;++d){var p=a.def(l.attributes,"[",d,"]"),g=e.cond(p,".buffer");g.then(s,".enableVertexAttribArray(",d,");",s,".bindBuffer(",34962,",",p,".buffer.buffer);",s,".vertexAttribPointer(",d,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(s,".disableVertexAttribArray(",d,");",s,".vertexAttrib4f(",d,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),a(g),h&&a(f,".vertexAttribDivisorANGLE(",d,",",p,".divisor);")}return Object.keys(at).forEach(function(t){var n=at[t],o=i.def(u,".",t),l=e.block();l("if(",o,"){",s,".enable(",n,")}else{",s,".disable(",n,")}",c,".",t,"=",o,";"),a(l),r("if(",o,"!==",c,".",t,"){",l,"}")}),Object.keys(it).forEach(function(t){var n,l,f=it[t],h=tt[t],d=e.block();d(s,".",f,"("),m(h)?(f=h.length,n=e.global.def(u,".",t),l=e.global.def(c,".",t),d(o(f,function(t){return n+"["+t+"]"}),");",o(f,function(t){return l+"["+t+"]="+n+"["+t+"];"}).join("")),r("if(",o(f,function(t){return n+"["+t+"]!=="+l+"["+t+"]"}).join("||"),"){",d,"}")):(n=i.def(u,".",t),l=i.def(c,".",t),d(n,");",c,".",t,"=",n,";"),r("if(",n,"!==",l,"){",d,"}")),a(d)}),e.compile()}(),compile:function(t,e,r,n,a){var i=b();return i.stats=i.link(a),Object.keys(e.static).forEach(function(t){Y(i,e,t)}),vt.forEach(function(e){Y(i,t,e)}),r=T(t,e,r,n),function(t,e){var r=t.proc("draw",1);L(t,r),k(t,r,e.context),E(t,r,e.framebuffer),C(t,r,e),S(t,r,e.state),N(t,r,e,!1,!0);var n=e.shader.progVar.append(t,r);if(r(t.shared.gl,".useProgram(",n,".program);"),e.shader.program)q(t,r,e,e.shader.program);else{var a=t.global.def("{}"),i=r.def(n,".id"),o=r.def(a,"[",i,"]");r(t.cond(o).then(o,".call(this,a0);").else(o,"=",a,"[",i,"]=",t.link(function(r){return H(q,t,e,r,1)}),"(",n,");",o,".call(this,a0);"))}0<Object.keys(e.state).length&&r(t.shared.current,".dirty=true;")}(i,r),W(i,r),function(t,e){function r(t){return t.contextDep&&a||t.propDep}var n=t.proc("batch",2);t.batchId="0",L(t,n);var a=!1,i=!0;Object.keys(e.context).forEach(function(t){a=a||e.context[t].propDep}),a||(k(t,n,e.context),i=!1);var o=!1;if((l=e.framebuffer)?(l.propDep?a=o=!0:l.contextDep&&a&&(o=!0),o||E(t,n,l)):E(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(a=!0),C(t,n,e),S(t,n,e.state,function(t){return!r(t)}),e.profile&&r(e.profile)||N(t,n,e,!1,"a1"),e.contextDep=a,e.needsContext=i,e.needsFramebuffer=o,(i=e.shader.progVar).contextDep&&a||i.propDep)X(t,n,e,null);else if(i=i.append(t,n),n(t.shared.gl,".useProgram(",i,".program);"),e.shader.program)X(t,n,e,e.shader.program);else{var l=t.global.def("{}"),s=(o=n.def(i,".id"),n.def(l,"[",o,"]"));n(t.cond(s).then(s,".call(this,a0,a1);").else(s,"=",l,"[",o,"]=",t.link(function(r){return H(X,t,e,r,2)}),"(",i,");",s,".call(this,a0,a1);"))}0<Object.keys(e.state).length&&n(t.shared.current,".dirty=true;")}(i,r),i.compile()}}}function B(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}var j=function(t,e){for(var r=Object.keys(e),n=0;n<r.length;++n)t[r[n]]=e[r[n]];return t},U=0,V={DynamicVariable:t,define:function(r,n){return new t(r,e(n+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof t},unbox:function(e,r){return"function"==typeof e?new t(0,e):e},accessor:e},H={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},q="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},G=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},X=function(t){return Object.keys(t).map(function(e){return t[e]})},W=o(8,function(){return[]}),Y={alloc:s,free:u,allocType:function(t,e){var r=null;switch(t){case 5120:r=new Int8Array(s(e),0,e);break;case 5121:r=new Uint8Array(s(e),0,e);break;case 5122:r=new Int16Array(s(2*e),0,e);break;case 5123:r=new Uint16Array(s(2*e),0,e);break;case 5124:r=new Int32Array(s(4*e),0,e);break;case 5125:r=new Uint32Array(s(4*e),0,e);break;case 5126:r=new Float32Array(s(4*e),0,e);break;default:return null}return r.length!==e?r.subarray(0,e):r},freeType:function(t){u(t.buffer)}},Z={shape:function(t){for(var e=[];t.length;t=t[0])e.push(t.length);return e},flatten:function(t,e,r,n){var a=1;if(e.length)for(var i=0;i<e.length;++i)a*=e[i];else a=0;switch(r=n||Y.allocType(r,a),e.length){case 0:break;case 1:for(n=e[0],e=0;e<n;++e)r[e]=t[e];break;case 2:for(n=e[0],e=e[1],i=a=0;i<n;++i)for(var o=t[i],l=0;l<e;++l)r[a++]=o[l];break;case 3:c(t,e[0],e[1],e[2],r,0);break;default:!function t(e,r,n,a,i){for(var o=1,l=n+1;l<r.length;++l)o*=r[l];var s=r[n];if(4==r.length-n){var u=r[n+1],f=r[n+2];for(r=r[n+3],l=0;l<s;++l)c(e[l],u,f,r,a,i),i+=o}else for(l=0;l<s;++l)t(e[l],r,n+1,a,i),i+=o}(t,e,0,r,0)}return r}},J={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Q={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},$={dynamic:35048,stream:35040,static:35044},K=Z.flatten,tt=Z.shape,et=[];et[5120]=1,et[5122]=2,et[5124]=4,et[5121]=1,et[5123]=2,et[5125]=4,et[5126]=4;var rt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},nt=new Float32Array(1),at=new Uint32Array(nt.buffer),it=[9984,9986,9985,9987],ot=[0,6409,6410,6407,6408],lt={};lt[6409]=lt[6406]=lt[6402]=1,lt[34041]=lt[6410]=2,lt[6407]=lt[35904]=3,lt[6408]=lt[35906]=4;var st=Object.keys(J).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),ut=[];ut[5121]=1,ut[5126]=4,ut[36193]=2,ut[5123]=2,ut[5125]=4;var ct=[];ct[32854]=2,ct[32855]=2,ct[36194]=2,ct[34041]=4,ct[33776]=.5,ct[33777]=.5,ct[33778]=1,ct[33779]=1,ct[35986]=.5,ct[35987]=1,ct[34798]=1,ct[35840]=.5,ct[35841]=.25,ct[35842]=.5,ct[35843]=.25,ct[36196]=.5;var ft=[];ft[32854]=2,ft[32855]=2,ft[36194]=2,ft[33189]=2,ft[36168]=1,ft[34041]=4,ft[35907]=4,ft[34836]=16,ft[34842]=8,ft[34843]=6;var ht=function(t,e,r,n,a){function i(t){this.id=u++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.height=this.width=0,a.profile&&(this.stats={size:0})}function o(e){var r=e.renderbuffer;t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(r),e.renderbuffer=null,e.refCount=0,delete c[e.id],n.renderbufferCount--}var l={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(l.srgba=35907),e.ext_color_buffer_half_float&&(l.rgba16f=34842,l.rgb16f=34843),e.webgl_color_buffer_float&&(l.rgba32f=34836);var s=[];Object.keys(l).forEach(function(t){s[l[t]]=t});var u=0,c={};return i.prototype.decRef=function(){0>=--this.refCount&&o(this)},a.profile&&(n.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach(function(e){t+=c[e].stats.size}),t}),{create:function(e,r){function o(e,r){var n=0,i=0,c=32854;if("object"==typeof e&&e?("shape"in e?(n=0|(i=e.shape)[0],i=0|i[1]):("radius"in e&&(n=i=0|e.radius),"width"in e&&(n=0|e.width),"height"in e&&(i=0|e.height)),"format"in e&&(c=l[e.format])):"number"==typeof e?(n=0|e,i="number"==typeof r?0|r:n):e||(n=i=1),n!==u.width||i!==u.height||c!==u.format)return o.width=u.width=n,o.height=u.height=i,u.format=c,t.bindRenderbuffer(36161,u.renderbuffer),t.renderbufferStorage(36161,c,n,i),a.profile&&(u.stats.size=ft[u.format]*u.width*u.height),o.format=s[u.format],o}var u=new i(t.createRenderbuffer());return c[u.id]=u,n.renderbufferCount++,o(e,r),o.resize=function(e,r){var n=0|e,i=0|r||n;return n===u.width&&i===u.height?o:(o.width=u.width=n,o.height=u.height=i,t.bindRenderbuffer(36161,u.renderbuffer),t.renderbufferStorage(36161,u.format,n,i),a.profile&&(u.stats.size=ft[u.format]*u.width*u.height),o)},o._reglType="renderbuffer",o._renderbuffer=u,a.profile&&(o.stats=u.stats),o.destroy=function(){u.decRef()},o},clear:function(){X(c).forEach(o)},restore:function(){X(c).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)}),t.bindRenderbuffer(36161,null)}}},dt=[];dt[6408]=4;var pt=[];pt[5121]=1,pt[5126]=4,pt[36193]=2;var gt=["x","y","z","w"],vt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),mt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},yt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},xt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},bt={cw:2304,ccw:2305},_t=new I(!1,!1,!1,function(){});return function(t){function e(){if(0===Y.length)w&&w.update(),$=null;else{$=H.next(e),f();for(var t=Y.length-1;0<=t;--t){var r=Y[t];r&&r(O,null,0)}v.flush(),w&&w.update()}}function r(){!$&&0<Y.length&&($=H.next(e))}function n(){$&&(H.cancel(e),$=null)}function i(t){t.preventDefault(),n(),Z.forEach(function(t){t()})}function o(t){v.getError(),y.restore(),P.restore(),D.restore(),F.restore(),z.restore(),U.restore(),w&&w.restore(),G.procs.refresh(),r(),J.forEach(function(t){t()})}function l(t){function e(t){var e={},r={};return Object.keys(t).forEach(function(n){var a=t[n];V.isDynamic(a)?r[n]=V.unbox(a,n):e[n]=a}),{dynamic:r,static:e}}var r=e(t.context||{}),n=e(t.uniforms||{}),a=e(t.attributes||{}),i=e(function(t){function e(t){if(t in r){var e=r[t];delete r[t],Object.keys(e).forEach(function(n){r[t+"."+n]=e[n]})}}var r=j({},t);return delete r.uniforms,delete r.attributes,delete r.context,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),r}(t));t={gpuTime:0,cpuTime:0,count:0};var o=(r=G.compile(i,a,n,r,t)).draw,l=r.batch,s=r.scope,u=[];return j(function(t,e){var r;if("function"==typeof t)return s.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(r=0;r<t;++r)s.call(this,null,e,r);else{if(!Array.isArray(t))return s.call(this,t,e,0);for(r=0;r<t.length;++r)s.call(this,t[r],e,r)}else if("number"==typeof t){if(0<t)return l.call(this,function(t){for(;u.length<t;)u.push(null);return u}(0|t),0|t)}else{if(!Array.isArray(t))return o.call(this,t);if(t.length)return l.call(this,t,t.length)}},{stats:t})}function s(t,e){var r=0;G.procs.poll();var n=e.color;n&&(v.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=16384),"depth"in e&&(v.clearDepth(+e.depth),r|=256),"stencil"in e&&(v.clearStencil(0|e.stencil),r|=1024),v.clear(r)}function u(t){return Y.push(t),r(),{cancel:function(){var e=B(Y,t);Y[e]=function t(){var e=B(Y,t);Y[e]=Y[Y.length-1],--Y.length,0>=Y.length&&n()}}}}function c(){var t=X.viewport,e=X.scissor_box;t[0]=t[1]=e[0]=e[1]=0,O.viewportWidth=O.framebufferWidth=O.drawingBufferWidth=t[2]=e[2]=v.drawingBufferWidth,O.viewportHeight=O.framebufferHeight=O.drawingBufferHeight=t[3]=e[3]=v.drawingBufferHeight}function f(){O.tick+=1,O.time=d(),c(),G.procs.poll()}function h(){c(),G.procs.refresh(),w&&w.update()}function d(){return(q()-A)/1e3}if(!(t=a(t)))return null;var v=t.gl,m=v.getContextAttributes();v.isContextLost();var y=function(t,e){function r(e){var r;e=e.toLowerCase();try{r=n[e]=t.getExtension(e)}catch(t){}return!!r}for(var n={},a=0;a<e.extensions.length;++a){var i=e.extensions[a];if(!r(i))return e.onDestroy(),e.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach(function(t){if(!r(t))throw Error("(regl): error restoring extension "+t)})}}}(v,t);if(!y)return null;var x=function(){var t={"":0},e=[""];return{id:function(r){var n=t[r];return n||(n=t[r]=e.length,e.push(r),n)},str:function(t){return e[t]}}}(),b={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},_=y.extensions,w=function(t,e){function r(t,e,r){var n=o.pop()||new function(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null};n.startQueryIndex=t,n.endQueryIndex=e,n.sum=0,n.stats=r,l.push(n)}var n=e.ext_disjoint_timer_query;if(!n)return null;var a=[],i=[],o=[],l=[],s=[],u=[];return{beginQuery:function(t){var e=a.pop()||n.createQueryEXT();n.beginQueryEXT(35007,e),i.push(e),r(i.length-1,i.length,t)},endQuery:function(){n.endQueryEXT(35007)},pushScopeStats:r,update:function(){var t,e;if(0!==(t=i.length)){u.length=Math.max(u.length,t+1),s.length=Math.max(s.length,t+1),s[0]=0;var r=u[0]=0;for(e=t=0;e<i.length;++e){var c=i[e];n.getQueryObjectEXT(c,34919)?(r+=n.getQueryObjectEXT(c,34918),a.push(c)):i[t++]=c,s[e+1]=r,u[e+1]=t}for(i.length=t,e=t=0;e<l.length;++e){var f=(r=l[e]).startQueryIndex;c=r.endQueryIndex,r.sum+=s[c]-s[f],f=u[f],(c=u[c])===f?(r.stats.gpuTime+=r.sum/1e6,o.push(r)):(r.startQueryIndex=f,r.endQueryIndex=c,l[t++]=r)}l.length=t}},getNumPendingQueries:function(){return i.length},clear:function(){a.push.apply(a,i);for(var t=0;t<a.length;t++)n.deleteQueryEXT(a[t]);i.length=0,a.length=0},restore:function(){i.length=0,a.length=0}}}(0,_),A=q(),S=v.drawingBufferWidth,L=v.drawingBufferHeight,O={tick:0,time:0,viewportWidth:S,viewportHeight:L,framebufferWidth:S,framebufferHeight:L,drawingBufferWidth:S,drawingBufferHeight:L,pixelRatio:t.pixelRatio},R=function(t,e){var r=1;e.ext_texture_filter_anisotropic&&(r=t.getParameter(34047));var n=1,a=1;return e.webgl_draw_buffers&&(n=t.getParameter(34852),a=t.getParameter(36063)),{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:a,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938)}}(v,_),D=p(v,b,t),I=g(v,_,D,b),P=(S=function(t,e,r,n,a){for(t=r.maxAttributes,e=Array(t),r=0;r<t;++r)e[r]=new k;return{Record:k,scope:{},state:e}}(v,_,R),E(v,x,b,t)),F=M(v,_,R,function(){G.procs.poll()},O,b,t),z=ht(v,_,0,b,t),U=T(v,_,R,F,z,b),G=N(v,x,_,R,D,I,0,U,{},S,P,{elements:null,primitive:4,count:-1,offset:0,instances:-1},O,w,t),X=(x=C(v,U,G.procs.poll,O),G.next),W=v.canvas,Y=[],Z=[],J=[],Q=[t.onDestroy],$=null;W&&(W.addEventListener("webglcontextlost",i,!1),W.addEventListener("webglcontextrestored",o,!1));var K=U.setFBO=l({framebuffer:V.define.call(null,1,"framebuffer")});return h(),m=j(l,{clear:function(t){if("framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;6>e;++e)K(j({framebuffer:t.framebuffer.faces[e]},t),s);else K(t,s);else s(0,t)},prop:V.define.bind(null,1),context:V.define.bind(null,2),this:V.define.bind(null,3),draw:l({}),buffer:function(t){return D.create(t,34962,!1,!1)},elements:function(t){return I.create(t,!1)},texture:F.create2D,cube:F.createCube,renderbuffer:z.create,framebuffer:U.create,framebufferCube:U.createCube,attributes:m,frame:u,on:function(t,e){var r;switch(t){case"frame":return u(e);case"lost":r=Z;break;case"restore":r=J;break;case"destroy":r=Q}return r.push(e),{cancel:function(){for(var t=0;t<r.length;++t)if(r[t]===e){r[t]=r[r.length-1],r.pop();break}}}},limits:R,hasExtension:function(t){return 0<=R.extensions.indexOf(t.toLowerCase())},read:x,destroy:function(){Y.length=0,n(),W&&(W.removeEventListener("webglcontextlost",i),W.removeEventListener("webglcontextrestored",o)),P.clear(),U.clear(),z.clear(),F.clear(),I.clear(),D.clear(),w&&w.clear(),Q.forEach(function(t){t()})},_gl:v,_refresh:h,poll:function(){f(),w&&w.update()},now:d,stats:b}),t.onDone(null,m),m}},"object"==typeof UM.exports?UM.exports=PM():IM.createREGL=PM(),UM=UM.exports;var HM=function(t){return t.key},qM=VM,GM=VM,XM=function(t){return t[0]},WM={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,scatter:!1,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,capturewidth:10,fillcolor:"magenta",fillopacity:1,strokecolor:"white",strokeopacity:1,strokewidth:1,handleheight:16,handleopacity:1,handleoverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}},YM=zo(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nuniform float scatter;\n\nvarying vec4 fragColor;\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nvoid main() {\n\n    float x = 0.5 * sign(pf[3]) + 0.5;\n    float prominence = abs(pf[3]);\n    float depth = 1.0 - prominence;\n\n    mat4 pA = mat4(p0, p1, p2, p3);\n    mat4 pB = mat4(p4, p5, p6, p7);\n    mat4 pC = mat4(p8, p9, pa, pb);\n    mat4 pD = mat4(pc, pd, pe, abs(pf));\n\n    float show = float(mshow(pA, loA, hiA) &&\n                       mshow(pB, loB, hiB) &&\n                       mshow(pC, loC, hiC) &&\n                       mshow(pD, loD, hiD));\n\n    vec2 yy = show * vec2(val(pA, dim2A) + val(pB, dim2B) + val(pC, dim2C) + val(pD, dim2D),\n                          val(pA, dim1A) + val(pB, dim1B) + val(pC, dim1C) + val(pD, dim1D));\n\n    vec2 dimensionToggle = vec2(x, 1.0 - x);\n\n    vec2 scatterToggle = vec2(scatter, 1.0 - scatter);\n\n    float y = dot(yy, dimensionToggle);\n    mat2 xy = mat2(viewBoxSize * yy + dimensionToggle, viewBoxSize * vec2(x, y));\n\n    vec2 viewBoxXY = viewBoxPosition + xy * scatterToggle;\n\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    gl_Position = vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n\n    // visible coloring\n    float clampedColorIndex = clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor = texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]),ZM=zo(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nuniform float scatter;\n\nvarying vec4 fragColor;\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nvoid main() {\n\n    float x = 0.5 * sign(pf[3]) + 0.5;\n    float prominence = abs(pf[3]);\n    float depth = 1.0 - prominence;\n\n    mat4 pA = mat4(p0, p1, p2, p3);\n    mat4 pB = mat4(p4, p5, p6, p7);\n    mat4 pC = mat4(p8, p9, pa, pb);\n    mat4 pD = mat4(pc, pd, pe, abs(pf));\n\n    float show = float(mshow(pA, loA, hiA) &&\n                       mshow(pB, loB, hiB) &&\n                       mshow(pC, loC, hiC) &&\n                       mshow(pD, loD, hiD));\n\n    vec2 yy = show * vec2(val(pA, dim2A) + val(pB, dim2B) + val(pC, dim2C) + val(pD, dim2D),\n                          val(pA, dim1A) + val(pB, dim1B) + val(pC, dim1C) + val(pD, dim1D));\n\n    vec2 dimensionToggle = vec2(x, 1.0 - x);\n\n    vec2 scatterToggle = vec2(scatter, 1.0 - scatter);\n\n    float y = dot(yy, dimensionToggle);\n    mat2 xy = mat2(viewBoxSize * yy + dimensionToggle, viewBoxSize * vec2(x, y));\n\n    vec2 viewBoxXY = viewBoxPosition + xy * scatterToggle;\n\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    gl_Position = vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n\n    // pick coloring\n    fragColor = vec4(pf.rgb, 1.0);\n}\n"]),JM=zo(["precision lowp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),QM=1e-6,$M=64,KM=2,tT=4,eT=[119,119,119],rT=new Uint8Array(4),nT=new Uint8Array(4);function aT(t,e,r,n,a){var i=t._gl;i.enable(i.SCISSOR_TEST),i.scissor(e,r,n,a),t.clear({color:[0,0,0,0],depth:1})}function iT(t,e,r,n,a,i){var o=i.key;r.drawCompleted||(!function(t){t.read({x:0,y:0,width:1,height:1,data:rT})}(t),r.drawCompleted=!0),function l(s){var u;u=Math.min(n,a-s*n),i.offset=KM*s*n,i.count=KM*u,0===s&&(window.cancelAnimationFrame(r.currentRafs[o]),delete r.currentRafs[o],aT(t,i.scissorX,i.scissorY,i.scissorWidth,i.viewBoxSize[1])),r.clearOnly||(e(i),s*n+u<a&&(r.currentRafs[o]=window.requestAnimationFrame(function(){l(s+1)})),r.drawCompleted=!1)}(0)}function oT(t,e){return(t>>>8*e)%256/255}function lT(t,e){var r={};return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map(function(r){return function(t,e,r){var n,a,i,o=[];for(a=0;a<t;a++)for(i=0;i<KM;i++)for(n=0;n<tT;n++)o.push(e[a*$M+r*tT+n]),r*tT+n===$M-1&&i%2==0&&(o[o.length-1]*=-1);return o}(t,e,r)}).forEach(function(t,e){r["p"+e.toString(16)]=t}),r}function sT(t,e,r){return t+e<=r}var uT=function(t,e,r){var n=e.model,a=e.viewModel,i=n.domain,o=n.lines,l=n.canvasWidth,s=n.canvasHeight,u=a.dimensions,c=a.panels,f=n.unitToColor,h=e.context,d=e.pick,p={currentRafs:{},drawCompleted:!0,clearOnly:!1},g=u.slice(),v=g.length,m=g[0]?g[0].values.length:0,y=h,x=d?o.color.map(function(t,e){return e/o.color.length}):o.color,b=Math.max(1/255,Math.pow(1/x.length,1/3)),_=o.canvasOverdrag,w=c.length,A=function(t,e,r,n){for(var a,i=[],o=0;o<t;o++)for(var l=0;l<$M;l++)i.push(l<e?r[l].paddedUnitValues[o]:l===$M-1?(a=n[o],Math.max(QM,Math.min(1-QM,a))):l>=$M-4?oT(o,$M-2-l):.5);return i}(m,v,g,x),M=lT(m,A),T=e.regl,k=T.texture({shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest",data:function(t,e,r){for(var n=[],a=0;a<256;a++){var i=t(a/255);n.push((e?eT:i).concat(r))}return n}(f,h,Math.round(255*(h?b:1)))}),E=T({profile:!1,blend:{enable:y,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!y,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:T.prop("scissorX"),y:T.prop("scissorY"),width:T.prop("scissorWidth"),height:T.prop("scissorHeight")}},viewport:{x:T.prop("viewportX"),y:T.prop("viewportY"),width:T.prop("viewportWidth"),height:T.prop("viewportHeight")},dither:!1,vert:d?ZM:YM,frag:JM,primitive:"lines",lineWidth:1,attributes:M,uniforms:{resolution:T.prop("resolution"),viewBoxPosition:T.prop("viewBoxPosition"),viewBoxSize:T.prop("viewBoxSize"),dim1A:T.prop("dim1A"),dim2A:T.prop("dim2A"),dim1B:T.prop("dim1B"),dim2B:T.prop("dim2B"),dim1C:T.prop("dim1C"),dim2C:T.prop("dim2C"),dim1D:T.prop("dim1D"),dim2D:T.prop("dim2D"),loA:T.prop("loA"),hiA:T.prop("hiA"),loB:T.prop("loB"),hiB:T.prop("hiB"),loC:T.prop("loC"),hiC:T.prop("hiC"),loD:T.prop("loD"),hiD:T.prop("hiD"),palette:k,colorClamp:T.prop("colorClamp"),scatter:T.prop("scatter")},offset:T.prop("offset"),count:T.prop("count")}),C=[0,1];var S=[];function L(t,e,r,a,o,u,c,f,d,p,v){var m,y,x,b,A=[t,e],M=WM.verticalPadding/u,T=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})}),k=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(m=0;m<2;m++)for(b=A[m],y=0;y<4;y++)for(x=0;x<16;x++){var E=x+16*y;T[m][y][x]=x+16*y===b?1:0,k[m][y][x]=(!h&&sT(x,16*y,w)?g[0===E?0:1+(E-1)%(g.length-1)].filter[m]:m)+(2*m-1)*M}return{key:c,resolution:[l,s],viewBoxPosition:[r+_,a],viewBoxSize:[o,u],i:t,ii:e,dim1A:T[0][0],dim1B:T[0][1],dim1C:T[0][2],dim1D:T[0][3],dim2A:T[1][0],dim2B:T[1][1],dim2C:T[1][2],dim2D:T[1][3],loA:k[0][0],loB:k[0][1],loC:k[0][2],loD:k[0][3],hiA:k[1][0],hiB:k[1][1],hiC:k[1][2],hiD:k[1][3],colorClamp:C,scatter:f||0,scissorX:(d===p?0:r+_)+(n.pad.l-_)+n.layoutWidth*i.x[0],scissorWidth:(d===v?l-r+_:o+.5)+(d===p?r+_:0),scissorY:a+n.pad.b+n.layoutHeight*i.y[0],scissorHeight:u,viewportX:n.pad.l-_+n.layoutWidth*i.x[0],viewportY:n.pad.b+n.layoutHeight*i.y[0],viewportWidth:l,viewportHeight:s}}return{setColorDomain:function(t){C[0]=t[0],C[1]=t[1]},render:function(t,e,n){var a,i,u,c=1/0,f=-1/0;for(a=0;a<w;a++)t[a].dim2.canvasX>f&&(f=t[a].dim2.canvasX,u=a),t[a].dim1.canvasX<c&&(c=t[a].dim1.canvasX,i=a);for(0===w&&aT(T,0,0,l,s),a=0;a<w;a++){var h=t[a],d=h.dim1,g=d.crossfilterDimensionIndex,v=h.canvasX,y=h.canvasY,x=h.dim2.crossfilterDimensionIndex,b=h.panelSizeX,_=h.panelSizeY,A=v+b;if(e||!S[g]||S[g][0]!==v||S[g][1]!==A){S[g]=[v,A];var M=L(g,x,v,y,b,_,d.crossfilterDimensionIndex,r||d.scatter?1:0,a,i,u);p.clearOnly=n,iT(T,E,p,e?o.blockLineCount:m,m,M)}}},readPixel:function(t,e){return T.read({x:t,y:e,width:1,height:1,data:nT}),nT},readPixels:function(t,e,r,n){var a=new Uint8Array(4*r*n);return T.read({x:t,y:e,width:r,height:n,data:a}),a},destroy:function(){t.style["pointer-events"]="none",k.destroy()}}},cT=HM,fT=qM,hT=XM;function dT(t){return!("visible"in t)||t.visible}function pT(t){var e=t.range?t.range[0]:ae.aggNums(Math.min,null,t.values,t._length),r=t.range?t.range[1]:ae.aggNums(Math.max,null,t.values,t._length);return!isNaN(e)&&isFinite(e)||(e=0),!isNaN(r)&&isFinite(r)||(r=0),e===r&&(void 0===e?(e=0,r=1):0===e?(e-=1,r+=1):(e*=.9,r*=1.1)),[e,r]}function gT(t,e){var r,n,a,i,o;for(r=0,a=1/0,i=(n=t.range())[0];r<n.length;r++){if((o=Math.abs(n[r]-e))>a)return i;a=o,i=n[r]}return n[n.length-1]}function vT(e){return t.scale.linear().domain(pT(e))}function mT(e,r,n){var a=hT(r),i=a.trace,o=a.lineColor,l=a.cscale,s=i.line,u=i.domain,c=i.dimensions,f=e.width,h=i.labelfont,d=i.tickfont,p=i.rangefont,g=ae.extendDeep({},s,{color:o.map(vT({values:o,range:[s.cmin,s.cmax],_length:i._commonLength})),blockLineCount:WM.blockLineCount,canvasOverdrag:WM.overdrag*WM.canvasPixelRatio}),v=Math.floor(f*(u.x[1]-u.x[0])),m=Math.floor(e.height*(u.y[1]-u.y[0])),y=e.margin||{l:80,r:80,t:100,b:80},x=v,b=m;return{key:n,colCount:c.filter(dT).length,dimensions:c,tickDistance:WM.tickDistance,unitToColor:function(e){var r=e.map(function(t){return t[0]}),n=e.map(function(t){return t[1]}).map(function(e){return t.rgb(e)}),a="rgb".split("").map(function(e){return t.scale.linear().clamp(!0).domain(r).range(n.map((a=e,function(t){return t[a]})));var a});return function(t){return a.map(function(e){return e(t)})}}(l),lines:g,labelFont:h,tickFont:d,rangeFont:p,layoutWidth:f,layoutHeight:e.height,domain:u,translateX:u.x[0]*f,translateY:e.height-u.y[1]*e.height,pad:y,canvasWidth:x*WM.canvasPixelRatio+2*g.canvasOverdrag,canvasHeight:b*WM.canvasPixelRatio,width:x,height:b,canvasPixelRatio:WM.canvasPixelRatio}}function yT(e){var r=e.width,n=e.height,a=e.dimensions,i=e.canvasPixelRatio,o=function(t){return r*t/Math.max(1,e.colCount-1)},l=WM.verticalPadding/(n*i),s=1-2*l,u=function(t){return l+s*t},c={key:e.key,xScale:o,model:e},f={};return c.dimensions=a.filter(dT).map(function(r,a){var l=vT(r),s=f[r.label];f[r.label]=(s||0)+1;var h=r.label+(s?"__"+s:""),d=r.values;return d.length>r._length&&(d=d.slice(0,r._length)),{key:h,label:r.label,tickFormat:r.tickformat,tickvals:r.tickvals,ticktext:r.ticktext,ordinal:!!r.tickvals,scatter:WM.scatter||r.scatter,xIndex:a,crossfilterDimensionIndex:a,visibleIndex:r._index,height:n,values:d,paddedUnitValues:d.map(l).map(u),xScale:o,x:o(a),canvasX:o(a)*i,unitScale:function(e,r){return t.scale.linear().range([e-r,r])}(n,WM.verticalPadding),domainScale:function(e,r,n){var a=pT(n),i=n.ticktext;return n.tickvals?t.scale.ordinal().domain(n.tickvals.map(function(t,e){return function(r,n){if(e){var a=e[n];return null===a||void 0===a?t(r):a}return t(r)}}(t.format(n.tickformat),i))).range(n.tickvals.map(function(t){return(t-a[0])/(a[1]-a[0])}).map(function(t){return e-r+t*(r-(e-r))})):t.scale.linear().domain(a).range([e-r,r])}(n,WM.verticalPadding,r),ordinalScale:function(e){var r=pT(e);return e.tickvals&&t.scale.ordinal().domain(e.tickvals).range(e.tickvals.map(function(t){return(t-r[0])/(r[1]-r[0])}))}(r),domainToUnitScale:l,filter:r.constraintrange?r.constraintrange.map(l):[0,1],parent:c,model:e}}),c}function xT(t){t.classed(WM.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}var bT={};(function(e){"use strict";bT=function(r,n){var a=r._fullLayout,i=a._toppaper,o=(a._paperdiv,a._glcontainer);a._glcanvas.each(function(t){t.regl||(t.regl=UM({canvas:this,attributes:{antialias:!t.pick,preserveDrawingBuffer:!0},pixelRatio:r._context.plotGlPixelRatio||e.devicePixelRatio}))});var l={},s={},u=a._size;n.forEach(function(t,e){l[e]=r.data[e].dimensions,s[e]=r.data[e].dimensions.slice()});!function(e,r,n,a,i,o){var l=!1,s=!0;var u=a.filter(function(t){return hT(t).trace.visible}).map(mT.bind(0,i)).map(yT);n.each(function(t,e){return ae.extendFlat(t,u[e])});var c=n.selectAll(".gl-canvas").each(function(t){t.viewModel=u[0],t.model=t.viewModel?t.viewModel.model:null}),f={renderers:[],dimensions:[]},h=null;c.filter(function(t){return t.pick}).style("pointer-events","auto").on("mousemove",function(e){if(s&&e.lineLayer&&o&&o.hover){var r=t.event,n=this.width,a=this.height,i=t.mouse(this),l=i[0],u=i[1];if(l<0||u<0||l>=n||u>=a)return;var c=e.lineLayer.readPixel(l,a-1-u),f=0!==c[3],d=f?c[2]+256*(c[1]+256*c[0]):null,p={x:l,y:u,clientX:r.clientX,clientY:r.clientY,dataIndex:e.model.key,curveNumber:d};d!==h&&(f?o.hover(p):o.unhover&&o.unhover(p),h=d)}}),c.style("opacity",function(t){return t.pick?.01:1}),r.style("background","rgba(255, 255, 255, 0)");var d=r.selectAll("."+WM.cn.parcoords).data(u,cT);d.exit().remove(),d.enter().append("g").classed(WM.cn.parcoords,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","none").call(function(t){var e=t.selectAll("defs").data(fT,cT);e.enter().append("defs");var r=e.selectAll("#"+WM.id.filterBarPattern).data(fT,cT);r.enter().append("pattern").attr("id",WM.id.filterBarPattern).attr("patternUnits","userSpaceOnUse"),r.attr("x",-WM.bar.width).attr("width",WM.bar.capturewidth).attr("height",function(t){return t.model.height});var n=r.selectAll("rect").data(fT,cT);n.enter().append("rect").attr("shape-rendering","crispEdges"),n.attr("height",function(t){return t.model.height}).attr("width",WM.bar.width).attr("x",WM.bar.width/2).attr("fill",WM.bar.fillcolor).attr("fill-opacity",WM.bar.fillopacity).attr("stroke",WM.bar.strokecolor).attr("stroke-opacity",WM.bar.strokeopacity).attr("stroke-width",WM.bar.strokewidth)}),d.attr("width",function(t){return t.model.width+t.model.pad.l+t.model.pad.r}).attr("height",function(t){return t.model.height+t.model.pad.t+t.model.pad.b}).attr("transform",function(t){return"translate("+t.model.translateX+","+t.model.translateY+")"});var p=d.selectAll("."+WM.cn.parcoordsControlView).data(fT,cT);p.enter().append("g").classed(WM.cn.parcoordsControlView,!0).style("box-sizing","content-box"),p.attr("transform",function(t){return"translate("+t.model.pad.l+","+t.model.pad.t+")"});var g=p.selectAll("."+WM.cn.yAxis).data(function(t){return t.dimensions},cT);function v(t){return t.dimensions.some(function(t){return 0!==t.filter[0]||1!==t.filter[1]})}function m(t,e){return(WM.scatter?function(t,e){for(var r=e.panels||(e.panels=[]),n=t.each(function(t){return t})[e.key].map(function(t){return t.__data__}),a=n.length-1,i=a,o=0;o<a;o++)for(var l=0;l<a;l++){var s=r[l+o*a]||(r[l+o*a]={}),u=n[l],c=n[l+1];s.dim1=n[o+1],s.dim2=c,s.canvasX=u.canvasX,s.panelSizeX=c.canvasX-u.canvasX,s.panelSizeY=e.model.canvasHeight/i,s.y=o*s.panelSizeY,s.canvasY=e.model.canvasHeight-s.y-s.panelSizeY}}:function(t,e){for(var r=e.panels||(e.panels=[]),n=t.each(function(t){return t})[e.key].map(function(t){return t.__data__}),a=n.length-1,i=0;i<1;i++)for(var o=0;o<a;o++){var l=r[o+i*a]||(r[o+i*a]={}),s=n[o],u=n[o+1];l.dim1=s,l.dim2=u,l.canvasX=s.canvasX,l.panelSizeX=u.canvasX-s.canvasX,l.panelSizeY=e.model.canvasHeight/1,l.y=i*l.panelSizeY,l.canvasY=e.model.canvasHeight-l.y-l.panelSizeY}})(t,e)}g.enter().append("g").classed(WM.cn.yAxis,!0).each(function(t){f.dimensions.push(t)}),p.each(function(t){m(g,t)}),c.filter(function(t){return!!t.viewModel}).each(function(t){t.lineLayer=uT(this,t,WM.scatter),t.viewModel[t.key]=t.lineLayer,f.renderers.push(function(){t.lineLayer.render(t.viewModel.panels,!0)}),t.lineLayer.render(t.viewModel.panels,!t.context)}),g.attr("transform",function(t){return"translate("+t.xScale(t.xIndex)+", 0)"}),g.call(t.behavior.drag().origin(function(t){return t}).on("drag",function(e){var r=e.parent;s=!1,l||(e.x=Math.max(-WM.overdrag,Math.min(e.model.width+WM.overdrag,t.event.x)),e.canvasX=e.x*e.model.canvasPixelRatio,g.sort(function(t,e){return t.x-e.x}).each(function(t,r){t.xIndex=r,t.x=e===t?t.x:t.xScale(t.xIndex),t.canvasX=t.x*t.model.canvasPixelRatio}),m(g,r),g.filter(function(t){return 0!==Math.abs(e.xIndex-t.xIndex)}).attr("transform",function(t){return"translate("+t.xScale(t.xIndex)+", 0)"}),t.select(this).attr("transform","translate("+e.x+", 0)"),g.each(function(t,n,a){a===e.parent.key&&(r.dimensions[n]=t)}),r.contextLayer&&r.contextLayer.render(r.panels,!1,!v(r)),r.focusLayer.render&&r.focusLayer.render(r.panels))}).on("dragend",function(e){var r=e.parent;l?"ending"===l&&(l=!1):(e.x=e.xScale(e.xIndex),e.canvasX=e.x*e.model.canvasPixelRatio,m(g,r),t.select(this).attr("transform",function(t){return"translate("+t.x+", 0)"}),r.contextLayer&&r.contextLayer.render(r.panels,!1,!v(r)),r.focusLayer&&r.focusLayer.render(r.panels),r.pickLayer&&r.pickLayer.render(r.panels,!0),s=!0,o&&o.axesMoved&&o.axesMoved(r.key,r.dimensions.map(function(t){return t.crossfilterDimensionIndex})))})),g.exit().remove();var y=g.selectAll("."+WM.cn.axisOverlays).data(fT,cT);y.enter().append("g").classed(WM.cn.axisOverlays,!0),y.selectAll("."+WM.cn.axis).remove();var x=y.selectAll("."+WM.cn.axis).data(fT,cT);x.enter().append("g").classed(WM.cn.axis,!0),x.each(function(e){var r=e.model.height/e.model.tickDistance,n=e.domainScale,a=n.domain();t.select(this).call(t.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(r,e.tickFormat).tickValues(e.ordinal?a:null).tickFormat(e.ordinal?function(t){return t}:null).scale(n)),Jr.font(x.selectAll("text"),e.model.tickFont)}),x.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),x.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");var b=y.selectAll("."+WM.cn.axisHeading).data(fT,cT);b.enter().append("g").classed(WM.cn.axisHeading,!0);var _=b.selectAll("."+WM.cn.axisTitle).data(fT,cT);_.enter().append("text").classed(WM.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto"),_.attr("transform","translate(0,"+-WM.axisTitleOffset+")").text(function(t){return t.label}).each(function(t){Jr.font(_,t.model.labelFont)});var w=y.selectAll("."+WM.cn.axisExtent).data(fT,cT);w.enter().append("g").classed(WM.cn.axisExtent,!0);var A=w.selectAll("."+WM.cn.axisExtentTop).data(fT,cT);A.enter().append("g").classed(WM.cn.axisExtentTop,!0),A.attr("transform","translate(0,"+-WM.axisExtentOffset+")");var M=A.selectAll("."+WM.cn.axisExtentTopText).data(fT,cT);function T(e){return e.ordinal?function(){return""}:t.format(e.tickFormat)}M.enter().append("text").classed(WM.cn.axisExtentTopText,!0).call(xT),M.text(function(t){return T(t)(t.domainScale.domain().slice(-1)[0])}).each(function(t){Jr.font(M,t.model.rangeFont)});var k=w.selectAll("."+WM.cn.axisExtentBottom).data(fT,cT);k.enter().append("g").classed(WM.cn.axisExtentBottom,!0),k.attr("transform",function(t){return"translate(0,"+(t.model.height+WM.axisExtentOffset)+")"});var E=k.selectAll("."+WM.cn.axisExtentBottomText).data(fT,cT);E.enter().append("text").classed(WM.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(xT),E.text(function(t){return T(t)(t.domainScale.domain()[0])}).each(function(t){Jr.font(E,t.model.rangeFont)});var C=y.selectAll("."+WM.cn.axisBrush).data(fT,cT),S=C.enter().append("g").classed(WM.cn.axisBrush,!0);C.each(function(e){e.brush||(e.brush=t.svg.brush().y(e.unitScale).on("brushstart",R).on("brush",D).on("brushend",I),0===e.filter[0]&&1===e.filter[1]||e.brush.extent(e.filter),t.select(this).call(e.brush))}),S.selectAll("rect").attr("x",-WM.bar.capturewidth/2).attr("width",WM.bar.capturewidth),S.selectAll("rect.extent").attr("fill","url(#"+WM.id.filterBarPattern+")").style("cursor","ns-resize").filter(function(t){return 0===t.filter[0]&&1===t.filter[1]}).attr("y",-100),S.selectAll(".resize rect").attr("height",WM.bar.handleheight).attr("opacity",0).style("visibility","visible"),S.selectAll(".resize.n rect").style("cursor","n-resize").attr("y",WM.bar.handleoverlap-WM.bar.handleheight),S.selectAll(".resize.s rect").style("cursor","s-resize").attr("y",WM.bar.handleoverlap);var L=!1,O=!1;function R(){L=!0,l=!0}function D(e){s=!1;var r=e.parent,n=e.brush.extent(),a=r.dimensions,i=a[e.xIndex].filter,o=L&&n[0]===n[1];o&&(e.brush.clear(),t.select(this).select("rect.extent").attr("y",-100));var l=o?[0,1]:n.slice();if(l[0]!==i[0]||l[1]!==i[1]){a[e.xIndex].filter=l,r.focusLayer&&r.focusLayer.render(r.panels,!0);var u=v(r);!O&&u?(r.contextLayer&&r.contextLayer.render(r.panels,!0),O=!0):O&&!u&&(r.contextLayer&&r.contextLayer.render(r.panels,!0,!0),O=!1)}L=!1}function I(e){var r=e.parent,n=e.brush.extent(),a=n[0]===n[1],i=r.dimensions[e.xIndex].filter;if(!a&&e.ordinal&&(i[0]=gT(e.ordinalScale,i[0]),i[1]=gT(e.ordinalScale,i[1]),i[0]===i[1]&&(i[0]=Math.max(0,i[0]-.05),i[1]=Math.min(1,i[1]+.05)),t.select(this).transition().duration(150).call(e.brush.extent(i)),r.focusLayer.render(r.panels,!0)),r.pickLayer&&r.pickLayer.render(r.panels,!0),s=!0,l="ending",o&&o.filterChanged){var u=e.domainToUnitScale.invert,c=i.map(u);o.filterChanged(r.key,e.visibleIndex,c)}}}(0,i,o,n,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{filterChanged:function(t,e,n){var a=s[t][e],i=a.constraintrange;i&&2===i.length||(i=a.constraintrange=[]),i[0]=n[0],i[1]=n[1],r.emit("plotly_restyle")},hover:function(t){r.emit("plotly_hover",t)},unhover:function(t){r.emit("plotly_unhover",t)},axesMoved:function(t,e){function n(t){return!("visible"in t)||t.visible}function a(t,e,r){var n=e.indexOf(r),a=t.indexOf(n);return-1===a&&(a+=e.length),a}var i=function(t){return function(r,n){return a(e,t,r)-a(e,t,n)}}(s[t].filter(n));l[t].sort(i),s[t].filter(function(t){return!n(t)}).sort(function(e){return s[t].indexOf(e)}).forEach(function(e){l[t].splice(l[t].indexOf(e),1),l[t].splice(s[t].indexOf(e),0,e)}),r.emit("plotly_restyle")}})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _T={},wT=Qa.getModuleCalcData;_T.name="parcoords",_T.plot=function(t){var e=wT(t.calcdata,"parcoords");e.length&&bT(t,e)},_T.clean=function(t,e,r,n){var a=n._has&&n._has("parcoords"),i=e._has&&e._has("parcoords");a&&!i&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},_T.toSVG=function(e){var r=e._fullLayout._glimages,n=t.select(e).selectAll(".svg-container");n.filter(function(t,e){return e===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");r.append("svg:image").attr({xmlns:ke.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})}),window.setTimeout(function(){t.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)};var AT=GM;var MT=WM.maxDimensionCount,TT=Uy.defaults;var kT={};kT.attributes=jM,kT.supplyDefaults=function(t,e,r,n){function a(r,n){return ae.coerce(t,e,jM,r,n)}var i=function(t,e){var r,n,a,i=t.dimensions||[],o=e.dimensions=[],l=1/0;function s(t,e){return ae.coerce(r,n,jM.dimensions,t,e)}for(i.length>MT&&(ae.log("parcoords traces support up to "+MT+" dimensions at the moment"),i.splice(MT)),a=0;a<i.length;a++)if(r=i[a],n={},ae.isPlainObject(r)){var u=s("values"),c=s("visible");u&&u.length||(c=n.visible=!1),c&&(s("label"),s("tickvals"),s("ticktext"),s("tickformat"),s("range"),s("constraintrange"),l=Math.min(l,u.length)),n._index=a,o.push(n)}return e._commonLength=l,o}(t,e);!function(t,e,r,n,a){var i=a("line.color",r);yr(t,"line")&&ae.isArrayOrTypedArray(i)&&(i.length?(a("line.colorscale"),mr(t,e,n,a,{prefix:"line.",cLetter:"c"}),e._commonLength=Math.min(e._commonLength,i.length)):e.line.color=r)}(t,e,r,n,a),TT(e,n,a),Array.isArray(i)&&i.length||(e.visible=!1);for(var o=0;o<i.length;o++)i[o].visible&&(i[o]._length=e._commonLength);var l={family:n.font.family,size:Math.round(n.font.size/1.2),color:n.font.color};ae.coerceFont(a,"labelfont",l),ae.coerceFont(a,"tickfont",l),ae.coerceFont(a,"rangefont",l)},kT.calc=function(t,e){var r=!!e.line.colorscale&&ae.isArrayOrTypedArray(e.line.color),n=r?e.line.color:function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=.5;return e}(e._commonLength),a=r?e.line.colorscale:[[0,e.line.color],[1,e.line.color]];return yr(e,"line")&&dr(e,n,"line","c"),AT({lineColor:n,cscale:a})},kT.plot=bT,kT.colorbar=function(t,r){var n=r[0].trace,a=n.line,i="cb"+n.uid;if(t._fullLayout._infolayer.selectAll("."+i).remove(),void 0!==a&&a.showscale){var o=a.color,l=a.cmin,s=a.cmax;e(l)||(l=ae.aggNums(Math.min,null,o)),e(s)||(s=ae.aggNums(Math.max,null,o));var u=r[0].t.cb=xm(t,i),c=br.makeColorScaleFunc(br.extractScale(a.colorscale,l,s),{noNumericCheck:!0});u.fillcolor(c).filllevels({start:l,end:s,size:(s-l)/254}).options(a.colorbar)()}else Wn.autoMargin(t,i)},kT.moduleType="trace",kT.name="parcoords",kT.basePlotModule=_T,kT.categories=["gl","regl","noOpacity"],kT.meta={};var ET=kT,CT={x:An.x,y:An.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:An.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"}},ST={};ST.pointVertex=zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),ST.pointFragment=zo(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),ST.pickVertex=zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),ST.pickFragment=zo(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"]);var LT=function(t,e){var r=t.gl,n=Fo(r),a=Fo(r),i=Yl(r,ST.pointVertex,ST.pointFragment),o=Yl(r,ST.pickVertex,ST.pickFragment),l=new OT(t,n,a,i,o);return l.update(e),t.addObject(l),l};function OT(t,e,r,n,a){this.plot=t,this.offsetBuffer=e,this.pickBuffer=r,this.shader=n,this.pickShader=a,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var RT=OT.prototype;RT.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},RT.update=function(t){var e;function r(e,r){return e in t?t[e]:r}t=t||{},this.sizeMin=r("sizeMin",.5),this.sizeMax=r("sizeMax",20),this.color=r("color",[1,0,0,1]).slice(),this.areaRatio=r("areaRatio",1),this.borderColor=r("borderColor",[0,0,0,1]).slice(),this.blend=r("blend",!1);var n=t.positions.length>>>1,a=t.positions instanceof Float32Array,i=t.idToIndex instanceof Int32Array&&t.idToIndex.length>=n,o=t.positions,l=a?o:Lo.mallocFloat32(o.length),s=i?t.idToIndex:Lo.mallocInt32(n);if(a||l.set(o),!i)for(l.set(o),e=0;e<n;e++)s[e]=e;this.points=o,this.offsetBuffer.update(l),this.pickBuffer.update(s),a||Lo.free(l),i||Lo.free(s),this.pointCount=n,this.pickOffset=0},RT.unifiedDraw=function(){var t=[1,0,0,0,1,0,0,0,1],e=[0,0,0,0];return function(r){var n=void 0!==r,a=n?this.pickShader:this.shader,i=this.plot.gl,o=this.plot.dataBox;if(0===this.pointCount)return r;var l=o[2]-o[0],s=o[3]-o[1],u=function(t,e){var r,n=0,a=t.length>>>1;for(r=0;r<a;r++){var i=t[2*r],o=t[2*r+1];i>=e[0]&&i<=e[2]&&o>=e[1]&&o<=e[3]&&n++}return n}(this.points,o),c=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));t[0]=2/l,t[4]=2/s,t[6]=-2*o[0]/l-1,t[7]=-2*o[1]/s-1,this.offsetBuffer.bind(),a.bind(),a.attributes.position.pointer(),a.uniforms.matrix=t,a.uniforms.color=this.color,a.uniforms.borderColor=this.borderColor,a.uniforms.pointCloud=c<5,a.uniforms.pointSize=c,a.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),n&&(e[0]=255&r,e[1]=r>>8&255,e[2]=r>>16&255,e[3]=r>>24&255,this.pickBuffer.bind(),a.attributes.pickId.pointer(i.UNSIGNED_BYTE),a.uniforms.pickOffset=e,this.pickOffset=r);var f=i.getParameter(i.BLEND),h=i.getParameter(i.DITHER);return f&&!this.blend&&i.disable(i.BLEND),h&&i.disable(i.DITHER),i.drawArrays(i.POINTS,0,this.pointCount),f&&!this.blend&&i.enable(i.BLEND),h&&i.enable(i.DITHER),r+this.pointCount}}(),RT.draw=RT.unifiedDraw,RT.drawPick=RT.unifiedDraw,RT.pick=function(t,e,r){var n=this.pickOffset,a=this.pointCount;if(r<n||r>=n+a)return null;var i=r-n,o=this.points;return{object:this,pointId:i,dataCoord:[o[2*i],o[2*i+1]]}};var DT=ha;function IT(t,e){this.scene=t,this.uid=e,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=LT(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var PT=IT.prototype;PT.handlePick=function(t){var e=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*e],this.pickXYData[2*e+1]]:[this.pickXData[e],this.pickYData[e]],textLabel:Array.isArray(this.textLabels)?this.textLabels[e]:this.textLabels,color:this.color,name:this.name,pointIndex:e,hoverinfo:this.hoverinfo}},PT.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=iM(t,{})},PT.updateFast=function(t){var e,r,n,a,i,o,l=this.xData=this.pickXData=t.x,s=this.yData=this.pickYData=t.y,u=this.pickXYData=t.xy,c=t.xbounds&&t.ybounds,f=t.indices,h=this.bounds;if(u){if(n=u,e=u.length>>>1,c)h[0]=t.xbounds[0],h[2]=t.xbounds[1],h[1]=t.ybounds[0],h[3]=t.ybounds[1];else for(o=0;o<e;o++)a=n[2*o],i=n[2*o+1],a<h[0]&&(h[0]=a),a>h[2]&&(h[2]=a),i<h[1]&&(h[1]=i),i>h[3]&&(h[3]=i);if(f)r=f;else for(r=new Int32Array(e),o=0;o<e;o++)r[o]=o}else for(e=l.length,n=new Float32Array(2*e),r=new Int32Array(e),o=0;o<e;o++)a=l[o],i=s[o],r[o]=o,n[2*o]=a,n[2*o+1]=i,a<h[0]&&(h[0]=a),a>h[2]&&(h[2]=a),i<h[1]&&(h[1]=i),i>h[3]&&(h[3]=i);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=n;var d=ov(t.marker.color),p=ov(t.marker.border.color),g=t.opacity*t.marker.opacity;d[3]*=g,this.pointcloudOptions.color=d;var v=t.marker.blend;if(null===v){v=l.length<100||s.length<100}this.pointcloudOptions.blend=v,p[3]*=g,this.pointcloudOptions.borderColor=p;var m=t.marker.sizemin,y=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=m,this.pointcloudOptions.sizeMax=y,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions),this.expandAxesFast(h,y/2)},PT.expandAxesFast=function(t,e){var r=e||.5;DT(this.scene.xaxis,[t[0],t[2]],{ppad:r}),DT(this.scene.yaxis,[t[1],t[3]],{ppad:r})},PT.dispose=function(){this.pointcloud.dispose()};var FT=function(t,e){var r=new IT(t,e.uid);return r.update(e),r},zT={};zT.attributes=CT,zT.supplyDefaults=function(t,e,r){function n(r,n){return ae.coerce(t,e,CT,r,n)}n("x"),n("y"),n("xbounds"),n("ybounds"),t.xy&&t.xy instanceof Float32Array&&(e.xy=t.xy),t.indices&&t.indices instanceof Int32Array&&(e.indices=t.indices),n("text"),n("marker.color",r),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",r),n("marker.border.arearatio")},zT.calc=function(t,e){var r=[{x:!1,y:!1,trace:e,t:{}}];return NA(r,e),jA(e),r},zT.plot=FT,zT.moduleType="trace",zT.name="pointcloud",zT.basePlotModule=_v,zT.categories=["gl","gl2d","showLegend"],zT.meta={};var NT=zT,BT=function(t,e){var r="number"==typeof t,n="number"==typeof e;r&&!n?(e=t,t=0):r||n||(t=0,e=0);var a=(e|=0)-(t|=0);if(a<0)throw new Error("array length must be positive");for(var i=new Array(a),o=0,l=t;o<a;o++,l++)i[o]=l;return i},jT=UT;function UT(t,e){if(!(this instanceof UT))return new UT(t,e);this.nodeSize=e||64,this.coords=t.slice();var r=Math.floor(t.length/2);this.ids=Array(r);for(var n=0;n<r;n++)this.ids[n]=n;!function t(e,r,n,a,i,o){if(i-a<=n)return;var l=Math.floor((a+i)/2);!function t(e,r,n,a,i,o){for(;i>a;){if(i-a>600){var l=i-a+1,s=n-a+1,u=Math.log(l),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(l-c)/l)*(s-l/2<0?-1:1),h=Math.max(a,Math.floor(n-s*c/l+f)),d=Math.min(i,Math.floor(n+(l-s)*c/l+f));t(e,r,n,h,d,o)}var p=r[2*n+o],g=a,v=i;for(HT(e,r,a,n),r[2*i+o]>p&&HT(e,r,a,i);g<v;){for(HT(e,r,g,v),g++,v--;r[2*g+o]<p;)g++;for(;r[2*v+o]>p;)v--}r[2*a+o]===p?HT(e,r,a,v):HT(e,r,++v,i),v<=n&&(a=v+1),n<=v&&(i=v-1)}}(e,r,l,a,i,o%2);t(e,r,n,a,l-1,o+1);t(e,r,n,l+1,i,o+1)}(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function VT(t,e,r,n){var a=t-r,i=e-n;return a*a+i*i}function HT(t,e,r,n){qT(t,r,n),qT(e,2*r,2*n),qT(e,2*r+1,2*n+1)}function qT(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}UT.prototype.range=function(t,e,r,n){for(var a,i,o=this.ids,l=this.coords,s=this.nodeSize,u=[0,o.length-1,0],c=[];u.length;){var f=u.pop(),h=u.pop(),d=u.pop();if(h-d<=s)for(var p=d;p<=h;p++)a=l[2*p],i=l[2*p+1],a>=t&&a<=r&&i>=e&&i<=n&&c.push(o[p]);else{var g=Math.floor((d+h)/2);a=l[2*g],i=l[2*g+1],a>=t&&a<=r&&i>=e&&i<=n&&c.push(o[g]);var v=(f+1)%2;(0===f?t<=a:e<=i)&&(u.push(d),u.push(g-1),u.push(v)),(0===f?r>=a:n>=i)&&(u.push(g+1),u.push(h),u.push(v))}}return c},UT.prototype.within=function(t,e,r){for(var n=this.ids,a=this.coords,i=this.nodeSize,o=[0,n.length-1,0],l=[],s=r*r;o.length;){var u=o.pop(),c=o.pop(),f=o.pop();if(c-f<=i)for(var h=f;h<=c;h++)VT(a[2*h],a[2*h+1],t,e)<=s&&l.push(n[h]);else{var d=Math.floor((f+c)/2),p=a[2*d],g=a[2*d+1];VT(p,g,t,e)<=s&&l.push(n[d]);var v=(u+1)%2;(0===u?t-r<=p:e-r<=g)&&(o.push(f),o.push(d-1),o.push(v)),(0===u?t+r>=p:e+r>=g)&&(o.push(d+1),o.push(c),o.push(v))}}return l};var GT=function(t,e){if(!t||null==t.length)throw Error("Argument should be an array");e=null==e?1:Math.floor(e);for(var r=Array(2*e),n=0;n<e;n++){for(var a=-1/0,i=1/0,o=n,l=t.length;o<l;o+=e)t[o]>a&&(a=t[o]),t[o]<i&&(i=t[o]);r[n]=i,r[e+n]=a}return r};var XT=function(t,e,r){if(!t)throw new TypeError("must specify data as first parameter");if(r=0|+(r||0),Array.isArray(t)&&Array.isArray(t[0])){var n=t[0].length,a=t.length*n;e&&"string"!=typeof e||(e=new(av(e||"float32"))(a+r));var i=e.length-r;if(a!==i)throw new Error("source length "+a+" ("+n+"x"+t.length+") does not match destination length "+i);for(var o=0,l=r;o<t.length;o++)for(var s=0;s<n;s++)e[l++]=t[o][s]}else if(e&&"string"!=typeof e)e.set(t,r);else{var u=av(e||"float32");0===r?e=new u(t):(e=new u(t.length+r)).set(t,r)}return e};var WT=Object.getOwnPropertySymbols,YT=Object.prototype.hasOwnProperty,ZT=Object.prototype.propertyIsEnumerable;var JT=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,n,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),i=1;i<arguments.length;i++){for(var o in r=Object(arguments[i]))YT.call(r,o)&&(a[o]=r[o]);if(WT){n=WT(r);for(var l=0;l<n.length;l++)ZT.call(r,n[l])&&(a[n[l]]=r[n[l]])}}return a},QT=function(t,e,r){var n,a,i={};if("string"==typeof e&&(e=KT(e)),Array.isArray(e)){var o={};for(a=0;a<e.length;a++)o[e[a]]=!0;e=o}for(n in e)e[n]=KT(e[n]);var l={};for(n in e){var s=e[n];if(Array.isArray(s))for(a=0;a<s.length;a++){var u=s[a];if(r&&(l[u]=!0),u in t){if(i[n]=t[u],r)for(var c=a;c<s.length;c++)l[s[c]]=!0;break}}else n in t&&(e[n]&&(i[n]=t[n]),r&&(l[n]=!0))}if(r)for(n in t)l[n]||(i[n]=t[n]);return i},$T={};function KT(t){return $T[t]?$T[t]:("string"==typeof t&&(t=$T[t]=t.split(/\s*,\s*|\s+/)),t)}var tk={};function ek(t){if(t instanceof Float32Array)return t;if("number"==typeof t)return new Float32Array([t])[0];var e=new Float32Array(t);return e.set(t),e}(tk=ek).float32=tk.float=ek,tk.fract32=tk.fract=function(t){if("number"==typeof t)return ek(t-ek(t));for(var e=ek(t),r=0,n=e.length;r<n;r++)e[r]=t[r]-e[r];return e};var rk=function(t,e,r){Array.isArray(r)||(r=[].slice.call(arguments,2));for(var n=0,a=r.length;n<a;n++){var i=r[n];for(var o in i)if((void 0===e[o]||Array.isArray(e[o])||t[o]!==e[o])&&o in e){var l;if(!0===i[o])l=e[o];else{if(!1===i[o])continue;if("function"==typeof i[o]&&void 0===(l=i[o](e[o],t,e)))continue}t[o]=l}}return t},nk=tk.float32,ak=tk.fract32,ik=function(t,e){"function"==typeof t?(e||(e={}),e.regl=t):e=t;e.length&&(e.positions=e);if(!(t=e.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var r,n,a,i,o,l,s=t._gl,u={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},c=[];return i=t.buffer({usage:"dynamic",type:"uint8",data:null}),n=t.buffer({usage:"dynamic",type:"float",data:null}),a=t.buffer({usage:"dynamic",type:"float",data:null}),o=t.buffer({usage:"dynamic",type:"float",data:null}),l=t.buffer({usage:"static",type:"float",data:ok}),p(e),r=t({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision mediump float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:t.prop("range"),lineWidth:t.prop("lineWidth"),capSize:t.prop("capSize"),opacity:t.prop("opacity"),scale:t.prop("scale"),translate:t.prop("translate"),scaleFract:t.prop("scaleFract"),translateFract:t.prop("translateFract"),viewport:function(t,e){return[e.viewport.x,e.viewport.y,t.viewportWidth,t.viewportHeight]}},attributes:{color:{buffer:i,offset:function(t,e){return 4*e.offset},divisor:1},position:{buffer:n,offset:function(t,e){return 8*e.offset},divisor:1},positionFract:{buffer:a,offset:function(t,e){return 8*e.offset},divisor:1},error:{buffer:o,offset:function(t,e){return 16*e.offset},divisor:1},direction:{buffer:l,stride:24,offset:0},lineOffset:{buffer:l,stride:24,offset:8},capOffset:{buffer:l,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:t.prop("viewport")},viewport:t.prop("viewport"),stencil:!1,instances:t.prop("count"),count:ok.length}),JT(f,{update:p,draw:h,destroy:g,regl:t,gl:s,canvas:s.canvas,groups:c}),f;function f(t){t?p(t):null===t&&g(),h()}function h(e){if("number"==typeof e)return d(e);e&&!Array.isArray(e)&&(e=[e]),t._refresh(),c.forEach(function(t,r){t&&(e&&(e[r]?t.draw=!0:t.draw=!1),t.draw?d(r):t.draw=!0)})}function d(t){"number"==typeof t&&(t=c[t]),null!=t&&t&&t.count&&t.color&&t.opacity&&t.positions&&t.positions.length>1&&(t.scaleRatio=[t.scale[0]*t.viewport.width,t.scale[1]*t.viewport.height],r(t),t.after&&t.after(t))}function p(t){if(t){null!=t.length?"number"==typeof t[0]&&(t=[{positions:t}]):Array.isArray(t)||(t=[t]);var e=0,r=0;if(c=t.map(function(t,n){var a=c[n];return t?("function"==typeof t?t={after:t}:"number"==typeof t[0]&&(t={positions:t}),t=QT(t,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),a||(c[n]=a={id:n,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},t=JT({},u,t)),rk(a,t,[{lineWidth:function(t){return.5*+t},capSize:function(t){return.5*+t},opacity:parseFloat,errors:function(t){return t=XT(t),r+=t.length,t},positions:function(t,r){return t=XT(t,"float64"),r.count=Math.floor(t.length/2),r.bounds=GT(t,2),r.offset=e,e+=r.count,t}},{color:function(t,e){var r=e.count;if(t||(t="transparent"),!Array.isArray(t)||"number"==typeof t[0]){var n=t;t=Array(r);for(var a=0;a<r;a++)t[a]=n}if(t.length<r)throw Error("Not enough colors");for(var i=new Uint8Array(4*r),o=0;o<r;o++){var l=iv(t[o],"uint8");i.set(l,4*o)}return i},range:function(t,e,r){var n=e.bounds;return t||(t=n),e.scale=[1/(t[2]-t[0]),1/(t[3]-t[1])],e.translate=[-t[0],-t[1]],e.scaleFract=ak(e.scale),e.translateFract=ak(e.translate),t},viewport:function(t){var e;return Array.isArray(t)?e={x:t[0],y:t[1],width:t[2]-t[0],height:t[3]-t[1]}:t?(e={x:t.x||t.left||0,y:t.y||t.top||0},t.right?e.width=t.right-e.x:e.width=t.w||t.width||0,t.bottom?e.height=t.bottom-e.y:e.height=t.h||t.height||0):e={x:0,y:0,width:s.drawingBufferWidth,height:s.drawingBufferHeight},e}}]),a):a}),e||r){var l=c.reduce(function(t,e,r){return t+(e?e.count:0)},0),f=new Float64Array(2*l),h=new Uint8Array(4*l),d=new Float32Array(4*l);c.forEach(function(t,e){if(t){var r=t.positions,n=t.count,a=t.offset,i=t.color,o=t.errors;n&&(h.set(i,4*a),d.set(o,4*a),f.set(r,2*a))}}),n(nk(f)),a(ak(f)),i(h),o(d)}}}function g(){n.destroy(),a.destroy(),i.destroy(),o.destroy(),l.destroy()}},ok=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];var lk=function(t,e,r){if(!t||null==t.length)throw Error("Argument should be an array");null==e&&(e=1);null==r&&(r=GT(t,e));for(var n=0;n<e;n++){var a=r[e+n],i=r[n],o=n,l=t.length;if(a===1/0&&i===-1/0)for(o=n;o<l;o+=e)t[o]=t[o]===a?1:t[o]===i?0:.5;else if(a===1/0)for(o=n;o<l;o+=e)t[o]=t[o]===a?1:0;else if(i===-1/0)for(o=n;o<l;o+=e)t[o]=t[o]===i?0:1;else{var s=a-i;for(o=n;o<l;o+=e)t[o]=0===s?.5:(t[o]-i)/s}}return t};var sk={};function uk(t,e,r){r=r||2;var n,a,i,o,l,s,u,c=e&&e.length,f=c?e[0]*r:t.length,h=ck(t,0,f,r,!0),d=[];if(!h)return d;if(c&&(h=function(t,e,r,n){var a,i,o,l,s,u=[];for(a=0,i=e.length;a<i;a++)o=e[a]*n,l=a<i-1?e[a+1]*n:t.length,(s=ck(t,o,l,n,!1))===s.next&&(s.steiner=!0),u.push(bk(s));for(u.sort(mk),a=0;a<u.length;a++)yk(u[a],r),r=fk(r,r.next);return r}(t,e,h,r)),t.length>80*r){n=i=t[0],a=o=t[1];for(var p=r;p<f;p+=r)l=t[p],s=t[p+1],l<n&&(n=l),s<a&&(a=s),l>i&&(i=l),s>o&&(o=s);u=0!==(u=Math.max(i-n,o-a))?1/u:0}return hk(h,d,r,n,a,u),d}function ck(t,e,r,n,a){var i,o;if(a===Ok(t,e,r,n)>0)for(i=e;i<r;i+=n)o=Ck(i,t[i],t[i+1],o);else for(i=r-n;i>=e;i-=n)o=Ck(i,t[i],t[i+1],o);return o&&Mk(o,o.next)&&(Sk(o),o=o.next),o}function fk(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Mk(n,n.next)&&0!==Ak(n.prev,n,n.next))n=n.next;else{if(Sk(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function hk(t,e,r,n,a,i,o){if(t){!o&&i&&function(t,e,r,n){var a=t;do{null===a.z&&(a.z=xk(a.x,a.y,e,r,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,function(t){var e,r,n,a,i,o,l,s,u=1;do{for(r=t,t=null,i=null,o=0;r;){for(o++,n=r,l=0,e=0;e<u&&(l++,n=n.nextZ);e++);for(s=u;l>0||s>0&&n;)0!==l&&(0===s||!n||r.z<=n.z)?(a=r,r=r.nextZ,l--):(a=n,n=n.nextZ,s--),i?i.nextZ=a:t=a,a.prevZ=i,i=a;r=n}i.nextZ=null,u*=2}while(o>1)}(a)}(t,n,a,i);for(var l,s,u=t;t.prev!==t.next;)if(l=t.prev,s=t.next,i?pk(t,n,a,i):dk(t))e.push(l.i/r),e.push(t.i/r),e.push(s.i/r),Sk(t),t=s.next,u=s.next;else if((t=s)===u){o?1===o?hk(t=gk(t,e,r),e,r,n,a,i,2):2===o&&vk(t,e,r,n,a,i):hk(fk(t),e,r,n,a,i,1);break}}}function dk(t){var e=t.prev,r=t,n=t.next;if(Ak(e,r,n)>=0)return!1;for(var a=t.next.next;a!==t.prev;){if(_k(e.x,e.y,r.x,r.y,n.x,n.y,a.x,a.y)&&Ak(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function pk(t,e,r,n){var a=t.prev,i=t,o=t.next;if(Ak(a,i,o)>=0)return!1;for(var l=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,s=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,c=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,f=xk(l,s,e,r,n),h=xk(u,c,e,r,n),d=t.prevZ,p=t.nextZ;d&&d.z>=f&&p&&p.z<=h;){if(d!==t.prev&&d!==t.next&&_k(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&Ak(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&_k(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&Ak(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&_k(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&Ak(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&_k(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&Ak(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function gk(t,e,r){var n=t;do{var a=n.prev,i=n.next.next;!Mk(a,i)&&Tk(a,n,n.next,i)&&kk(a,i)&&kk(i,a)&&(e.push(a.i/r),e.push(n.i/r),e.push(i.i/r),Sk(n),Sk(n.next),n=t=i),n=n.next}while(n!==t);return n}function vk(t,e,r,n,a,i){var o=t;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&wk(o,l)){var s=Ek(o,l);return o=fk(o,o.next),s=fk(s,s.next),hk(o,e,r,n,a,i),void hk(s,e,r,n,a,i)}l=l.next}o=o.next}while(o!==t)}function mk(t,e){return t.x-e.x}function yk(t,e){if(e=function(t,e){var r,n=e,a=t.x,i=t.y,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var l=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(l<=a&&l>o){if(o=l,l===a){if(i===n.y)return n;if(i===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(a===o)return r.prev;var s,u=r,c=r.x,f=r.y,h=1/0;n=r.next;for(;n!==u;)a>=n.x&&n.x>=c&&a!==n.x&&_k(i<f?a:o,i,c,f,i<f?o:a,i,n.x,n.y)&&((s=Math.abs(i-n.y)/(a-n.x))<h||s===h&&n.x>r.x)&&kk(n,t)&&(r=n,h=s),n=n.next;return r}(t,e)){var r=Ek(e,t);fk(r,r.next)}}function xk(t,e,r,n,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function bk(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function _k(t,e,r,n,a,i,o,l){return(a-o)*(e-l)-(t-o)*(i-l)>=0&&(t-o)*(n-l)-(r-o)*(e-l)>=0&&(r-o)*(i-l)-(a-o)*(n-l)>=0}function wk(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Tk(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&kk(t,e)&&kk(e,t)&&function(t,e){var r=t,n=!1,a=(t.x+e.x)/2,i=(t.y+e.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&a<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function Ak(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Mk(t,e){return t.x===e.x&&t.y===e.y}function Tk(t,e,r,n){return!!(Mk(t,e)&&Mk(r,n)||Mk(t,n)&&Mk(r,e))||Ak(t,e,r)>0!=Ak(t,e,n)>0&&Ak(r,n,t)>0!=Ak(r,n,e)>0}function kk(t,e){return Ak(t.prev,t,t.next)<0?Ak(t,e,t.next)>=0&&Ak(t,t.prev,e)>=0:Ak(t,e,t.prev)<0||Ak(t,t.next,e)<0}function Ek(t,e){var r=new Lk(t.i,t.x,t.y),n=new Lk(e.i,e.x,e.y),a=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=a,a.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function Ck(t,e,r,n){var a=new Lk(t,e,r);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function Sk(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Lk(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ok(t,e,r,n){for(var a=0,i=e,o=r-n;i<r;i+=n)a+=(t[o]-t[i])*(t[i+1]+t[o+1]),o=i;return a}(sk=uk).default=uk,uk.deviation=function(t,e,r,n){var a=e&&e.length,i=a?e[0]*r:t.length,o=Math.abs(Ok(t,0,i,r));if(a)for(var l=0,s=e.length;l<s;l++){var u=e[l]*r,c=l<s-1?e[l+1]*r:t.length;o-=Math.abs(Ok(t,u,c,r))}var f=0;for(l=0;l<n.length;l+=3){var h=n[l]*r,d=n[l+1]*r,p=n[l+2]*r;f+=Math.abs((t[h]-t[p])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[p+1]-t[h+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},uk.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,a=0;a<t.length;a++){for(var i=0;i<t[a].length;i++)for(var o=0;o<e;o++)r.vertices.push(t[a][i][o]);a>0&&(n+=t[a-1].length,r.holes.push(n))}return r};var Rk=function(t,e){"function"==typeof t?(e||(e={}),e.regl=t):e=t;e.length&&(e.positions=e);if(!(t=e.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var r,n,a,i,o,l,s,u,c=t._gl,f={positions:[],dashes:null,join:null,miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:null,fill:null},h=[],d=2,p=3e6,g=1e4;i=t.buffer({usage:"dynamic",type:"uint8",data:null}),o=t.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),l=t.buffer({usage:"dynamic",type:"float",data:null}),s=t.buffer({usage:"dynamic",type:"float",data:null}),u=t.texture({channels:1,data:new Uint8Array(524288),width:256,height:2048,mag:"linear",min:"linear"}),b(e);var v={primitive:"triangle strip",instances:t.prop("count"),count:4,offset:0,uniforms:{miterMode:function(t,e){return"round"===e.join?2:1},miterLimit:t.prop("miterLimit"),scale:t.prop("scale"),scaleFract:t.prop("scaleFract"),translateFract:t.prop("translateFract"),translate:t.prop("translate"),thickness:t.prop("thickness"),dashPattern:u,dashLength:t.prop("dashLength"),dashShape:[256,2048],opacity:t.prop("opacity"),pixelRatio:t.context("pixelRatio"),id:t.prop("id"),scaleRatio:t.prop("scaleRatio"),viewport:function(t,e){return[e.viewport.x,e.viewport.y,t.viewportWidth,t.viewportHeight]}},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(t,e){return!e.overlay}},scissor:{enable:!0,box:t.prop("viewport")},stencil:!1,viewport:t.prop("viewport")};function m(t){t?b(t):null===t&&_(),y()}function y(t){if("number"==typeof t)return x(t);t&&!Array.isArray(t)&&(t=[t]),h.forEach(function(t,e){x(e)})}function x(e){"number"==typeof e&&(e=h[e]),e&&e.count&&e.opacity&&e.positions&&e.positions.length>2&&(t._refresh(),e.fill&&e.triangles&&e.triangles.length>2&&a(e),e.thickness&&e.color&&(e.scaleRatio=[e.scale[0]*e.viewport.width,e.scale[1]*e.viewport.height],e.scaleRatio[0]>p||e.scaleRatio[1]>p?n(e):"rect"===e.join||!e.join&&(e.thickness<=2||e.positions.length>=g)?n(e):r(e),e.after&&e.after(e)))}function b(t){if(t){null!=t.length?"number"==typeof t[0]&&(t=[{positions:t}]):Array.isArray(t)||(t=[t]);var e=0;if(m.lines=h=t.map(function(t,r){var n=h[r];return void 0===t?n:(null===t?t={positions:null}:"function"==typeof t?t={after:t}:"number"==typeof t[0]&&(t={positions:t}),null===(t=QT(t,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color stroke colors stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",after:"after callback done pass"})).positions&&(t.positions=[]),n||(h[r]=n={id:r,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,offset:0,dashLength:0,hole:!0},t=JT({},f,t)),rk(n,t,[{thickness:parseFloat,opacity:parseFloat,miterLimit:parseFloat,overlay:Boolean,join:function(t){return t},after:function(t){return t},hole:function(t){return t||[]},positions:function(t,r,n){t=XT(t,"float64");var a=Math.floor(t.length/2),i=GT(t,2);return r.range||n.range||(n.range=i),r.count=a,r.bounds=i,e+=a,t},fill:function(t){return t?iv(t,"uint8"):null},dashes:function(t,e,r){var n,a=e.dashLength;if(!t||t.length<2)a=1,n=new Uint8Array([255,255,255,255,255,255,255,255]);else{a=0;for(var i=0;i<t.length;++i)a+=t[i];n=new Uint8Array(a*d);for(var o=0,l=255,s=0;s<2;s++)for(var c=0;c<t.length;++c){for(var f=0,h=t[c]*d*.5;f<h;++f)n[o++]=l;l^=255}}return u.subimage({data:n,width:n.length,height:1},0,e.id),e.dashLength=a,n}},{close:function(t,e,r){return null!=t?t:e.positions.length>=4&&e.positions[0]===e.positions[e.positions.length-2]&&e.positions[1]===e.positions[e.positions.length-1]},positions:function(t,e,r){if(e.fill&&t.length){for(var n=[],a={},i=0,o=0,l=0,s=e.count;o<s;o++){var u=e.positions[2*o],c=e.positions[2*o+1];Number.isNaN(u)||Number.isNaN(c)?(u=e.positions[2*i],c=e.positions[2*i+1],a[o]=i):i=o,n[l++]=u,n[l++]=c}for(var f=sk(n,e.hole),h=0,d=f.length;h<d;h++)null!=a[f[h]]&&(f[h]=a[f[h]]);e.triangles=f}return e.positions},color:function(t,e,r){var n=e.count;if(t||(t="transparent"),!Array.isArray(t)||"number"==typeof t[0]){var a=t;t=Array(n);for(var i=0;i<n;i++)t[i]=a}if(t.length<n)throw Error("Not enough colors");for(var o=new Uint8Array(4*n+4),l=0;l<n;l++){var s=iv(t[l],"uint8");o.set(s,4*l)}return o},range:function(t,e,r){if(!e.count)return null;var n=e.bounds;t||(t=n);var a=n[2]-n[0],i=n[3]-n[1],o=t[2]-t[0],l=t[3]-t[1];return e.scale=[a/o,i/l],e.translate=[-t[0]/o+n[0]/o||0,-t[1]/l+n[1]/l||0],e.scaleFract=Dk(e.scale),e.translateFract=Dk(e.translate),t},viewport:function(t){var e;return Array.isArray(t)?e={x:t[0],y:t[1],width:t[2]-t[0],height:t[3]-t[1]}:t?(e={x:t.x||t.left||0,y:t.y||t.top||0},t.right?e.width=t.right-e.x:e.width=t.w||t.width||0,t.bottom?e.height=t.bottom-e.y:e.height=t.h||t.height||0):e={x:0,y:0,width:c.drawingBufferWidth,height:c.drawingBufferHeight},e}}]),n)}),e){var r=2*e+6*h.length,n=new Float64Array(r),a=0,o=new Uint8Array(2*r);h.forEach(function(t,e){if(t){var r=t.positions,i=t.count,l=t.color;if(t.offset=a,i){var s=new Float64Array(r.length);s.set(r),lk(s,2,t.bounds),t.close?r[0]===r[2*i-2]&&r[1]===r[2*i-1]?(n[2*a+0]=s[2*i-4],n[2*a+1]=s[2*i-3]):(n[2*a+0]=s[2*i-2],n[2*a+1]=s[2*i-1]):(n[2*a+0]=s[0],n[2*a+1]=s[1]),o[4*a+0]=l[0],o[4*a+1]=l[1],o[4*a+2]=l[2],o[4*a+3]=l[3],n.set(s,2*a+2),o.set(l,4*a+4),t.close?r[0]===r[2*i-2]&&r[1]===r[2*i-1]?(n[2*a+2*i+2]=s[2],n[2*a+2*i+3]=s[3],a+=i+2,t.count-=1):(n[2*a+2*i+2]=s[0],n[2*a+2*i+3]=s[1],n[2*a+2*i+4]=s[2],n[2*a+2*i+5]=s[3],a+=i+3):(n[2*a+2*i+2]=s[2*i-2],n[2*a+2*i+3]=s[2*i-1],n[2*a+2*i+4]=s[2*i-2],n[2*a+2*i+5]=s[2*i-1],a+=i+3)}}}),i(o),l(function(t){if(t instanceof Float32Array)return t;var e=new Float32Array(t);return e.set(t),e}(n)),s(Dk(n))}return m}}function _(){h.length=0,i.destroy(),o.destroy(),l.destroy(),u.destroy()}return r=t(JT({cull:{enable:!0,face:"back"},vert:zo(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate, scaleRatio;\nuniform float thickness, pixelRatio, id;\nuniform vec4 viewport;\nuniform float miterLimit, dashLength, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float MAX_LINES = 256.;\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIST = 1.;\n\n//TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n//TODO: precalculate dot products, normalize things beforehead etc.\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\tfloat depth = (MAX_LINES - 1. - id) / MAX_LINES;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevDirection = normalize(prevDiff);\n\tvec2 currDirection = normalize(currDiff);\n\tvec2 nextDirection = normalize(nextDiff);\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t//collapsed/unidirectional segment cases\n\tif (prevDirection == currDirection) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (nextDirection == currDirection) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * scale + translate;\n\tvec2 aBotPosition = (aBotCoord) * scale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * scale + translate;\n\tvec2 bBotPosition = (bBotCoord) * scale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:zo(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform vec2 dashShape;\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t * dashLength * 2. / dashShape.x, (id + .5) / dashShape.y)).r;\n\n\tgl_FragColor = fragColor * dash;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:o,divisor:0,stride:8,offset:0},lineTop:{buffer:o,divisor:0,stride:8,offset:4},aColor:{buffer:i,stride:4,offset:function(t,e){return 4*e.offset},divisor:1},bColor:{buffer:i,stride:4,offset:function(t,e){return 4*e.offset+4},divisor:1},prevCoord:{buffer:l,stride:8,offset:function(t,e){return 8*e.offset},divisor:1},aCoord:{buffer:l,stride:8,offset:function(t,e){return 8+8*e.offset},divisor:1},bCoord:{buffer:l,stride:8,offset:function(t,e){return 16+8*e.offset},divisor:1},nextCoord:{buffer:l,stride:8,offset:function(t,e){return 24+8*e.offset},divisor:1}}},v)),n=t(JT({vert:zo(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract, scaleRatio;\nuniform float thickness, pixelRatio, id;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nconst float MAX_LINES = 256.;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\t// vec2 scaleRatio = scale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\tfloat depth = (MAX_LINES - 1. - id) / (MAX_LINES);\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scaleRatio);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:zo(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform vec2 dashShape;\nuniform float dashLength, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t * dashLength * 2. / dashShape.x, (id + .5) / dashShape.y)).r;\n\n\tgl_FragColor = fragColor * dash;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:o,divisor:0,stride:8,offset:0},lineTop:{buffer:o,divisor:0,stride:8,offset:4},aCoord:{buffer:l,stride:8,offset:function(t,e){return 8+8*e.offset},divisor:1},bCoord:{buffer:l,stride:8,offset:function(t,e){return 16+8*e.offset},divisor:1},aCoordFract:{buffer:s,stride:8,offset:function(t,e){return 8+8*e.offset},divisor:1},bCoordFract:{buffer:s,stride:8,offset:function(t,e){return 16+8*e.offset},divisor:1},color:{buffer:i,stride:4,offset:function(t,e){return 4*e.offset},divisor:1}}},v)),a=t({primitive:"triangle",elements:function(t,e){return e.triangles},offset:0,vert:zo(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract, scaleRatio;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:zo(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= opacity;\n}\n"]),uniforms:{scale:t.prop("scale"),color:t.prop("fill"),scaleFract:t.prop("scaleFract"),translateFract:t.prop("translateFract"),translate:t.prop("translate"),opacity:t.prop("opacity"),pixelRatio:t.context("pixelRatio"),id:t.prop("id"),viewport:function(t,e){return[e.viewport.x,e.viewport.y,t.viewportWidth,t.viewportHeight]}},attributes:{position:{buffer:l,stride:8,offset:function(t,e){return 8+8*e.offset}},positionFract:{buffer:s,stride:8,offset:function(t,e){return 8+8*e.offset}}},blend:v.blend,depth:{enable:!1},scissor:v.scissor,stencil:v.stencil,viewport:v.viewport}),JT(m,{update:b,draw:y,destroy:_,regl:t,gl:c,canvas:c.canvas,lines:h}),m};function Dk(t){var e=new Float32Array(t.length);e.set(t);for(var r=0,n=e.length;r<n;r++)e[r]=t[r]-e[r];return e}var Ik={};function Pk(t,e){null==e&&(e=!0);var r=t[0],n=t[1],a=t[2],i=t[3];return null==i&&(i=e?1:255),e&&(r*=255,n*=255,a*=255,i*=255),16777216*(r=255&Qg(r,0,255))+((n=255&Qg(n,0,255))<<16)+((a=255&Qg(a,0,255))<<8)+(i=255&Qg(i,0,255))}(Ik=Pk).to=Pk,Ik.from=function(t,e){var r=(t=+t)>>>24,n=(16711680&t)>>>16,a=(65280&t)>>>8,i=255&t;return!1===e?[r,n,a,i]:[r/255,n/255,a/255,i/255]};var Fk="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)),zk=function(t){var e;arguments.length>1&&(t=arguments);"string"==typeof t&&(t=t.split(/\s/).map(parseFloat));t.length&&"number"==typeof t[0]?e=2===t.length?{width:t[0],height:t[1],x:0,y:0}:{x:t[0],y:t[1],width:t[2]-t[0]||0,height:t[3]-t[1]||0}:t&&(t=QT(t,{left:"x l left Left",top:"y t top Top",width:"w width",height:"h height",bottom:"b bottom",right:"r right"}),e={x:t.left||0,y:t.top||0},null==t.width?t.right?e.width=t.right-e.x:e.width=0:e.width=t.width,null==t.height?t.bottom?e.height=t.bottom-e.y:e.height=0:e.height=t.height);return e};function Nk(t,e,r,n,a){var i=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),r?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function Bk(t,e,r,n){return new Function([Nk("A","x"+t+"y",e,["y"],n),Nk("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}var jk={ge:Bk(">=",!1,"GE"),gt:Bk(">",!1,"GT"),lt:Bk("<",!0,"LT"),le:Bk("<=",!0,"LE"),eq:Bk("-",!0,"EQ",!0)},Uk=function(t,e,r,n,a){a<=4*Vk?Hk(0,a-1,t,e,r,n):function t(e,r,n,a,i,o){var l=(r-e+1)/6|0,s=e+l,u=r-l,c=e+r>>1,f=c-l,h=c+l,d=s,p=f,g=c,v=h,m=u,y=e+1,x=r-1,b=0;Yk(d,p,n,a,i)&&(b=d,d=p,p=b);Yk(v,m,n,a,i)&&(b=v,v=m,m=b);Yk(d,g,n,a,i)&&(b=d,d=g,g=b);Yk(p,g,n,a,i)&&(b=p,p=g,g=b);Yk(d,v,n,a,i)&&(b=d,d=v,v=b);Yk(g,v,n,a,i)&&(b=g,g=v,v=b);Yk(p,m,n,a,i)&&(b=p,p=m,m=b);Yk(p,g,n,a,i)&&(b=p,p=g,g=b);Yk(v,m,n,a,i)&&(b=v,v=m,m=b);var _=n[p];var w=a[2*p];var A=a[2*p+1];var M=i[p];var T=o[p];var k=n[v];var E=a[2*v];var C=a[2*v+1];var S=i[v];var L=o[v];var O=d;var R=g;var D=m;var I=s;var P=c;var F=u;var z=n[O];var N=n[R];var B=n[D];n[I]=z;n[P]=N;n[F]=B;for(var j=0;j<2;++j){var U=a[2*O+j],V=a[2*R+j],H=a[2*D+j];a[2*I+j]=U,a[2*P+j]=V,a[2*F+j]=H}var q=i[O];var G=i[R];var X=i[D];i[I]=q;i[P]=G;i[F]=X;var W=o[O];var Y=o[R];var Z=o[D];o[I]=W;o[P]=Y;o[F]=Z;Gk(f,e,n,a,i,o);Gk(h,r,n,a,i,o);for(var J=y;J<=x;++J)if(Zk(J,_,w,A,M,n,a,i))J!==y&&qk(J,y,n,a,i,o),++y;else if(!Zk(J,k,E,C,S,n,a,i))for(;;){if(Zk(x,k,E,C,S,n,a,i)){Zk(x,_,w,A,M,n,a,i)?(Xk(J,y,x,n,a,i,o),++y,--x):(qk(J,x,n,a,i,o),--x);break}if(--x<J)break}Wk(e,y-1,_,w,A,M,T,n,a,i,o);Wk(r,x+1,k,E,C,S,L,n,a,i,o);y-2-e<=Vk?Hk(e,y-2,n,a,i,o):t(e,y-2,n,a,i,o);r-(x+2)<=Vk?Hk(x+2,r,n,a,i,o):t(x+2,r,n,a,i,o);x-y<=Vk?Hk(y,x,n,a,i,o):t(y,x,n,a,i,o)}(0,a-1,t,e,r,n)},Vk=32;function Hk(t,e,r,n,a,i){for(var o=t+1;o<=e;++o){for(var l=r[o],s=n[2*o],u=n[2*o+1],c=a[o],f=i[o],h=o;h>t;){var d=r[h-1],p=n[2*(h-1)];if((d-l||s-p)>=0)break;r[h]=d,n[2*h]=p,n[2*h+1]=n[2*h-1],a[h]=a[h-1],i[h]=i[h-1],h-=1}r[h]=l,n[2*h]=s,n[2*h+1]=u,a[h]=c,i[h]=f}}function qk(t,e,r,n,a,i){var o=r[t],l=n[2*t],s=n[2*t+1],u=a[t],c=i[t];r[t]=r[e],n[2*t]=n[2*e],n[2*t+1]=n[2*e+1],a[t]=a[e],i[t]=i[e],r[e]=o,n[2*e]=l,n[2*e+1]=s,a[e]=u,i[e]=c}function Gk(t,e,r,n,a,i){r[t]=r[e],n[2*t]=n[2*e],n[2*t+1]=n[2*e+1],a[t]=a[e],i[t]=i[e]}function Xk(t,e,r,n,a,i,o){var l=n[t],s=a[2*t],u=a[2*t+1],c=i[t],f=o[t];n[t]=n[e],a[2*t]=a[2*e],a[2*t+1]=a[2*e+1],i[t]=i[e],o[t]=o[e],n[e]=n[r],a[2*e]=a[2*r],a[2*e+1]=a[2*r+1],i[e]=i[r],o[e]=o[r],n[r]=l,a[2*r]=s,a[2*r+1]=u,i[r]=c,o[r]=f}function Wk(t,e,r,n,a,i,o,l,s,u,c){l[t]=l[e],s[2*t]=s[2*e],s[2*t+1]=s[2*e+1],u[t]=u[e],c[t]=c[e],l[e]=r,s[2*e]=n,s[2*e+1]=a,u[e]=i,c[e]=o}function Yk(t,e,r,n,a){return(r[t]-r[e]||n[2*e]-n[2*t]||a[t]-a[e])<0}function Zk(t,e,r,n,a,i,o,l){return(e-i[t]||o[2*t]-r||a-l[t])<0}var Jk=function(t,e,r,n){var a=t.length>>>1;if(a<1)return[];e||(e=Array(a));r||(r=Array(a));n||(n=[]);for(var i=0;i<a;++i)e[i]=i;if(!n.length||n.length<4||n[0]>=n[2]||n[1]>=n[3]){var o=GT(t,2);o[0]===o[2]&&(o[2]+=1),o[1]===o[3]&&(o[3]+=1),n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3]}var l=n[0],s=n[1],u=n[2],c=n[3],f=1/(u-l),h=1/(c-s),d=Math.max(u-l,c-s),p=new Int32Array(a),g=0;(function n(a,i,o,l,s,u){var c=.5*o;var f=l+1;var h=s-l;r[g]=h;p[g++]=u;for(var d=0;d<2;++d)for(var v=0;v<2;++v){var m=a+d*c,y=i+v*c,x=Qk(t,e,f,s,m,y,m+c,y+c);if(x!==f){if(x-f>=Math.max(.9*h,32)){var b=s+l>>>1;n(m,y,c,f,b,u+1),f=b}n(m,y,c,f,x,u+1),f=x}}})(l,s,d,0,a,0),Uk(p,t,e,r,a);for(var v=[],m=0,y=a,g=a-1;g>=0;--g){t[2*g]=(t[2*g]-l)*f,t[2*g+1]=(t[2*g+1]-s)*h;var x=p[g];x!==m&&(v.push(new $k(d*Math.pow(.5,x),g+1,y-(g+1))),y=g+1,m=x)}return v.push(new $k(d*Math.pow(.5,x+1),0,y)),v};function Qk(t,e,r,n,a,i,o,l){for(var s=r,u=r;u<n;++u){var c=t[2*u],f=t[2*u+1],h=e[u];a<=c&&c<=o&&i<=f&&f<=l&&(u===s?s+=1:(t[2*u]=t[2*s],t[2*u+1]=t[2*s+1],e[u]=e[s],t[2*s]=c,t[2*s+1]=f,e[s]=h,s+=1))}return s}function $k(t,e,r){this.pixelSize=t,this.offset=e,this.count=r}var Kk=tk.float32,tE=tk.fract32,eE=function(t,e){"function"==typeof t?(e||(e={}),e.regl=t):(e=t,t=null);e&&e.length&&(e.positions=e);var r,n,a,i,o,l,s,u=(t=e.regl)._gl,c=[],f={},h={color:"black",borderColor:"transparent",borderSize:1,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,offset:0,count:0,bounds:null,positions:[],snap:1e4},d=[],p=[null],g=[null],v=4096,m=100;s=t.texture({data:new Uint8Array(4*v),width:v,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),a=t.buffer({usage:"dynamic",type:"float",data:null}),l=t.buffer({usage:"dynamic",type:"uint16",data:null}),i=t.buffer({usage:"dynamic",type:"float",data:null}),o=t.buffer({usage:"dynamic",type:"float",data:null}),e.clone?(d=e.clone.groups.map(function(e){return(e=JT({},e)).markerIds&&(e.markerIds=e.markerIds.map(function(e){var r=e.slice();return r.lod=e.lod,r.snap=e.snap,r.data=e.data,r.id=e.id,r.x=e.x,r.w=e.w,r.elements=t.elements({primitive:"points",type:"uint32",data:e.data}),r})),e}),e.clone.markers.forEach(function(t){E(t)}),S(e.clone.palette),k({point:!0,color:!0,size:!0})):T(e);var y={uniforms:{pixelRatio:t.context("pixelRatio"),palette:s,paletteSize:function(t,e){return[v,s.height]},scale:t.prop("scale"),scaleFract:t.prop("scaleFract"),translate:t.prop("translate"),translateFract:t.prop("translateFract"),opacity:t.prop("opacity"),marker:t.prop("marker")},attributes:{position:i,positionFract:o,size:function(t,e){return e.size.length?{buffer:a,stride:2,offset:0}:{constant:[Math.round(255*e.size/m)]}},borderSize:function(t,e){return e.borderSize.length?{buffer:a,stride:2,offset:1}:{constant:[Math.round(255*e.borderSize/m)]}},colorId:function(t,e){return e.color.length?{buffer:l,stride:8,offset:0}:{constant:[e.color]}},borderColorId:function(t,e){return e.borderColor.length?{buffer:l,stride:8,offset:4}:{constant:[e.borderColor]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:t.prop("viewport")},viewport:t.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:t.prop("elements"),count:t.prop("count"),offset:t.prop("offset"),primitive:"points"};if(Fk)n=t(JT({},y,{frag:zo(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth, fragBorderSize, fragSize;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n\n  float centerFraction = fragBorderSize == 0. ? 2. : fragSize / (fragSize + fragBorderSize + 1.25);\n\n  vec4 baseColor = mix(borderColor, color, smoothStep(radius, centerFraction));\n  float alpha = 1.0 - pow(1.0 - baseColor.a, 1.);\n  gl_FragColor = vec4(baseColor.rgb * alpha, alpha);\n}\n"]),vert:zo(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\nattribute float size, borderSize;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth, fragBorderSize, fragSize;\n\nvoid main() {\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n  fragBorderSize = borderSize;\n  fragSize = size;\n\n  gl_PointSize = (size + borderSize) * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t+ (position + translate) * scaleFract\n\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius = borderSize == 0. ? 2. : 1. - 2. * borderSize / (size + borderSize);\n  fragWidth = 1. / gl_PointSize;\n}\n"]),uniforms:{color:function(t,e){var r=e.color.length?e.color[0]:e.color;return c.slice(4*r,4*r+4).map(function(t){return t/255})},borderColor:function(t,e){var r=e.borderColor.length?e.borderColor[0]:e.borderColor;return c.slice(4*r,4*r+4).map(function(t){return t/255})},pixelRatio:t.context("pixelRatio"),palette:s,paletteSize:function(t,e){return[v,s.height]},scale:t.prop("scale"),scaleFract:t.prop("scaleFract"),translate:t.prop("translate"),translateFract:t.prop("translateFract"),opacity:t.prop("opacity"),marker:t.prop("marker")},attributes:{position:i,positionFract:o,size:y.attributes.size,borderSize:y.attributes.borderSize}}));else{var x=JT({},y);x.frag=zo(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float pixelRatio, opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;\n\n  //max-distance alpha\n  if (dist < 0.003) discard;\n\n  //null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a);\n    return;\n  }\n\n  float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n  float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n  vec4 color = fragBorderColor;\n  color.a *= borderColorAmt;\n  color = mix(color, fragColor, colorAmt);\n  color.a *= opacity;\n\n  gl_FragColor = color;\n}\n"]),x.vert=zo(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\nattribute float size, borderSize;\nattribute vec2 colorId, borderColorId;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius,\n\t\tfragWidth, fragBorderColorLevel, fragColorLevel;\n\nvec2 paletteCoord(float id) {\n  return vec2(\n    (mod(id, paletteSize.x) + .5) / paletteSize.x,\n    (floor(id / paletteSize.x) + .5) / paletteSize.y\n  );\n}\nvec2 paletteCoord(vec2 id) {\n  return vec2(\n    (id.x + .5) / paletteSize.x,\n    (id.y + .5) / paletteSize.y\n  );\n}\n\nvoid main() {\n  vec4 color = texture2D(palette, paletteCoord(colorId));\n  vec4 borderColor = texture2D(palette, paletteCoord(borderColorId));\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pixelRatio;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]),r=t(x);var b=JT({},y);b.frag=zo(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif(radius > 1.0 + delta) {\n\t\tdiscard;\n\t\treturn;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),b.vert=zo(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\nattribute float size, borderSize;\nattribute vec2 colorId, borderColorId;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nvec2 paletteCoord(float id) {\n  return vec2(\n    (mod(id, paletteSize.x) + .5) / paletteSize.x,\n    (floor(id / paletteSize.x) + .5) / paletteSize.y\n  );\n}\nvec2 paletteCoord(vec2 id) {\n  return vec2(\n    (id.x + .5) / paletteSize.x,\n    (id.y + .5) / paletteSize.y\n  );\n}\n\nvoid main() {\n  vec4 color = texture2D(palette, paletteCoord(colorId));\n  vec4 borderColor = texture2D(palette, paletteCoord(borderColorId));\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t+ (position + translate) * scaleFract\n\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius = borderSize == 0. ? 2. : 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),n=t(b)}function _(t){t?T(t):null===t&&L(),w()}function w(t){if("number"==typeof t)return A(t);Array.isArray(t)?t.forEach(function(t,e){if(null!=t)return t.length?A(t,e):A(t)}):d.forEach(function(t,e){t&&A(e)})}function A(e,a){var i;if("number"==typeof e&&(e=d[e]),Array.isArray(e)&&(i=e,e=d[a]),e&&e.count&&e.opacity){var o;if(i){o=Array(e.count);for(var l=0;l<i.length;l++)o[i[l]]=!0}if(e.markerIds[0]){t._refresh();var s=M(e.markerIds[0],e,o);n(s)}for(var u=[],c=1;c<e.markerIds.length;c++){var f=e.markerIds[c];f&&f.length&&[].push.apply(u,M(f,e,o))}u.length&&(t._refresh(),r(u))}}function M(t,e,r){var n=e.range,a=e.offset;if(!t.snap){var i=r?x(t.data,r):t.elements;return[JT({},e,{elements:i,offset:0,count:r?i.length:t.length,marker:p[t.id]})]}for(var o=[],l=t.lod,s=t.x,u=t.id,c=Math.min((n[2]-n[0])/e.viewport.width,(n[3]-n[1])/e.viewport.height),f=l.length;f--;){var h=l[f];if(!(h.pixelSize&&h.pixelSize<c&&f>1)){var d=h.offset,g=h.count+d,v=jk.ge(s,n[0],d,g-1),m=jk.lt(s,n[2],v,g-1)+1;if(!(m<=v))if(r){var y=x(t.data.subarray(v,m),r);o.push(JT({},e,{elements:y,marker:p[u],offset:0,count:y.length}))}else o.push(JT({},e,{elements:t.elements,marker:p[u],offset:v,count:m-v}))}}function x(t,e){for(var r=[],n=0,i=t.length;n<i;n++){var o=t[n],l=o-a;e[l]&&r.push(o)}return r}return o}function T(e){if(e){null!=e.length?"number"==typeof e[0]&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);var r=0,n=0,a=0;_.groups=d=e.map(function(e,i){var o=d[i];return void 0===e?o:(null===e?e={positions:null}:"function"==typeof e?e={after:e}:"number"==typeof e[0]&&(e={positions:e}),null===(e=QT(e,{positions:"positions data points",snap:"snap cluster",size:"sizes size radius",borderSize:"borderSizes borderSize stroke-width strokeWidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",palette:"palette swatch",marker:"markers marker shape",range:"range dataBox",viewport:"viewport viewBox",opacity:"opacity alpha"})).positions&&(e.positions=[]),o||(d[i]=o={id:i,scale:null,translate:null,scaleFract:null,translateFract:null,markerIds:[]},e=JT({},h,e)),!e.positions||"marker"in e||(e.marker=o.marker,delete o.marker),!e.marker||"positions"in e||(e.positions=o.positions,delete o.positions),rk(o,e,[{snap:!0,size:function(t){return n+=t.length?1:0,t},borderSize:function(t){return n+=t.length?1:0,t},opacity:parseFloat,color:function(t){return t=C(t),a++,t},borderColor:function(t){return t=C(t),a++,t},positions:function(t,e,n){t=XT(t,"float64");var a=e.count=Math.floor(t.length/2),i=e.bounds=a?GT(t,2):null;return n.range||e.range||(delete e.range,n.range=i),e.offset=r,r+=a,n.marker||e.marker||(delete e.marker,n.marker=null),t}},{marker:function(t,e,r){if(e.markerIds.length=0,t&&"number"!=typeof t[0])for(var n=0,a=t.length;n<a;n++){var i=E(t[n]);e.markerIds[i]||(e.markerIds[i]=[]),e.markerIds[i].push(n)}else{var o=E(t),l=BT(e.count);e.markerIds[o]=l}return t}},{positions:function(e,r){for(var n=r.markerIds,a=r.snap,i=r.bounds,o=r.offset,l=0;l<n.length;l++){var s=n[l];if(s&&s.length){var u=s.length,c=void 0;if(s.id=l,a&&(!0===a||u>a)){s.snap=!0;var f=s.x=Array(u),h=s.w=Array(u),d=void 0;if(n.length>1){d=Array(2*u);for(var p=0;p<u;p++){var g=s[p];d[2*p]=e[2*g],d[2*p+1]=e[2*g+1]}}else(d=new Float64Array(e.length)).set(e);var v=new Uint32Array(u);s.lod=Jk(d,v,h,i),c=new Uint32Array(u);for(var m=0;m<u;m++){var y=v[m],x=s[y];c[m]=x+o,f[m]=e[2*x]}}else{c=new Uint32Array(u);for(var b=0;b<u;b++)c[b]=s[b]+o}s.data=c,s.elements=t.elements({primitive:"points",type:"uint32",data:c})}}},range:function(t,e,r){var n=e.bounds;if(n)return t||(t=n),e.scale=[1/(t[2]-t[0]),1/(t[3]-t[1])],e.translate=[-t[0],-t[1]],e.scaleFract=tE(e.scale),e.translateFract=tE(e.translate),t},viewport:function(t){return zk(t||[u.drawingBufferWidth,u.drawingBufferHeight])}}]),o)}),k({point:r,size:n,color:a})}}function k(t){var e=t.point,r=t.size,n=t.color,s=d.reduce(function(t,e,r){return t+(e?e.count:0)},0);if(e){var u=new Float32Array(2*s),c=new Float32Array(2*s);d.forEach(function(t,e){if(t){var r=t.positions,n=t.count,a=t.offset;n&&(u.set(Kk(r),2*a),c.set(tE(r),2*a))}}),i(u),o(c)}if(r){var f=new Uint8Array(2*s);d.forEach(function(t,e){if(t){var r=t.count,n=t.offset,a=t.size,i=t.borderSize;if(r&&(a.length||i.length)){for(var o=new Uint8Array(2*r),l=0;l<r;l++)o[2*l]=Math.round(255*(null==a[l]?a:a[l])/m),o[2*l+1]=Math.round(255*(null==i[l]?i:i[l])/m);f.set(o,2*n)}}}),a(f)}if(n){var h=new Uint16Array(4*s);d.forEach(function(t,e){if(t){var r=t.count,n=t.offset,a=t.color,i=t.borderColor;if(r&&(a.length||i.length)){for(var o=new Uint16Array(4*r),l=0;l<r;l++)null!=a[l]&&(o[4*l]=a[l]%v,o[4*l+1]=Math.floor(a[l]/v)),null!=i[l]&&(o[4*l+2]=i[l]%v,o[4*l+3]=Math.floor(i[l]/v));h.set(o,4*n)}}}),l(h)}}function E(e){var r,n=null==e?0:g.indexOf(e);if(n>=0)return n;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)r=e;else{r=new Uint8Array(e.length);for(var a=0,i=e.length;a<i;a++)r[a]=255*e[a]}var o=Math.floor(Math.sqrt(r.length));return n=p.length,g.push(e),p.push(t.texture({channels:1,data:r,radius:o,mag:"linear",min:"linear"})),n}function C(t){Array.isArray(t)||(t=[t]);for(var e=[],r=0;r<t.length;r++){var n=t[r];if("number"!=typeof n){n=iv(n,"uint8");var a=Ik(n,!1);if(null==f[a]){var i=c.length;f[a]=Math.floor(i/4),c[i]=n[0],c[i+1]=n[1],c[i+2]=n[2],c[i+3]=n[3]}e[r]=f[a]}else e[r]=n}return S(c),1===e.length?e[0]:e}function S(t){var e=Math.ceil(.25*t.length/v);if(e>1)for(var r=.25*(t=t.slice()).length%v;r<e*v;r++)t.push(0,0,0,0);s.height<e&&s.resize(v,e),s.subimage({width:Math.min(.25*t.length,v),height:e,data:t},0,0)}function L(){d.length=0,a.destroy(),i.destroy(),o.destroy(),l.destroy(),s.destroy()}return JT(_,{update:T,draw:w,destroy:L,regl:t,gl:u,canvas:u.canvas,groups:d,markers:g,palette:c}),_};var rE=function(t,e){e||(e={});var r,n,a,i,o,l,s,u,c,f,h,d=null==e.cutoff?.25:e.cutoff,p=null==e.radius?8:e.radius,g=e.channel||0;if(ArrayBuffer.isView(t)||Array.isArray(t)){if(!e.width||!e.height)throw Error("For raw data width and height should be provided by options");r=e.width,n=e.height,i=t,l=e.stride?e.stride:Math.floor(t.length/r/n)}else window.HTMLCanvasElement&&t instanceof window.HTMLCanvasElement?(s=(u=t).getContext("2d"),r=u.width,n=u.height,c=s.getImageData(0,0,r,n),i=c.data,l=4):window.CanvasRenderingContext2D&&t instanceof window.CanvasRenderingContext2D?(u=t.canvas,s=t,r=u.width,n=u.height,c=s.getImageData(0,0,r,n),i=c.data,l=4):window.ImageData&&t instanceof window.ImageData&&(c=t,r=t.width,n=t.height,i=c.data,l=4);if(a=Math.max(r,n),window.Uint8ClampedArray&&i instanceof window.Uint8ClampedArray||window.Uint8Array&&i instanceof window.Uint8Array)for(o=i,i=Array(r*n),f=0,h=o.length;f<h;f++)i[f]=o[f*l+g]/255;else if(1!==l)throw Error("Raw data can have only 1 value per pixel");var v=Array(r*n),m=Array(r*n),y=Array(a),x=Array(a),b=Array(a+1),_=Array(a);for(f=0,h=r*n;f<h;f++){var w=i[f];v[f]=1===w?0:0===w?nE:Math.pow(Math.max(0,.5-w),2),m[f]=1===w?nE:0===w?0:Math.pow(Math.max(0,w-.5),2)}aE(v,r,n,y,x,_,b),aE(m,r,n,y,x,_,b);var A=window.Float32Array?new Float32Array(r*n):new Array(r*n);for(f=0,h=r*n;f<h;f++)A[f]=Qg(1-((v[f]-m[f])/p+d),0,1);return A},nE=1e20;function aE(t,e,r,n,a,i,o){for(var l=0;l<e;l++){for(var s=0;s<r;s++)n[s]=t[s*e+l];for(iE(n,a,i,o,r),s=0;s<r;s++)t[s*e+l]=a[s]}for(s=0;s<r;s++){for(l=0;l<e;l++)n[l]=t[s*e+l];for(iE(n,a,i,o,e),l=0;l<e;l++)t[s*e+l]=Math.sqrt(a[l])}}function iE(t,e,r,n,a){r[0]=0,n[0]=-nE,n[1]=+nE;for(var i=1,o=0;i<a;i++){for(var l=(t[i]+i*i-(t[r[o]]+r[o]*r[o]))/(2*i-2*r[o]);l<=n[o];)o--,l=(t[i]+i*i-(t[r[o]]+r[o]*r[o]))/(2*i-2*r[o]);r[++o]=i,n[o]=l,n[o+1]=+nE}for(i=0,o=0;i<a;i++){for(;n[o+1]<i;)o++;e[i]=(i-r[o])*(i-r[o])+t[r[o]]}}var oE=function(t){var e=0,r=0,n=0,a=0;return t.map(function(t){var i=(t=t.slice())[0],o=i.toUpperCase();if(i!=o)switch(t[0]=o,i){case"a":t[6]+=n,t[7]+=a;break;case"v":t[1]+=a;break;case"h":t[1]+=n;break;default:for(var l=1;l<t.length;)t[l++]+=n,t[l++]+=a}switch(o){case"Z":n=e,a=r;break;case"H":n=t[1];break;case"V":a=t[1];break;case"M":n=e=t[1],a=r=t[2];break;default:n=t[t.length-2],a=t[t.length-1]}return t})};var lE=Math.PI,sE=pE(120),uE=function(t){for(var e,r=[],n=0,a=0,i=0,o=0,l=null,s=null,u=0,c=0,f=0,h=t.length;f<h;f++){var d=t[f],p=d[0];switch(p){case"M":i=d[1],o=d[2];break;case"A":(d=hE(u,c,d[1],d[2],pE(d[3]),d[4],d[5],d[6],d[7])).unshift("C"),d.length>7&&(r.push(d.splice(0,7)),d.unshift("C"));break;case"S":var g=u,v=c;"C"!=e&&"S"!=e||(g+=g-n,v+=v-a),d=["C",g,v,d[1],d[2],d[3],d[4]];break;case"T":"Q"==e||"T"==e?(l=2*u-l,s=2*c-s):(l=u,s=c),d=fE(u,c,l,s,d[1],d[2]);break;case"Q":l=d[1],s=d[2],d=fE(u,c,d[1],d[2],d[3],d[4]);break;case"L":d=cE(u,c,d[1],d[2]);break;case"H":d=cE(u,c,d[1],c);break;case"V":d=cE(u,c,u,d[1]);break;case"Z":d=cE(u,c,i,o)}e=p,u=d[d.length-2],c=d[d.length-1],d.length>4?(n=d[d.length-4],a=d[d.length-3]):(n=u,a=c),r.push(d)}return r};function cE(t,e,r,n){return["C",t,e,r,n,r,n]}function fE(t,e,r,n,a,i){return["C",t/3+2/3*r,e/3+2/3*n,a/3+2/3*r,i/3+2/3*n,a,i]}function hE(t,e,r,n,a,i,o,l,s,u){if(u)x=u[0],b=u[1],m=u[2],y=u[3];else{var c=dE(t,e,-a);t=c.x,e=c.y;var f=(t-(l=(c=dE(l,s,-a)).x))/2,h=(e-(s=c.y))/2,d=f*f/(r*r)+h*h/(n*n);d>1&&(r*=d=Math.sqrt(d),n*=d);var p=r*r,g=n*n,v=(i==o?-1:1)*Math.sqrt(Math.abs((p*g-p*h*h-g*f*f)/(p*h*h+g*f*f)));v==1/0&&(v=1);var m=v*r*h/n+(t+l)/2,y=v*-n*f/r+(e+s)/2,x=Math.asin(((e-y)/n).toFixed(9)),b=Math.asin(((s-y)/n).toFixed(9));x=t<m?lE-x:x,b=l<m?lE-b:b,x<0&&(x=2*lE+x),b<0&&(b=2*lE+b),o&&x>b&&(x-=2*lE),!o&&b>x&&(b-=2*lE)}if(Math.abs(b-x)>sE){var _=b,w=l,A=s;b=x+sE*(o&&b>x?1:-1);var M=hE(l=m+r*Math.cos(b),s=y+n*Math.sin(b),r,n,a,0,o,w,A,[b,_,m,y])}var T=Math.tan((b-x)/4),k=4/3*r*T,E=4/3*n*T,C=[2*t-(t+k*Math.sin(x)),2*e-(e-E*Math.cos(x)),l+k*Math.sin(b),s-E*Math.cos(b),l,s];if(u)return C;M&&(C=C.concat(M));for(var S=0;S<C.length;){var L=dE(C[S],C[S+1],a);C[S++]=L.x,C[S++]=L.y}return C}function dE(t,e,r){return{x:t*Math.cos(r)-e*Math.sin(r),y:t*Math.sin(r)+e*Math.cos(r)}}function pE(t){return t*(lE/180)}var gE={M:"moveTo",C:"bezierCurveTo"},vE=function(t,e){t.beginPath(),uE(oE(e)).forEach(function(e){var r=e[0],n=e.slice(1);t[gE[r]].apply(t,n)}),t.closePath()},mE=function(t){return"string"==typeof t&&(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))},yE=function(t){var e=[];return t.replace(bE,function(t,r,n){var a=r.toLowerCase();for(n=function(t){var e=t.match(_E);return e?e.map(Number):[]}(n),"m"==a&&n.length>2&&(e.push([r].concat(n.splice(0,2))),a="l",r="m"==r?"l":"L");;){if(n.length==xE[a])return n.unshift(r),e.push(n);if(n.length<xE[a])throw new Error("malformed path data");e.push([r].concat(n.splice(0,xE[a])))}}),e},xE={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},bE=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var _E=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;var wE={};wE="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t};var AE=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8},ME={};(function(t,e){var r=/%[sdj%]/g;ME.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}n=1;for(var a=arguments,o=a.length,l=String(t).replace(r,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(a[n++]);case"%d":return Number(a[n++]);case"%j":try{return JSON.stringify(a[n++])}catch(t){return"[Circular]"}default:return t}}),s=a[n];n<o;s=a[++n])d(s)||!y(s)?l+=" "+s:l+=" "+i(s);return l},ME.deprecate=function(r,n){if(v(e.process))return function(){return ME.deprecate(r,n).apply(this,arguments)};if(!0===t.noDeprecation)return r;var a=!1;return function(){if(!a){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),a=!0}return r.apply(this,arguments)}};var n,a={};function i(t,e){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(e)?r.showHidden=e:e&&ME._extend(r,e),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),s(r,t,r.depth)}function o(t,e){var r=i.styles[e];return r?"\x1b["+i.colors[r][0]+"m"+t+"\x1b["+i.colors[r][1]+"m":t}function l(t,e){return t}function s(t,e,r){if(t.customInspect&&e&&_(e.inspect)&&e.inspect!==ME.inspect&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(r,t);return g(n)||(n=s(t,n,r)),n}var a=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(g(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(p(e))return t.stylize(""+e,"number");if(h(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,e);if(a)return a;var i=Object.keys(e),o=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(e)),b(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return u(e);if(0===i.length){if(_(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(m(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(x(e))return t.stylize(Date.prototype.toString.call(e),"date");if(b(e))return u(e)}var y,w="",A=!1,M=["{","}"];(f(e)&&(A=!0,M=["[","]"]),_(e))&&(w=" [Function"+(e.name?": "+e.name:"")+"]");return m(e)&&(w=" "+RegExp.prototype.toString.call(e)),x(e)&&(w=" "+Date.prototype.toUTCString.call(e)),b(e)&&(w=" "+u(e)),0!==i.length||A&&0!=e.length?r<0?m(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),y=A?function(t,e,r,n,a){for(var i=[],o=0,l=e.length;o<l;++o)T(e,String(o))?i.push(c(t,e,r,n,String(o),!0)):i.push("");return a.forEach(function(a){a.match(/^\d+$/)||i.push(c(t,e,r,n,a,!0))}),i}(t,e,r,o,i):i.map(function(n){return c(t,e,r,o,n,A)}),t.seen.pop(),function(t,e,r){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(y,w,M)):M[0]+w+M[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,r,n,a,i){var o,l,u;if((u=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]}).get?l=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(l=t.stylize("[Setter]","special")),T(n,a)||(o="["+a+"]"),l||(t.seen.indexOf(u.value)<0?(l=d(r)?s(t,u.value,null):s(t,u.value,r-1)).indexOf("\n")>-1&&(l=i?l.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+l.split("\n").map(function(t){return"   "+t}).join("\n")):l=t.stylize("[Circular]","special")),v(o)){if(i&&a.match(/^\d+$/))return l;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+l}function f(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function d(t){return null===t}function p(t){return"number"==typeof t}function g(t){return"string"==typeof t}function v(t){return void 0===t}function m(t){return y(t)&&"[object RegExp]"===w(t)}function y(t){return"object"==typeof t&&null!==t}function x(t){return y(t)&&"[object Date]"===w(t)}function b(t){return y(t)&&("[object Error]"===w(t)||t instanceof Error)}function _(t){return"function"==typeof t}function w(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}ME.debuglog=function(e){if(v(n)&&(n=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var r=t.pid;a[e]=function(){var t=ME.format.apply(ME,arguments);console.error("%s %d: %s",e,r,t)}}else a[e]=function(){};return a[e]},ME.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ME.isArray=f,ME.isBoolean=h,ME.isNull=d,ME.isNullOrUndefined=function(t){return null==t},ME.isNumber=p,ME.isString=g,ME.isSymbol=function(t){return"symbol"==typeof t},ME.isUndefined=v,ME.isRegExp=m,ME.isObject=y,ME.isDate=x,ME.isError=b,ME.isFunction=_,ME.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},ME.isBuffer=AE;var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}ME.log=function(){var t,e;console.log("%s - %s",(t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":"),[t.getDate(),M[t.getMonth()],e].join(" ")),ME.format.apply(ME,arguments))},ME.inherits=wE,ME._extend=function(t,e){if(!e||!y(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,bs,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var TE={};(function(t){"use strict";function e(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,a=0,i=Math.min(r,n);a<i;++a)if(t[a]!==e[a]){r=t[a],n=e[a];break}return r<n?-1:n<r?1:0}function r(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var n=Object.prototype.hasOwnProperty,a=Array.prototype.slice,i="foo"===function(){}.name;function o(t){return Object.prototype.toString.call(t)}function l(e){return!r(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var s=TE=p,u=/\s*function\s+([^\(\s]*)\s*/;function c(t){if(ME.isFunction(t)){if(i)return t.name;var e=t.toString().match(u);return e&&e[1]}}function f(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function h(t){if(i||!ME.isFunction(t))return ME.inspect(t);var e=c(t);return"[Function"+(e?": "+e:"")+"]"}function d(t,e,r,n,a){throw new s.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:a})}function p(t,e){t||d(t,!0,e,"==",s.ok)}function g(t,n,i,s){if(t===n)return!0;if(r(t)&&r(n))return 0===e(t,n);if(ME.isDate(t)&&ME.isDate(n))return t.getTime()===n.getTime();if(ME.isRegExp(t)&&ME.isRegExp(n))return t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase;if(null!==t&&"object"==typeof t||null!==n&&"object"==typeof n){if(l(t)&&l(n)&&o(t)===o(n)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===e(new Uint8Array(t.buffer),new Uint8Array(n.buffer));if(r(t)!==r(n))return!1;var u=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===s.expected.indexOf(n)||(s.actual.push(t),s.expected.push(n),function(t,e,r,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(ME.isPrimitive(t)||ME.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=v(t),o=v(e);if(i&&!o||!i&&o)return!1;if(i)return t=a.call(t),e=a.call(e),g(t,e,r);var l,s,u=x(t),c=x(e);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(l=u[s],!g(t[l],e[l],r,n))return!1;return!0}(t,n,i,s))}return i?t===n:t==n}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function m(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function y(t,e,r,n){var a;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),a=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!a&&d(a,r,"Missing expected exception"+n);var i="string"==typeof n,o=!t&&ME.isError(a),l=!t&&a&&!r;if((o&&i&&m(a,r)||l)&&d(a,r,"Got unwanted exception"+n),t&&a&&r&&!m(a,r)||!t&&a)throw a}s.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=f(h((e=this).actual),128)+" "+e.operator+" "+f(h(e.expected),128),this.generatedMessage=!0);var r=t.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var a=n.stack,i=c(r),o=a.indexOf("\n"+i);if(o>=0){var l=a.indexOf("\n",o+1);a=a.substring(l+1)}this.stack=a}}},ME.inherits(s.AssertionError,Error),s.fail=d,s.ok=p,s.equal=function(t,e,r){t!=e&&d(t,e,r,"==",s.equal)},s.notEqual=function(t,e,r){t==e&&d(t,e,r,"!=",s.notEqual)},s.deepEqual=function(t,e,r){g(t,e,!1)||d(t,e,r,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(t,e,r){g(t,e,!0)||d(t,e,r,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(t,e,r){g(t,e,!1)&&d(t,e,r,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function t(e,r,n){g(e,r,!0)&&d(e,r,n,"notDeepStrictEqual",t)},s.strictEqual=function(t,e,r){t!==e&&d(t,e,r,"===",s.strictEqual)},s.notStrictEqual=function(t,e,r){t===e&&d(t,e,r,"!==",s.notStrictEqual)},s.throws=function(t,e,r){y(!0,t,e,r)},s.doesNotThrow=function(t,e,r){y(!1,t,e,r)},s.ifError=function(t){if(t)throw t};var x=Object.keys||function(t){var e=[];for(var r in t)n.call(t,r)&&e.push(r);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var kE={};Object.defineProperty(kE,"__esModule",{value:!0});var EE=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){a=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),CE=2*Math.PI,SE=function(t,e,r,n,a,i,o){var l=t.x,s=t.y;return{x:n*(l*=e)-a*(s*=r)+i,y:a*l+n*s+o}},LE=function(t,e){var r=4/3*Math.tan(e/4),n=Math.cos(t),a=Math.sin(t),i=Math.cos(t+e),o=Math.sin(t+e);return[{x:n-a*r,y:a+n*r},{x:i+o*r,y:o-i*r},{x:i,y:o}]},OE=function(t,e,r,n){var a=t*n-e*r<0?-1:1,i=(t*r+e*n)/(Math.sqrt(t*t+e*e)*Math.sqrt(t*t+e*e));return i>1&&(i=1),i<-1&&(i=-1),a*Math.acos(i)};kE.default=function(t){var e=t.px,r=t.py,n=t.cx,a=t.cy,i=t.rx,o=t.ry,l=t.xAxisRotation,s=void 0===l?0:l,u=t.largeArcFlag,c=void 0===u?0:u,f=t.sweepFlag,h=void 0===f?0:f,d=[];if(0===i||0===o)return[];var p=Math.sin(s*CE/360),g=Math.cos(s*CE/360),v=g*(e-n)/2+p*(r-a)/2,m=-p*(e-n)/2+g*(r-a)/2;if(0===v&&0===m)return[];i=Math.abs(i),o=Math.abs(o);var y=Math.pow(v,2)/Math.pow(i,2)+Math.pow(m,2)/Math.pow(o,2);y>1&&(i*=Math.sqrt(y),o*=Math.sqrt(y));var x=function(t,e,r,n,a,i,o,l,s,u,c,f){var h=Math.pow(a,2),d=Math.pow(i,2),p=Math.pow(c,2),g=Math.pow(f,2),v=h*d-h*g-d*p;v<0&&(v=0),v/=h*g+d*p;var m=(v=Math.sqrt(v)*(o===l?-1:1))*a/i*f,y=v*-i/a*c,x=u*m-s*y+(t+r)/2,b=s*m+u*y+(e+n)/2,_=(c-m)/a,w=(f-y)/i,A=(-c-m)/a,M=(-f-y)/i,T=OE(1,0,_,w),k=OE(_,w,A,M);return 0===l&&k>0&&(k-=CE),1===l&&k<0&&(k+=CE),[x,b,T,k]}(e,r,n,a,i,o,c,h,p,g,v,m),b=EE(x,4),_=b[0],w=b[1],A=b[2],M=b[3],T=Math.max(Math.ceil(Math.abs(M)/(CE/4)),1);M/=T;for(var k=0;k<T;k++)d.push(LE(A,M)),A+=M;return d.map(function(t){var e=SE(t[0],i,o,g,p,_,w),r=e.x,n=e.y,a=SE(t[1],i,o,g,p,_,w),l=a.x,s=a.y,u=SE(t[2],i,o,g,p,_,w);return{x1:r,y1:n,x2:l,y2:s,x:u.x,y:u.y}})},kE=kE.default;var RE=function(t){for(var e,r=[],n=0,a=0,i=0,o=0,l=null,s=null,u=0,c=0,f=0,h=t.length;f<h;f++){var d=t[f],p=d[0];switch(p){case"M":i=d[1],o=d[2];break;case"A":var g=kE({px:u,py:c,cx:d[6],cy:d[7],rx:d[1],ry:d[2],xAxisRotation:d[3],largeArcFlag:d[4],sweepFlag:d[5]});if(!g.length)continue;for(var v,m=0;m<g.length;m++)v=g[m],d=["C",v.x1,v.y1,v.x2,v.y2,v.x,v.y],m<g.length-1&&r.push(d);break;case"S":var y=u,x=c;"C"!=e&&"S"!=e||(y+=y-n,x+=x-a),d=["C",y,x,d[1],d[2],d[3],d[4]];break;case"T":"Q"==e||"T"==e?(l=2*u-l,s=2*c-s):(l=u,s=c),d=IE(u,c,l,s,d[1],d[2]);break;case"Q":l=d[1],s=d[2],d=IE(u,c,d[1],d[2],d[3],d[4]);break;case"L":d=DE(u,c,d[1],d[2]);break;case"H":d=DE(u,c,d[1],c);break;case"V":d=DE(u,c,u,d[1]);break;case"Z":d=DE(u,c,i,o)}e=p,u=d[d.length-2],c=d[d.length-1],d.length>4?(n=d[d.length-4],a=d[d.length-3]):(n=u,a=c),r.push(d)}return r};function DE(t,e,r,n){return["C",t,e,r,n,r,n]}function IE(t,e,r,n,a,i){return["C",t/3+2/3*r,e/3+2/3*n,a/3+2/3*r,i/3+2/3*n,a,i]}var PE=function(t){Array.isArray(t)&&1===t.length&&"string"==typeof t[0]&&(t=t[0]);"string"==typeof t&&(TE(mE(t),"String is not an SVG path."),t=yE(t));if(TE(Array.isArray(t),"Argument should be a string or an array of path segments."),t=oE(t),!(t=RE(t)).length)return[0,0,0,0];for(var e=[1/0,1/0,-1/0,-1/0],r=0,n=t.length;r<n;r++)for(var a=t[r].slice(1),i=0;i<a.length;i+=2)a[i+0]<e[0]&&(e[0]=a[i+0]),a[i+1]<e[1]&&(e[1]=a[i+1]),a[i+0]>e[2]&&(e[2]=a[i+0]),a[i+1]>e[3]&&(e[3]=a[i+1]);return e};var FE={};(function(t){"use strict";var e=document.createElement("canvas"),r=e.getContext("2d");FE=function(n,a){if(!mE(n))throw Error("Argument should be valid svg path string");a||(a={});var i,o;a.shape?(i=a.shape[0],o=a.shape[1]):(i=e.width=a.w||a.width||200,o=e.height=a.h||a.height||200);var l=Math.min(i,o),s=a.stroke||0,u=a.viewbox||a.viewBox||PE(n),c=[i/(u[2]-u[0]),o/(u[3]-u[1])],f=Math.min(c[0]||0,c[1]||0)/2;r.fillStyle="black",r.fillRect(0,0,i,o),r.fillStyle="white",s&&("number"!=typeof s&&(s=1),r.strokeStyle=s>0?"white":"black",r.lineWidth=Math.abs(s));if(r.translate(.5*i,.5*o),r.scale(f,f),t.Path2D){var h=new Path2D(n);r.fill(h),s&&r.stroke(h)}else{var d=yE(n);vE(r,d),r.fill(),s&&r.stroke()}return r.setTransform(1,0,0,1,0,0),rE(r,{cutoff:null!=a.cutoff?a.cutoff:.5,radius:null!=a.radius?a.radius:.5*l})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var zE={solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]},NE=S.defaultLine,BE=iv(NE),jE=1;function UE(t,e){var r=t;return r[3]*=e,r}function VE(t){if(e(t))return BE;var r=iv(t);return r.length?r:BE}function HE(t){return e(t)?t:jE}var qE=function(t,e,r){var n,a,i,o,l,s=t.color,u=Array.isArray(s),c=Array.isArray(e),f=[];if(n=void 0!==t.colorscale?br.makeColorScaleFunc(br.extractScale(t.colorscale,t.cmin,t.cmax)):VE,a=u?function(t,e){return void 0===t[e]?BE:iv(n(t[e]))}:VE,i=c?function(t,e){return void 0===t[e]?jE:HE(t[e])}:HE,u||c)for(var h=0;h<r;h++)o=a(s,h),l=i(e,h),f[h]=UE(o,l);else f=UE(iv(s),e);return f},GE={},XE=m.extendFlat,WE=xe.overrideAll,YE=An.line,ZE=An.marker,JE=ZE.line,QE=GE=WE({x:An.x,x0:An.x0,dx:An.dx,y:An.y,y0:An.y0,dy:An.dy,text:XE({},An.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:YE.color,width:YE.width,dash:{valType:"enumerated",values:Object.keys(zE),dflt:"solid"}},marker:XE({},xn(),{symbol:ZE.symbol,size:ZE.size,sizeref:ZE.sizeref,sizemin:ZE.sizemin,sizemode:ZE.sizemode,opacity:ZE.opacity,showscale:ZE.showscale,colorbar:ZE.colorbar,line:XE({},xn(),{width:JE.width})}),connectgaps:An.connectgaps,fill:An.fill,fillcolor:An.fillcolor,hoveron:An.hoveron,selected:{marker:An.selected.marker},unselected:{marker:An.unselected.marker},opacity:C.opacity},"calc","nested");QE.x.editType=QE.y.editType=QE.x0.editType=QE.y0.editType="calc+clearAxisTypes";var $E=function(t,e,r,n){function a(r,n){return ae.coerce(t,e,GE,r,n)}var i=!!t.marker&&/-open/.test(t.marker.symbol),o=Zr.isBubble(t),l=rM(t,e,n,a);if(l){a("text"),a("mode",l<bn.PTS_LINESONLY?"lines+markers":"lines"),Zr.hasLines(e)&&(a("connectgaps"),KA(t,e,r,n,a));var s=[];Zr.hasMarkers(e)&&(eM(t,e,r,n,a),a("marker.line.width",i||o?1:0),s.push("points")),a("fill"),"none"!==e.fill&&QA(0,e,r,a),"tonext"!==e.fill&&"toself"!==e.fill||s.push("fills"),a("hoveron",s.join("+")||"points");var u=R.getComponentMethod("errorbars","supplyDefaults");u(t,e,r,{axis:"y"}),u(t,e,r,{axis:"x",inherit:"y"}),ae.coerceSelectionMarkerOpacity(e,a)}else e.visible=!1},KE={};(function(t){"use strict";var e=XA,n=WA,a=r.BADNUM,i=200,o=20,l=o/20,s={},u=Jr.symbolFuncs[0](.05*o),c=1e5,f=/-dot/,h=/-open/;function d(t,e,r,n){var a,i,o,l,s,u,f,d,p,v,m,y,x,b,_=t._fullLayout,w=n.length/2,A=r.marker;if(!0!==r.visible?(i=!1,o=!1,l=!1,s=!1,u=!1):(i=Zr.hasLines(r)&&n.length>1,o=r.error_x&&!0===r.error_x.visible,l=r.error_y&&!0===r.error_y.visible,s=Zr.hasMarkers(r),u=!!r.fill&&"none"!==r.fill),o||l){var M=R.getComponentMethod("errorbars","calcFromTrace")(r,_);o&&(v=S("x",r.error_x,M)),l&&(m=S("y",r.error_y,M))}if(i){(f={}).thickness=r.line.width,f.color=r.line.color,f.opacity=r.opacity,f.overlay=!0;var T=(zE[r.line.dash]||[1]).slice();for(a=0;a<T.length;++a)T[a]*=f.thickness;if(f.dashes=T,"hv"===r.line.shape){for(b=[],a=0;a<Math.floor(n.length/2)-1;a++)isNaN(n[2*a])||isNaN(n[2*a+1])?(b.push(NaN),b.push(NaN),b.push(NaN),b.push(NaN)):(b.push(n[2*a]),b.push(n[2*a+1]),b.push(n[2*a+2]),b.push(n[2*a+1]));b.push(n[n.length-2]),b.push(n[n.length-1])}else if("vh"===r.line.shape){for(b=[],a=0;a<Math.floor(n.length/2)-1;a++)isNaN(n[2*a])||isNaN(n[2*a+1])?(b.push(NaN),b.push(NaN),b.push(NaN),b.push(NaN)):(b.push(n[2*a]),b.push(n[2*a+1]),b.push(n[2*a]),b.push(n[2*a+3]));b.push(n[n.length-2]),b.push(n[n.length-1])}else b=n;var k=!1;for(a=0;a<b.length;a++)if(isNaN(b[a])){k=!0;break}if(f.join=k||b.length>c?"rect":s?"rect":"round",k&&r.connectgaps){var E=b[0],C=b[1];for(a=0;a<b.length;a+=2)isNaN(b[a])||isNaN(b[a+1])?(b[a]=E,b[a+1]=C):(E=b[a],C=b[a+1])}f.positions=b}function S(e,a,i){var o={};o.positions=n;for(var l=Le.getFromId(t,r[e+"axis"]),s=o.errors=new Float64Array(4*w),u={x:0,y:1}[e],c={x:[0,1,2,3],y:[2,3,0,1]}[e],f=0,h=0;f<w;f++,h+=4)s[h+c[0]]=n[2*f+u]-l.d2l(i[f][e+"s"])||0,s[h+c[1]]=l.d2l(i[f][e+"h"])-n[2*f+u]||0,s[h+c[2]]=0,s[h+c[3]]=0;return a.copy_ystyle&&(a=r.error_y),o.capSize=2*a.width,o.lineWidth=a.thickness,o.color=a.color,o}function L(t,e){var r={};return t?(t.marker&&t.marker.symbol?r=O(ae.extendFlat({},e,t.marker)):(r={},t.marker.size&&(r.sizes=t.marker.size),t.marker.color&&(r.colors=t.marker.color),void 0!==t.marker.opacity&&(r.opacity=t.marker.opacity)),r):r}function O(t){var e,n,a={},i=Array.isArray(t.symbol),o=ae.isArrayOrTypedArray(t.color),l=ae.isArrayOrTypedArray(t.line.color),s=ae.isArrayOrTypedArray(t.opacity),u=ae.isArrayOrTypedArray(t.size),c=ae.isArrayOrTypedArray(t.line.width);if(i||(n=h.test(t.symbol)),i||o||l||s){a.colors=new Array(w),a.borderColors=new Array(w);var f=qE(t,t.opacity,w),d=qE(t.line,t.opacity,w);if(!Array.isArray(d[0])){var p=d;for(d=Array(w),e=0;e<w;e++)d[e]=p}if(!Array.isArray(f[0])){var v=f;for(f=Array(w),e=0;e<w;e++)f[e]=v}for(a.colors=f,a.borderColors=d,e=0;e<w;e++){if(i){var m=t.symbol[e];n=h.test(m)}n&&(d[e]=f[e].slice(),f[e]=f[e].slice(),f[e][3]=0)}a.opacity=r.opacity}else n?(a.color=iv(t.color,"uint8"),a.color[3]=0,a.borderColor=iv(t.color,"uint8")):(a.color=iv(t.color,"uint8"),a.borderColor=iv(t.line.color,"uint8")),a.opacity=r.opacity*t.opacity;if(i)for(a.markers=new Array(w),e=0;e<w;e++)a.markers[e]=g(t.symbol[e]);else a.marker=g(t.symbol);var y,x=Yr(r);if(u||c){var b,_=a.sizes=new Array(w),A=a.borderSizes=new Array(w),M=0;if(u){for(e=0;e<w;e++)_[e]=x(t.size[e]),M+=_[e];b=M/w}else for(y=x(t.size),e=0;e<w;e++)_[e]=y;if(c)for(e=0;e<w;e++)A[e]=x(t.line.width[e]);else for(y=x(t.line.width),e=0;e<w;e++)A[e]=y;a.sizeAvg=b}else a.size=x(t&&t.size||10),a.borderSizes=x(t.line.width);return a}return u&&((p={}).fill=r.fillcolor,p.thickness=0,p.closed=!0),s&&(d=O(A),y=L(r.selected,A),x=L(r.unselected,A),d.positions=n),{line:f,marker:d,errorX:v,errorY:m,fill:p,selected:y,unselected:x}}function p(t,e){var r=e._scene,n=t._fullLayout,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],selectedOptions:[],unselectedOptions:[],errorXOptions:[],errorYOptions:[]};return e._scene||((r=e._scene=ae.extendFlat({},a,{selectBatch:null,unselectBatch:null,fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,select2d:null})).update=function(t){for(var e=new Array(r.count),n=0;n<r.count;n++)e[n]=t;r.fill2d&&r.fill2d.update(e),r.scatter2d&&r.scatter2d.update(e),r.line2d&&r.line2d.update(e),r.error2d&&r.error2d.update(e.concat(e)),r.select2d&&r.select2d.update(e),r.draw()},r.draw=function(){var t;for(t=0;t<r.count;t++)r.fill2d&&r.fillOptions[t]&&r.fill2d.draw(t);for(t=0;t<r.count;t++)r.line2d&&r.lineOptions[t]&&r.line2d.draw(t),r.error2d&&r.errorXOptions[t]&&r.error2d.draw(t),r.error2d&&r.errorYOptions[t]&&r.error2d.draw(t+r.count),!r.scatter2d||!r.markerOptions[t]||r.selectBatch&&r.selectBatch[t]||r.scatter2d.draw(t);r.scatter2d&&r.select2d&&r.selectBatch&&(r.select2d.draw(r.selectBatch),r.scatter2d.draw(r.unselectBatch)),r.dirty=!1},r.clear=function(){var t,a,i=n._size,o=n.width,l=n.height,s=e.xaxis,u=e.yaxis;t=s&&s.domain&&u&&u.domain?[i.l+s.domain[0]*i.w,i.b+u.domain[0]*i.h,o-i.r-(1-s.domain[1])*i.w,l-i.t-(1-u.domain[1])*i.h]:[i.l,i.b,o-i.r,l-i.t],r.select2d&&((a=r.select2d.regl._gl).enable(a.SCISSOR_TEST),a.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)),r.scatter2d&&((a=r.scatter2d.regl._gl).enable(a.SCISSOR_TEST),a.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT))},r.clearSelect=function(){r.selectBatch&&(r.selectBatch=null,r.unselectBatch=null,r.scatter2d.update(r.markerOptions),r.clear(),r.draw())},r.destroy=function(){r.fill2d&&r.fill2d.destroy(),r.scatter2d&&r.scatter2d.destroy(),r.error2d&&r.error2d.destroy(),r.line2d&&r.line2d.destroy(),r.select2d&&r.select2d.destroy(),r.lineOptions=null,r.fillOptions=null,r.markerOptions=null,r.selectedOptions=null,r.unselectedOptions=null,r.errorXOptions=null,r.errorYOptions=null,r.selectBatch=null,r.unselectBatch=null,e._scene=null}),r.dirty||ae.extendFlat(r,a),r}function g(t){if("circle"===t)return null;var e,r,n=Jr.symbolNumber(t),a=Jr.symbolFuncs[n%100],c=!!Jr.symbolNoDot[n%100],h=!!Jr.symbolNoFill[n%100],d=f.test(t);return s[t]?s[t]:(e=d&&!c?a(1.1*o)+u:a(o),r=FE(e,{w:i,h:i,viewBox:[-o,-o,o,o],stroke:h?l:-l}),s[t]=r,r||null)}KE={moduleType:"trace",name:"scattergl",basePlotModule:Ka,categories:["gl","regl","cartesian","symbols","errorBarsOK","markerColorscale","showLegend","scatter-like"],attributes:GE,supplyDefaults:$E,cleanData:YA,colorbar:ZA,calc:function(t,r){var i,o,l,s=t._fullLayout,u=Le.getFromId(t,r.xaxis),f=Le.getFromId(t,r.yaxis),h=s._plots[r.xaxis+r.yaxis],g=r._length,v=2*g,m={},y=u.makeCalcdata(r,"x"),x=f.makeCalcdata(r,"y"),b=new Array(v);for(i=0;i<g;i++)o=y[i],l=x[i],b[2*i]=o===a?NaN:o,b[2*i+1]=l===a?NaN:l;if("log"===u.type)for(i=0;i<v;i+=2)b[i]=u.c2l(b[i]);if("log"===f.type)for(i=1;i<v;i+=2)b[i]=f.c2l(b[i]);if("log"!==u.type&&"log"!==f.type)m.tree=jT(b,512);else{var _=m.ids=new Array(g);for(i=0;i<g;i++)_[i]=i}jA(r);var w,A=d(t,0,r,b),M=A.marker,T=p(t,h);return g<c?w=e(r,g):M&&(w=2*(M.sizeAvg||Math.max(M.size,3))),n(t,r,u,f,y,x,w),A.fill&&!T.fill2d&&(T.fill2d=!0),A.marker&&!T.scatter2d&&(T.scatter2d=!0),A.line&&!T.line2d&&(T.line2d=!0),!A.errorX&&!A.errorY||T.error2d||(T.error2d=!0),T.lineOptions.push(A.line),T.errorXOptions.push(A.errorX),T.errorYOptions.push(A.errorY),T.fillOptions.push(A.fill),T.markerOptions.push(A.marker),T.selectedOptions.push(A.selected),T.unselectedOptions.push(A.unselected),T.count++,m.scene=T,m.index=T.count-1,m.x=y,m.y=x,m.positions=b,m.count=g,t.firstscatter=!1,[{x:!1,y:!1,t:m,trace:r}]},plot:function(e,r,n){if(n.length){var a=e._fullLayout,i=n[0][0].t.scene,o=a.dragmode;if(i){var l=a._size,s=a.width,u=a.height;a._glcanvas.each(function(r){r.regl||r.pick||(r.regl=UM({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},extensions:["ANGLE_instanced_arrays","OES_element_index_uint"],pixelRatio:e._context.plotGlPixelRatio||t.devicePixelRatio}))});var c=a._glcanvas.data()[0].regl;if(cM(e,r,n),i.dirty){if(!0===i.error2d&&(i.error2d=ik(c)),!0===i.line2d&&(i.line2d=Rk(c)),!0===i.scatter2d&&(i.scatter2d=eE(c)),!0===i.fill2d&&(i.fill2d=Rk(c)),i.line2d&&i.line2d.update(i.lineOptions),i.error2d){var f=(i.errorXOptions||[]).concat(i.errorYOptions||[]);i.error2d.update(f)}i.scatter2d&&i.scatter2d.update(i.markerOptions),i.fill2d&&(i.fillOptions=i.fillOptions.map(function(t,e){var r=n[e];if(!(t&&r&&r[0]&&r[0].trace))return null;var a,o,l=r[0],s=l.trace,u=l.t,c=i.lineOptions[e],f=[],h=c&&c.positions||u.positions;if("tozeroy"===s.fill)(f=(f=[h[0],0]).concat(h)).push(h[h.length-2]),f.push(0);else if("tozerox"===s.fill)(f=(f=[0,h[1]]).concat(h)).push(0),f.push(h[h.length-1]);else if("toself"===s.fill||"tonext"===s.fill){for(f=[],a=0,o=0;o<h.length;o+=2)(isNaN(h[o])||isNaN(h[o+1]))&&((f=f.concat(h.slice(a,o))).push(h[a],h[a+1]),a=o+2);f=f.concat(h.slice(a)),a&&f.push(h[a],h[a+1])}else{var d=s._nexttrace;if(d){var p=i.lineOptions[e+1];if(p){var g=p.positions;if("tonexty"===s.fill){for(f=h.slice(),e=Math.floor(g.length/2);e--;){var v=g[2*e],m=g[2*e+1];isNaN(v)||isNaN(m)||(f.push(v),f.push(m))}t.fill=d.fillcolor}}}}if(s._prevtrace&&"tonext"===s._prevtrace.fill){var y=i.lineOptions[e-1].positions,x=f.length/2,b=[a=x];for(o=0;o<y.length;o+=2)(isNaN(y[o])||isNaN(y[o+1]))&&(b.push(o/2+x+1),a=o+2);f=f.concat(y),t.hole=b}return t.opacity=s.opacity,t.positions=f,t}),i.fill2d.update(i.fillOptions))}var h="lasso"===o||"select"===o,d=n.map(function(t){if(t&&t[0]&&t[0].trace){var n,a=t[0],o=a.trace,c=a.t,f=c.index,d=c.x,p=c.y,g=r.xaxis||Le.getFromId(e,o.xaxis||"x"),v=r.yaxis||Le.getFromId(e,o.yaxis||"y"),m=[(g._rl||g.range)[0],(v._rl||v.range)[0],(g._rl||g.range)[1],(v._rl||v.range)[1]],y=[l.l+g.domain[0]*l.w,l.b+v.domain[0]*l.h,s-l.r-(1-g.domain[1])*l.w,u-l.t-(1-v.domain[1])*l.h];if(o.selectedpoints||h){if(h||(h=!0),i.selectBatch||(i.selectBatch=[]),i.unselectBatch||(i.unselectBatch=[]),o.selectedpoints){i.selectBatch[f]=o.selectedpoints;var x=o.selectedpoints,b={};for(n=0;n<x.length;n++)b[x[n]]=!0;var _=[];for(n=0;n<c.count;n++)b[n]||_.push(n);i.unselectBatch[f]=_}var w=new Array(c.count),A=new Array(c.count);for(n=0;n<c.count;n++)w[n]=g.c2p(d[n]),A[n]=v.c2p(p[n]);c.xpx=w,c.ypx=A}else c.xpx=c.ypx=null;return o.visible?{viewport:y,range:m}:null}});h&&(i.select2d||(i.select2d=eE(a._glcanvas.data()[1].regl,{clone:i.scatter2d})),i.scatter2d&&i.selectBatch&&i.selectBatch.length&&i.scatter2d.update(i.unselectedOptions.map(function(t,e){return i.selectBatch[e]?t:null})),i.select2d&&(i.select2d.update(i.markerOptions),i.select2d.update(i.selectedOptions))),i.fill2d&&i.fill2d.update(d),i.line2d&&i.line2d.update(d),i.error2d&&i.error2d.update(d.concat(d)),i.scatter2d&&i.scatter2d.update(d),i.select2d&&i.select2d.update(d),i.draw()}}},hoverPoints:function(t,e,r,n){var a,i=t.cd,o=i[0].t,l=i[0].trace,s=t.xa,u=t.ya,c=o.x,f=o.y,h=s.c2p(e),d=u.c2p(r),p=t.distance;if(o.tree){var g=s.p2c(h-p),v=s.p2c(h+p),m=u.p2c(d-p),y=u.p2c(d+p);a="x"===n?o.tree.range(Math.min(g,v),Math.min(u._rl[0],u._rl[1]),Math.max(g,v),Math.max(u._rl[0],u._rl[1])):o.tree.range(Math.min(g,v),Math.min(m,y),Math.max(g,v),Math.max(m,y))}else{if(!o.ids)return[t];a=o.ids}var x,b,_,w,A,M,T,k,E=p;if("x"===n)for(w=0;w<a.length;w++)b=c[a[w]],(A=Math.abs(s.c2p(b)-h))<E&&(E=A,M=u.c2p(f[a[w]])-d,k=Math.sqrt(A*A+M*M),x=a[w]);else for(w=0;w<a.length;w++)b=c[a[w]],_=f[a[w]],A=s.c2p(b)-h,M=u.c2p(_)-d,(T=Math.sqrt(A*A+M*M))<E&&(E=k=T,x=a[w]);if(t.index=x,void 0===x)return[t];var C={pointNumber:x,x:c[x],y:f[x]};C.tx=Array.isArray(l.text)?l.text[x]:l.text,C.htx=Array.isArray(l.hovertext)?l.hovertext[x]:l.hovertext,C.data=Array.isArray(l.customdata)?l.customdata[x]:l.customdata,C.tp=Array.isArray(l.textposition)?l.textposition[x]:l.textposition;var S=l.textfont;S&&(C.ts=Array.isArray(S.size)?S.size[x]:S.size,C.tc=Array.isArray(S.color)?S.color[x]:S.color,C.tf=Array.isArray(S.family)?S.family[x]:S.family);var L=l.marker;L&&(C.ms=ae.isArrayOrTypedArray(L.size)?L.size[x]:L.size,C.mo=ae.isArrayOrTypedArray(L.opacity)?L.opacity[x]:L.opacity,C.mx=Array.isArray(L.symbol)?L.symbol[x]:L.symbol,C.mc=ae.isArrayOrTypedArray(L.color)?L.color[x]:L.color);var O=L&&L.line;O&&(C.mlc=Array.isArray(O.color)?O.color[x]:O.color,C.mlw=ae.isArrayOrTypedArray(O.width)?O.width[x]:O.width);var D=L&&L.gradient;D&&"none"!==D.type&&(C.mgt=Array.isArray(D.type)?D.type[x]:D.type,C.mgc=Array.isArray(D.color)?D.color[x]:D.color);var I=s.c2p(C.x,!0),P=u.c2p(C.y,!0),F=C.mrc||1,z=l.hoverlabel;z&&(C.hbg=Array.isArray(z.bgcolor)?z.bgcolor[x]:z.bgcolor,C.hbc=Array.isArray(z.bordercolor)?z.bordercolor[x]:z.bordercolor,C.hts=Array.isArray(z.font.size)?z.font.size[x]:z.font.size,C.htc=Array.isArray(z.font.color)?z.font.color[x]:z.font.color,C.htf=Array.isArray(z.font.family)?z.font.family[x]:z.font.family,C.hnl=Array.isArray(z.namelength)?z.namelength[x]:z.namelength);var N=l.hoverinfo;N&&(C.hi=Array.isArray(N)?N[x]:N);var B={};return B[t.index]=C,ae.extendFlat(t,{color:iM(l,C),x0:I-F,x1:I+F,xLabelVal:C.x,y0:P-F,y1:P+F,yLabelVal:C.y,cd:B,distance:E,spikeDistance:k}),C.htx?t.text=C.htx:C.tx?t.text=C.tx:l.text&&(t.text=l.text),nM(C,l,t),R.getComponentMethod("errorbars","hoverInfo")(C,l,t),[t]},style:function(t,e){if(e){var r=e[0].t.scene;r.clear(),r.draw()}},selectPoints:function(t,e){var r=t.cd,n=[],a=r[0].trace,i=r[0].t,o=i.x,l=i.y,s=i.scene;if(!s)return n;var u=!Zr.hasMarkers(a)&&!Zr.hasText(a);if(!0!==a.visible||u)return n;var c,f=null,h=null;if(!1===e||e.degenerate)h=BT(i.count);else for(f=[],h=[],c=0;c<i.count;c++)e.contains([i.xpx[c],i.ypx[c]])?(f.push(c),n.push({pointNumber:c,x:o[c],y:l[c]})):h.push(c);if(s.selectBatch||(s.selectBatch=[],s.unselectBatch=[]),!s.selectBatch[i.index]){for(c=0;c<s.count;c++)s.selectBatch[c]=[],s.unselectBatch[c]=[];s.scatter2d.update(s.unselectedOptions)}return s.selectBatch[i.index]=f,s.unselectBatch[i.index]=h,n},sceneOptions:d,sceneUpdate:p,meta:{}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var tC=KE;return wM.register([tC,NT,FM,ry,ET]),wM});